{"config":{"lang":["es"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Bases de Dades","text":""},{"location":"BD-T01_Introduccio/1_fitxers_tradicionals/","title":"1.Fitxers tradicionals","text":"<p>Els fitxers tradicionals, que s\u00f3n molt \u00fatils per a aplicacions menudes i concretes, comencen a donar problemes quan el sistema d'informaci\u00f3 va creixent. Anem a veure un exemple que il\u00b7lustre l'explicaci\u00f3.</p> <p>Suposem una empresa menuda que ha informatitzat la informaci\u00f3 dels seus empleats. En un principi nom\u00e9s volia una informaci\u00f3 general d'ells, per a poder tenir uns llistats, enviar cartes a tots, etc. Aix\u00ed es podria plantejar un fitxer on guardar la informaci\u00f3 dels empleats: nom, cognoms, DNI, adre\u00e7a, tel\u00e8fon i data de naixement. Tots els programes que utilitzen el fitxer (en un principi molt pocs) han de tenir la declaraci\u00f3 dels camps del fitxer.</p> <p>Nota</p> <p>En els exemples que van a continuaci\u00f3 s'ha utilitzat el llenguatge de programaci\u00f3 C++, a pesar que vosaltres utilitzareu Java en el m\u00f2dul de programaci\u00f3. S'ha triat C++ per la senzillesa de l'explicaci\u00f3. En Java utilitzar\u00edem objectes, i resultaria m\u00e9s llarga d'explicar. I a m\u00e9s s\u00f3n exemples merament il\u00b7lustratius, que no heu d'implementar</p> <p>Per exemple, si s\u00f3n en llenguatge C++, la definici\u00f3 haur\u00e0 de ser com la seg\u00fcent:</p> <pre><code>---\nstruct TEmpleat \n{ char dni[10]; \n\nchar nom[30]; \nchar adreca[30]; \nchar telefon[10]; \nchar data\\_n[10]\n\n} v\\_empleat; \n\nFILE \\*pFEmpleats; \n---\n</code></pre> <p>I un exemple del contingut d'aquest fitxer podria ser</p> <p></p> <p>Suposem ara que l'empresa es planteja ampliar el seu sistema inform\u00e0tic, i incloure el sou de cada empleat per a poder enviar tamb\u00e9 les n\u00f2mines. Aleshores decideix ampliar el fitxer, incloent el nou camp (sou). El primer que s'hauria de fer \u00e9s canviar el fitxer, ja que l'estructura no \u00e9s la mateixa. Aquest proc\u00e9s de substituci\u00f3 seria:</p> <ul> <li>Creaci\u00f3 d'un fitxer nou amb la nova estructura</li> <li>Fer un programeta per a passar les dades del fitxer vell al fitxer nou</li> <li>Esborrar el vell i en tot cas canviar el nom del nou.</li> <li>Despr\u00e9s s'hauran de modificar tots els programes que utilitzaven el fitxer per a que l'estructura del fitxer siga la correcta, tornar a compilar-los, ...</li> </ul> <pre><code>... \nstruct TEmpleat \n{ char dni[10]; \n\nchar nom[30]; \nchar adreca[30]; \nchar telefon[10]; \nchar data\\_n[10];\n\nint sou;\n\n} v\\_empleat; \n\nFILE \\*pFEmpleats; \n...\n</code></pre> <p>I un exemple del contingut d'aquest fitxer podria ser</p> <p></p> <p>Suposem que l'empresa decideix continuar ampliant la informaci\u00f3, i ara vol mantenir informaci\u00f3 dels distints departaments, i els empleats que pertanyen. Potser per a no haver de repetir el proc\u00e9s d'adequaci\u00f3, es construeix un fitxer nou d'empleats on est\u00e0 el DNI de l'empleat, el nom, el tel\u00e8fon i el departament al qual pertany, ja que aquesta \u00e9s la informaci\u00f3 que li interessa.</p> <pre><code>... \nstruct TEmpleat2 \n{ char dni[10]; \n\nchar nom[30]; \nchar telefon[10]; \nchar departament[20]\n\n} v\\_empleat2; \n\nFILE \\*pFEmpleats2; \n...\n</code></pre> <p>I un exemple del contingut d'aquest fitxer podria ser ara:</p> <p></p> <p>En definitiva, com el sistema est\u00e0 orientat als processos, es tendeix, a mida que creix el sistema, a tenir molts fitxers, a m\u00e9s amb molta redund\u00e0ncia. El problema de la redund\u00e0ncia \u00e9s, a m\u00e9s de desaprofitar espai, la possible inconsist\u00e8ncia de les dades. Per exemple, suposem que ara un determinat empleat canvia de tel\u00e8fon. No s'haur\u00e0 de canviar aquest en un fitxer, sin\u00f3 en dos. Si nom\u00e9s es canviara en un d'ells hi hauria inconsist\u00e8ncia.</p> <p>Aquest seria l'esquema d'un sistema basat en fitxers tradicionals.</p> <p></p> <p>on recordeu que en cada programa ha d'estar definida l'estructura dels fitxers que utilitza.</p> <p>Els problemes m\u00e9s importants que porta aquest sistema que ha anat creixent serien:</p> <p>- Redund\u00e0ncia de les dades. Les mateixes dades estan en m\u00faltiples fitxers, la qual cosa comporta ocupar m\u00e9s lloc del necessari, i a m\u00e9s una dificultat de manteniment per a que les dades siguen consistents.</p> <p>- Dificultat per a modificar l'estructura dels fitxers. Ja s'ha comentat abans que s'haurien de modificar tant el fitxer (amb l'actualitzaci\u00f3 del fitxer antic al nou) com els programes que l'utilitzen.</p> <p>- Problemes de seguretat. Quan hi ha molts usuaris que accedeixen als fitxers s'ha de vigilar molt que no es puguen fer actualitzacions no autoritzades</p> <p>Tornarem a comentar els problemes quan vegem la comparaci\u00f3 entre fitxers tradicionals i Bases de Dades.</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0</p>"},{"location":"BD-T01_Introduccio/2_concepte_de_base_de_dades/","title":"2.Concepte de Base de Dades","text":"<p>Per a millorar els problemes que se'ns presentaven amb els fitxers tradicionals introduirem el concepte de Base de Dades.</p> <p>2.1 Definici\u00f3</p> <p>Hi ha moltes definicions de Bases de Dades. Intentarem donar una que no sigue massa pesada.</p> <p>Una Base de Dades \u00e9s un conjunt de dades relacionades entre elles, integrat en una \u00fanica estructura global que \u00e9s independent dels programes que la utilitzen i sense redund\u00e0ncies innecess\u00e0ries.</p> <p>Comentem un poc aquesta definici\u00f3. El primer comentari \u00e9s sobre les dades. No intentarem agafar totes les dades del m\u00f3n, sin\u00f3 \u00fanicament sobre les coses que volem estudiar, i d'elles \u00fanicament les dades interessants, per aconseguir el prop\u00f2sit perseguit. Per tant, una Base de Dades t\u00e9 una font de la qual es deriven les dades i uns usuaris als quals interessen les dades.</p> <p>Per la pr\u00f2pia definici\u00f3, la Base de Dades es podria crear i mantenir manualment (pensem en les fitxes tradicionals d'una biblioteca). Es podria crear i mantenir tamb\u00e9 per mig d'un grup de programes d'aplicaci\u00f3 realitzats espec\u00edficament per aquesta feina, per\u00f2 el m\u00e9s normal, i el que ens interessa a nosaltres \u00e9s que a\u00e7\u00f2 es fa\u00e7a per mig d'un Sistema Gestor de Bases de Dades.</p> <p>Un Sistema Gestor de Bases de Dades (SGBD; en angl\u00e8s DataBase Management System: DBMS) \u00e9s un conjunt de programes que permet als usuaris crear i mantenir Bases de Dades. Aix\u00ed la Base de Dades s\u00f3n les nostres dades (organitzades) i el SGBD serien productes com ACCESS, POSTGRESQL o ORACLE que ens permeten crear i mantenir aquesta Base de Dades.</p> <p></p> <p>Per la figura ja veiem que la Base de Dades s'organitza en dos grans blocs, un \u00e9s el cat\u00e0leg o diccionari de dades, on est\u00e0 l'estructura i tipus de les dades. En l'altre estan les pr\u00f2pies dades. Per tant veiem que l'estructura de les dades va amb la pr\u00f2pia Base de Dades.</p> <p>Totes les peticions d'acc\u00e9s a les dades no es fan directament, sin\u00f3 que es demanen al SGBD, que \u00e9s qui s'encarrega d'accedir a elles. L'acc\u00e9s es pot fer per mig de processos (programes, formularis, ...) o b\u00e9 de forma interactiva (per exemple amb consultes SQL). Alguns autors anomenen al conjunt de la Base de Dades i el SGBD com Sistema de Base de Dades.</p> <p>2.2 Comparaci\u00f3 amb fitxers tradicionals</p> <p>Una vegada hem vist la definici\u00f3 de Base de Dades i alguna de les seues caracter\u00edstiques anem a comparar amb els fitxers tradicionals per veure els avantatges.</p> <ul> <li>Una Base de Dades \u00e9s autodescriptiva, \u00e9s a dir la definici\u00f3 de l'estructura, tipus de dades, etc. forma part de la pr\u00f2pia B.D. (el diccionari de dades). En els fitxers tradicionals l'estructura d'aquestos havia d'anar en cada programa.</li> <li>Independ\u00e8ncia de les dades dels programes. \u00c9s conseq\u00fc\u00e8ncia de l'anterior. Aix\u00ed, en una B.D., la modificaci\u00f3 de l'estructura (afegint algun camp o modificant-ne algun) no afecta als programes que puguen accedir a ella. Ja hav\u00edem vist que no era aix\u00ed en els fitxers tradicionals.</li> <li>No hi ha redund\u00e0ncia, o molt poca. Potser convenient un poc de redund\u00e0ncia per un millor rendiment, per\u00f2 aquesta pot ser controlada (per a evitar inconsist\u00e8ncies, ...)</li> <li>M\u00faltiples vistes d'usuari. Podr\u00edem pensar que al concentrar en una \u00fanica B.D. totes les dades es perd la visi\u00f3 particular d'un usuari (que en fitxers tradicionals s\u00f3n el fitxers individuals de cadascun d'ells). Per\u00f2 no \u00e9s aix\u00ed, ja que en les B.D. es poden definir vistes, que s\u00f3n la part de les dades que li interessen a un usuari determinat.</li> <li>Compartiment de les dades per part de molts usuaris, amb acc\u00e9s simultani sobre elles. Haur\u00e0 d'haver en el software un control de concurr\u00e8ncia, per assegurar que l'actualitzaci\u00f3 simult\u00e0nia d'uns quants usuaris siga correcta.</li> </ul> <p>Els inconvenients que suposa la utilitzaci\u00f3 de B.D. s\u00f3n els seg\u00fcents:</p> <ul> <li>El Hardware i el software s\u00f3n m\u00e9s costosos.</li> <li>Necessitat de personal especialitzat.</li> <li>La implantaci\u00f3 \u00e9s m\u00e9s llarga i dif\u00edcil, i per tant \u00e9s una soluci\u00f3 bona a mig i llarg termini.</li> </ul> <p>\u00c9s a dir, que si \u00e9s una aplicaci\u00f3 senzilla, potser siga convenient utilitzar fitxers tradicionals, per\u00f2 si \u00e9s d'una certa envergadura o s'ha d'anar ampliant al llarg del temps, conv\u00e9 una B.D.</p> <p>2.3 Usuaris de la BD</p> <p>Els m\u00faltiples usuaris que poden utilitzar la B.D. s\u00f3n de distints tipus. Anem a fer una classificaci\u00f3 d'aquestos. Aquesta classificaci\u00f3 agrupa dos grans blocs: els usuaris amb coneixements inform\u00e0tics i els usuaris que no en tenen (o no tenen per qu\u00e8 tenir-ne).</p> <p>A. Usuaris inform\u00e0tics.</p> <p>A.1 Dissenyadors.</p> <p>Encarregats de dissenyar la B.D.: triar el tipus d'informaci\u00f3 necess\u00e0ria, organitzar-la en estructures adequades.</p> <p>A.2 Administradors.</p> <p>\u00c9s l'encarregat de vetllar pel bon funcionament del sistema: administrar els usuaris i permisos, protegir la B.D. d'errades (fent c\u00f2pies de seguretat, ..), optimitzar el sistema, etc. \u00c9s a dir molta feina.</p> <p>A.3 Analistes i programadors.</p> <p>Estudien els requeriments dels usuaris finals per a fer programes, formularis, ... que possibiliten la feina d'aquestos.</p> <p>B. Usuaris finals.</p> <p>S\u00f3n les persones que necessiten l'acc\u00e9s a la B.D. per a introduir dades, actualitzar-les, consultar-les, generar informes, ... Entre ells distingim:</p> <p>B.1 Habituals.</p> <p>Tamb\u00e9 anomenats param\u00e8trics, solen fer consultes i actualitzacions constants (sempre les mateixes). Normalment els analistes i programadors els faran els programes o formularis per a fer la seua feina.</p> <p>B.2 Espor\u00e0dics.</p> <p>Utilitzen la B.D. de tant en tant, i cada vegada per a obtenir una informaci\u00f3 diferent. El m\u00e9s normal \u00e9s que utilitzen un llenguatge de consulta de la B.D. avan\u00e7at per\u00f2 senzill d'utilitzar.</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0</p>"},{"location":"BD-T01_Introduccio/3_caracterstiques_desitjables_dun_sgbd/","title":"3.Caracter\u00edstiques desitjables d'un SGBD","text":"<p>Ja hem vist algunes caracter\u00edstiques que han de tenir els SGBD. Anem a completar aquest llista.</p> <ul> <li>Control de redund\u00e0ncia. Ja hem comentat que potser siga convenient en algunes ocasions un poc de redund\u00e0ncia. Per\u00f2 en cas que hi haja, aquesta ha d'estar controlada. \u00c9s a dir, el SGBD hauria de proporcionar mecanismes per a controlar les dades que estan duplicades, i que quan una informaci\u00f3 s'actualitze en un lloc, autom\u00e0ticament s'actualitze en els altres.</li> <li>Restricci\u00f3 d'accessos no autoritzats. Quan molts usuaris utilitzen la B.D., \u00e9s normal que no tots tinguen autoritzaci\u00f3 per a accedir a tota la informaci\u00f3. Pot haver informaci\u00f3 confidencial a la qual pocs usuaris tenen acc\u00e9s, i pot haver informaci\u00f3 a la qual un usuari pot tenir acc\u00e9s per\u00f2 que no pot modificar. El SGBD ha de tenir, per tant, un subsistema de seguretat i autoritzaci\u00f3 per a crear usuaris (que s'identifiquen amb una contrasenya) i donar distints permisos d'acc\u00e9s a cadascun.</li> <li>Subministrament de m\u00faltiples interf\u00edcies per als usuaris. Com que hi ha molts tipus d'usuaris, amb nivells de coneixements t\u00e8cnics distints, el SGBD ha d'oferir diferents interf\u00edcies: llenguatges de consulta per a usuaris espor\u00e0dics, llenguatges de definici\u00f3 i control per a administradors, formularis per a usuaris habituals, ...</li> <li>Compliment de restriccions. Hi haur\u00e0 restriccions que han de complir les dades. Per exemple la nota d'un alumne ha d'estar entre 0 i 10; la data de naixement no pot ser posterior a l'actual; el curs on est\u00e0 matriculat un alumne ha de ser un curs existent; un alumne que estiga de baixa ha de tenir contingut en la data de baixa, o no se li poden posar notes; ... Algunes d'aquestes restriccions les suportar\u00e0 directament el SGBD. Altres requeriran verificaci\u00f3 per mig de programa quan s'introduesca o es modifique la dada.</li> <li>Recolzament i recuperaci\u00f3. Tot SGBD ha de comptar amb recursos per a recuperar-se d'errades del hardware o del software i deixar les dades com estaven abans de la fallida.</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0</p>"},{"location":"BD-T01_Introduccio/4_models_de_dades/","title":"4.Models de dades","text":"<p>Per a poder definir l'estructura de la B.D. ens far\u00e0 falta alguna ferramenta, alguna manera d'expressar el que veiem en el m\u00f3n real.</p> <p>Un Model de Dades ser\u00e0 un conjunt de conceptes que poden servir per a descriure, a distints nivells d'abstracci\u00f3, l'estructura d'una B.D. A aquesta estructura expressada per mig del model de dades l'anomenarem esquema. Caldr\u00e0 diferenciar entre esquema i les dades concretes que pot tenir la B.D. en un moment determinat (a la qual cosa alguns autors anomenen estat de la B.D. o conjunt d'ocurr\u00e8ncies o exemplars).</p> <p>Al llarg de la hist\u00f2ria s'han proposat molts models de dades, tants que s'hauran de classificar un poc.</p> <ul> <li>Models d'alt nivell o conceptuals: disposen de conceptes molt propers a la manera de percebre les dades les persones. El m\u00e9s conegut \u00e9s el Model Entitat-Relaci\u00f3. Uns altres serien els orientats a objectes. Serviran per a poder dissenyar la B.D. a partir de les percepcions del m\u00f3n real. Nosaltres veurem el Model Entitat-Relaci\u00f3 (M. E/R). El model orientat a objectes est\u00e0 utilitzant-se prou en l'actualitat, b\u00e9 de forma pura o b\u00e9 barrejat amb el Model Relacional.</li> <li>Models de baix nivell o f\u00edsics: proporcionen detalls de com es guardaran les dades a l'ordinador.</li> <li>Models de representaci\u00f3 o implementaci\u00f3: estan a mig cam\u00ed dels dos anteriors, ja que els conceptes els poden entendre els usuaris finals, encara que no estan massa allunyats de la manera com es guarden les dades a l'ordinador. S\u00f3n els m\u00e9s utilitzats en els SGBD actuals. Es poden destacar el Jer\u00e0rquic, el de Xarxa (o Codasyl) i el Relacional, que \u00e9s el que nosaltres veurem en profunditat.</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0</p>"},{"location":"BD-T01_Introduccio/5_arquitectura_a_3_nivells/","title":"5.Arquitectrua a 3 nivells","text":"<p>Per a estandarditzar l'arquitectura dels SGBD, el comit\u00e8 ANSI/X3/SPARC va proposar una arquitectura a 3 nivells, per assegurar algunes de les caracter\u00edstiques que hem vist com a desitjables, en concret la de la separaci\u00f3 entre programes i dades, les m\u00faltiples vistes i la utilitzaci\u00f3 d'un cat\u00e0leg per a la descripci\u00f3 de la B.D. Aquest s\u00f3n els 3 nivells: </p> <p></p> <ol> <li> <p>Al NIVELL INTERN o F\u00cdSIC hi ha un esquema intern que descriu l'estructura f\u00edsica d'emmagatzematge de la B.D. S'utilitza un model f\u00edsic, i descriu tots els detalls per al seu emmagatzematge (on estan els fitxers, quants, estrat\u00e8gies d'acc\u00e9s a les dades, ...). </p> </li> <li> <p>Al NIVELL CONCEPTUAL o L\u00d2GIC hi ha un esquema conceptual, que descriu l'estructura de tota la B.D. per al conjunt dels usuaris. Oculta els detalls de les estructures f\u00edsiques d'emmagatzematge. S'utilitza un model de dades conceptual o d'implementaci\u00f3 </p> </li> <li> <p>Al NIVELL EXTERN o DE VISTES s'inclouen diversos esquemes externs o vistes d'usuari. Cada esquema extern descriu la part de la B.D. que interessa a un grup d'usuaris determinat, i oculta la resta de la B.D. S'utilitza tamb\u00e9 un model conceptual o d'implementaci\u00f3. </p> </li> </ol> <p>Per tant els tres esquemes s\u00f3n distintes maneres de descriure les dades, encara que aquestes nom\u00e9s existeixen realment en el nivell f\u00edsic. Per\u00f2 l'esquema intern ha de ser totalment transparent als usuaris, i ells han de \"veure\" el seu esquema extern. Qualsevol refer\u00e8ncia a aquest esquema s'haur\u00e0 de traduir, per part del SGBD, a refer\u00e8ncies a les dades oportunes de l'esquema l\u00f2gic. I posteriorment s'haur\u00e0 de traduir en una sol\u00b7licitud a l'esquema f\u00edsic. Per exemple, suposem una vista on tenim el nom i l'edat dels empleats. Una sol\u00b7licitud de tota la vista externa s'haur\u00e0 de traduir en una sol\u00b7licitud de les dades correctes de l'esquema l\u00f2gic, el nom i la data de naixement. I per la seua banda s'haur\u00e0 de traduir en una sol\u00b7licitud a l'esquema f\u00edsic, on se sabran on estan exactament les dades, si hi ha \u00edndex per fer m\u00e9s r\u00e0pid l'acc\u00e9s, ... Posteriorment quan ja estan les dades, s'hauran de passar al nivell superior, i despr\u00e9s de fer el c\u00e0lcul oport\u00fa passar-les al nivell extern. </p> <p>El proc\u00e9s de transformar sol\u00b7licituds i resultats d'un nivell a un altre s'anomena correspond\u00e8ncia o transformaci\u00f3 (mapping). Evidentment consumiran temps, per\u00f2 facilitaran el que es pretenia: </p> <ul> <li> <p>Independ\u00e8ncia l\u00f2gica respecte a les dades: es pot modificar l'esquema l\u00f2gic sense haver de modificar els esquemes externs. Per exemple, en l'esquema l\u00f2gic puc incorporar un camp per als empleats que siga la data d'ingr\u00e9s en l'empresa. Aix\u00f2 no afectar\u00e0 per a res a la vista externa d'empleats i edats. </p> </li> <li> <p>Independ\u00e8ncia f\u00edsica respecte a les dades: es pot modificar l'esquema f\u00edsic sense haver de modificar l'esquema l\u00f2gic, i molt menys els esquemes externs. Aix\u00ed per exemple es pot afegir m\u00e9s espai per a la B.D. incorporant un nou fitxer on es guardaran les coses (Oracle), o s'inclou un nou \u00edndex per accedir m\u00e9s r\u00e0pidament a les dades per un determinat ordre. </p> </li> </ul> <p>Tamb\u00e9 hem de dir que no sempre els SGBD comercials compleixen estrictament aquestos 3 nivells en la seua arquitectura. Sobretot en els m\u00e9s menuts, ja que obligat\u00f2riament la correspond\u00e8ncia entre els nivells tarda temps, i retarda els resultats. </p> <p>Anem a ampliar l'anterior arquitectura a tres nivells per incorporar tot el proc\u00e9s que farem en la construcci\u00f3 d'una B.D. </p> <p></p> <p>On hem incorporat, fora de l'arquitectura a 3 nivells, \u00e9s a dir fora del SGBD, l'esquema conceptual, que seria la concepci\u00f3 de la B.D. en un model d'alt nivell com el Model E/R. A partir d'ell realitzar\u00edem l'esquema l\u00f2gic (amb un model d'implantaci\u00f3). Despr\u00e9s ja es passaria a l'esquema intern, i tamb\u00e9 als esquemes externs. </p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0</p>"},{"location":"BD-T01_Introduccio/6_llenguatges_del_sgbd/","title":"6.Llenguatges del  SGBD","text":"<p>Tant per a la construcci\u00f3 dels distints esquemes (administradors) com per a la posterior utilitzaci\u00f3 per a introduir, modificar, eliminar i consultar dades (tots els usuaris) se li hauran de donar ordres al SGBD. Per tant el SGBD ha de proporcionar uns llenguatges als usuaris per a poder realitzar aquestes accions. Dos seran els grups de llenguatges: </p> <ul> <li>Llenguatges de definici\u00f3. Serviran per a construir els distints esquemes. Podrem distingir:</li> </ul> <p>- Llenguatge de definici\u00f3 de dades (DDL: data definition language). Serviran per a construir l'esquema l\u00f2gic. </p> <p>- Llenguatge de definici\u00f3 d'emmagatzematge (SDL: storage definition language), per a l'esquema f\u00edsic. </p> <p>- Llenguatge de definici\u00f3 de vistes (VDL: view definition language), per a les vistes </p> <p>En la pr\u00e0ctica a tots aquestos (que com es comentar\u00e0 m\u00e9s avant solen anar junts) se'ls anomena DDL</p> <ul> <li>Llenguatges de manipulaci\u00f3 de dades (DML: data manipulation language). Serviran per a manipular les dades, \u00e9s a dir fer consultes, insercions, modificacions i eliminacions.</li> </ul> <p>En els SGBD actuals no s'acostuma a separar els llenguatges, sin\u00f3 que s'utilitza un ampli llenguatge que combina tots els aspectes i permet fer-ho tot. Aix\u00ed per exemple, el llenguatge m\u00e9s utilitzat, el SQL, compta amb caracter\u00edstiques de DML (SELECT), i de DDL en tots els nivells (CREATE TABLE esquema l\u00f2gic, CREATE INDEX esquema f\u00edsic, CREATE VIEW esquema extern). </p> <p>Hi ha dues maneres d'aplicar les sent\u00e8ncies dels llenguatges. </p> <ul> <li> <p>De forma interactiva: s'escriu una sent\u00e8ncia, s'executa, despr\u00e9s una altra, ... Obtenen conjunts de resultats, per aix\u00f2 s'anomenen de conjunt en conjunt.</p> </li> <li> <p>Immergits en un altre llenguatge de prop\u00f2sit general, anomenat llenguatge amfitri\u00f3, on entre els procediment s'inclouen les sent\u00e8ncies del DML, anomenat llenguatge hoste o subllenguatge. Normalment s'obtenen registres individuals de la B.D., per la qual cosa s'hauran d'utilitzar bucles per fer tota una consulta. Per aix\u00f2 s'anomenen de registre a registre.</p> </li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0</p>"},{"location":"BD-T01_Introduccio/7_classificacions_dels_sgbd/","title":"7.Classificacions dels SGBD","text":"<p>Veurem la classificaci\u00f3 respecte uns quants criteris.</p> <ul> <li>Segons el model de dades utilitzat, tindrem els SGBD relacionals, jer\u00e0rquics i de xarxa. Els dos \u00faltims, encara que fa temps van tenir molta import\u00e0ncia i aplicaci\u00f3 comercial, han quedat antiquats. Nosaltres ens centrarem en els SGBD Relacionals. \u00daltimament han aparegut els orientats a objectes, i altres que per no seguir el model relacional s'anomenen\u00a0NoSQL Intentarem veure alguns aspectes en l'\u00faltim tema.</li> <li>Segons el n\u00famero d'usuaris, tindrem sistemes monousuari, que nom\u00e9s atenen un usuari al mateix temps, i els sistemes multiusuari, que atenen molts usuaris al mateix temps.</li> <li>Segons el nombre de llocs on est\u00e0 ubicat el sistema, tindrem els centralitzats, en els quals tant el SGBD com les dades estan en un \u00fanic ordinador central (encara que es puga accedir a la B.D. de forma remota). Per contra estaran els SGBD distribu\u00efts (SGBDD), en els quals el SGBD i les dades estan distribu\u00efts en uns quants llocs connectats per una xarxa. Dins d'aquestos podr\u00edem fer una distinci\u00f3 entre els homogenis, que utilitzen tots els llocs el mateix software, i els heterogenis o federats que utilitzen distint software i t\u00e9 cada SGBD particular un cert grau d'autonomia local.</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0</p>"},{"location":"BD-T01_Introduccio/autoavaluaci/","title":"Autoavaluaci","text":"<p>Bases de Dades </p>"},{"location":"BD-T01_Introduccio/autoavaluaci/#omplir-els-espais-en-blanc","title":"Omplir els espais en blanc","text":"<p>Una Buits (1):\u2002\u2002\u2002\u2002\u2002Buits (2):\u2002\u2002\u2002\u2002\u2002Buits (3):\u2002\u2002\u2002\u2002\u2002\u00e9s un conjunt de dades relacionades entre elles, integrat en una \u00fanica estructura global que \u00e9s independent dels programes que la utilitzen i sense redund\u00e0ncies innecess\u00e0ries.</p> <p>Al conjunt de programes que permet als usuaris crear i mantenir l'anterior s'anomena Buits (4):\u2002\u2002\u2002\u2002\u2002Buits (5):\u2002\u2002\u2002\u2002\u2002Buits (6):\u2002\u2002\u2002\u2002\u2002Buits (7):\u2002\u2002\u2002\u2002\u2002Buits (8):\u2002\u2002\u2002\u2002\u2002Buits (9):\u2002\u2002\u2002\u2002\u2002</p> <p>MACROBUTTON DoFieldClick  [Envia] Habilita el javascript</p> <p></p>"},{"location":"BD-T01_Introduccio/autoavaluaci/#tria-la-correcta","title":"Tria la correcta","text":""},{"location":"BD-T01_Introduccio/autoavaluaci/#questio","title":"Q\u00fcesti\u00f3","text":"<p>L'ususuari encarregat de gestionar la Base de Dades, donar d'alta usuaris, fer c\u00f2pies de seguretat, rep el nom de: </p>"},{"location":"BD-T01_Introduccio/autoavaluaci/#respostes","title":"Respostes","text":"<p>Opci\u00f3 1 FORMCHECKBOX </p> <p>Programador </p> <p>Opci\u00f3 2 FORMCHECKBOX </p> <p>Param\u00e8tric </p> <p>Opci\u00f3 3 FORMCHECKBOX </p> <p>Administrador </p> <p>Opci\u00f3 4 FORMCHECKBOX </p> <p>Analista </p> <p>MACROBUTTON DoFieldClick  [Mostra realimentaci\u00f3]</p>"},{"location":"BD-T01_Introduccio/autoavaluaci/#realimentacio","title":"Realimentaci\u00f3","text":""},{"location":"BD-T01_Introduccio/autoavaluaci/#solucio","title":"Soluci\u00f3","text":"<ol> <li>Incorrecte</li> <li>Incorrecte</li> <li>Correcte</li> <li>Incorrecte</li> </ol>"},{"location":"BD-T01_Introduccio/autoavaluaci/#preguntes-veritatfals","title":"Preguntes Veritat/Fals","text":""},{"location":"BD-T01_Introduccio/autoavaluaci/#questio-1","title":"Q\u00fcesti\u00f3 1","text":"<p>Amb les eines que ens proporciona un Model de Dades es pot descriure l'estructura d'una Base de Dades </p> <p> Veritat  Mentida</p>"},{"location":"BD-T01_Introduccio/autoavaluaci/#realimentacio_1","title":"Realimentaci\u00f3","text":"<p>Veritat</p>"},{"location":"BD-T01_Introduccio/autoavaluaci/#questio-2","title":"Q\u00fcesti\u00f3 2","text":"<p>Un Model de Dades \u00e9s la part d'un SGBD que permet definir l'estructura de la Base de Dades </p> <p> Veritat  Mentida</p>"},{"location":"BD-T01_Introduccio/autoavaluaci/#realimentacio_2","title":"Realimentaci\u00f3","text":"<p>Mentida</p>"},{"location":"BD-T01_Introduccio/autoavaluaci/#questio-3","title":"Q\u00fcesti\u00f3 3","text":"<p>Un exemple de Model d'Implementaci\u00f3 \u00e9s el Model Entitat-Relaci\u00f3 </p> <p> Veritat  Mentida</p>"},{"location":"BD-T01_Introduccio/autoavaluaci/#realimentacio_3","title":"Realimentaci\u00f3","text":"<p>Mentida</p>"},{"location":"BD-T01_Introduccio/autoavaluaci/#questio-4","title":"Q\u00fcesti\u00f3 4","text":"<p>Un exemple de Model d'alt nivell \u00e9s el Model Jer\u00e0rquic </p> <p> Veritat  Mentida</p>"},{"location":"BD-T01_Introduccio/autoavaluaci/#realimentacio_4","title":"Realimentaci\u00f3","text":"<p>Mentida</p>"},{"location":"BD-T01_Introduccio/autoavaluaci/#questio-5","title":"Q\u00fcesti\u00f3 5","text":"<p>El Model Relacional, el m\u00e9s est\u00e9s en l'actualitat, es pot considerar tant d'alt nivell com d'implementaci\u00f3. </p> <p> Veritat  Mentida</p>"},{"location":"BD-T01_Introduccio/autoavaluaci/#realimentacio_5","title":"Realimentaci\u00f3","text":"<p>Mentida</p> <p></p>"},{"location":"BD-T01_Introduccio/autoavaluaci/#eleccio-multiple","title":"Elecci\u00f3 m\u00faltiple","text":""},{"location":"BD-T01_Introduccio/autoavaluaci/#questio_1","title":"Q\u00fcesti\u00f3","text":"<p>L'arquitectura a 3 nivells vol dir que: </p>"},{"location":"BD-T01_Introduccio/autoavaluaci/#respostes_1","title":"Respostes","text":"<p>Opci\u00f3 1</p> <p>la Base de Dades s'ha de construir \u00fanicament en un dels tres nivells \"est\u00e0ndar\" </p> <p>Opci\u00f3 2</p> <p>es poden descriure les dades en tres nivells diferents d'abstracci\u00f3, encara que les dades nom\u00e9s existeixen realment en el nivell f\u00edsic </p> <p>Opci\u00f3 3</p> <p>tota Base de Dades ha de tenir 3 arquitectes o \"constructors\" </p> <p>Opci\u00f3 4</p> <p>cap de les opcions anteriors \u00e9s correcta </p>"},{"location":"BD-T01_Introduccio/autoavaluaci/#realimentacio_6","title":"Realimentaci\u00f3","text":"<p>Incorrecte.</p> <p>Correcte !!</p> <p>Incorrecte.</p> <p>Incorrecte.</p>"},{"location":"BD-T01_Introduccio/autoavaluaci/#solucio_1","title":"Soluci\u00f3","text":"<ol> <li>Incorrecte (Realimentaci\u00f3)</li> <li>Opci\u00f3 correcta (Realimentaci\u00f3)</li> <li>Incorrecte (Realimentaci\u00f3)</li> <li>Incorrecte (Realimentaci\u00f3)</li> </ol>"},{"location":"BD-T01_Introduccio/autoavaluaci/#seleccio-multiple","title":"Selecci\u00f3 m\u00faltiple","text":""},{"location":"BD-T01_Introduccio/autoavaluaci/#questio_2","title":"Q\u00fcesti\u00f3","text":"<p>Indica quines afirmacions s\u00f3n correctes. </p>"},{"location":"BD-T01_Introduccio/autoavaluaci/#respostes_2","title":"Respostes","text":"<p>Opci\u00f3 1 FORMCHECKBOX </p> <p>Els SGBD no poden controlar la redund\u00e0ncia, per aix\u00f2 \u00e9s convenient que no n'hi haja gens </p> <p>Opci\u00f3 2 FORMCHECKBOX </p> <p>Els SGBD poden oferir diferents interrf\u00edcies als usuaris </p> <p>Opci\u00f3 3 FORMCHECKBOX </p> <p>Els SGBD poden \"imposar\" restriccions a les dades que s'han d'introduir, com per exemple que una nota estiga entre 0 i 10 </p> <p>Opci\u00f3 4 FORMCHECKBOX </p> <p>Tots els usuaris de la Base de Dades tenen els mateixos permisos </p> <p>Opci\u00f3 5 FORMCHECKBOX </p> <p>Els SGBD es basen en altres sistemes (com per exemple el Sistema Operatiu) per a fer les c\u00f2pies de seguretat </p> <p>MACROBUTTON DoFieldClick  [Mostra realimentaci\u00f3]</p>"},{"location":"BD-T01_Introduccio/autoavaluaci/#realimentacio_7","title":"Realimentaci\u00f3","text":""},{"location":"BD-T01_Introduccio/autoavaluaci/#solucio_2","title":"Soluci\u00f3","text":"<ol> <li>Incorrecte</li> <li>Correcte</li> <li>Correcte</li> <li>Incorrecte</li> <li>Incorrecte</li> </ol>"},{"location":"BD-T01_Introduccio/autoavaluaci/#eleccio-multiple_1","title":"Elecci\u00f3 m\u00faltiple","text":""},{"location":"BD-T01_Introduccio/autoavaluaci/#questio_3","title":"Q\u00fcesti\u00f3","text":"<p>El fet que la definici\u00f3 de les dades estiga incorporada en la mateixa Base de Dades, s'anomena t\u00e8cnicament que la Base de Dades \u00e9s </p>"},{"location":"BD-T01_Introduccio/autoavaluaci/#respostes_3","title":"Respostes","text":"<p>Opci\u00f3 1</p> <p>autom\u00e0tica </p> <p>Opci\u00f3 2</p> <p>aut\u00f2mata </p> <p>Opci\u00f3 3</p> <p>autom\u00f2bil </p> <p>Opci\u00f3 4</p> <p>autodescriptiva </p>"},{"location":"BD-T01_Introduccio/autoavaluaci/#realimentacio_8","title":"Realimentaci\u00f3","text":"<p>Incorrecte.</p> <p>Incorrecte.</p> <p>Incorrecte.</p> <p>Correcte !!</p>"},{"location":"BD-T01_Introduccio/autoavaluaci/#solucio_3","title":"Soluci\u00f3","text":"<ol> <li>Incorrecte (Realimentaci\u00f3)</li> <li>Incorrecte (Realimentaci\u00f3)</li> <li>Incorrecte (Realimentaci\u00f3)</li> <li>Opci\u00f3 correcta (Realimentaci\u00f3)</li> </ol> <p>\u00ab Anterior</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T01_Introduccio/objectius/","title":"Objectius","text":"<p>Aquest \u00e9s el tema d'introducci\u00f3, i per tant de primer contacte amb la mat\u00e8ria. </p> <p>Els objectius s\u00f3n: </p> <ul> <li> <p>Veure la necessitat de millorar els fitxers tradicionals</p> </li> <li> <p>Tenir clar els conceptes de Base de Dades i de Sistema Gestor de Base de Dades.</p> </li> <li> <p>Veure els avantatges i tamb\u00e9 els inconvenients</p> </li> <li> <p>Entendre el concepte de Model de Dades i con\u00e8ixer els distints tipus.</p> </li> <li> <p>Con\u00e8ixer l'estandaritzaci\u00f3 de l'arquitectura a 3 nivells.</p> </li> <li> <p>Saber de l'exist\u00e8ncia de distints llenguatges</p> </li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T02_Model_E-R/","title":"Index","text":"<p>Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T02_Model_E-R/1_introducci/","title":"1. Introducci\u00f3","text":"<p>Bases de Dades</p> <p>El Model Entitat-Relaci\u00f3 (M E/R) \u00e9s un model d'alt nivell, que ens permetr\u00e0 representar el m\u00f3n que volem amb un llenguatge, una estructura m\u00e9s propera a nosaltres. L'utilitzarem dins de tot el proc\u00e9s de creaci\u00f3 de la Base de Dades, que consistir\u00e0 en: </p> <ul> <li> <p>A partir de la realitat, estudiar-la (investigant, entrevistant els usuaris, ...) i fer l'An\u00e0lisi de Requeriments, \u00e9s a dir, qu\u00e8 es vol. El resultat ser\u00e0 un conjunt de requeriments redactats de forma concisa. </p> </li> <li> <p>A partir de l'An\u00e0lisi de Requeriments, dissenyar l'Esquema Conceptual de la Base de Dades amb un model d'alt nivell (el Model E/R). </p> </li> <li> <p>Traduir l'esquema conceptual, \u00e9s a dir el diagrama E/R, al Model Relacional, obtenint l'Esquema L\u00f2gic.</p> </li> <li> <p>Implementar l'esquema l\u00f2gic en un SGBD comercial. Afegir les coses necess\u00e0ries (\u00edndex, retocar camps, ...) per a completar l'esquema f\u00edsic, aix\u00ed com les vistes per a tots els usuaris (esquema extern). </p> </li> </ul> <p>Un esquema de tot el proc\u00e9s seria el seg\u00fcent: </p> <p></p> <p>En realitat, en sistemes grans, no podem separar l'an\u00e0lisi de les dades de l'an\u00e0lisi dels processos a fer amb les dades. Aleshores, paral\u00b7lel al disseny conceptual, \u00e9s a dir, despr\u00e9s de l'an\u00e0lisi de requeriments aniria l'An\u00e0lisi Funcional (l\u00ednia discont\u00ednua), encarregat de veure quins processos generals s\u00f3n necessaris en el sistema. Nosaltres no filarem tan prim. </p> <p>En el Model E/R estudiarem les entitats o objectes del nostre univers, la nostra realitat, i les relacions que hi haur\u00e0 entre les distintes entitats. </p> <p>El Model E/R el va proposar Peter P. Chen en 1976. Posteriorment molts autors van aportar m\u00e9s coses, creant l'anomenat Model E/R Est\u00e8s (M EE/R), encara que en realitat hi ha tota una gamma de models estesos. </p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T02_Model_E-R/2_exemple/","title":"2. Exemple","text":"<p>Bases de Dades</p> <p>Anem a presentar un exemple sobre el qual ens basarem durant tot el tema. Es tracta d'una companyia, i el resultat de l'an\u00e0lisi de requeriments \u00e9s el seg\u00fcent:</p> <p>1. La companyia est\u00e0 organitzada en departaments. Cadascun t\u00e9 nom \u00fanic, n\u00famero \u00fanic i un empleat que el dirigeix. Ens interessa la data en la qual va comen\u00e7ar a dirigir-lo.</p><p>2. Cada departament controla una s\u00e8rie de projectes. Cadascun d'aquestos projectes t\u00e9 nom i n\u00famero \u00fanics, i estar\u00e0 coordinat per un \u00fanic departament.</p><p>3. De cada empleat ens interessa el nom (format per dos cognoms i nom de pila), DNI, adre\u00e7a, tel\u00e8fon, sou i data de naixement. Tot empleat est\u00e0 assignat a un departament, i moltes vegades tindr\u00e0 un supervisor. Pot treballar en m\u00e9s d'un projecte (no necess\u00e0riament controlats pel mateix departament) i treballar\u00e0 un determinat n\u00famero d'hores a la setmana en cada projecte. En un projecte sempre treballar\u00e0, com a m\u00ednim, un empleat.</p><p>4. Volem saber tamb\u00e9 els familiars de cada empleat, per administrar els termes d'una asseguran\u00e7a. Volem saber el nom, data de naixement i parentesc amb l'empleat.</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T02_Model_E-R/31_entitats/","title":"Descripci\u00f3","text":"<p>Bases de Dades</p> <p>L'ENTITAT ser\u00e0 una persona, cosa, lloc, concepte o succ\u00e9s, amb exist\u00e8ncia real o abstracta, que ens \u00e9s d'inter\u00e8s. </p> <p>Aix\u00ed per exemple, els empleats s\u00f3n entitats. Com tots els empleats tindran per a nosaltres les mateixes caracter\u00edstiques (nom, adre\u00e7a,...), encara que cadasc\u00fa amb valors distints, els podem englobar en la mateixa estructura. </p> <p>Definirem TIPUS D'ENTITAT a l'estructura gen\u00e8rica (EMPLEAT) i OCURR\u00c8NCIA D'ENTITAT a cadascuna de les realitzacions concretes (cadascun dels empleats, per exemple Joan Peris). Evidentment, en el disseny no ens interessen les ocurr\u00e8ncies, sin\u00f3 el Tipus d'Entitat. El representarem per un rectangle amb el nom de l'entitat a l'interior (preferiblement en singular). </p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T02_Model_E-R/32_atributs/","title":"Descripci\u00f3","text":"<p>Bases de Dades</p> <p>Un ATRIBUT \u00e9s cadascuna de les caracter\u00edstiques d'una entitat que ens interessen. </p> <p>Per exemple en l'entitat EMPLEAT tindrem els atributs nom, DNI, adre\u00e7a, tel\u00e8fon, sou i data de naixement. </p> <p>No considerarem atributs les caracter\u00edstiques que no ens interessen (estatura, talla pantalons, etc.) </p> <p>Una ocurr\u00e8ncia d'entitat tindr\u00e0 un VALOR per a cada atribut, per exemple Joan Peris, 18.901.234, 964-22.33.44, 1.200,00\u20ac., 12-5-1960.</p> <p>Per\u00f2 de vegades potser que el contingut d'un atribut siga el valor NUL (per exemple si no t\u00e9 tel\u00e8fon o el desconeixem). </p> <p>Els atributs poden ser SIMPLES o COMPOSTOS, si estan formats per una \u00fanica informaci\u00f3 o per m\u00e9s d'una. Aix\u00ed, un exemple d'atribut compost seria el nom que podria estar format per: nom=(nom de pila, primer cognom, segon cognom). </p> <p>Poden haver atributs MULTIVALUATS, que vol dir que poden agafar m\u00e9s d'un valor. Per exemple suposem que en el cas anterior considerem el camp altres tel\u00e8fons** (per si en l'empresa hi ha moments que hem de localitzar l'empleat urgentment). Potser un empleat no tinga cap valor en aquest camp. I potser un altre en tinga dos (el m\u00f2bil i el d'una segona resid\u00e8ncia). En general fugirem d'aquestos camps per comoditat, per\u00f2 el model ho accepta. </p> <p>Tamb\u00e9 poden haver atributs DERIVATS, \u00e9s a dir, atributs que es poden calcular a partir d'altres. Podria ser el cas del camp edat, que es pot calcular a partir de la data del sistema i de data de naixement. </p> <p>El model necessita poder identificar cada ocurr\u00e8ncia sense marge d'error. Hi haur\u00e0 algun atribut (o conjunt d'atributs) que acomplir\u00e0 aquesta premisa d'identificar un\u00edvocament. I per a que aix\u00f2 siga possible, aquest atribut haur\u00e0 de tenir valors distints per a totes les ocurr\u00e8ncies (sin\u00f3 no podria identificar-les); i al mateix temps no podr\u00e0 tenir en cap cas el valor nul. En l'exemple EMPLEAT, el nom o el DNI servirien per identificar. En canvi el sou no serviria, ja que m\u00e9s d'un empleat pot tenir el mateix sou. El tel\u00e8fon tampoc, perqu\u00e8 potser siga nul. </p> <p>Als atributs (o conjunts d'atributs) que acompleixen la condici\u00f3 anterior els anomenarem CLAUS CANDIDATES, i d'entre totes les claus candidates triarem una i l'anomenarem CLAU PRINCIPAL. </p> <p>Totes les entitats han de tenir una clau principal. \u00c9s una de les restriccions del Model E/R. </p> <p>Representarem els atributs amb un cercle unit a l'entitat per una l\u00ednia, i en l'interior o al costat posarem el nom de l'atribut. La clau principal l'assenyalarem subratllant-la, o amb el cercle negre. </p> <p>Per als atributs multivaluats posarem n en la l\u00ednia. I els derivats els representarem amb l\u00ednies discont\u00ednues. </p> <p>Ac\u00ed tindr\u00edem dues maneres (absolutament equivalents) de representar l'entitat EMPLEAT amb els seus atributs.</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T02_Model_E-R/33_dominis/","title":"3.3 Dominis","text":"<p>Bases de Dades</p> <p>\u00c9s el conjunt de possibles valors que pot agafar un atribut. Aix\u00ed, per exemple, el domini de l'atribut Dni s\u00f3n els n\u00fameros enters, i encara podr\u00edem filar m\u00e9s prim, els enters de 8 xifres decimals (fins el 99.999.999). Aix\u00f2 s\u00ed, si preveem que potser ens convinga guardar tamb\u00e9 la lletra de NIF, aleshores hauria de ser alfanum\u00e8ric de 9 car\u00e0cters. El n\u00famero identificatiu del departament podria ser un n\u00famero de l'1 al 10. </p> <p>M\u00e9s d'un atribut pot compartir el mateix domini, per exemple si incloem l'atribut data d'incorporaci\u00f3 a la companyia a l'entitat EMPLEAT tindria el mateix domini que el camp data de naixement. </p> <p>Quan treballem en el Model Relacional, en el tema seg\u00fcent, una de les restriccions que farem ser\u00e0 definir clarament el domini de cada atribut, per a no deixar introduir valors inv\u00e0lids. </p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T02_Model_E-R/3_les_entitats_del_model_er/","title":"V\u00eddeo","text":"<p>Bases de Dades Per a fer un esquema amb el Model Entitat-Relaci\u00f3, comen\u00e7arem sempre per les primeres, per les entitats.</p> <p>\u00c9s a dir, a partir de les especificacions del problema, intentarem esbrinar les entitats.</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T02_Model_E-R/41_relaci/","title":"41 relaci","text":"<p>Bases de Dades</p> <p>RELACI\u00d3[1] \u00e9s una associaci\u00f3 o correspond\u00e8ncia entre entitats. </p> <p>El TIPUS DE RELACI\u00d3 ser\u00e0 l\u2019estructura gen\u00e8rica, l\u2019associaci\u00f3 entre dos tipus d\u2019entitat, i englobar\u00e0 les OCURR\u00c8NCIES DE RELACI\u00d3, que relacionaran ocurr\u00e8ncies de les entitats (Joan Peris pertany al departament de Comptabilitat, Pilar Gomis al de Vendes, ...). </p> <p>Representarem la relaci\u00f3 per un rombe, amb el nom de la relaci\u00f3 a l\u2019interior. Habitualment ser\u00e0 un verb que descriu la relaci\u00f3 entre les dues entitats. Unirem el rombe amb els rectangles de les entitats per mig de l\u00ednies. </p> <p>Aix\u00ed tindrem: </p> <p></p> <p>En una Relaci\u00f3 poden intervenir 2 entitats (Relaci\u00f3 Bin\u00e0ria), 3 entitats (tern\u00e0ria), o fins i tot m\u00e9s. Aquest n\u00famero ser\u00e0 el GRAU de la relaci\u00f3. </p> <p>Un exemple de relaci\u00f3 tern\u00e0ria seria: </p> <p></p> <p>I una ocurr\u00e8ncia d\u2019aquesta relaci\u00f3 podria ser: Comptabilitat compra una calculadora a Distribucions Garcia, S.L. </p> <p>Tamb\u00e9 es pot donar el cas que nom\u00e9s intervinga una entitat. Aleshores seria reflexiva o de grau 1. Per exemple, els empleats tenen un supervisor, que tamb\u00e9 \u00e9s un empleat de la companyia. </p> <p></p> <p>Per \u00faltim, tamb\u00e9 es pot donar el cas que dues entitats tinguen entre elles m\u00e9s d\u2019una relaci\u00f3. En el nostre exemple els empleats pertanyen als departaments. Per\u00f2 alguns empleats dirigeixen els departaments, i aquesta \u00e9s una relaci\u00f3 distinta de l\u2019anterior. Per aix\u00f2 conv\u00e9 posar el nom de la relaci\u00f3, per evitar confusions. </p> <p></p> <p>Nota</p> <p>Potser a mida que fem exercicis ens entre perea de posar nom a totes les relacions, sobretot perqu\u00e8 moltes estar\u00e0 molt clar qu\u00e8 signifiquen. Per\u00f2 haurem de posar sempre el nom en aquelles que puguen dur a confusi\u00f3 o aquelles que no est\u00e0 clar el seu significat. </p> <p>-----</p> <p>[1] Per a no confondre amb les Relacions del Model Relacional, alguns autors prefereixen traduir el mot angl\u00e8s Relationship com Interrelaci\u00f3 o Vincle en compte de Relaci\u00f3</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T02_Model_E-R/42_atributs_de_relaci/","title":"42 atributs de relaci","text":"<p>Bases de Dades</p> <p>Les relacions tamb\u00e9 poden tenir atributs, igual que les entitats. Un atribut de relaci\u00f3 seria el n\u00famero d\u2019hores que treballa un empleat en un projecte, que seria un atribut de la relaci\u00f3 treballa. Per exemple Joan Peris treballa en el projecte Estudi rendiment, i li dedica 5 hores setmanals. Fixeu-vos que no \u00e9s un atribut ni d\u2019empleat ni de projecte, sin\u00f3 de la relaci\u00f3 que hi ha entre elles. Un altre atribut de relaci\u00f3 podria ser la data quan un empleat comen\u00e7a a dirigir un departament. </p> <p>Representarem els atributs de relaci\u00f3 com els atributs d'entitat, per\u00f2 ara units a les relacions. </p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T02_Model_E-R/43_tipus_de_relaci_o_cardinalitat/","title":"43 tipus de relaci o cardinalitat","text":"<p>Bases de Dades</p> <p>Encara no hem reflectit tota la realitat. Per exemple no hem pogut expressar que un empleat pertany \u00fanicament a un departament, i en canvi pot estar en m\u00e9s d\u2019un projecte. </p> <p>Aix\u00f2 ho farem per mig de la cardinalitat, que ens dur\u00e0 a distintes classes de relacions. </p> <p>La CARDINALITAT especifica el n\u00famero d'ocurr\u00e8ncies d'una entitat que poden intervenir en la relaci\u00f3 per cada ocurr\u00e8ncia de l'altra entitat. </p> <p>Una ocurr\u00e8ncia d'EMPLEAT (un empleat concret) nom\u00e9s pot estar relacionat amb una ocurr\u00e8ncia de DEPARTAMENT (Joan Peris pertany a Comptabilitat, i a cap altre departament m\u00e9s). En canvi una ocurr\u00e8ncia de DEPARTAMENT pot estar relacionada amb moltes ocurr\u00e8ncies d'EMPLEAT (tots els que hi pertanyen). Aleshores la relaci\u00f3 PERTANY entre DEPARTAMENT i EMPLEAT t\u00e9 ra\u00f3 de cardinalitat 1:N (un departament relacionat amb molts empleats, per\u00f2 un empleat amb un departament). </p> <p>Ho representarem aix\u00ed: </p> <p></p> <p>o millor: </p> <p></p> <p>Els distints tipus de relacions que hi pot haver s\u00f3n: </p> <ul> <li>1:1 (llegirem: \u00fa a \u00fa) com a m\u00e0xim una ocurr\u00e8ncia de cada. Per exemple la relaci\u00f3 DIRIGEIX (un empleat dirigeix com a molt un departament, i un departament \u00e9s dirigit per un empleat).</li> <li>1:N (llegirem: \u00fa a ena o \u00fa a molts) en una entitat una ocurr\u00e8ncia i en l'altra moltes.</li> <li>M:N (llegirem: ema a ena o molts a molts) hi ha m\u00e9s d'una ocurr\u00e8ncia en cada entitat. Per exemple la relaci\u00f3 TREBALLA (un empleat pot treballar en m\u00e9s d'un projecte, i en un projecte pot treballar m\u00e9s d'un empleat).</li> </ul> <p>Per a poder distingir aquesta cardinalitat ens farem dues preguntes, resultat de fixar una ocurr\u00e8ncia en una entitat i veure quantes ocurr\u00e8ncies es relacionen en l'altra entitat. \u00c9s a dir, per a una ocurr\u00e8ncia d'una, quantes hi ha de l'altra. En l'exemple de m\u00e9s amunt: </p> <ul> <li>A un departament determinat, quants empleats poden pert\u00e0nyer? (molts).</li> <li>Un empleat determinat, a quants departaments pot pert\u00e0nyer? (a un).</li> </ul> <p>Aquestes preguntes normalment tenen molt f\u00e0cil contestaci\u00f3. Si hi ha dubte haur\u00edem d'investigar millor en les especificacions. </p> <p>Nota</p> <p>La cardinalitat M:N tamb\u00e9 la podr\u00edem representar N:N. Senzillament vol dir que s\u00f3n moltes ocurr\u00e8ncies de cada entitat per cadascuna de l'altra. En aquestos apunts normalment posar\u00e9 M:N, senzillament perqu\u00e8 \"s\u00f3na\" millor. </p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T02_Model_E-R/4_les_relacions_del_model_er/","title":"4 les relacions del model er","text":"<p>Bases de Dades Encara no hem relacionat les entitats entre elles, i per tant encara no hem dit que tal treballador pertany a tal departament (Joan Peris est\u00e0 en Comptabilitat, per exemple), o que tal treballador est\u00e0 en tal projecte dedicant-li tantes hores setmanals.</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T02_Model_E-R/5_relacions_de_grau_major_que_dos/","title":"5. Relacions de grau major que dos","text":"<p>Bases de Dades Anem a estudiar una miqueta m\u00e9s el cas de les relacions tern\u00e0ries. Donada la seua complexitat podr\u00edem, i de fet aix\u00ed es fa de vegades, descompondre-la en tres relacions bin\u00e0ries </p> <p></p> <p>Aix\u00ed pot haver una ocurr\u00e8ncia que Comptabilitat adquireix una calculadora, una altra que Comptabilitat compra a Distribucions Garcia, S.L., i una altra que Distribucions Garcia, S.L. subministra calculadores. </p> <p>Per\u00f2 aix\u00f2 no t\u00e9 per qu\u00e8 voler dir que la calculadora comprada per Comptabilitat, l'haja comprada a Distribucions Garcia, S.L. Pot haver-la comprada a un altre prove\u00efdor, i el que li compra a Garcia s\u00f3n bol\u00edgrafs (encara que Garcia tamb\u00e9 en puga vendre de calculadores). </p> <p>En canvi en una relaci\u00f3 tern\u00e0ria es diu qui compra, qu\u00e8 compra i a qui compra. Per tant una relaci\u00f3 tern\u00e0ria proporciona m\u00e9s informaci\u00f3 que 3 bin\u00e0ries. </p> <p></p> <p>La cardinalitat es calcula fixant-ne 2 i veient quantes ocurr\u00e8ncies entren en la tercera. Aix\u00ed, un determinat departament pot comprar un determinat article a m\u00e9s d'un prove\u00efdor (N). Un article d'un prove\u00efdor el pot comprar m\u00e9s d'un departament (N). I un departament pot comprar a un prove\u00efdor m\u00e9s d'un article. No t\u00e9 perqu\u00e8 ser sempre N:N:N (en aquest cas de les tern\u00e0ries no utilitzarem ja la M, nom\u00e9s la N). Per exemple suposem que un departament sempre compra un article al mateix prove\u00efdor; aleshores en Prove\u00efdor tindr\u00edem 1. </p> <p></p> <p>Algunes ferramentes de disseny de B.D. nom\u00e9s permeten relacions bin\u00e0ries. Aleshores s'hauria de fer un truc per a representar la relaci\u00f3 tern\u00e0ria, construint una entitat nova, d\u00e8bil, que depenga en identificaci\u00f3 de les altres 3. Veurem les entitats d\u00e8bils en el seg\u00fcent punt. </p> <p>** </p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T02_Model_E-R/61_cardinalitat_mxima_i_mnima_participaci_total/","title":"61 cardinalitat mxima i mnima participaci total","text":"<p>Bases de Dades</p> <p>CARDINALITAT M\u00c0XIMA I M\u00cdNIMA </p>"},{"location":"BD-T02_Model_E-R/61_cardinalitat_mxima_i_mnima_participaci_total/#cardinalitat-maxima-i-minima-duna-entitat-que-participa-en-una-relacio-son-respectivament-el-numero-maxim-i-minim-docurrencies-daquesta-entitat-que-estan-relacionades-amb-una-ocurrencia-de-laltra-entitat","title":"CARDINALITAT M\u00c0XIMA i M\u00cdNIMA d\u2019una entitat que participa en una relaci\u00f3, s\u00f3n respectivament el n\u00famero m\u00e0xim i m\u00ednim d\u2019ocurr\u00e8ncies d\u2019aquesta entitat que estan relacionades amb una ocurr\u00e8ncia de l\u2019altra entitat","text":"<p>Per exemple </p> <p>Un empleat pot dirigir 0 o 1 departament, i un departament \u00e9s dirigit (com a m\u00ednim i com a m\u00e0xim) per 1 empleat. Ho posarem entre par\u00e8ntesis (card. m\u00ednima, card. m\u00e0xima) al costat de l\u2019entitat[1]. En realitat el nou concepte \u00e9s la cardinalitat m\u00ednima, ja que la m\u00e0xima \u00e9s la cardinalitat d'abans. Els valors habituals de cardinalitat m\u00ednima s\u00f3n 0 i 1. </p> <p>PARTICIPACI\u00d3 TOTAL O PARCIAL </p> <p>Una entitat participa de forma TOTAL en una relaci\u00f3, si totes les seues ocurr\u00e8ncies participen en alguna ocurr\u00e8ncia de la relaci\u00f3. Aix\u00ed DEPARTAMENT participa de forma total, ja que tot departament t\u00e9 un cap. En canvi EMPLEAT no participa de forma total, ja que no tot empleat dirigeix un departament. Les entitats que participen de forma total tenen de cardinalitat m\u00ednima 1. Les que no 0. Per tant amb la participaci\u00f3 total o parcial aconseguim el mateix que amb la cardinalitat m\u00ednima.</p> <p>Representarem que una entitat participa de forma total en una relaci\u00f3 amb una doble ratlla </p> <p></p> <p>Com que de les dues maneres anteriors, la cardinalitat m\u00ednima i la participaci\u00f3 total o parcial, aconseguim exactament el mateix, en aquestos apunts nom\u00e9s representarem la participaci\u00f3 total o parcial, ja que t\u00e9 una representaci\u00f3 gr\u00e0fica molt senzilla. </p> <p>-----</p> <p>[1] Hi ha autors que les posen a l\u2019inrev\u00e9s, en les altres entitats. </p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T02_Model_E-R/62_entitats_dbils/","title":"6.2 Entitats d\u00e8bils","text":"<p>Bases de Dades</p> <p>No totes les entitats s\u00f3n iguals. En les normals, que anomenarem REGULARS, les ocurr\u00e8ncies tenen exist\u00e8ncia pr\u00f2pia. </p> <p>En canvi, en les entitats D\u00c8BILS, l\u2019exist\u00e8ncia de les ocurr\u00e8ncies dep\u00e8n de l\u2019exist\u00e8ncia de l\u2019ocurr\u00e8ncia d\u2019una altra entitat, i aix\u00ed si desapareix aquesta \u00faltima, haurien de desapar\u00e8ixer tamb\u00e9 totes aquelles. </p> <p>Per exemple els familiars de Joan Peris podrien ser [Marta, dona], [Isabel, filla] i [Marc, fill]. Si desapareix l\u2019empleat Joan Peris haurien de desapar\u00e8ixer tamb\u00e9 els seus familiars. </p> <p>Les entitats d\u00e8bils les representarem per un doble rectangle: </p> <p></p> <p>La cardinalitat m\u00ednima i m\u00e0xima de l\u2019entitat regular en la relaci\u00f3 amb la d\u00e8bil sempre \u00e9s (1,1). O el que \u00e9s el mateix, la d\u00e8bil sempre participa de forma total en la relaci\u00f3 1:N. </p> <p>Tal com hem comentat les coses fins ara direm que l\u2019entitat d\u00e8bil t\u00e9 una DEPEND\u00c8NCIA EN EXIST\u00c8NCIA[1]**. </p> <p>Per\u00f2 podem anar m\u00e9s enll\u00e0, si a m\u00e9s de la depend\u00e8ncia en exist\u00e8ncia considerem que per a identificar una ocurr\u00e8ncia de l\u2019entitat d\u00e8bil ens fa falta la clau de l\u2019entitat regular de la qual dep\u00e8n. Si en una biblioteca tenim m\u00e9s d\u2019un exemplar de cada llibre, tindr\u00edem l\u2019entitat LLIBRE (on estaria tota la informaci\u00f3: t\u00edtol, autor, editorial, ...) i una altra que seria EXEMPLAR. Ser\u00e0 l\u00f2gic que per a identificar un determinat exemplar utilitzem el codi del llibre m\u00e9s el n\u00famero d\u2019exemplar. </p> <p>Un altre exemple podria ser el de PROV\u00cdNCIES i MUNICIPIS. El codi de la prov\u00edncia consta de 2 xifres (Castell\u00f3 \u00e9s el 12). Per a identificar un municipi s'utilitzen les 2 xifres del codi de la priv\u00edncia i 4 m\u00e9s per al municipi. I fa falta el codi de la prov\u00edncia, perqu\u00e8 si no es repetirien. </p> <p>Aquesta depend\u00e8ncia, encara m\u00e9s restrictiva que la d\u2019exist\u00e8ncia, l\u2019anomenarem DEPEND\u00c8NCIA EN IDENTIFICACI\u00d3. Per a marcar aquesta depend\u00e8ncia posarem ID al costat de la relaci\u00f3. </p> <p>En el nostre exemple, si considerem que per a identificar l\u2019entitat FAMILIAR \u00e9s suficient amb l\u2019atribut Nom, ser\u00e0 en exist\u00e8ncia (el cas d\u2019una companyia menuda). Si considerem que no \u00e9s suficient, ser\u00e0 en identificaci\u00f3 i la clau principal ser\u00e0 el DNI de l\u2019empleat m\u00e9s el Nom del familiar. </p> <p>Representarem la depend\u00e8ncia en exist\u00e8ncia aix\u00ed (si considerem que amb el nom del familiar tenim prou per a identificar): </p> <p></p> <p>I la depend\u00e8ncia en identificaci\u00f3 aix\u00ed (si considerem que tamb\u00e9 fa falta l'identificador de l'empleat, que \u00e9s el DNI): </p> <p></p> <p>Representarem aquesta \u00faltima de forma alternativa amb el rombe de doble ratlla </p> <p></p> <p>[1] En la pr\u00e0ctica podr\u00edem pensar que tota entitat que participa de forma total en una relaci\u00f3 \u00e9s d\u00e8bil com a m\u00ednim en exist\u00e8ncia. Per exemple: la participaci\u00f3 total de Familiar vol dir que tot familiar ho \u00e9s d'un empleat; la depend\u00e8ncia en exist\u00e8ncia vol dir que no pot existir un familiar sense l'empleat. Com veiem la difer\u00e8ncia \u00e9s molt subtil. A pesar d'aix\u00f2 intentarem fer l\u2019esfor\u00e7 de diferenciar ambd\u00f3s casos, perqu\u00e8 en el seg\u00fcent tema s\u00ed que ens dur\u00e0 a dues maneres de procedir diferents. </p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T02_Model_E-R/63_generalitzaci_i_herncia/","title":"63 generalitzaci i herncia","text":"<p>Bases de Dades</p> <p>Anem a comentar, prou per damunt, un altre aspecte recollit en el Model E/R Est\u00e8s. I \u00e9s quan una entitat es pot subdividir en d'altres. Per exemple podr\u00edem refinar l'entitat EMPLEAT en CAPS, SECRETARIS i TREBALLADORS. </p> <p>Empleat seria el SUPERTIPUS o SUPERCLASSE i els altres els SUBTIPUS. EMPLEAT seria la GENERALITZACI\u00d3 dels altres. I els altres serien l'ESPECIALITZACI\u00d3 d'EMPLEAT. </p> <p></p> <p>Un aspecte important \u00e9s l'HER\u00c8NCIA, que consisteix en qu\u00e8 els subtipus heretaran els atributs del supertipus, de manera que no caldr\u00e0 repetir-los. \u00danicament s'hauran de declarar els atributs espec\u00edfics de la subclasse (en CAP podr\u00edem tenir l'opini\u00f3 del seu departament; en SECRETARI n\u00famero de pulsacions per segon o coneixements d'inform\u00e0tica; en TREBALLADOR si est\u00e0 disposat a fer hores extres). </p> <p>Hi ha m\u00e9s d'una classe d'especialitzaci\u00f3 depenent de dos criteris: </p> <ul> <li> <p>Si se solapen (una ocurr\u00e8ncia de la superclasse pot pert\u00e0nyer a m\u00e9s d'una subclasse) o s\u00f3n disjuntes (una ocurr\u00e8ncia de la superclasse nom\u00e9s pot pert\u00e0nyer a una subclasse). Per exemple els empleats especialitzats per torn de treball (mat\u00ed, vesprada, nit), pot donar-se el cas que algun treballador treballe mat\u00ed i vesprada de forma no intensiva (atenci\u00f3 a p\u00fablic), i per tant seria solapada. Un exemple d'especialitzaci\u00f3 no solapada seria l'especialitzaci\u00f3 per tipus de treball (cap, secretari, treballador), on un empleat no pot pert\u00e0nyer a dues subclasses.</p> </li> <li> <p>Si \u00e9s total (totes les ocurr\u00e8ncies del supertipus pertanyen a algun subtipus) o parcial. Un exemple de total seria una especialitzaci\u00f3 per dedicaci\u00f3 a l'empresa (completa o no completa). Un exemple de parcial seria l'especialitzaci\u00f3 per tipus de treball (cap, secretari, treballador) ja que podria haver algun treballador que no coincidesca (un assessor,...) </p> </li> </ul> <p>No anem a insistir molt en aquest tema perqu\u00e8 a m\u00e9s, en el tractament posterior (quan passem al Model Relacional), de vegades es representen totes les entitats, per\u00f2 de vegades per motius pr\u00e0ctics se simplifica (suprimint b\u00e9 el supertipus, b\u00e9 els subtipus). </p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T02_Model_E-R/6_model_er_ests/","title":"6 model er ests","text":"<p>Bases de Dades</p> <p>El que hem vist fins ara proporciona una eina per descriure la realitat molt potent. Per\u00f2 encara hi ha restriccions del m\u00f3n real que no podem representar. </p> <p>Per exemple, de l'entitat FAMILIAR no ens interessen tots els familiars del m\u00f3n, \u00fanicament els familiars dels empleats. \u00c9s m\u00e9s, si un empleat deixa de treballar en l'empresa, ja no ens interessen els familiars. </p> <p>O un altre exemple, hem posat que la relaci\u00f3 DIRIGEIX \u00e9s 1:1, i aix\u00f2 ens podria fer pensar que les dues entitats, EMPLEAT i DEPARTAMENT, participen exactament de la mateixa manera en la relaci\u00f3. Per\u00f2 no \u00e9s exactament aix\u00ed, ja que tot departament tindr\u00e0 un empleat que el dirigeix, per\u00f2 no tot empleat t\u00e9 un departament a dirigir. </p> <p>Aix\u00f2 fa que el Model E/R s'haja desenvolupat amb les aportacions de m\u00e9s autors, fins arribar al MODEL ENTITAT-RELACI\u00d3 EST\u00c8S. </p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T02_Model_E-R/7_restriccions_externes/","title":"7. Restriccions externes","text":"<p>Bases de Dades</p> <p>A pesar de tot el que hem vist en el M E/R Est\u00e8s, pot donar-se el cas que no es puguen representar tots els requeriments. En definitiva no deixa de ser una eina poderosa per\u00f2 limitada. La manera de representar aquestos requeriments ser\u00e0 per mig de les restriccions externes, que les expressarem de paraula. </p> <p>Suposem que en l'exemple posem la condici\u00f3 (ben l\u00f2gica) que el cap d'un departament ha de ser membre d'aquest. O un altre exemple, suposem que un empleat nom\u00e9s pot treballar en projectes coordinats pel seu departament. Com no ho podem posar en el diagrama E/R, ho posarem de paraula: </p> <p>Rex1: El cap d'un departament ha de ser membre d'aquest. </p> <p>Rex2: Un empleat nom\u00e9s pot treballar en projectes coordinats pel seu departament. </p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T02_Model_E-R/aplicaci_a_lexemple/","title":"Aplicaci\u00f3 a l'exemple","text":"<p>Bases de Dades</p> <p>En el nostre exemple, el del punt 2, quedaran les seg\u00fcents Entitats: </p> <p></p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T02_Model_E-R/aplicaci_a_lexemple0/","title":"Aplicaci\u00f3 a l'exemple","text":"<p>Bases de Dades</p> <p>En el nostre exemple del punt 2 quedarien les altres entitats amb els seg\u00fcents atributs: </p> <p></p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T02_Model_E-R/aplicaci_a_lexemple1/","title":"Aplicaci\u00f3 a l'exemple","text":"<p>Bases de Dades</p> <p>Despr\u00e9s d'incorporar les relacions, el nostre exemple quedar\u00e0: </p> <p></p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T02_Model_E-R/aplicaci_a_lexemple2/","title":"Aplicaci\u00f3 a l'exemple","text":"<p>Bases de Dades</p> <p>Posarem en roig els atributs de relaci\u00f3: </p> <p></p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T02_Model_E-R/aplicaci_a_lexemple3/","title":"Aplicaci\u00f3 a l'exemple","text":"<p>Bases de Dades</p> <p>L'exemple cada vegada est\u00e0 m\u00e9s complet: </p> <p></p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T02_Model_E-R/aplicaci_a_lexemple4/","title":"Aplicaci\u00f3 a l'exemple","text":"<p>Bases de Dades</p> <p>Aplicant la participaci\u00f3 total i parcial, el nostre exemple quedar\u00e0: </p> <p></p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T02_Model_E-R/aplicaci_a_lexemple5/","title":"Aplicaci\u00f3 a l'exemple","text":"<p>Bases de Dades</p> <p>L'exemple, considerant \u00fanicament els subtipus CAP i TREBALLADOR d\u2019EMPLEAT, quedaria aix\u00ed: </p> <p></p> <p>On \"T,D\" que est\u00e0 dins del triangle significa que l'especialitzaci\u00f3 \u00e9s Total i Disjunta </p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T02_Model_E-R/autoavaluaci/","title":"Autoavaluaci","text":"<p>Bases de Dades</p> <ul> <li>Tema 2: MODEL ENTITAT-RELACI\u00d3</li> <li>Objectius i coneixements previs</li> <li>1. Introducci\u00f3</li> <li>2. Exemple</li> <li>3. Les Entitats del Model E/R </li> <li>3.1 Entitats <ul> <li>Aplicaci\u00f3 a l'exemple</li> </ul> </li> <li>3.2 Atributs <ul> <li>Aplicaci\u00f3 a l'exemple</li> </ul> </li> <li>3.3 Dominis</li> <li>Exercicis</li> <li>4. Les Relacions del Model E/R </li> <li>4.1 Relaci\u00f3 <ul> <li>Aplicaci\u00f3 a l'exemple</li> </ul> </li> <li>4.2 Atributs de Relaci\u00f3 <ul> <li>Aplicaci\u00f3 a l'exemple</li> </ul> </li> <li>4.3 Tipus de Relaci\u00f3 o Cardinalitat <ul> <li>Aplicaci\u00f3 a l'exemple</li> </ul> </li> <li>Exercicis</li> <li>5. Relacions de grau major que dos</li> <li>6. Model E/R Est\u00e8s </li> <li>6.1 Cardinalitat m\u00e0xima i m\u00ednima. Participaci\u00f3 total. <ul> <li>Aplicaci\u00f3 a l'exemple</li> </ul> </li> <li>6.2 Entitats d\u00e8bils</li> <li>6.3 Generalitzaci\u00f3 i her\u00e8ncia <ul> <li>Aplicaci\u00f3 a l'exemple</li> </ul> </li> <li>7. Restriccions externes</li> <li>Exercicis</li> <li>Informaci\u00f3 addicional</li> <li>Auto-avaluaci\u00f3</li> </ul> <p>\u00ab Anterior</p>"},{"location":"BD-T02_Model_E-R/autoavaluaci/#auto-avaluacio","title":"Auto-avaluaci\u00f3","text":""},{"location":"BD-T02_Model_E-R/autoavaluaci/#omplir-els-espais-en-blanc","title":"Omplir els espais en blanc","text":"<p>Has de reomplir els espais en blanc marcats amb la paraula correcta (no importen maj\u00fascules i min\u00fascules)</p> <p>El conjunt de programes que permeten gestionar Base de Dades s'anomena Sistema Buits (1):\u2002\u2002\u2002\u2002\u2002de Bases de Buits (2):\u2002\u2002\u2002\u2002\u2002</p> <p>MACROBUTTON DoFieldClick  [Envia] Habilita el javascript</p> <p></p>"},{"location":"BD-T02_Model_E-R/autoavaluaci/#preguntes-veritatfals","title":"Preguntes Veritat/Fals","text":"<p>Contesta Vertader o fals </p>"},{"location":"BD-T02_Model_E-R/autoavaluaci/#questio-1","title":"Q\u00fcesti\u00f3 1","text":"<p>El Model Entitat-Relaci\u00f3 \u00e9s un model d'alt nivell, m\u00e9s proper a la persona que a la m\u00e0quina. </p>"},{"location":"BD-T02_Model_E-R/autoavaluaci/#pista","title":"Pista","text":"<p> Veritat  Mentida</p>"},{"location":"BD-T02_Model_E-R/autoavaluaci/#realimentacio","title":"Realimentaci\u00f3","text":"<p>Veritat</p>"},{"location":"BD-T02_Model_E-R/autoavaluaci/#questio-2","title":"Q\u00fcesti\u00f3 2","text":"<p>Quan es dissenya un esquema en el Model Entitat-Relaci\u00f3 es comen\u00e7a per les relacions, i despr\u00e9s es dedueixen les entitats que hi participen. </p>"},{"location":"BD-T02_Model_E-R/autoavaluaci/#pista_1","title":"Pista","text":"<p> Veritat  Mentida</p>"},{"location":"BD-T02_Model_E-R/autoavaluaci/#realimentacio_1","title":"Realimentaci\u00f3","text":"<p>Mentida</p> <p></p>"},{"location":"BD-T02_Model_E-R/autoavaluaci/#eleccio-multiple","title":"Elecci\u00f3 m\u00faltiple","text":""},{"location":"BD-T02_Model_E-R/autoavaluaci/#questio","title":"Q\u00fcesti\u00f3","text":"<p>En cada entitat triem un atribut (o conjunt d'atributs) que puga representar un\u00edvocament cada registre. L'anomenarem: </p>"},{"location":"BD-T02_Model_E-R/autoavaluaci/#respostes","title":"Respostes","text":"<p>Opci\u00f3 1</p> <p>Clau Externa </p> <p>Opci\u00f3 2</p> <p>Clau Principal </p> <p>Opci\u00f3 3</p> <p>Clau candidata </p>"},{"location":"BD-T02_Model_E-R/autoavaluaci/#realimentacio_2","title":"Realimentaci\u00f3","text":"<p>Noooo!! </p> <p>Correcte !!\u00a0 Tamb\u00e9 s'anomena clau prim\u00e0ria </p> <p>No. Les claus candidates s\u00f3n les que servirien com a claus principals. Per\u00f2 de entre totes elles triem una, que ser\u00e0 la clau principal</p>"},{"location":"BD-T02_Model_E-R/autoavaluaci/#solucio","title":"Soluci\u00f3","text":"<ol> <li>Incorrecte (Realimentaci\u00f3)</li> <li>Opci\u00f3 correcta (Realimentaci\u00f3)</li> <li>Incorrecte (Realimentaci\u00f3)</li> </ol>"},{"location":"BD-T02_Model_E-R/autoavaluaci/#seleccio-multiple","title":"Selecci\u00f3 m\u00faltiple","text":""},{"location":"BD-T02_Model_E-R/autoavaluaci/#questio_1","title":"Q\u00fcesti\u00f3","text":"<p>Les relacions es representen gr\u00e0ficament com: </p>"},{"location":"BD-T02_Model_E-R/autoavaluaci/#respostes_1","title":"Respostes","text":"<p>Opci\u00f3 1 FORMCHECKBOX </p> <p>Un cercle </p> <p>Opci\u00f3 2 FORMCHECKBOX </p> <p>Un rect\u00e0ngle </p> <p>Opci\u00f3 3 FORMCHECKBOX </p> <p>Un rombe </p> <p>Opci\u00f3 4 FORMCHECKBOX </p> <p>Un romboide </p> <p>Opci\u00f3 5 FORMCHECKBOX </p> <p>Una elipse </p> <p>Opci\u00f3 6 FORMCHECKBOX </p> <p>Un quadrat </p> <p>MACROBUTTON DoFieldClick  [Mostra realimentaci\u00f3]</p>"},{"location":"BD-T02_Model_E-R/autoavaluaci/#realimentacio_3","title":"Realimentaci\u00f3","text":""},{"location":"BD-T02_Model_E-R/autoavaluaci/#solucio_1","title":"Soluci\u00f3","text":"<ol> <li>Incorrecte</li> <li>Incorrecte</li> <li>Correcte</li> <li>Correcte</li> <li>Incorrecte</li> <li>Incorrecte</li> </ol>"},{"location":"BD-T02_Model_E-R/autoavaluaci/#activitat-de-espais-en-blanc","title":"Activitat de espais en blanc","text":"<p>Has de reomplir els espais en blanc marcats amb la paraula correcta (no importen maj\u00fascules i min\u00fascules) </p> <p>Quan totes les ocurr\u00e8ncies d'una entitat entren a formar part d'una relaci\u00f3 es diu que l'entitat participa en la relaci\u00f3 de forma Buits (1):\u2002\u2002\u2002\u2002\u2002, i ho represemtem amb una l\u00ednia doble. Quan no passa l'anterior, diem que participa de forma Buits (2):\u2002\u2002\u2002\u2002\u2002. </p> <p>MACROBUTTON DoFieldClick  [Puntuaci\u00f3 aconseguida] MACROBUTTON DoFieldClick  [Mostra/Amaga les respostes] Habilita el javascript</p> <p></p>"},{"location":"BD-T02_Model_E-R/autoavaluaci/#eleccio-multiple_1","title":"Elecci\u00f3 m\u00faltiple","text":""},{"location":"BD-T02_Model_E-R/autoavaluaci/#questio_2","title":"Q\u00fcesti\u00f3","text":"<p>Si volem guardar informaci\u00f3 sobre llibres i autors, sembla clar que tindrem les entitats AUTOR i LLIBRE, i una relaci\u00f3 entre elles. Com ser\u00e0 aquesta relaci\u00f3? </p>"},{"location":"BD-T02_Model_E-R/autoavaluaci/#pista_2","title":"Pista","text":"<p>Recorda que has de comptar: </p> <p>Per a un autor determinat, quants llibres pot escriure? </p> <p>Per a un llibre determinat: quants autors pot tenir? </p>"},{"location":"BD-T02_Model_E-R/autoavaluaci/#respostes_2","title":"Respostes","text":"<p>Opci\u00f3 1</p> <p>1:1 </p> <p>Opci\u00f3 2</p> <p>1:N </p> <p>Opci\u00f3 3</p> <p>M:N </p> <p>Opci\u00f3 4</p> <p>N:1 (en el sentit com est\u00e0 formulat: AUTOR LLIBRE) </p>"},{"location":"BD-T02_Model_E-R/autoavaluaci/#realimentacio_4","title":"Realimentaci\u00f3","text":"<p>Incorrecte </p> <p>Incorrecte </p> <p>Correcte !</p> <p>Incorrecte </p>"},{"location":"BD-T02_Model_E-R/autoavaluaci/#solucio_2","title":"Soluci\u00f3","text":"<ol> <li>Incorrecte (Realimentaci\u00f3)</li> <li>Incorrecte (Realimentaci\u00f3)</li> <li>Opci\u00f3 correcta (Realimentaci\u00f3)</li> <li>Incorrecte (Realimentaci\u00f3)</li> </ol>"},{"location":"BD-T02_Model_E-R/autoavaluaci/#unes-quantes-preguntes-tipus-test","title":"Unes quantes preguntes tipus test","text":""},{"location":"BD-T02_Model_E-R/autoavaluaci/#questio_3","title":"Q\u00fcesti\u00f3","text":"<p>1.- Quan un atribut d'una detrminada entitat pot agafar m\u00e9s d'un valor per a una ocurr\u00e8ncia de l'entitat, direm que l'atribut \u00e9s: </p>"},{"location":"BD-T02_Model_E-R/autoavaluaci/#respostes_3","title":"Respostes","text":"<p>Opci\u00f3 1</p> <p>multivalorat </p> <p>Opci\u00f3 2</p> <p>multivaluat </p> <p>Opci\u00f3 3</p> <p>multiplicat </p> <p>Opci\u00f3 4</p> <p>cap de les anteriors </p>"},{"location":"BD-T02_Model_E-R/autoavaluaci/#questio_4","title":"Q\u00fcesti\u00f3","text":"<p>2.- Quan una entitat dep\u00e9n d'una altra entitat, \u00e9s a dir no pot existir sense l'altra, diem que es tracta d'una entitat : </p>"},{"location":"BD-T02_Model_E-R/autoavaluaci/#respostes_4","title":"Respostes","text":"<p>Opci\u00f3 1</p> <p>d\u00e8bil </p> <p>Opci\u00f3 2</p> <p>forta </p> <p>Opci\u00f3 3</p> <p>senzilla </p> <p>Opci\u00f3 4</p> <p>complexa </p>"},{"location":"BD-T02_Model_E-R/autoavaluaci/#questio_5","title":"Q\u00fcesti\u00f3","text":"<p>3.- En un esquema Entitat-Relaci\u00f3 en el qual arrepleguem informaci\u00f3 geogr\u00e0fica, es consideren les entitats COMARCA i MUNICIPI. Hi haur\u00e0 una relaci\u00f3 entre elles? </p>"},{"location":"BD-T02_Model_E-R/autoavaluaci/#respostes_5","title":"Respostes","text":"<p>Opci\u00f3 1</p> <p>S\u00ed, de tipus 1:1 </p> <p>Opci\u00f3 2</p> <p>S\u00ed, de tipus 1:N </p> <p>Opci\u00f3 3</p> <p>S\u00ed, de tipus M:N </p> <p>Opci\u00f3 4</p> <p>No </p>"},{"location":"BD-T02_Model_E-R/autoavaluaci/#questio_6","title":"Q\u00fcesti\u00f3","text":"<p>4.- Una relaci\u00f3, pot tenir atributs? </p>"},{"location":"BD-T02_Model_E-R/autoavaluaci/#respostes_6","title":"Respostes","text":"<p>Opci\u00f3 1</p> <p>S\u00ed </p> <p>Opci\u00f3 2</p> <p>No </p>"},{"location":"BD-T02_Model_E-R/autoavaluaci/#questio_7","title":"Q\u00fcesti\u00f3","text":"<p>5.- Amb el concepte de participaci\u00f3 total o parcial, es pot aconseguir la mateixa informaci\u00f3 (els mateixos resultats) que amb la cardinalitat m\u00ednima 1 o 0. </p>"},{"location":"BD-T02_Model_E-R/autoavaluaci/#respostes_7","title":"Respostes","text":"<p>Opci\u00f3 1</p> <p>S\u00ed </p> <p>Opci\u00f3 2</p> <p>No </p>"},{"location":"BD-T02_Model_E-R/autoavaluaci/#questio_8","title":"Q\u00fcesti\u00f3","text":"<p>6.- El valor d'un atribut que \u00e9s la clau principal de l'entitat , es pot repetir? \u00e9s a dir, poden haver dues ocurr\u00e8ncies amb el mateix valor? </p>"},{"location":"BD-T02_Model_E-R/autoavaluaci/#respostes_8","title":"Respostes","text":"<p>Opci\u00f3 1</p> <p>S\u00ed </p> <p>Opci\u00f3 2</p> <p>No </p> <p>Opci\u00f3 3</p> <p>Dep\u00e9n del tipus d'entitat </p> <p>Opci\u00f3 4</p> <p>Dep\u00e9n del domini de l'atribut: per a alguns s\u00ed i per a uns altres no </p> <p>MACROBUTTON DoFieldClick  [ENVIA RESPOSTES] Habilita el javascript</p> <p>\u00ab Anterior</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T02_Model_E-R/exercicis/","title":"Exercicis","text":""},{"location":"BD-T02_Model_E-R/exercicis/#exercici-1","title":"Exercici 1","text":"<p>Intentar traure les entitats i atributs corresponents a una cooperativa de vi, amb els seg\u00fcents requisits</p> <ul> <li>En la cooperativa hi ha una s\u00e8rie de socis dels quals ens interessa el nom, adre\u00e7a, ciutat, codi postal, DNI, ... </li> <li>Hi ha unes classes de vi que t\u00e9 la cooperativa. D'aquestes classes de vi volem tenir una descripci\u00f3, el preu de venda, la categoria, la proced\u00e8ncia i l'any de collita. </li> <li>Els socis retiren de la cooperativa distintes quantitats. Se'ls fa un val on ha de constar la data i la quantitat retirada.</li> </ul> <p>Inteteu fer-lo sobre paper, sense por de fer-lo malament.</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T02_Model_E-R/exercicis0/","title":"Exercicis","text":"<p>Bases de Dades</p> <p></p>"},{"location":"BD-T02_Model_E-R/exercicis0/#exercici-1-bis","title":"Exercici 1 bis","text":"<p>Intenta traure les relacions amb la cardinalitat de l'exercici 1 </p> <p></p>"},{"location":"BD-T02_Model_E-R/exercicis0/#exercici-2","title":"Exercici 2","text":"<p>Dissenyar un esquema E/R que arreplegue informaci\u00f3 sobre municipis, vivendes i persones. Cada persona nom\u00e9s pot habitar una vivenda i residir en un municipi, per\u00f2 pot ser propiet\u00e0ria de m\u00e9s d'una vivenda. Evidentment, una vivenda pot tenir m\u00e9s d'un propietari. Ens interessa tamb\u00e9 la relaci\u00f3 de les persones amb el seus caps de fam\u00edlia (pot tenir m\u00e9s d'un cap de fam\u00edlia)</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T02_Model_E-R/exercicis1/","title":"Exercicis","text":""},{"location":"BD-T02_Model_E-R/exercicis1/#exercici-3","title":"Exercici 3","text":"<p>Dissenyar un esquema E/R que arreplegue informaci\u00f3 sobre una universitat. Es considera que: </p> <ul> <li> <p>Els departaments (com per exemple el Departament de Llenguatges i Sistemes Inform\u00e0tics) poden estar en una \u00fanica facultat o ser interfacultatius, agrupant en aquest cas c\u00e0tedres que pertanyen a facultats distintes.</p> </li> <li> <p>Una c\u00e0tedra (per exemple la de Bases de Dades) pertany a un \u00fanic departament.</p> </li> <li> <p>Una c\u00e0tedra est\u00e0 en una \u00fanica facultat.</p> </li> <li> <p>Un professor est\u00e0 sempre assignat a un \u00fanic departament i adscrit a una o m\u00e9s d'una c\u00e0tedra. Pot canviar de c\u00e0tedra per\u00f2 no de departament. Ens interessa la data en qu\u00e8 un professor \u00e9s adscrit a una c\u00e0tedra.</p> </li> <li> <p>Existeixen \u00e0rees de coneixement (com per exemple l'\u00e0rea d'Inform\u00e0tica, que inclou els departaments de Llenguatges i Sistemes Inform\u00e0tics i de Enginyeria i Ci\u00e8ncia dels Computadors) i tot departament tindr\u00e0 una \u00fanica \u00e0rea de coneixement.</p> </li> </ul> <p></p>"},{"location":"BD-T02_Model_E-R/exercicis1/#exercici-4","title":"Exercici 4","text":"<p>L'an\u00e0lisi de requisits d'una determinada xarxa banc\u00e0ria \u00e9s el seg\u00fcent:</p> <ul> <li>De cada banc ens interessa el nom i l'adre\u00e7a de la seu social. Hi ha un codi distint per a cada entitat banc\u00e0ria.</li> <li>Cada banc t\u00e9 distintes sucursal, que s'identifiquen internament per un codi.</li> <li>Cada sucursal t\u00e9 assignats una s\u00e8rie de comptes corrents, que s'identifiquen internament per un codi. Un compte pot pert\u00e0nyer a un o m\u00e9s d'un client. \u00c9s possible que cada client puga fer operacions distintes amb els comptes. Aix\u00ed podria ser que, encara que dos clients siguen titulars d'un mateix compte, nom\u00e9s un tinga facultat per tancar-lo.</li> <li>Cada client, que s'identifica pel seu DNI, pot tenir m\u00e9s d'un compte, i evidentment privilegis distints en cadascun d'ells.</li> <li>Cada compte pot tenir domiciliacions associades a ell.</li> <li>Les sucursals poden atorgar pr\u00e9stecs als clients, que no estaran associats als comptes. Cada pr\u00e9stec s'atorga a nom d'un \u00fanic client, i a un client se li pot atorgar m\u00e9s d'un pr\u00e9stec.</li> </ul> <p></p>"},{"location":"BD-T02_Model_E-R/exercicis1/#exercici-5","title":"Exercici 5","text":"<p>Es vol mantenir informaci\u00f3 sobre una biblioteca, on podem tenir de cada llibre m\u00e9s d'un exemplar, que a m\u00e9s es poden prestar, i que tamb\u00e9 ens interessa un hist\u00f2ric de pr\u00e9stecs. L'an\u00e0lisi de requeriments seria el seg\u00fcent:</p> <ul> <li>Cada llibre (amb un determinat t\u00edtol, ISBN, idioma, n\u00famero d'edici\u00f3 i data d'edici\u00f3) tracta nom\u00e9s d'un tema, est\u00e0 editat per una \u00fanica editorial, escrit per un o m\u00e9s autors, i disposarem d'uns quants exemplars. Dels exemplars sempre tindrem el n\u00famero de registre, que l'identifica un\u00edvocament.</li> <li>Els pr\u00e9stecs s\u00f3n dels exemplars dels llibres, que s\u00f3n les materialitzacions dels llibres. Un exemplar es pot prestar a un \u00fanic lector (del qual tindrem Dni, Nom, Adre\u00e7a i Tel\u00e8fon), i ens interessa la data en la qual s'ha prestat. Un lector pot tenir m\u00e9s d'un llibre prestat.</li> <li>A banda del pr\u00e9stec actual, voldrem saber en el passat a qui s'ha prestat. Per tant en l'hist\u00f2ric de pr\u00e9stecs cada exemplar s'haur\u00e0 prestat a molts lectors, i per a poder dur el seguiment ens interessa la data de pr\u00e9stec i la de tornada.</li> </ul> <p></p>"},{"location":"BD-T02_Model_E-R/exercicis1/#exercici-6","title":"Exercici 6","text":"<p>Realitzeu l'esquema E/R que arreplegue informaci\u00f3 d'una associaci\u00f3 d'afeccionats a les papallones, que volen guardar informaci\u00f3 respecte a exemplars capturats b\u00e9 per a la seua observaci\u00f3, b\u00e9 per a ser inclosos en una col\u00b7lecci\u00f3: </p> <ul> <li> <p>Com en qualsevol ordre natural, un exemplar de papallona pertany a una esp\u00e8cie \u00fanica. Una esp\u00e8cie pertany a un g\u00e8nere \u00fanic, i un g\u00e8nere a una fam\u00edlia natural \u00fanica.</p> </li> <li> <p>Cada esp\u00e8cie de papallona t\u00e9 un nom cient\u00edfic \u00fanic, encara que el seu nom com\u00fa, que dep\u00e8n de la comarca on s'ha agafat, tamb\u00e9 ens interessa.</p> </li> <li> <p>Ja siga per a l'observaci\u00f3 o per a formar part d'una col\u00b7lecci\u00f3, primer s'ha de capturar l'exemplar de papallona. Aquesta captura la realitza una \u00fanica persona, i voldrem saber tamb\u00e9 en quin lloc (comarca) s'ha capturat. Si l'exemplar \u00e9s destinat a l'observaci\u00f3 voldrem saber la durada de l'observaci\u00f3.</p> </li> <li> <p>Una determinada persona nom\u00e9s pot ser propiet\u00e0ria d'una col\u00b7lecci\u00f3, per\u00f2 els exemplars d'aquesta col\u00b7lecci\u00f3 poden haver estat capturats per altres persones.</p> </li> <li> <p>Es vol mantenir informaci\u00f3 de les fam\u00edlies, g\u00e8neres i esp\u00e8cies de papallones encara que no s'hagen capturat exemplars dels mateixos.</p> </li> <li> <p>Una papallona nom\u00e9s pot pert\u00e0nyer a una col\u00b7lecci\u00f3, i una col\u00b7lecci\u00f3 est\u00e0 formada almenys per un exemplar. Tota papallona que pertany a una col\u00b7lecci\u00f3 tindr\u00e0 un determinat valor. </p> </li> </ul> <p></p>"},{"location":"BD-T02_Model_E-R/exercicis1/#exercici-7","title":"Exercici 7","text":"<p>Una empresa de l\u00ednies ferrovi\u00e0ries vol que se li dissenye una Base de Dades per a la seua gesti\u00f3. Aquesta \u00e9s l'an\u00e0lisi de requeriments:</p> <ul> <li>La companyia necessita controlar els trens, els seus treballadors i els viatges realitzats.\u00a0</li> <li>Dels treballadors es vol guardar el seu codi i nom. Per als conductors, a m\u00e9s a m\u00e9s, ens interessa el n\u00famero d'hores que han realitzat.</li> <li>Tots els treballadors tenen una estaci\u00f3 base a la qual pertanyen i de les estacions es vol tenir el nom, la localitat i el tel\u00e8fon.</li> <li>Els trens tenen un codi que els identifica, un tipus (rodalies, grans l\u00ednies,\u2026) i una estaci\u00f3 on se li realitzen les revisions de manteniment.</li> <li>Un trajecte ser\u00e0 un tipus de viatge que es realitza regularment. Tindr\u00e0 una estaci\u00f3 origen i una estaci\u00f3 de dest\u00ed.</li> <li>Un viatge de tren \u00e9s una materialitzaci\u00f3 d'un trajecte, i utilitzar\u00e0 \u00f2bviament un tren, una data, una hora d'eixida i un o uns conductors que el porten (no ens interessen els altres possibles treballadors que van en els viatges). Tots els viatges s'identifiquen per un codi, per exemple, el viatge corresponent al trajecte Castell\u00f3 - Val\u00e8ncia de les 12:10 d'un determinat dia \u00e9s el viatge 4356.</li> </ul> <p>Opcionalment, podem posar totes les estacions a les quals s'arriba en un trajecte (substituint l'estaci\u00f3 origen i dest\u00ed). Haurem de saber si l'estaci\u00f3 \u00e9s origen, dest\u00ed o de pas.</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T02_Model_E-R/informaci_addicional/","title":"Informaci\u00f3 addicional","text":"<p>Bases de Dades</p> <ul> <li>Tema 2: MODEL ENTITAT-RELACI\u00d3</li> <li>Objectius i coneixements previs</li> <li>1. Introducci\u00f3</li> <li>2. Exemple</li> <li>3. Les Entitats del Model E/R </li> <li>3.1 Entitats <ul> <li>Aplicaci\u00f3 a l'exemple</li> </ul> </li> <li>3.2 Atributs <ul> <li>Aplicaci\u00f3 a l'exemple</li> </ul> </li> <li>3.3 Dominis</li> <li>Exercicis</li> <li>4. Les Relacions del Model E/R </li> <li>4.1 Relaci\u00f3 <ul> <li>Aplicaci\u00f3 a l'exemple</li> </ul> </li> <li>4.2 Atributs de Relaci\u00f3 <ul> <li>Aplicaci\u00f3 a l'exemple</li> </ul> </li> <li>4.3 Tipus de Relaci\u00f3 o Cardinalitat <ul> <li>Aplicaci\u00f3 a l'exemple</li> </ul> </li> <li>Exercicis</li> <li>5. Relacions de grau major que dos</li> <li>6. Model E/R Est\u00e8s </li> <li>6.1 Cardinalitat m\u00e0xima i m\u00ednima. Participaci\u00f3 total. <ul> <li>Aplicaci\u00f3 a l'exemple</li> </ul> </li> <li>6.2 Entitats d\u00e8bils</li> <li>6.3 Generalitzaci\u00f3 i her\u00e8ncia <ul> <li>Aplicaci\u00f3 a l'exemple</li> </ul> </li> <li>7. Restriccions externes</li> <li>Exercicis</li> <li>Informaci\u00f3 addicional</li> <li>Auto-avaluaci\u00f3</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T02_Model_E-R/informaci_addicional/#informacio-addicional","title":"Informaci\u00f3 addicional","text":"<p>A mode de bibliografia us pose 4 p\u00e0gines que tracten sobre el Model Entitat-Relaci\u00f3, per si voleu completar amb m\u00e9s opcions, m\u00e9s opinions.</p> <ul> <li>Apunts de IOC, elaborats per Carlos Manuel Mart\u00ed Hern\u00e1ndez</li> <li>Article de Wikip\u00e8dia</li> <li>Apunts de la Univeritat Jaume I de Castell\u00f3 , elaborats per Reyes Grangel.</li> <li>Tutorial de programacion.net</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T02_Model_E-R/objectius_i_coneixements_previs/","title":"Objectius i coneixements previs","text":"<p>Bases de Dades</p> <ul> <li>Tema 2: MODEL ENTITAT-RELACI\u00d3</li> <li>Objectius i coneixements previs</li> <li>1. Introducci\u00f3</li> <li>2. Exemple</li> <li>3. Les Entitats del Model E/R </li> <li>3.1 Entitats <ul> <li>Aplicaci\u00f3 a l'exemple</li> </ul> </li> <li>3.2 Atributs <ul> <li>Aplicaci\u00f3 a l'exemple</li> </ul> </li> <li>3.3 Dominis</li> <li>Exercicis</li> <li>4. Les Relacions del Model E/R </li> <li>4.1 Relaci\u00f3 <ul> <li>Aplicaci\u00f3 a l'exemple</li> </ul> </li> <li>4.2 Atributs de Relaci\u00f3 <ul> <li>Aplicaci\u00f3 a l'exemple</li> </ul> </li> <li>4.3 Tipus de Relaci\u00f3 o Cardinalitat <ul> <li>Aplicaci\u00f3 a l'exemple</li> </ul> </li> <li>Exercicis</li> <li>5. Relacions de grau major que dos</li> <li>6. Model E/R Est\u00e8s </li> <li>6.1 Cardinalitat m\u00e0xima i m\u00ednima. Participaci\u00f3 total. <ul> <li>Aplicaci\u00f3 a l'exemple</li> </ul> </li> <li>6.2 Entitats d\u00e8bils</li> <li>6.3 Generalitzaci\u00f3 i her\u00e8ncia <ul> <li>Aplicaci\u00f3 a l'exemple</li> </ul> </li> <li>7. Restriccions externes</li> <li>Exercicis</li> <li>Informaci\u00f3 addicional</li> <li>Auto-avaluaci\u00f3</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T02_Model_E-R/objectius_i_coneixements_previs/#objectius-i-coneixements-previs","title":"Objectius i coneixements previs","text":""},{"location":"BD-T02_Model_E-R/objectius_i_coneixements_previs/#objectius","title":"Objectius","text":"<ol> <li> <p>A partir d'una situaci\u00f3 real, saber extraure la informaci\u00f3 \u00fatil i necess\u00e0ria.</p> </li> <li> <p>Saber distingir les entitats, amb els seus atributs i clau principal.</p> </li> <li> <p>Veure les relacions entre les entitats. No confondre un atribut amb una relaci\u00f3.</p> </li> <li> <p>Averiguar la cardinalitat de les relacions, aix\u00ed com la participaci\u00f3 total o parcial.</p> </li> <li> <p>Identificar les possibles entitats d\u00e8bils i veure de qui depenen.</p> </li> <li> <p>Identificar les possibles especialitzacions i de quin tipus s\u00f3n.</p> </li> <li> <p>En definitiva, saber confeccionar correctament l'esquema E-R a partir d'una situaci\u00f3 real. </p> </li> </ol> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T03_Model_Relacional/","title":"Index","text":"<p>Bases de Dades</p> <ul> <li>Tema 3: Model Relacional</li> <li>Objectius i coneixements previs</li> <li>1. Introducci\u00f3</li> <li>2. Estructura del Model Relacional</li> <li>3. Restriccions </li> <li>3.1 Restriccions inherents</li> <li>3.2 Restriccions d'usuari <ul> <li>3.2.1 Restricci\u00f3 de domini</li> <li>3.2.2 Restricci\u00f3 de clau principal</li> <li>3.2.3 Restricci\u00f3 d'unicitat</li> <li>3.2.4 Restricci\u00f3 de valor no nul</li> <li>3.2.5 Integritat referencial</li> <li>3.2.6 Restriccions externes</li> </ul> </li> <li>4. Tranformaci\u00f3 del M. E/R al M. Relacional </li> <li>4.1 Entitats</li> <li>4.2 Relacions 1:N</li> <li>4.3 Relacions M:N</li> <li>4.4 Relacions 1:1</li> <li>4.5 Entitats d\u00e8bils</li> <li>4.6 Resum depend\u00e8ncies</li> <li>4.7 Relacions tern\u00e0ries</li> <li>4.8 Especialitzacions</li> <li>4.9 Restriccions externes</li> <li>4.10 Exemple</li> <li>5. Llenguatges relacionals</li> <li>6. Exercicis</li> <li>Auto-avaluaci\u00f3</li> </ul> <p>Seg\u00fcent \u00bb</p>"},{"location":"BD-T03_Model_Relacional/#tema-3-model-relacional","title":"Tema 3: Model Relacional","text":"<p>Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T03_Model_Relacional/1_introducci/","title":"1 introducci","text":"<p>Bases de Dades</p> <ul> <li>Tema 3: Model Relacional</li> <li>Objectius i coneixements previs</li> <li>1. Introducci\u00f3</li> <li>2. Estructura del Model Relacional</li> <li>3. Restriccions </li> <li>3.1 Restriccions inherents</li> <li>3.2 Restriccions d'usuari <ul> <li>3.2.1 Restricci\u00f3 de domini</li> <li>3.2.2 Restricci\u00f3 de clau principal</li> <li>3.2.3 Restricci\u00f3 d'unicitat</li> <li>3.2.4 Restricci\u00f3 de valor no nul</li> <li>3.2.5 Integritat referencial</li> <li>3.2.6 Restriccions externes</li> </ul> </li> <li>4. Tranformaci\u00f3 del M. E/R al M. Relacional </li> <li>4.1 Entitats</li> <li>4.2 Relacions 1:N</li> <li>4.3 Relacions M:N</li> <li>4.4 Relacions 1:1</li> <li>4.5 Entitats d\u00e8bils</li> <li>4.6 Resum depend\u00e8ncies</li> <li>4.7 Relacions tern\u00e0ries</li> <li>4.8 Especialitzacions</li> <li>4.9 Restriccions externes</li> <li>4.10 Exemple</li> <li>5. Llenguatges relacionals</li> <li>6. Exercicis</li> <li>Auto-avaluaci\u00f3</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T03_Model_Relacional/1_introducci/#1-introduccio","title":"1. Introducci\u00f3","text":"<p>En 1970 E.F. Codd va introduir la teoria matem\u00e0tica de les relacions en el camp dels SGBD. El model de dades que va crear s'anomena MODEL RELACIONAL, amb una base matem\u00e0tica (la de les relacions) molt s\u00f2lida, on les dades s'estructuren en forma de relacions (taules) que s\u00f3n estructures de dades simples i uniformes, que permeten una f\u00e0cil comprensi\u00f3. </p> <p>En el moment en qu\u00e8 va sorgir, els models que funcionaven eren el jer\u00e0rquic i el de xarxa (tamb\u00e9 anomenat Codasyl, pel grup de treball que va estandaritzar-lo). Com a model els va superar perqu\u00e8, com va dir el mateix Codd, \"proporciona un mitj\u00e0 per a descriure les dades amb la seua estructura \u00fanicament, sense haver de superposar cap estructura addicional per a representar-se en la m\u00e0quina\" (\u00e9s a dir, sense punters ni hist\u00f2ries). </p> <p>A pesar d'aix\u00f2 va estar uns anys en compet\u00e8ncia amb aquells, amb molta gent molt reticent, ja que els productes comercials que eixien no eren suficientment eficients, potser perqu\u00e8 la tecnologia de l'\u00e8poca no ho permetia. A partir dels anys 80, quan la tecnologia ho va permetre, van eixir productes millors, com per exemple l'ORACLE (1979), i aleshores la seua implantaci\u00f3 va ser aplastant. </p> <p>Els objectius del Model Relacional s\u00f3n: </p> <ul> <li> <p>Fidelitat, per a originar esquemes que representen fidelment la informaci\u00f3 (els objectes i relacions entre ells) que existeix en el domini del problema.</p> </li> <li> <p>Independ\u00e8ncia f\u00edsica[1]1, per a que la manera de guardar les dades no influesca en la seua manipulaci\u00f3 l\u00f2gica, i aix\u00ed els usuaris que accedeixen a aquestes dades no hagen de modificar els seus programes per canvis en l'emmagatzematge f\u00edsic.</p> </li> <li> <p>Independ\u00e8ncia l\u00f2gica, per a que les vistes externes no es vegen afectades per canvis en l'esquema conceptual de la B.D.</p> </li> <li> <p>Flexibilitat, per a poder oferir les dades a cada usuari de la forma m\u00e9s adequada a la seua aplicaci\u00f3.</p> </li> <li> <p>Uniformitat, les estructures l\u00f2giques de les dades presenten un aspecte simple i uniforme (les taules), cosa que facilita la concepci\u00f3 i manipulaci\u00f3 per part dels usuaris.</p> </li> <li> <p>Senzillesa, les caracter\u00edstiques anteriors, unides a uns llenguatges d'usuari senzills, fan que el M. Relacional siga f\u00e0cil d'entendre i d'utilitzar per l'usuari final.</p> </li> </ul> <p>Recordeu que les relacions del Model Relacional s\u00f3n les taules. No s\u00f3n el mateix que les relacions del Model Entitat-Relaci\u00f3. Per evitar confusions intentarem anomenar-les sempre taules. -----</p> <p>[1] En realitat tant la independ\u00e8ncia f\u00edsica com l\u00f2gica les han intentades aconseguir tots els models. </p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p> <ol> <li></li> </ol>"},{"location":"BD-T03_Model_Relacional/2_estructura_del_model_relacional/","title":"2 estructura del model relacional","text":"<p>Bases de Dades</p> <ul> <li>Tema 3: Model Relacional</li> <li>Objectius i coneixements previs</li> <li>1. Introducci\u00f3</li> <li>2. Estructura del Model Relacional</li> <li>3. Restriccions </li> <li>3.1 Restriccions inherents</li> <li>3.2 Restriccions d'usuari <ul> <li>3.2.1 Restricci\u00f3 de domini</li> <li>3.2.2 Restricci\u00f3 de clau principal</li> <li>3.2.3 Restricci\u00f3 d'unicitat</li> <li>3.2.4 Restricci\u00f3 de valor no nul</li> <li>3.2.5 Integritat referencial</li> <li>3.2.6 Restriccions externes</li> </ul> </li> <li>4. Tranformaci\u00f3 del M. E/R al M. Relacional </li> <li>4.1 Entitats</li> <li>4.2 Relacions 1:N</li> <li>4.3 Relacions M:N</li> <li>4.4 Relacions 1:1</li> <li>4.5 Entitats d\u00e8bils</li> <li>4.6 Resum depend\u00e8ncies</li> <li>4.7 Relacions tern\u00e0ries</li> <li>4.8 Especialitzacions</li> <li>4.9 Restriccions externes</li> <li>4.10 Exemple</li> <li>5. Llenguatges relacionals</li> <li>6. Exercicis</li> <li>Auto-avaluaci\u00f3</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T03_Model_Relacional/2_estructura_del_model_relacional/#2-estructura-del-model-relacional","title":"2. Estructura del Model Relacional","text":"<p>L'element b\u00e0sic del Model Relacional \u00e9s la RELACI\u00d3, que ser\u00e0 una taula o matriu bidimensional amb unes caracter\u00edstiques o restriccions que comentarem m\u00e9s avant.</p> <p></p> <p>Normalment una relaci\u00f3 t\u00e9 un NOM (p.e. Empleat) encara que ocasionalment no en tindr\u00e0, per exemple una taula que siga el resultat d'una consulta poc freq\u00fcent.</p> <p>Les FILES, on tenim la informaci\u00f3 de les ocurr\u00e8ncies, dels individus, tamb\u00e9 s'anomenen TUPLES (de vegades per similitud amb fitxers tamb\u00e9 s'anomenen REGISTRES).</p> <p>Les COLUMNES, que seran caracter\u00edstiques que ens interessen dels individus i que en cada tupla agafa un valor, les anomenarem tamb\u00e9 ATRIBUTS (o CAMPS).</p> <p>El conjunt de valors possibles que pot agafar un atribut determinat s'anomena DOMINI. M\u00e9s avant veurem que els dominis s'intentaran definir el millor possible, per prevenir errors.</p> <p>L'ESQUEMA o ESTRUCTURA DE LA RELACI\u00d3 \u00e9s la definici\u00f3 de la relaci\u00f3, \u00e9s a dir, atributs que t\u00e9, dominis d'aquestos i restriccions que podrem definir, que veurem en la seg\u00fcent pregunta.</p> <p>L'ESTAT DE LA RELACI\u00d3 \u00e9s la informaci\u00f3 que cont\u00e9 en un determinat moment. Normalment l'estat variar\u00e0 cont\u00ednuament al llarg del temps, b\u00e9 perqu\u00e8 s'afegeixen noves tuples (augmenta la cardinalitat), b\u00e9 perqu\u00e8 es modifica el valor d'algun atribut en alguna tupla. En canvi l'esquema dif\u00edcilment canviar\u00e0.</p> <p>Una CLAU CANDIDATA \u00e9s un atribut o conjunt d'atributs que identifiquen un\u00edvocament cada tupla de la relaci\u00f3. En l'exemple podrien ser claus candidates Dni, Nom, fins i tot ens podr\u00edem plantejar combinacions, com el conjunt (Nom, Data_n), ja que sembla impossible que dues persones de l'empresa es diguen igual i damunt hagen nascut el mateix dia. De entre totes les claus candidates en triarem una, que ser\u00e0 la CLAU PRINCIPAL o CLAU PRIM\u00c0RIA, i servir\u00e0 per a identificar de forma efectiva en el Model cadascuna de les tuples.</p> <p>Podria donar-se el cas que un atribut no agafe cap valor per a una tupla determinada, per exemple, un empleat que no tinga tel\u00e8fon. Aleshores li donarem el VALOR NUL.</p> <p>Per \u00faltim, les relacions o taules poden ser PERMANENTS o TEMPORALS. Les primeres es guarden. Les segones, normalment resultat d'una consulta ocasional, no.</p> <p>Representarem la taula amb el nom de la taula en maj\u00fascules seguit, entre par\u00e8ntesis, en min\u00fascules i separats per comes, pels noms dels camps, amb la clau principal subratllada. Tamb\u00e9 \u00e9s convenient fugir dels car\u00e0cters especials (vocals accentuades, \u00e7, \u00f1, guionet, ...) per no tenir problemes quan anem a implementar-la en un SGBD determinat (Access, Oracle, PostgreSQL, ...). Per a una millor lectura intentarem posar sempre la clau principal al principi, el o els primers camps.</p> <p>EMPLEAT (dni, nom, adreca, telefon, sou, data_n)</p> <p>Tamb\u00e9 podem utilitzar una forma alternativa de representar-la, amb un requadre que agafa tota la taula, dalt el nom de la taula, i baix cadascun dels camps, posant la clau principal en negreta o subratllada.</p> <p></p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T03_Model_Relacional/31_restriccions_inherents/","title":"31 restriccions inherents","text":"<p>Bases de Dades</p> <ul> <li>Tema 3: Model Relacional</li> <li>Objectius i coneixements previs</li> <li>1. Introducci\u00f3</li> <li>2. Estructura del Model Relacional</li> <li>3. Restriccions </li> <li>3.1 Restriccions inherents</li> <li>3.2 Restriccions d'usuari <ul> <li>3.2.1 Restricci\u00f3 de domini</li> <li>3.2.2 Restricci\u00f3 de clau principal</li> <li>3.2.3 Restricci\u00f3 d'unicitat</li> <li>3.2.4 Restricci\u00f3 de valor no nul</li> <li>3.2.5 Integritat referencial</li> <li>3.2.6 Restriccions externes</li> </ul> </li> <li>4. Tranformaci\u00f3 del M. E/R al M. Relacional </li> <li>4.1 Entitats</li> <li>4.2 Relacions 1:N</li> <li>4.3 Relacions M:N</li> <li>4.4 Relacions 1:1</li> <li>4.5 Entitats d\u00e8bils</li> <li>4.6 Resum depend\u00e8ncies</li> <li>4.7 Relacions tern\u00e0ries</li> <li>4.8 Especialitzacions</li> <li>4.9 Restriccions externes</li> <li>4.10 Exemple</li> <li>5. Llenguatges relacionals</li> <li>6. Exercicis</li> <li>Auto-avaluaci\u00f3</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T03_Model_Relacional/31_restriccions_inherents/#31-restriccions-inherents","title":"3.1 Restriccions inherents","text":"<p>Com hem dit s\u00f3n les que imposa el propi model. Algunes s\u00f3n caracter\u00edstiques que han d'acomplir les relacions. Per tant no qualsevol taula matem\u00e0tica \u00e9s una relaci\u00f3. Podem considerar les seg\u00fcents: </p> <ul> <li>Valors at\u00f2mics: cada valor de la taula, \u00e9s a dir, qualsevol valor de qualsevol atribut de qualsevol tupla ha de ser simple, no divisible. Per tant no valen atributs compostos o repetitius.</li> </ul> <p>Aix\u00ed, si considerem Nom en la relaci\u00f3 Empleat com a nom de pila m\u00e9s cognoms, no ser\u00e0 divisible (no podr\u00e9 agafar posteriorment el nom de pila per una banda i els cognoms per una altra; si ho volguera fer, s'haurien de definir els atributs simples Cognom1, Cognom2 i Nom). </p> <p>Tampoc valen valors repetitius, per exemple un vector de 12 entrades. Queden per tant descartats els atributs multivaluats. </p> <ul> <li> <p>Tuples distintes: no poden haver dues tuples iguals. Aix\u00f2 \u00e9s una difer\u00e8ncia respecte a les taules matem\u00e0tiques on s\u00ed que es poden duplicar files. </p> </li> <li> <p>L'ordre de les tuples no \u00e9s significatiu. </p> </li> <li> <p>L'ordre dels atributs no \u00e9s significatiu. </p> </li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T03_Model_Relacional/321_restricci_de_domini/","title":"321 restricci de domini","text":"<p>Bases de Dades</p> <ul> <li>Tema 3: Model Relacional</li> <li>Objectius i coneixements previs</li> <li>1. Introducci\u00f3</li> <li>2. Estructura del Model Relacional</li> <li>3. Restriccions </li> <li>3.1 Restriccions inherents</li> <li>3.2 Restriccions d'usuari <ul> <li>3.2.1 Restricci\u00f3 de domini</li> <li>3.2.2 Restricci\u00f3 de clau principal</li> <li>3.2.3 Restricci\u00f3 d'unicitat</li> <li>3.2.4 Restricci\u00f3 de valor no nul</li> <li>3.2.5 Integritat referencial</li> <li>3.2.6 Restriccions externes</li> </ul> </li> <li>4. Tranformaci\u00f3 del M. E/R al M. Relacional </li> <li>4.1 Entitats</li> <li>4.2 Relacions 1:N</li> <li>4.3 Relacions M:N</li> <li>4.4 Relacions 1:1</li> <li>4.5 Entitats d\u00e8bils</li> <li>4.6 Resum depend\u00e8ncies</li> <li>4.7 Relacions tern\u00e0ries</li> <li>4.8 Especialitzacions</li> <li>4.9 Restriccions externes</li> <li>4.10 Exemple</li> <li>5. Llenguatges relacionals</li> <li>6. Exercicis</li> <li>Auto-avaluaci\u00f3</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T03_Model_Relacional/321_restricci_de_domini/#321-restriccio-de-domini","title":"3.2.1 Restricci\u00f3 de domini","text":"<p>El valor d'un atribut ha de ser un valor at\u00f2mic del domini. Definint clarament el domini ens assegurem (dins del possible) que l'atribut no puga agafar valors incorrectes.</p> <p>Per una banda, el domini ser\u00e0 d'un tipus determinat, triat d'una gamma prou extensa: enter curt, enter, enter llarg, real, doble precisi\u00f3, car\u00e0cter, cadena de car\u00e0cters (text), data, hora, ...</p> <p>Aix\u00ed, per exemple, definint el Sou com un n\u00famero real impedirem que per error puga agafar el valor 2.R00'00, o que la data de naixement, amb domini de tipus data, siga 15-14-1958 o 31-2-1958.</p> <p>Tamb\u00e9 es podran definir dominis que estiguen en un determinat interval (nota d'un examen: 0-10) o d'un tipus enumerat (nota d'avaluaci\u00f3: MD, IN, SUF, BE, NOT, EXC).</p> <p>Es poden definir regles de verificaci\u00f3 o validaci\u00f3 (CHECK) que ens ajuden a perfilar molt b\u00e9 el domini. Aquest seria un exemple d'exigir que el treballador tinga de 18 a 65 anys. La sintaxi \u00e9s inventada, nom\u00e9s per a entendre-ho, amb una hipot\u00e8tica funci\u00f3 que trau l'any, i una altra que ens d\u00f3na la data d'avui.</p> <p>CHECK ( Any(avui - data_n) &gt;= 18) and (Any(avui - data_n) &lt; 65) )</p> <p>Nota</p> <p>En Access la regla de validaci\u00f3 seria:</p> <p>AgregFecha(\"aaaa\";18;[data_n])&lt;=Ahora() Y AgregFecha(\"aaaa\";65;[data_n])&gt;=Ahora()</p> <p>on es veu que la f\u00f3rmula \u00e9s afegir 18 anys a la data de naixement i comprovar que no supera la data d'avui; i afegir 65 anys a la data de naixement i comprovar que s\u00ed supera la data d'avui.</p> <p>Per exemple, Empleat podria quedar:</p> <p>EMPLEAT (dni:car\u00e0cter(10), nom:car\u00e0cter(30), adreca:car\u00e0cter(30), telefon:enter(9), sou:num\u00e8ric(6,2), data_n:data)</p> <p>amb la regla de validaci\u00f3:</p> <p>CHECK Sou &gt; 0</p> <p>a banda de la mencionada anteriorment.</p> <p>Si utilitzem la manera de representar alternativa, ho tindr\u00edem aix\u00ed:</p> <p></p> <p>La seg\u00fcent imatge mostra com es faria en Access la primera regla de validaci\u00f3, aplicada al camp data_n</p> <p></p> <p>Nota</p> <p>En Base de LibreOffice resulta m\u00e9s complicada la creaci\u00f3 de regles de validaci\u00f3. S'ha de fer per mig de Macros associades a formularis</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T03_Model_Relacional/322_restricci_de_clau_principal/","title":"322 restricci de clau principal","text":"<p>Bases de Dades</p> <ul> <li>Tema 3: Model Relacional</li> <li>Objectius i coneixements previs</li> <li>1. Introducci\u00f3</li> <li>2. Estructura del Model Relacional</li> <li>3. Restriccions </li> <li>3.1 Restriccions inherents</li> <li>3.2 Restriccions d'usuari <ul> <li>3.2.1 Restricci\u00f3 de domini</li> <li>3.2.2 Restricci\u00f3 de clau principal</li> <li>3.2.3 Restricci\u00f3 d'unicitat</li> <li>3.2.4 Restricci\u00f3 de valor no nul</li> <li>3.2.5 Integritat referencial</li> <li>3.2.6 Restriccions externes</li> </ul> </li> <li>4. Tranformaci\u00f3 del M. E/R al M. Relacional </li> <li>4.1 Entitats</li> <li>4.2 Relacions 1:N</li> <li>4.3 Relacions M:N</li> <li>4.4 Relacions 1:1</li> <li>4.5 Entitats d\u00e8bils</li> <li>4.6 Resum depend\u00e8ncies</li> <li>4.7 Relacions tern\u00e0ries</li> <li>4.8 Especialitzacions</li> <li>4.9 Restriccions externes</li> <li>4.10 Exemple</li> <li>5. Llenguatges relacionals</li> <li>6. Exercicis</li> <li>Auto-avaluaci\u00f3</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T03_Model_Relacional/322_restricci_de_clau_principal/#322-restriccio-de-clau-principal","title":"3.2.2 Restricci\u00f3 de clau principal","text":"<p>Permet declarar un atribut o un conjunt d'atributs com a CLAU PRINCIPAL o PRIM\u00c0RIA (Primary Key). Aquesta clau principal servir\u00e0 per a identificar un\u00edvocament cadascuna de les files.</p> <p>Com a conseq\u00fc\u00e8ncia de l'anterior, la clau principal no podr\u00e0 agafar valors nuls ni repetits, ja que en cas contrari no es podria assegurar la identificaci\u00f3 de les files.</p> <p>Aquestes \u00faltimes caracter\u00edstiques tamb\u00e9 les podran tenir altres atributs, cosa que d\u00f3na lloc als tipus de restricci\u00f3 que es veuen en els seg\u00fcents punts.</p> <p>Nosaltres sempre definirem una clau principal. Si tenim claus candidates, triem una d'elles com a clau principal. Si no en tenim, ens inventem un camp que servir\u00e0 de clau principal (b\u00e9 un n\u00famero o b\u00e9 un codi alfanum\u00e8ric).</p> <p>No \u00e9s convenient que la clau principal estiga formada per un n\u00famero excessiu de camps. Podr\u00edem dir que 3 \u00e9s el m\u00e0xim. Si la clau candidata est\u00e0 formada per m\u00e9s de 3 camps, o b\u00e9 triem una altra clau candidata, o b\u00e9 ens inventem una.</p> <p>En Access es marca la clau principal amb una figura d'una clau. En la figura es veu com fer que el camp dni siga la clau principal de la taula EMPLEAT:</p> <p></p> <p>En\u00a0LibreOffice Base es fa de la mateixa manera:</p> <p></p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T03_Model_Relacional/323_restricci_dunicitat/","title":"323 restricci dunicitat","text":"<p>Bases de Dades</p> <ul> <li>Tema 3: Model Relacional</li> <li>Objectius i coneixements previs</li> <li>1. Introducci\u00f3</li> <li>2. Estructura del Model Relacional</li> <li>3. Restriccions </li> <li>3.1 Restriccions inherents</li> <li>3.2 Restriccions d'usuari <ul> <li>3.2.1 Restricci\u00f3 de domini</li> <li>3.2.2 Restricci\u00f3 de clau principal</li> <li>3.2.3 Restricci\u00f3 d'unicitat</li> <li>3.2.4 Restricci\u00f3 de valor no nul</li> <li>3.2.5 Integritat referencial</li> <li>3.2.6 Restriccions externes</li> </ul> </li> <li>4. Tranformaci\u00f3 del M. E/R al M. Relacional </li> <li>4.1 Entitats</li> <li>4.2 Relacions 1:N</li> <li>4.3 Relacions M:N</li> <li>4.4 Relacions 1:1</li> <li>4.5 Entitats d\u00e8bils</li> <li>4.6 Resum depend\u00e8ncies</li> <li>4.7 Relacions tern\u00e0ries</li> <li>4.8 Especialitzacions</li> <li>4.9 Restriccions externes</li> <li>4.10 Exemple</li> <li>5. Llenguatges relacionals</li> <li>6. Exercicis</li> <li>Auto-avaluaci\u00f3</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T03_Model_Relacional/323_restricci_dunicitat/#323-restriccio-dunicitat","title":"3.2.3 Restricci\u00f3 d'unicitat","text":"<p>Si en un camp, o en un conjunt de camps, definim la restricci\u00f3 d'unicitat (UNIQUE), aix\u00f2 obliga a que, en cas de tenir valors el camp, no es puguen repetir. Suposem, per exemple, els alumnes d'un Institut. La clau no pot ser el DNI, ja que alguns alumnes no en tindran, per\u00f2 en cas de tenir-ne, \u00e9s clar que no es podr\u00e0 repetir.</p> <p>Representarem que un camp \u00e9s \u00fanic, posant \u00fanic entre par\u00e8ntesi baix del camp. Per exemple, si considerem que el camp nom de la taula EMPLEAT ha de ser \u00fanic, ho representarem aix\u00ed:</p> <p>EMPLEAT (dni, nom, adreca, telefon, sou, data_n) </p> <p>(\u00fanic)</p> <p>En Access la restricci\u00f3 d'unicitat (UNIQUE) es defineix posant en l'apartat Indexado el valor S\u00ed (sin duplicados). En la figura es mostra com fer que el camp nom de la taula EMPLEAT** siga \u00fanic.</p> <p></p> <p>En\u00a0Base\u00a0de\u00a0LibreOffice es fa creant un \u00edndex, en el s\u00edmbol\u00a0 \u00a0</p> <p>Haurem crear un nou \u00edndex, el camp pel qual volem l'\u00edndex, l'ordre que ens interessa (normalment ascendent) i deixar activa la casella \u00danic</p> <p></p> <p>En aquesta imatge es veu com pel fet d'haver creat la clau principal, ja s'havia creat un \u00edndex, en la imatge\u00a0SYS_IDX_46. No es tracta de modificar aquest, sin\u00f3 crear-ne un nou.</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T03_Model_Relacional/324_restricci_de_valor_no_nul/","title":"324 restricci de valor no nul","text":"<p>Bases de Dades</p> <ul> <li>Tema 3: Model Relacional</li> <li>Objectius i coneixements previs</li> <li>1. Introducci\u00f3</li> <li>2. Estructura del Model Relacional</li> <li>3. Restriccions </li> <li>3.1 Restriccions inherents</li> <li>3.2 Restriccions d'usuari <ul> <li>3.2.1 Restricci\u00f3 de domini</li> <li>3.2.2 Restricci\u00f3 de clau principal</li> <li>3.2.3 Restricci\u00f3 d'unicitat</li> <li>3.2.4 Restricci\u00f3 de valor no nul</li> <li>3.2.5 Integritat referencial</li> <li>3.2.6 Restriccions externes</li> </ul> </li> <li>4. Tranformaci\u00f3 del M. E/R al M. Relacional </li> <li>4.1 Entitats</li> <li>4.2 Relacions 1:N</li> <li>4.3 Relacions M:N</li> <li>4.4 Relacions 1:1</li> <li>4.5 Entitats d\u00e8bils</li> <li>4.6 Resum depend\u00e8ncies</li> <li>4.7 Relacions tern\u00e0ries</li> <li>4.8 Especialitzacions</li> <li>4.9 Restriccions externes</li> <li>4.10 Exemple</li> <li>5. Llenguatges relacionals</li> <li>6. Exercicis</li> <li>Auto-avaluaci\u00f3</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T03_Model_Relacional/324_restricci_de_valor_no_nul/#324-restriccio-de-valor-no-nul","title":"3.2.4 Restricci\u00f3 de valor no nul","text":"<p>Obliga a que el camp agafe sempre un valor. Per exemple, el camp Nom \u00e9s un bon candidat a ser no nul.</p> <p>Ho representarem posant no nul entre par\u00e8ntesi baix del camp.</p> <p>EMPLEAT (dni, nom, adreca, telefon, sou, data_n) </p> <p>(no nul)</p> <p>P er mig de la representaci\u00f3 alternativa, podem marcar amb un punt negre davant del camp no nul.</p> <p></p> <p>En Access la manera de posar un camp com a NOT NULL ser\u00e0 posar en l'apartat Requerido el valor S\u00ed</p> <p></p> <p>En\u00a0Base de\u00a0LibreOffice haurem de posar\u00a0S\u00ed a l'apartat\u00a0Es necessita una entrada</p> <p></p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T03_Model_Relacional/325_integritat_referencial/","title":"325 integritat referencial","text":"<p>Bases de Dades</p> <ul> <li>Tema 3: Model Relacional</li> <li>Objectius i coneixements previs</li> <li>1. Introducci\u00f3</li> <li>2. Estructura del Model Relacional</li> <li>3. Restriccions </li> <li>3.1 Restriccions inherents</li> <li>3.2 Restriccions d'usuari <ul> <li>3.2.1 Restricci\u00f3 de domini</li> <li>3.2.2 Restricci\u00f3 de clau principal</li> <li>3.2.3 Restricci\u00f3 d'unicitat</li> <li>3.2.4 Restricci\u00f3 de valor no nul</li> <li>3.2.5 Integritat referencial</li> <li>3.2.6 Restriccions externes</li> </ul> </li> <li>4. Tranformaci\u00f3 del M. E/R al M. Relacional </li> <li>4.1 Entitats</li> <li>4.2 Relacions 1:N</li> <li>4.3 Relacions M:N</li> <li>4.4 Relacions 1:1</li> <li>4.5 Entitats d\u00e8bils</li> <li>4.6 Resum depend\u00e8ncies</li> <li>4.7 Relacions tern\u00e0ries</li> <li>4.8 Especialitzacions</li> <li>4.9 Restriccions externes</li> <li>4.10 Exemple</li> <li>5. Llenguatges relacionals</li> <li>6. Exercicis</li> <li>Auto-avaluaci\u00f3</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T03_Model_Relacional/325_integritat_referencial/#325-integritat-referencial","title":"3.2.5 Integritat referencial","text":"<p>Per poder explicar-la ens recolzarem en un exemple.</p> <p></p> <p>que es podria traduir en les seg\u00fcents taules:</p> <p></p> <p>Si en una taula R2 (Familiar) tenim un atribut (dni_emp) que \u00e9s clau (prim\u00e0ria o candidata) d'una altra taula R1 (Empleat --&gt; dni), tot valor d'aquell atribut ha de concordar amb un valor de la clau de R1 (no he de poder posar en familiar un Dni que no el tinga cap empleat de l'empresa). L'atribut en R2 \u00e9s, per tant, una CLAU EXTERNA.</p> <p>Ha de ser impossible posar en Familiar el Dni 18.754.321, perqu\u00e8 no est\u00e0 en l'altra, i per tant no \u00e9s un Dni d'un empleat de l'empresa.</p> <p>Les relacions R1 i R2 no tenen per qu\u00e8 ser distintes, poden ser la mateixa. Aix\u00ed, si considerem el supervisor, aquest ha de ser de l'empresa:</p> <p></p> <p>Supervisor \u00e9s una clau externa, per\u00f2 de la mateixa taula. No tots els SGBD permeten una clau externa reflexiva.</p> <p>Una manera de representar les claus externes en l'esquema \u00e9s la seg\u00fcent:</p> <p></p> <p>On el doble subratllat indica una clau externa (que en aquest exemple, a m\u00e9s, forma part de la clau principal, per\u00f2 que no sempre ser\u00e0 aix\u00ed) que \u201capunta\u201d a la clau principal de l\u2019altra taula.</p> <p>L'altra manera, utilitzant la forma alternativa, ser\u00e0 aquesta, que tamb\u00e9 \u00e9s molt f\u00e0cil d'entendre:</p> <p></p> <p>A\u00e7\u00f2 ens impedir\u00e0 que introdu\u00efm valors no correctes, no existents. \u00bfPer\u00f2 qu\u00e8 passar\u00e0 si esborrem un empleat, o si modifiquem el seu Dni? \u00bfQu\u00e8 fem amb els familiars? Doncs en principi tres podrien ser les accions a realitzar, i depenent de la situaci\u00f3 particular triar\u00edem una o una altra:</p> <ul> <li>No deixar esborrar-lo o modificar-lo (NO ACTION).   Segurament no \u00e9s l'opci\u00f3 m\u00e9s adequada per a l'exemple dels empleats i els familiars. Per\u00f2 pensem en un altre exemple, amb clients i factures. Qu\u00e8 fem si s'esborra un client i tenim factures d'ell? Segurament el m\u00e9s adequat ser\u00e0 no fer l'acci\u00f3, \u00e9s a dir, no esborrar el client (sobretot si les factures estan pendentes de cobrar ...).</li> <li>Esborrar tamb\u00e9 els familiars o canviar-los en cascada (CASCADE).   Segurament aquesta \u00e9s l'opci\u00f3 m\u00e9s adequada per al cas dels familiars, que s'eliminen autom\u00e0ticament.</li> <li>Canviar el valor de la clau externa al valor nul o un valor predeterminat (SET NULL o SET DEFAULT).   En l'exemple dels familiars no t\u00e9 sentit ja que no ens interessen els familiars dels que no s\u00f3n de l'empresa. Per\u00f2 imaginem, per exemple, un prove\u00efdor que ens ha proporcionat uns articles. Pel fet de no treballar ja amb el prove\u00efdor i llevar-lo de la B.D. no haur\u00edem d'eliminar els articles. Seria suficient amb donar un valor nul al prove\u00efdor d'aquest article[1]1.</li> </ul> <p>Hi ha SGBD que fins i tot permeten accions distintes per al cas d'esborrament i d'actualitzaci\u00f3 de la clau, com per exemple Access.</p> <p>En Access les restriccions d'integritat (claus externes) es defineixen amb les relacions entre taules. El seg\u00fcent v\u00eddeo mostra com crear la clau externa de Familiar cap a Empleat, i es pot observar com la manera de representar-lo \u00e9s molt pareguda a la forma alternativa que estem utilitzant.</p> <p>Hem d'assegurar-nos sobretot que la tala principal est\u00e0 a l'esquerra en a imatge 5, i que l'altra est\u00e0 a la dreta marcada com \"taula relacionada\".</p> <p>I aquest seria la manera de fer-ho en Base de LibreOffice, totalment paral\u00b7lela, per\u00f2 millor arrastrar al rev\u00e8s, de\u00a0la relacionada a la principal</p> <p>[1] Observem, per\u00f2, que aquesta clau externa hauria d'admetre valors nuls. Si no ho permet, millor un valor per defecte.</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p> <ol> <li></li> </ol>"},{"location":"BD-T03_Model_Relacional/326_restriccions_externes/","title":"326 restriccions externes","text":"<p>Bases de Dades</p> <ul> <li>Tema 3: Model Relacional</li> <li>Objectius i coneixements previs</li> <li>1. Introducci\u00f3</li> <li>2. Estructura del Model Relacional</li> <li>3. Restriccions </li> <li>3.1 Restriccions inherents</li> <li>3.2 Restriccions d'usuari <ul> <li>3.2.1 Restricci\u00f3 de domini</li> <li>3.2.2 Restricci\u00f3 de clau principal</li> <li>3.2.3 Restricci\u00f3 d'unicitat</li> <li>3.2.4 Restricci\u00f3 de valor no nul</li> <li>3.2.5 Integritat referencial</li> <li>3.2.6 Restriccions externes</li> </ul> </li> <li>4. Tranformaci\u00f3 del M. E/R al M. Relacional </li> <li>4.1 Entitats</li> <li>4.2 Relacions 1:N</li> <li>4.3 Relacions M:N</li> <li>4.4 Relacions 1:1</li> <li>4.5 Entitats d\u00e8bils</li> <li>4.6 Resum depend\u00e8ncies</li> <li>4.7 Relacions tern\u00e0ries</li> <li>4.8 Especialitzacions</li> <li>4.9 Restriccions externes</li> <li>4.10 Exemple</li> <li>5. Llenguatges relacionals</li> <li>6. Exercicis</li> <li>Auto-avaluaci\u00f3</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T03_Model_Relacional/326_restriccions_externes/#326-restriccions-externes","title":"3.2.6 Restriccions externes","text":"<p>A pesar de totes les restriccions anteriors, que normalment els SGBDR compleixen, hi ha d'altres que no es poden expressar per mig del Model Relacional, i per tant no poden complir directament els SGBDR. S\u00f3n les restriccions externes a l'esquema relacional. Estaran normalment les heretades dels Model E/R, i hi hauran algunes m\u00e9s que s\u00ed que es podien expressar en el Model E/R, per\u00f2 no en el Model Relacional. Les veurem en la pregunta 4.</p> <p>Els SGBDR m\u00e9s avan\u00e7ats, m\u00e9s potents, permetran un tractament a aquestes restriccions externes, consistents en executar un procediment definit per l'usuari despr\u00e9s d'una actualitzaci\u00f3. S\u00f3n els Disparadors (TRIGGERS). Aquest concepte \u00e9s molt potent, ja que d\u00f3na una resposta procedimental on es pot fer qualsevol cosa.</p> <p>En Access dues seran les ferramentes per a fer a\u00e7\u00f2, les Macros i procediments en Visual Basic.</p> <p>En\u00a0Base de\u00a0Libreoffice nom\u00e9s tenim les\u00a0Macros, per\u00f2 no seran com les d'Access amb accions predeterminades, sin\u00f3 directament procediments en\u00a0LibreOffice Basic</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T03_Model_Relacional/32_restriccions_dusuari/","title":"32 restriccions dusuari","text":"<p>Bases de Dades</p> <ul> <li>Tema 3: Model Relacional</li> <li>Objectius i coneixements previs</li> <li>1. Introducci\u00f3</li> <li>2. Estructura del Model Relacional</li> <li>3. Restriccions </li> <li>3.1 Restriccions inherents</li> <li>3.2 Restriccions d'usuari <ul> <li>3.2.1 Restricci\u00f3 de domini</li> <li>3.2.2 Restricci\u00f3 de clau principal</li> <li>3.2.3 Restricci\u00f3 d'unicitat</li> <li>3.2.4 Restricci\u00f3 de valor no nul</li> <li>3.2.5 Integritat referencial</li> <li>3.2.6 Restriccions externes</li> </ul> </li> <li>4. Tranformaci\u00f3 del M. E/R al M. Relacional </li> <li>4.1 Entitats</li> <li>4.2 Relacions 1:N</li> <li>4.3 Relacions M:N</li> <li>4.4 Relacions 1:1</li> <li>4.5 Entitats d\u00e8bils</li> <li>4.6 Resum depend\u00e8ncies</li> <li>4.7 Relacions tern\u00e0ries</li> <li>4.8 Especialitzacions</li> <li>4.9 Restriccions externes</li> <li>4.10 Exemple</li> <li>5. Llenguatges relacionals</li> <li>6. Exercicis</li> <li>Auto-avaluaci\u00f3</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T03_Model_Relacional/32_restriccions_dusuari/#32-restriccions-dusuari","title":"3.2 Restriccions d'usuari","text":"<p>Les anteriors s\u00f3n condicions, imposicions que ens d\u00f3na el mateix model. </p> <p>Les realment interessants per a nosaltres s\u00f3n les restriccions d'usuari, tamb\u00e9 anomenades restriccions sem\u00e0ntiques, ja que seran condicions que podrem posar nosaltres per a que l'esquema de la B.D. explique el millor possible la realitat, i evitar possibles errors en les dades. </p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T03_Model_Relacional/3_restriccions/","title":"3 restriccions","text":"<p>Bases de Dades</p> <ul> <li>Tema 3: Model Relacional</li> <li>Objectius i coneixements previs</li> <li>1. Introducci\u00f3</li> <li>2. Estructura del Model Relacional</li> <li>3. Restriccions </li> <li>3.1 Restriccions inherents</li> <li>3.2 Restriccions d'usuari <ul> <li>3.2.1 Restricci\u00f3 de domini</li> <li>3.2.2 Restricci\u00f3 de clau principal</li> <li>3.2.3 Restricci\u00f3 d'unicitat</li> <li>3.2.4 Restricci\u00f3 de valor no nul</li> <li>3.2.5 Integritat referencial</li> <li>3.2.6 Restriccions externes</li> </ul> </li> <li>4. Tranformaci\u00f3 del M. E/R al M. Relacional </li> <li>4.1 Entitats</li> <li>4.2 Relacions 1:N</li> <li>4.3 Relacions M:N</li> <li>4.4 Relacions 1:1</li> <li>4.5 Entitats d\u00e8bils</li> <li>4.6 Resum depend\u00e8ncies</li> <li>4.7 Relacions tern\u00e0ries</li> <li>4.8 Especialitzacions</li> <li>4.9 Restriccions externes</li> <li>4.10 Exemple</li> <li>5. Llenguatges relacionals</li> <li>6. Exercicis</li> <li>Auto-avaluaci\u00f3</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T03_Model_Relacional/3_restriccions/#3-restriccions","title":"3. Restriccions","text":"<p>Igual que en altres models de dades, en el Model Relacional existeixen restriccions, \u00e9s a dir, estructures o ocurr\u00e8ncies no permeses. </p> <p>Aquestes restriccions poden ser de dos tipus fonamentals: restriccions inherents, que s\u00f3n imposades pel propi model, i restriccions d'usuari (tamb\u00e9 anomenades restriccions sem\u00e0ntiques) en les quals \u00e9s l'usuari qui prohibeix, perqu\u00e8 el model li ho permet, determinades circumst\u00e0ncies per a poder definir millor la Base de Dades. </p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T03_Model_Relacional/410_exemple/","title":"410 exemple","text":"<p>Bases de Dades</p> <ul> <li>Tema 3: Model Relacional</li> <li>Objectius i coneixements previs</li> <li>1. Introducci\u00f3</li> <li>2. Estructura del Model Relacional</li> <li>3. Restriccions </li> <li>3.1 Restriccions inherents</li> <li>3.2 Restriccions d'usuari <ul> <li>3.2.1 Restricci\u00f3 de domini</li> <li>3.2.2 Restricci\u00f3 de clau principal</li> <li>3.2.3 Restricci\u00f3 d'unicitat</li> <li>3.2.4 Restricci\u00f3 de valor no nul</li> <li>3.2.5 Integritat referencial</li> <li>3.2.6 Restriccions externes</li> </ul> </li> <li>4. Tranformaci\u00f3 del M. E/R al M. Relacional </li> <li>4.1 Entitats</li> <li>4.2 Relacions 1:N</li> <li>4.3 Relacions M:N</li> <li>4.4 Relacions 1:1</li> <li>4.5 Entitats d\u00e8bils</li> <li>4.6 Resum depend\u00e8ncies</li> <li>4.7 Relacions tern\u00e0ries</li> <li>4.8 Especialitzacions</li> <li>4.9 Restriccions externes</li> <li>4.10 Exemple</li> <li>5. Llenguatges relacionals</li> <li>6. Exercicis</li> <li>Auto-avaluaci\u00f3</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T03_Model_Relacional/410_exemple/#410-exemple","title":"4.10 Exemple","text":"<p>Anem a veure com quedar\u00e0 definitivament la traducci\u00f3 de l'exemple que estem arrastrant des del Tema 2. Donarem 2 versions, tenint en compte o no l'especialitzaci\u00f3 de que el treballador pot ser cap o treballador normal.</p> <p>Sense tenir en compte l'especialitzaci\u00f3 tindrem aquesta soluci\u00f3:</p> <p></p> <p>aquest v\u00eddeo explica tot el proc\u00e9s pas a pas:</p> <p>I aquesta seria la forma alternativa de representar-lo:</p> <p></p> <p>I tenint en compte l'especialitzaci\u00f3:</p> <p></p> <p>que aquest v\u00eddeo explica en els punts diferents a l'anterior soluci\u00f3</p> <p>I ac\u00ed tindr\u00edem la representaci\u00f3 alternativa:</p> <p></p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T03_Model_Relacional/41_entitats/","title":"41 entitats","text":"<p>Bases de Dades</p> <ul> <li>Tema 3: Model Relacional</li> <li>Objectius i coneixements previs</li> <li>1. Introducci\u00f3</li> <li>2. Estructura del Model Relacional</li> <li>3. Restriccions </li> <li>3.1 Restriccions inherents</li> <li>3.2 Restriccions d'usuari <ul> <li>3.2.1 Restricci\u00f3 de domini</li> <li>3.2.2 Restricci\u00f3 de clau principal</li> <li>3.2.3 Restricci\u00f3 d'unicitat</li> <li>3.2.4 Restricci\u00f3 de valor no nul</li> <li>3.2.5 Integritat referencial</li> <li>3.2.6 Restriccions externes</li> </ul> </li> <li>4. Tranformaci\u00f3 del M. E/R al M. Relacional </li> <li>4.1 Entitats</li> <li>4.2 Relacions 1:N</li> <li>4.3 Relacions M:N</li> <li>4.4 Relacions 1:1</li> <li>4.5 Entitats d\u00e8bils</li> <li>4.6 Resum depend\u00e8ncies</li> <li>4.7 Relacions tern\u00e0ries</li> <li>4.8 Especialitzacions</li> <li>4.9 Restriccions externes</li> <li>4.10 Exemple</li> <li>5. Llenguatges relacionals</li> <li>6. Exercicis</li> <li>Auto-avaluaci\u00f3</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T03_Model_Relacional/41_entitats/#41-entitats","title":"4.1 Entitats","text":"<p>Tota entitat es transformar\u00e0 en una taula, amb tots els seus atributs, que es consideraran com a simples. Es tria un (o un conjunt) com a clau principal, i el denotarem subratllant-lo. Les entitats d\u00e8bils les estudiarem millor m\u00e9s endavant. </p> <p>En el nostre exemple, com ten\u00edem 4 entitats, ens eixiran de moment 4 taules: </p> <p></p> <p>No considerarem els atributs multivaluats. Els tractarem i solucionarem en el tema seg\u00fcent, el de Normalitzaci\u00f3. </p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T03_Model_Relacional/42_relacions_1n/","title":"42 relacions 1n","text":"<p>Bases de Dades</p> <ul> <li>Tema 3: Model Relacional</li> <li>Objectius i coneixements previs</li> <li>1. Introducci\u00f3</li> <li>2. Estructura del Model Relacional</li> <li>3. Restriccions </li> <li>3.1 Restriccions inherents</li> <li>3.2 Restriccions d'usuari <ul> <li>3.2.1 Restricci\u00f3 de domini</li> <li>3.2.2 Restricci\u00f3 de clau principal</li> <li>3.2.3 Restricci\u00f3 d'unicitat</li> <li>3.2.4 Restricci\u00f3 de valor no nul</li> <li>3.2.5 Integritat referencial</li> <li>3.2.6 Restriccions externes</li> </ul> </li> <li>4. Tranformaci\u00f3 del M. E/R al M. Relacional </li> <li>4.1 Entitats</li> <li>4.2 Relacions 1:N</li> <li>4.3 Relacions M:N</li> <li>4.4 Relacions 1:1</li> <li>4.5 Entitats d\u00e8bils</li> <li>4.6 Resum depend\u00e8ncies</li> <li>4.7 Relacions tern\u00e0ries</li> <li>4.8 Especialitzacions</li> <li>4.9 Restriccions externes</li> <li>4.10 Exemple</li> <li>5. Llenguatges relacionals</li> <li>6. Exercicis</li> <li>Auto-avaluaci\u00f3</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T03_Model_Relacional/42_relacions_1n/#42-relacions-1n","title":"4.2 Relacions 1:N","text":"<p>Per cada relaci\u00f3 1:N entre les entitats A i B, on A \u00e9s la que participa amb grau de cardinalitat 1, i B amb grau N, s'inclou un nou camp en B (del mateix tipus que la clau principal de A) que a m\u00e9s ser\u00e0 clau externa que apuntar\u00e0 a A, m\u00e9s concretament a la clau principal de A. En moltes ocasions al camp nou de B se li posa el mateix nom que a la clau principal de A, per\u00f2 no \u00e9s necessari, dep\u00e9n del gust de cadasc\u00fa.</p> <p>Tamb\u00e9 s'inclouran en B tots els possibles atributs de la relaci\u00f3.</p> <p>La seg\u00fcent animaci\u00f3 intenta explicar-ho millor:</p> <p>Si a m\u00e9s l'entitat que participa amb grau N ho fa de forma total (com en la figura de baix), la clau externa no pot ser nula (\u00e9s a dir sempre ha de tenir un valor).</p> <p></p> <p>En l'exemple nostre:</p> <ul> <li>Per la relaci\u00f3 Pertany (figura de dalt) inclourem l'atribut departament a Empleat, que a m\u00e9s haur\u00e0 de ser no nul.</li> <li>Per la relaci\u00f3 Controla inclourem l'atribut departament a Projecte (no nul).</li> <li>Per la relaci\u00f3 Supervisa inclourem l'atribut supervisor a Empleat (\u00e9s reflexiva), per\u00f2 aquest s\u00ed que pot ser nul. Encara que semble estrany, un camp pot ser clau externa que apunta a la clau principal de la mateixa taula.</li> <li>Per la relaci\u00f3 T\u00e9 entre empleat i familiar, inclourem en FAMILIAR l'atribut dni_e, per\u00f2 com que Familiar \u00e9s d\u00e8bil la veurem millor un poc m\u00e9s endavant.</li> </ul> <p></p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T03_Model_Relacional/43_relacions_mn/","title":"43 relacions mn","text":"<p>Bases de Dades</p> <ul> <li>Tema 3: Model Relacional</li> <li>Objectius i coneixements previs</li> <li>1. Introducci\u00f3</li> <li>2. Estructura del Model Relacional</li> <li>3. Restriccions </li> <li>3.1 Restriccions inherents</li> <li>3.2 Restriccions d'usuari <ul> <li>3.2.1 Restricci\u00f3 de domini</li> <li>3.2.2 Restricci\u00f3 de clau principal</li> <li>3.2.3 Restricci\u00f3 d'unicitat</li> <li>3.2.4 Restricci\u00f3 de valor no nul</li> <li>3.2.5 Integritat referencial</li> <li>3.2.6 Restriccions externes</li> </ul> </li> <li>4. Tranformaci\u00f3 del M. E/R al M. Relacional </li> <li>4.1 Entitats</li> <li>4.2 Relacions 1:N</li> <li>4.3 Relacions M:N</li> <li>4.4 Relacions 1:1</li> <li>4.5 Entitats d\u00e8bils</li> <li>4.6 Resum depend\u00e8ncies</li> <li>4.7 Relacions tern\u00e0ries</li> <li>4.8 Especialitzacions</li> <li>4.9 Restriccions externes</li> <li>4.10 Exemple</li> <li>5. Llenguatges relacionals</li> <li>6. Exercicis</li> <li>Auto-avaluaci\u00f3</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T03_Model_Relacional/43_relacions_mn/#43-relacions-mn","title":"4.3 Relacions M:N","text":"<p>Per cada relaci\u00f3 M:N construirem una nova taula on s'inclouran com a clau externa les claus principals de les dues entitats, i a m\u00e9s la seua combinaci\u00f3 constituir\u00e0 (o formar\u00e0 part de) la clau principal. Inclourem tamb\u00e9 els possibles atributs de la relaci\u00f3.</p> <p>En l'exemple:</p> <p></p> <p>Cada vegada que ens trobem amb una relaci\u00f3 M:N i la tradu\u00efm per una nova taula haurem de preguntar-nos si \u00e9s suficient amb la clau principal formada per les dues claus externes, o si fa falta afegir un altre camp. Hem de ser conscients que la clau principal no puga repetir-se, que hi haja 2 files amb la mateixa clau principal. Aix\u00ed, en l'exemple, ens haur\u00edem de fer la seg\u00fcent pregunta: pot un empleat treballar en el mateix projecte m\u00e9s d'una vegada? En aquest cas la contestaci\u00f3 \u00e9s negativa, i per tant \u00e9s suficient amb aquesta clau principal.</p> <p>Per\u00f2 suposem que la resposta \u00e9s que s\u00ed que pot treballar m\u00e9s d'una vegada al llarg del temps. En aquest cas seria una esp\u00e8cie d'hist\u00f2ric, on faria falta, a m\u00e9s, saber quan comen\u00e7a i quan acaba de treballar en un projecte un determinat treballador (serien atributs de la relaci\u00f3):</p> <p></p> <p>Aleshores, com no \u00e9s suficient amb la clau principal formada per les dues claus externes, inclourem un altre camp en la clau principal. Sembla que el m\u00e9s adequat seria Data_c (ja no es pot donar el cas que el mateix treballador treballe m\u00e9s d'una vegada en el mateix projecte, comen\u00e7ant el mateix dia)</p> <p></p> <p>Per\u00f2 per una altra banda, les claus principals molt llargues no s\u00f3n operatives, i encara que la traducci\u00f3 literal siga com hem dit, per motius pr\u00e0ctics podem canviar la clau principal. Considerarem que el nombre m\u00e0xim de camps en la clau principal \u00e9s de 3. 4 ja s\u00f3n massa, i aleshores buscarem una altra clau principal (un codi de treball, per exemple). Les claus externes continuarien sent-ho.</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T03_Model_Relacional/44_relacions_11/","title":"44 relacions 11","text":"<p>Bases de Dades</p> <ul> <li>Tema 3: Model Relacional</li> <li>Objectius i coneixements previs</li> <li>1. Introducci\u00f3</li> <li>2. Estructura del Model Relacional</li> <li>3. Restriccions </li> <li>3.1 Restriccions inherents</li> <li>3.2 Restriccions d'usuari <ul> <li>3.2.1 Restricci\u00f3 de domini</li> <li>3.2.2 Restricci\u00f3 de clau principal</li> <li>3.2.3 Restricci\u00f3 d'unicitat</li> <li>3.2.4 Restricci\u00f3 de valor no nul</li> <li>3.2.5 Integritat referencial</li> <li>3.2.6 Restriccions externes</li> </ul> </li> <li>4. Tranformaci\u00f3 del M. E/R al M. Relacional </li> <li>4.1 Entitats</li> <li>4.2 Relacions 1:N</li> <li>4.3 Relacions M:N</li> <li>4.4 Relacions 1:1</li> <li>4.5 Entitats d\u00e8bils</li> <li>4.6 Resum depend\u00e8ncies</li> <li>4.7 Relacions tern\u00e0ries</li> <li>4.8 Especialitzacions</li> <li>4.9 Restriccions externes</li> <li>4.10 Exemple</li> <li>5. Llenguatges relacionals</li> <li>6. Exercicis</li> <li>Auto-avaluaci\u00f3</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T03_Model_Relacional/44_relacions_11/#44-relacions-11","title":"4.4 Relacions 1:1","text":"<p>No hi ha una forma \u00fanica de traduir aquestes relacions. Tres seran les possibles traduccions, segons la participaci\u00f3 total o parcial de les entitats en la relaci\u00f3, i tamb\u00e9 segons el que ens diga el \"sentit com\u00fa\". </p> <ul> <li>Si de les dues entitats que entren la relaci\u00f3, A i B, una d'elles i nom\u00e9s una, participa de forma total, per exemple B, traduirem la relaci\u00f3 1:1 com una clau externa en la taula corresponent a l'entitat que participa de forma total (B). Podem obligar tamb\u00e9 a que aquest camp que ser\u00e0 clau externa siga no nul (ja que totes les ocurr\u00e8ncies de B entren en la relaci\u00f3). Tamb\u00e9 podem fer que aquest camp siga \u00fanic (no es podr\u00e0 repetir, ja que si es puguera repetir seria una relaci\u00f3 1:N). A m\u00e9s, inclourem en B** tots els possibles atributs de la relaci\u00f3. </li> </ul> <p>Per exemple, la relaci\u00f3 dirigeix, que \u00e9s 1:1 entre EMPLEAT i DEPARTAMENT: </p> <p> </p> <p>Com que l'entitat de la dreta participa de forma total, triarem DEPARTAMENT: </p> <p> </p> <p>Ho fem d'aquesta manera perqu\u00e8 tots els departaments tenen director, per\u00f2 no tots els empleats s\u00f3n directors. Si pos\u00e0rem la clau externa en la taula EMPLEAT (s'anomenaria per exemple dep_que_dirigeix) moltes vegades estaria buit, ja que relativament s\u00f3n pocs els empleats que dirigeixen un departament. </p> <p>Vegem un altre exemple de relaci\u00f3 1:1, el de les papallones. Ten\u00edem una relaci\u00f3 1:1 entre PERSONA i COL\u00b7LECCI\u00d3</p> <p> </p> <p>Triar\u00edem COL\u00b7LECCI\u00d3, ja que entra de forma plena o total en la relaci\u00f3. </p> <p> </p> <ul> <li>Si les dues entitats participen de forma total, es pot considerar tot (les dues entitats i la relaci\u00f3, amb els seus possibles atributs) com una sola taula. En la pr\u00e0ctica aix\u00f2 ser\u00e0 prou estrany, perqu\u00e8 ja ho haur\u00edem considerat una sola entitat. Per exemple, considerem que totes les persones que estudiem tenen una col\u00b7lecci\u00f3: </li> </ul> <p> </p> <p>Aleshores podr\u00edem considerar una \u00fanica taula, que continga les dades de la persona i de la seua col\u00b7lecci\u00f3: </p> <p> </p> <p>De tota manera, pot ser ens interesse (per separar clarament els dos tipus d'informaci\u00f3) dues taules. Aleshores podr\u00edem traduir-lo com en el primer punt, amb una clau externa (no nula) en una de les dues taules, i haur\u00edem de triar la taula que menys s'utilitze. </p> <ul> <li>Si les dues entitats participen de forma parcial, com que si posem una clau externa en una de les dues, moltes vegades tindr\u00e0 valor nul, podem traduir-la com una nova taula que marque la relaci\u00f3, on hi haur\u00e0 una tupla per cada relaci\u00f3 entre dues ocurr\u00e8ncies. Inclour\u00edem en la nova taula els possibles atributs de la relaci\u00f3. </li> </ul> <p>En l'exemple podria ser que les col\u00b7leccions pertanyen a una persona particular o a una instituci\u00f3 (no tenen propietari): </p> <p></p> <p>Quedaria: </p> <p></p> <p>Per\u00f2 com coment\u00e0vem al principi, haurem d'aplicar el sentit com\u00fa, ja que potser una de les dues podria participar de forma \"quasi\" total (per exemple, quasi totes les col\u00b7leccions s\u00f3n d'una persona). Aleshores podria ser millor traduir-lo com en el primer cas, posant la clau externa en la que participa de forma \"quasi\" total, ja que aquesta tindr\u00e0 relativament pocs valors nuls, i seria m\u00e9s cost\u00f3s mantenir una altra taula. Evidentment la clau externa s\u00ed que podria ser nula, en aquest cas. </p> <p>Resumint, una relaci\u00f3 1:1 quasi sempre la traduirem com una clau externa en la taula que participa en la relaci\u00f3 de forma total o quasi total (o la que previsiblement t\u00e9 m\u00e9s ocurr\u00e8ncies en la relaci\u00f3) </p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T03_Model_Relacional/45_entitats_dbils/","title":"45 entitats dbils","text":"<p>Bases de Dades</p> <ul> <li>Tema 3: Model Relacional</li> <li>Objectius i coneixements previs</li> <li>1. Introducci\u00f3</li> <li>2. Estructura del Model Relacional</li> <li>3. Restriccions </li> <li>3.1 Restriccions inherents</li> <li>3.2 Restriccions d'usuari <ul> <li>3.2.1 Restricci\u00f3 de domini</li> <li>3.2.2 Restricci\u00f3 de clau principal</li> <li>3.2.3 Restricci\u00f3 d'unicitat</li> <li>3.2.4 Restricci\u00f3 de valor no nul</li> <li>3.2.5 Integritat referencial</li> <li>3.2.6 Restriccions externes</li> </ul> </li> <li>4. Tranformaci\u00f3 del M. E/R al M. Relacional </li> <li>4.1 Entitats</li> <li>4.2 Relacions 1:N</li> <li>4.3 Relacions M:N</li> <li>4.4 Relacions 1:1</li> <li>4.5 Entitats d\u00e8bils</li> <li>4.6 Resum depend\u00e8ncies</li> <li>4.7 Relacions tern\u00e0ries</li> <li>4.8 Especialitzacions</li> <li>4.9 Restriccions externes</li> <li>4.10 Exemple</li> <li>5. Llenguatges relacionals</li> <li>6. Exercicis</li> <li>Auto-avaluaci\u00f3</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T03_Model_Relacional/45_entitats_dbils/#45-entitats-debils","title":"4.5 Entitats d\u00e8bils","text":"<p>Les entitats d\u00e8bils, com que com a m\u00ednim depenen d'una altra, podrem ser m\u00e9s restrictius que les altres. Una entitat sempre \u00e9s d\u00e8bil a trav\u00e9s, com a m\u00ednim, d'una relaci\u00f3 que la comunica amb l'entitat principal. A m\u00e9s participa de forma total (com que no pot existir sense l'altra, tota ocurr\u00e8ncia est\u00e0 en la relaci\u00f3).</p> <p>Per tant, tota entitat d\u00e8bil tindr\u00e0 una clau externa, que apunta a la principal i ser\u00e0 no nula. Per\u00f2 encara podem anar m\u00e9s enll\u00e0:</p> <ul> <li>Depend\u00e8ncia en exist\u00e8ncia: farem que la clau externa esborre i actualitze en cascada, ja que si deixa d'existir la principal no t\u00e9 sentit la d\u00e8bil.</li> <li>Depend\u00e8ncia en identificaci\u00f3: a m\u00e9s d'esborrar i actualitzar en cascada, la clau externa formar\u00e0 part de la clau principal.</li> </ul> <p>Si la relaci\u00f3 per la qual dep\u00e8n en identificaci\u00f3 \u00e9s 1:N, far\u00e0 falta un altre camp en la clau principal.</p> <p>Si \u00e9s 1:1, amb la clau externa \u00e9s suficient com a clau principal</p> <p>En nostre exemple quedar\u00e0 aix\u00ed:</p> <p></p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T03_Model_Relacional/46_resum_dependncies/","title":"46 resum dependncies","text":"<p>Bases de Dades</p> <ul> <li>Tema 3: Model Relacional</li> <li>Objectius i coneixements previs</li> <li>1. Introducci\u00f3</li> <li>2. Estructura del Model Relacional</li> <li>3. Restriccions </li> <li>3.1 Restriccions inherents</li> <li>3.2 Restriccions d'usuari <ul> <li>3.2.1 Restricci\u00f3 de domini</li> <li>3.2.2 Restricci\u00f3 de clau principal</li> <li>3.2.3 Restricci\u00f3 d'unicitat</li> <li>3.2.4 Restricci\u00f3 de valor no nul</li> <li>3.2.5 Integritat referencial</li> <li>3.2.6 Restriccions externes</li> </ul> </li> <li>4. Tranformaci\u00f3 del M. E/R al M. Relacional </li> <li>4.1 Entitats</li> <li>4.2 Relacions 1:N</li> <li>4.3 Relacions M:N</li> <li>4.4 Relacions 1:1</li> <li>4.5 Entitats d\u00e8bils</li> <li>4.6 Resum depend\u00e8ncies</li> <li>4.7 Relacions tern\u00e0ries</li> <li>4.8 Especialitzacions</li> <li>4.9 Restriccions externes</li> <li>4.10 Exemple</li> <li>5. Llenguatges relacionals</li> <li>6. Exercicis</li> <li>Auto-avaluaci\u00f3</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T03_Model_Relacional/46_resum_dependncies/#46-resum-dependencies","title":"4.6 Resum depend\u00e8ncies","text":"<p>Anem a fer un quadre resum amb distints graus de depend\u00e8ncia entre dues relacions i com es traduiria al Model Relacional: </p> <p></p> <p>Per una altra banda, si ens trobem una entitat d\u00e8bil que dep\u00e8n en identificaci\u00f3 a trav\u00e9s d'una relaci\u00f3 1:1, \u00e9s suficient amb la clau principal de A com a clau principal de B </p> <p></p> <p>Una altra q\u00fcesti\u00f3 que pot dur a confusi\u00f3 \u00e9s el cas de les claus externes formades per 2 camps. Ens basarem en l'exemple de sempre, en la taula FAMILIAR, ja que t\u00e9 una clau principal formada per 2 camps. Suposem que hi ha en el Model Entitat-Relaci\u00f3 una taula que dep\u00e8n d'ella, com podria ser comunicacions que se li han fet (cartes). Les entitats i la relaci\u00f3 entre elles podria ser aquesta: </p> <p></p> <p>Com que la relaci\u00f3 \u00e9s de tipus 1:N la traduirem per una clau externa en CARTES. I quina ser\u00e0 la clau externa? Com que la taula FAMILIAR t\u00e9 una clau principal formada per 2 camps, haurem de posar una clau externa formada per 2 camps. Alerta! no seran 2 claus externes, sin\u00f3 una clau externa formada per 2 camps. Com sempre, representarem la clau externa amb un doble subratllat, que ara agafar\u00e0 als 2 camps. </p> <p></p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T03_Model_Relacional/47_relacions_ternries/","title":"47 relacions ternries","text":"<p>Bases de Dades</p> <ul> <li>Tema 3: Model Relacional</li> <li>Objectius i coneixements previs</li> <li>1. Introducci\u00f3</li> <li>2. Estructura del Model Relacional</li> <li>3. Restriccions </li> <li>3.1 Restriccions inherents</li> <li>3.2 Restriccions d'usuari <ul> <li>3.2.1 Restricci\u00f3 de domini</li> <li>3.2.2 Restricci\u00f3 de clau principal</li> <li>3.2.3 Restricci\u00f3 d'unicitat</li> <li>3.2.4 Restricci\u00f3 de valor no nul</li> <li>3.2.5 Integritat referencial</li> <li>3.2.6 Restriccions externes</li> </ul> </li> <li>4. Tranformaci\u00f3 del M. E/R al M. Relacional </li> <li>4.1 Entitats</li> <li>4.2 Relacions 1:N</li> <li>4.3 Relacions M:N</li> <li>4.4 Relacions 1:1</li> <li>4.5 Entitats d\u00e8bils</li> <li>4.6 Resum depend\u00e8ncies</li> <li>4.7 Relacions tern\u00e0ries</li> <li>4.8 Especialitzacions</li> <li>4.9 Restriccions externes</li> <li>4.10 Exemple</li> <li>5. Llenguatges relacionals</li> <li>6. Exercicis</li> <li>Auto-avaluaci\u00f3</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T03_Model_Relacional/47_relacions_ternries/#47-relacions-ternaries","title":"4.7 Relacions tern\u00e0ries","text":"<p>En una relaci\u00f3 tern\u00e0ria o superior construirem una nova taula, on inclourem com a claus externes les claus prim\u00e0ries de totes les entitats, i a m\u00e9s els atributs de la relaci\u00f3.</p> <p>Habitualment, la clau principal de la nova taula ser\u00e0 la combinaci\u00f3 de totes les claus principals de les entitats. Ocasionalment, si alguna entitat participa amb cardinalitat 1, la clau principal d'aquesta entitat no entraria a formar part de la clau principal de la nova taula.</p> <p>Igual que en el cas de les relacions M:N, ens haurem de preguntar si \u00e9s suficient amb la clau prim\u00e0ria generada o si s'haur\u00e0 d'incloure algun altre camp.</p> <p>En l'exemple que vam posar de relaci\u00f3 tern\u00e0ria, suposant els atributs de la relaci\u00f3 la data de compra i la quantitat:</p> <p></p> <p></p> <p>On hem posat totes les claus externes formant part de la clau principal, ja que totes entren amb cardinalitat N. Per\u00f2 no ten\u00edem prou amb aquesta clau principal, ja que el mateix departament pot comprar el mateix article al mateix prove\u00efdor m\u00e9s d'una vegada. Com no ten\u00edem prou, hem posat un altre camp.</p> <p>Seria moment, segurament, de substituir la clau principal que est\u00e0 formada per 4 camps, ja que en s\u00f3n massa.</p> <p>Posar\u00edem una altra clau principal, per\u00f2 les claus externes continuarien sent-ho, i a m\u00e9s serien no nules:</p> <p></p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T03_Model_Relacional/48_especialitzacions/","title":"48 especialitzacions","text":"<p>Bases de Dades</p> <ul> <li>Tema 3: Model Relacional</li> <li>Objectius i coneixements previs</li> <li>1. Introducci\u00f3</li> <li>2. Estructura del Model Relacional</li> <li>3. Restriccions </li> <li>3.1 Restriccions inherents</li> <li>3.2 Restriccions d'usuari <ul> <li>3.2.1 Restricci\u00f3 de domini</li> <li>3.2.2 Restricci\u00f3 de clau principal</li> <li>3.2.3 Restricci\u00f3 d'unicitat</li> <li>3.2.4 Restricci\u00f3 de valor no nul</li> <li>3.2.5 Integritat referencial</li> <li>3.2.6 Restriccions externes</li> </ul> </li> <li>4. Tranformaci\u00f3 del M. E/R al M. Relacional </li> <li>4.1 Entitats</li> <li>4.2 Relacions 1:N</li> <li>4.3 Relacions M:N</li> <li>4.4 Relacions 1:1</li> <li>4.5 Entitats d\u00e8bils</li> <li>4.6 Resum depend\u00e8ncies</li> <li>4.7 Relacions tern\u00e0ries</li> <li>4.8 Especialitzacions</li> <li>4.9 Restriccions externes</li> <li>4.10 Exemple</li> <li>5. Llenguatges relacionals</li> <li>6. Exercicis</li> <li>Auto-avaluaci\u00f3</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T03_Model_Relacional/48_especialitzacions/#48-especialitzacions","title":"4.8 Especialitzacions","text":"<p>Aquest aspecte, com en el cas de les relacions 1:1, tamb\u00e9 t\u00e9 m\u00faltiples solucions. El problema de les especialitzacions \u00e9s que, encara que de forma te\u00f2rica la soluci\u00f3 siga correcta, en la pr\u00e0ctica suposa moltes taules i amb un cert grau de manteniment entre elles. Per tant, i aplicant el sentit com\u00fa, moltes vegades es fa una simplificaci\u00f3, llevant b\u00e9 les subclasses, b\u00e9 la superclasse, com veurem a continuaci\u00f3. Aquestes s\u00f3n les possibilitats: </p> <ul> <li>Transformar les especialitzacions en taules amb la clau principal heretada i els atributs espec\u00edfics (com si substitu\u00edrem l'especialitzaci\u00f3 en relacions 1:1, amb les subclasses depenent en identificaci\u00f3 de la superclasse). Estaria tamb\u00e9 b\u00e9 afegir un atribut a la superclasse per a poder saber de quin tipus \u00e9s. En l'exemple ens quedaria:</li> </ul> <p></p> <ul> <li>Simplificar les subclasses. Aleshores tots els atributs d'aquestes haurien de passar a la superclasse. Tamb\u00e9 s'haurien de passar totes les relacions que afecten a les subclasses, \"retocant\" les participacions totals (que ara ja no ho serien). Ara ser\u00e0 obligatori tenir el camp que distingeix el tipus (sin\u00f3, perdr\u00edem aquesta informaci\u00f3).</li> </ul> <p></p> <ul> <li>Simplificar la superclasse. Aleshores tots els atributs d'aquesta passarien a cadascuna de les subclasses. Tamb\u00e9 passarien les relacions a cadascuna d'aquestes, \"retocant\" les participacions totals.</li> </ul> <p></p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T03_Model_Relacional/49_restriccions_externes/","title":"49 restriccions externes","text":"<p>Bases de Dades</p> <ul> <li>Tema 3: Model Relacional</li> <li>Objectius i coneixements previs</li> <li>1. Introducci\u00f3</li> <li>2. Estructura del Model Relacional</li> <li>3. Restriccions </li> <li>3.1 Restriccions inherents</li> <li>3.2 Restriccions d'usuari <ul> <li>3.2.1 Restricci\u00f3 de domini</li> <li>3.2.2 Restricci\u00f3 de clau principal</li> <li>3.2.3 Restricci\u00f3 d'unicitat</li> <li>3.2.4 Restricci\u00f3 de valor no nul</li> <li>3.2.5 Integritat referencial</li> <li>3.2.6 Restriccions externes</li> </ul> </li> <li>4. Tranformaci\u00f3 del M. E/R al M. Relacional </li> <li>4.1 Entitats</li> <li>4.2 Relacions 1:N</li> <li>4.3 Relacions M:N</li> <li>4.4 Relacions 1:1</li> <li>4.5 Entitats d\u00e8bils</li> <li>4.6 Resum depend\u00e8ncies</li> <li>4.7 Relacions tern\u00e0ries</li> <li>4.8 Especialitzacions</li> <li>4.9 Restriccions externes</li> <li>4.10 Exemple</li> <li>5. Llenguatges relacionals</li> <li>6. Exercicis</li> <li>Auto-avaluaci\u00f3</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T03_Model_Relacional/49_restriccions_externes/#49-restriccions-externes","title":"4.9 Restriccions externes","text":"<p>Ja hem comentat que restriccions externes s\u00f3n restriccions que no es poden expressar per mig del model de dades. Aleshores les expressarem de paraula. </p> <p>Normalment, les restriccions externes del Model E/R continuaran sent-ho en el Model Relacional, perqu\u00e8 tampoc es podran expressar. En el nostre exemple ten\u00edem les restriccions externes del Model E/R: </p> <p>Rex1: El cap d'un departament ha de ser membre d'aquest. </p> <p>Rex2: Un empleat nom\u00e9s pot treballar en projectes coordinats pel seu departament. </p> <p>A\u00e7\u00f2 tampoc es pot expressar amb el Model Relacional, per tant les mantindrem. </p> <p>A banda, es poden crear m\u00e9s restriccions externes, perqu\u00e8 amb el Model Relacional no es pot expressar tot el que es podia expressar amb el Model E/R. Per exemple, en la relaci\u00f3: </p> <p></p> <p>ja hem comentat que donar\u00e0 lloc, a banda de les taules de les entitats, a una altra taula: </p> <p></p> <p>on dni i num_p s\u00f3n claus externes. Per\u00f2 l'entitat projecte participa de forma total en la relaci\u00f3, \u00e9s a dir, en tot projecte ha d'haver un empleat treballant. \u00bfCom ho controlem aix\u00f2? Doncs \u00e9s una nova restricci\u00f3 externa que la podr\u00edem formular aix\u00ed: </p> <p>RexR3: Tot projecte ha de tenir com a m\u00ednim un empleat treballant-hi. </p> <p>Les participacions totals que ens suposaran una restricci\u00f3 externa s\u00f3n: </p> <ul> <li> <p>En una relaci\u00f3 1:N, una participaci\u00f3 total de l'entitat que participa amb grau 1.</p> </li> <li> <p>En una relaci\u00f3 M:N, qualsevol participaci\u00f3 total (si les dues participen de forma total, aleshores hi haur\u00e0 dues restriccions externes).</p> </li> <li> <p>En una relaci\u00f3 1:1, dep\u00e8n de la manera de traduir-se.</p> </li> </ul> <p>La manera d'implementar les restriccions externes ser\u00e0 per mig d'un TRIGGER, que s'active quan hi haja una actualitzaci\u00f3 (inserci\u00f3, modificaci\u00f3 o esborrat) que afecte a la restricci\u00f3 externa. Per exemple, en la restricci\u00f3 RexR3 els moments importants s\u00f3n despr\u00e9s d'inserir un nou projecte, i abans d'eliminar o modificar en la taula Treballa (per si un projecte es queda sense gent treballant en ell). </p> <p>Les accions a desenvolupar podrien ser traure un av\u00eds, o obligar a inserir com a m\u00ednim una tupla en la taula Treballa, en el cas de la inserci\u00f3 d'un nou projecte; en el cas de modificaci\u00f3 o eliminaci\u00f3 en Treballa podria impedir-se aquesta actualitzaci\u00f3. </p> <p>En el nostre exemple tindrem les restriccions externes al Model Relacional: </p> <p>RexR1: El cap d'un departament ha de ser membre d'aquest. </p> <p>RexR2: Un empleat nom\u00e9s pot treballar en projectes coordinats pel seu departament. </p> <p>RexR3: Tot projecte ha de tenir com a m\u00ednim un empleat treballant-hi. </p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T03_Model_Relacional/4_tranformaci_del_m_er_al_m_relacional/","title":"4 tranformaci del m er al m relacional","text":"<p>Bases de Dades</p> <ul> <li>Tema 3: Model Relacional</li> <li>Objectius i coneixements previs</li> <li>1. Introducci\u00f3</li> <li>2. Estructura del Model Relacional</li> <li>3. Restriccions </li> <li>3.1 Restriccions inherents</li> <li>3.2 Restriccions d'usuari <ul> <li>3.2.1 Restricci\u00f3 de domini</li> <li>3.2.2 Restricci\u00f3 de clau principal</li> <li>3.2.3 Restricci\u00f3 d'unicitat</li> <li>3.2.4 Restricci\u00f3 de valor no nul</li> <li>3.2.5 Integritat referencial</li> <li>3.2.6 Restriccions externes</li> </ul> </li> <li>4. Tranformaci\u00f3 del M. E/R al M. Relacional </li> <li>4.1 Entitats</li> <li>4.2 Relacions 1:N</li> <li>4.3 Relacions M:N</li> <li>4.4 Relacions 1:1</li> <li>4.5 Entitats d\u00e8bils</li> <li>4.6 Resum depend\u00e8ncies</li> <li>4.7 Relacions tern\u00e0ries</li> <li>4.8 Especialitzacions</li> <li>4.9 Restriccions externes</li> <li>4.10 Exemple</li> <li>5. Llenguatges relacionals</li> <li>6. Exercicis</li> <li>Auto-avaluaci\u00f3</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T03_Model_Relacional/4_tranformaci_del_m_er_al_m_relacional/#4-tranformacio-del-m-er-al-m-relacional","title":"4. Tranformaci\u00f3 del M. E/R al M. Relacional","text":"<p>A continuaci\u00f3 veurem les regles de transformaci\u00f3 de l'esquema en el Model E/R al Model Relacional.</p> <p>D'aquesta manera continuem el proc\u00e9s de disseny d'una Base de Dades. En el Tema 2 hem apr\u00e8s a fer l'esquema en el Model Entitat-Relaci\u00f3. Ara el traduirem al Model Relacional, i ja es podr\u00e0 implementar en qualsevol SGBD Relacional. Faltaria nom\u00e9s el proc\u00e9s de Normalitzaci\u00f3 (tema 4) per acabar de deixar les taules perfectament dissenyades. De tota manera les Bases de Dades que dissenyem nosaltres, amb el proc\u00e9s descrit anteriorment, tindran unes taules molt \"normalitzades\", sempre que dissenyem b\u00e9.</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T03_Model_Relacional/5_llenguatges_relacionals/","title":"5 llenguatges relacionals","text":"<p>Bases de Dades</p> <ul> <li>Tema 3: Model Relacional</li> <li>Objectius i coneixements previs</li> <li>1. Introducci\u00f3</li> <li>2. Estructura del Model Relacional</li> <li>3. Restriccions </li> <li>3.1 Restriccions inherents</li> <li>3.2 Restriccions d'usuari <ul> <li>3.2.1 Restricci\u00f3 de domini</li> <li>3.2.2 Restricci\u00f3 de clau principal</li> <li>3.2.3 Restricci\u00f3 d'unicitat</li> <li>3.2.4 Restricci\u00f3 de valor no nul</li> <li>3.2.5 Integritat referencial</li> <li>3.2.6 Restriccions externes</li> </ul> </li> <li>4. Tranformaci\u00f3 del M. E/R al M. Relacional </li> <li>4.1 Entitats</li> <li>4.2 Relacions 1:N</li> <li>4.3 Relacions M:N</li> <li>4.4 Relacions 1:1</li> <li>4.5 Entitats d\u00e8bils</li> <li>4.6 Resum depend\u00e8ncies</li> <li>4.7 Relacions tern\u00e0ries</li> <li>4.8 Especialitzacions</li> <li>4.9 Restriccions externes</li> <li>4.10 Exemple</li> <li>5. Llenguatges relacionals</li> <li>6. Exercicis</li> <li>Auto-avaluaci\u00f3</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T03_Model_Relacional/5_llenguatges_relacionals/#5-llenguatges-relacionals","title":"5. Llenguatges relacionals","text":"<p>Fins el moment hem dissenyat una B.D. Relacional. Per\u00f2 si volem la B.D. \u00e9s per consultar-la, treure la informaci\u00f3 que ens interessa, manipular-la. Ens far\u00e0 falta, per tant, un llenguatge de manipulaci\u00f3 de la B.D. (DML). Aquestos llenguatges poden estar basats en l'\u00c0lgebra Relacional o en el C\u00e0lcul Relacional.</p> <ul> <li>Per mig de l'\u00c0LGEBRA RELACIONAL farem operacions sobre les taules, combinant-les, seleccionant el que ens importa, ..., en definitiva manipulant-les. El resultat ser\u00e0 una nova taula, que ser\u00e0 el resultat final o servir\u00e0 per a fer una altra operaci\u00f3. Les operacions poden ser projecci\u00f3 (agafar algunes columnes d'una taula), selecci\u00f3 (seleccionar algunes files d'una taula, les que acompleixen una determinada condici\u00f3), uni\u00f3, intersecci\u00f3, producte cartesi\u00e0, reuni\u00f3 ...</li> </ul> <p>El llenguatge SQL, que \u00e9s l'est\u00e0ndard de fet i que veurem en el tema 6, est\u00e0 basat en l'\u00c0lgebra relacional. Les sent\u00e8ncies s\u00f3n de la forma:</p> <p>SELECT dni, nom, sou  FROM EMPLEAT WHERE sou &gt; 2000</p> <p>on estem projectant sobre els camps dni, nom i sou, i seleccionant les files que acompleixen la condici\u00f3 del final</p> <p>Anem a comentar dues de les operacions esmentades abans. El producte cartesi\u00e0 de dues taules consisteix en combinar cadascuna de les files d'una taula amb cadascuna de les files de l'altra. Aix\u00ed, el producte cartesi\u00e0 de Empleat i Departament seria:</p> <p>SELECT dni, nom, nom_d  FROM EMPLEAT , DEPARTAMENT</p> <p>Per\u00f2 aquest operaci\u00f3 no sembla tenir molt de sentit en aquest cas \u00bfper a qu\u00e8 volem combinar un empleat amb tots els departaments de l'empresa? Sembla molt m\u00e9s l\u00f2gic combinar cada empleat \u00fanicament amb el departament al qual pertany.</p> <p>La reuni\u00f3 de dues taules consisteix en fer un producte cartesi\u00e0 i despr\u00e9s seleccionar les files que tenen el mateix valor en dos camps determinats (un de cada taula).</p> <p>SELECT dni, nom, nom_d  FROM EMPLEAT , DEPARTAMENT  WHERE EMPLEAT.departament = DEPARTAMENT.num_d</p> <p>\u00c9s a dir, del producte cartesi\u00e0 seleccionem nom\u00e9s les files en les quals coincideixen els camp departament i num_d, combinant cada empleat amb el seu departament.</p> <ul> <li>En el C\u00c0LCUL RELACIONAL, es defineixen variables de tipus taula, s'utilitzen operadors entre les variables, i tamb\u00e9 uns quantificadors (per a tot i existeix). Va de forma paral\u00b7lela a l'\u00e0lgebra de manera que es poden obtenir les mateixes coses amb l'\u00c0lgebra i amb el C\u00e0lcul.</li> </ul> <p>El QBE (Query By Example) es basa en el c\u00e0lcul relacional, i la seua particularitat \u00e9s la senzillesa de fer consultes per als no experts. Per mig d'una plantilla podrem col\u00b7locar els atributs que volem visualitzar, l'ordre, els criteris de selecci\u00f3, etc. \u00c9s el que utilitzen tant\u00a0Access com\u00a0Base\u00a0 per a fer les consultes amb l'assistent.</p> <p></p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T03_Model_Relacional/6_exercicis/","title":"6 exercicis","text":"<p>Bases de Dades</p> <ul> <li>Tema 3: Model Relacional</li> <li>Objectius i coneixements previs</li> <li>1. Introducci\u00f3</li> <li>2. Estructura del Model Relacional</li> <li>3. Restriccions </li> <li>3.1 Restriccions inherents</li> <li>3.2 Restriccions d'usuari <ul> <li>3.2.1 Restricci\u00f3 de domini</li> <li>3.2.2 Restricci\u00f3 de clau principal</li> <li>3.2.3 Restricci\u00f3 d'unicitat</li> <li>3.2.4 Restricci\u00f3 de valor no nul</li> <li>3.2.5 Integritat referencial</li> <li>3.2.6 Restriccions externes</li> </ul> </li> <li>4. Tranformaci\u00f3 del M. E/R al M. Relacional </li> <li>4.1 Entitats</li> <li>4.2 Relacions 1:N</li> <li>4.3 Relacions M:N</li> <li>4.4 Relacions 1:1</li> <li>4.5 Entitats d\u00e8bils</li> <li>4.6 Resum depend\u00e8ncies</li> <li>4.7 Relacions tern\u00e0ries</li> <li>4.8 Especialitzacions</li> <li>4.9 Restriccions externes</li> <li>4.10 Exemple</li> <li>5. Llenguatges relacionals</li> <li>6. Exercicis</li> <li>Auto-avaluaci\u00f3</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T03_Model_Relacional/6_exercicis/#6-exercicis","title":"6. Exercicis","text":""},{"location":"BD-T03_Model_Relacional/6_exercicis/#exercici-1","title":"Exercici 1","text":"<p>Realitzar l'esquema relacional corresponent a l'exercici 1 del Tema 2.</p> <p>Recordeu que ten\u00edem 3 opcions:</p> <p></p> <p></p>"},{"location":"BD-T03_Model_Relacional/6_exercicis/#exercici-2","title":"Exercici 2","text":"<p>Realitzar l'esquema relacional corresponent a l'exercici 2 del Tema 2.</p> <p></p> <p></p>"},{"location":"BD-T03_Model_Relacional/6_exercicis/#exercici-3","title":"Exercici 3","text":"<p>Realitzar l'esquema relacional corresponent a l'exercici 3 del Tema 2. </p> <p></p> <p></p>"},{"location":"BD-T03_Model_Relacional/6_exercicis/#exercici-4","title":"Exercici 4","text":"<p>Realitzar l'esquema relacional corresponent a l'exercici 4 del Tema 2. Recordeu que el rombe amb doble ratlla significa depend\u00e8ncia en identificaci\u00f3; </p> <p></p> <p></p>"},{"location":"BD-T03_Model_Relacional/6_exercicis/#exercici-5","title":"Exercici 5","text":"<p>Realitzar l'esquema relacional corresponent a l'exercici 5 del Tema 2. </p> <p></p> <p></p>"},{"location":"BD-T03_Model_Relacional/6_exercicis/#exercici-6","title":"Exercici 6","text":"<p>Realitzar l'esquema relacional corresponent a l'exercici 6 del Tema 2. </p> <p></p> <p></p>"},{"location":"BD-T03_Model_Relacional/6_exercicis/#exercici-7","title":"Exercici 7","text":"<p>Realitzar l'esquema relacional corresponent a l'exercici 7 del Tema 2.</p> <p>En la de dalt considerem \u00fanicament els viatges (i no els trajectes). A m\u00e9s, nom\u00e9s marquem estaci\u00f3 d'origen i de dest\u00ed d'un viatge.</p> <p>En la segona incorporem els trajectes, i a m\u00e9s marquem totes les estacions on es para en un trajecte.</p> <p></p> <p></p>"},{"location":"BD-T03_Model_Relacional/6_exercicis/#exercici-8","title":"Exercici 8","text":"<p>Es desitja mantenir informaci\u00f3 sobre el material inform\u00e0tic d'una empresa. </p> <ul> <li>L'empresa t\u00e9 unes quantes xarxes, interconnectades algunes d'elles.</li> <li>La major part dels ordinadors estan connectats en xarxa, encara que uns altres no ho estan. Tamb\u00e9 existeixen ordinadors que estan connectats a m\u00e9s de una xarxa (s\u00f3n ponts).</li> <li>Cada ordinador pot ser utilitzat por un o m\u00e9s d'un empleat. Un empleat pot tenir perm\u00eds per a utilitzar un o m\u00e9s d'un ordinador.</li> <li>Una xarxa (o segment) \u00e9s responsabilitat d'un \u00fanic empleat que la gestiona. Aquest empleat pot tenir sota la seua responsabilitat m\u00e9s d'una xarxa.</li> <li>Cada ordinador pot tenir connectada com a m\u00e0xim una impressora. No es contemplen les impressores de xarxa. Sempre estaran connectades pel port paral\u00b7lel a un ordinador.</li> <li>Les aplicacions de l'empresa estan emmagatzemades en els ordinadors i no estan duplicades (una aplicaci\u00f3 est\u00e0 en un \u00fanic ordinador). Els empleats que tenen acc\u00e9s a aquest ordinador tindran, per tant, acc\u00e9s tamb\u00e9 a les aplicacions que l'ordinador cont\u00e9. A m\u00e9s tindran acc\u00e9s a unes altres aplicacions a trav\u00e9s de la xarxa. Cada aplicaci\u00f3 t\u00e9 assignats permisos per als usuaris que poden accedir a trav\u00e9s de la xarxa.</li> </ul> <p>Es vol que el sistema d'informaci\u00f3 siga capa\u00e7 de respondre a consultes com: </p> <p>Per a una xarxa: </p> <ul> <li>Empleat responsable de la mateixa.</li> <li>Ordinadors que la componen.</li> <li>Impressores en la xarxa.</li> <li>Aplicacions dins de la xarxa.</li> </ul> <p>Per a un ordinador: </p> <ul> <li>Xarxes a les quals est\u00e0 connectat.</li> <li>Impressora connectada (si en t\u00e9).</li> <li>Aplicacions que cont\u00e9.</li> <li>Empleats que poden utilitzar-lo.</li> <li>Saber si \u00e9s pont o no.</li> </ul> <p>Per a un empleat: </p> <ul> <li>Ordinadors que pot utilitzar.</li> <li>Aplicacions a les quals t\u00e9 acc\u00e9s.</li> </ul> <p>Per a una aplicaci\u00f3: </p> <ul> <li>Per motius de seguretat es vol con\u00e8ixer, per cada acc\u00e9s a ella, l'empleat que va accedir, la data i l'ordinador des del qual es va accedir.</li> <li>En quin ordinador est\u00e0 guardada.</li> <li>Empleats que poden accedir.</li> </ul> <p></p> <p>Nota</p> <p>Observeu com per una banda heu de guardar els permisos dels empleats sobre les aplicacions, i per una altra els accessos reals fets pels empleats a les aplicacions, i en aquest cas hem de saber des de quin ordinador i la data\u00a0 </p> <p></p>"},{"location":"BD-T03_Model_Relacional/6_exercicis/#exercici-9","title":"Exercici 9","text":"<p>Dissenyar el diagrama E-R, i traduir-lo despr\u00e9s al relacional, d'un sistema d'informaci\u00f3 d'una empresa que ven gran varietat de productes. Per a la venda d'aquestos productes, disposa d'un conjunt de viatjants que realitzen visites als clients oferint els seus productes. </p> <p>La zona geogr\u00e0fica d'influ\u00e8ncia de l'empresa est\u00e0 dividida en sectors no solapats que comprenen unes quantes ciutats. Un viatjant t\u00e9 assignats alguns d'aquestos sectors. A\u00e7\u00f2 no significa que tinga assignats els sectors en exclusivitat; m\u00e9s d'un viatjant pot tenir assignat el mateix sector. </p> <p>A un determinat client li poden oferir productes distints viatjants de l'empresa, per\u00f2 mai el mateix producte. </p> <p>Un producte pot ser ofert per distints viatjants, per\u00f2 sempre a clients distints. Un viatjant no ofereix tots els productes (nom\u00e9s alguns). A un client sempre li ofereix un producte el mateix viatjant. </p> <p>Un producte \u00e9s ofert per un viatjant a clients distints a preus distints. </p> <p>El sistema d'informaci\u00f3 ha de ser capa\u00e7 de respondre a consultes com: </p> <ul> <li>Quins clients hi ha en un sector.</li> <li>Quins clients hi ha en una ciutat.</li> <li>Quins productes son oferts a un client i a quin preu.</li> <li>Quins clients t\u00e9 assignat cada viatjant.</li> <li>Quins productes s'ofereixen en un determinat sector.</li> <li>Quines ciutats t\u00e9 assignades un viatjant (per estar dins dels seus sectors).</li> <li>Quines ciutats realment visita un viatjant (per tenir en elles clients als quals els ofereix algun producte).</li> </ul> <p></p> <p></p>"},{"location":"BD-T03_Model_Relacional/6_exercicis/#exercici-10","title":"Exercici 10","text":"<p>Fer l'esquema E/R i posteriorment passar-lo a relacional corresponent a un Parc Zool\u00f2gic que vol guardar informaci\u00f3 de les esp\u00e8cies que t\u00e9, els empleats (cuidadors i guies), i els distints itineraris de visita que ofrereix. La informaci\u00f3 est\u00e0 estructurada de la seg\u00fcent manera: </p> <ul> <li>Especies: de les esp\u00e8cies ens interessa saber el nom, el nom cient\u00edfic i una descripci\u00f3 general. S'ha de tenir en compte que una esp\u00e8cie pot viure en diferents h\u00e0bitats naturals i que un h\u00e0bitat pot ser ocupat per diferents esp\u00e8cies. Per una altra banda, les esp\u00e8cies estan en distintes zones del parc de manera que cada esp\u00e8cie est\u00e0 en una zona i en una zona hi ha unes quantes esp\u00e8cies. </li> <li>H\u00e0bitats: els diferents h\u00e0bitats naturals venen definits pel nom, el clima i el tipus de vegetaci\u00f3 predominants. </li> <li>Zones: les zones del parc en les quals estan les distintes esp\u00e8cies venen definides pel nom i l'extensi\u00f3 que ocupen. </li> <li>Itineraris: els itineraris discorren per distintes zones del parc. La informaci\u00f3 d'inter\u00e8s per als itineraris \u00e9s: c\u00f3di d'itinerari, durada del recorregut, llarg\u00e0ria de l'itinerari, el m\u00e0xim n\u00famero de visitants autoritzat i el n\u00famero de distintes esp\u00e8cies que visita (que han de ser totes les de les zones que recorre). Un itinerari recorre distintes zones del parc i una zona pot ser recorreguda per diferents itineraris. </li> <li>Empleats: de tots els empleats voldrem saber el nom, dni, adre\u00e7a, tel\u00e8fon i data que van comen\u00e7ar a treballar al zoo. Els empleats poden ser de dos tipus: guies i cuidadors. </li> <li>Guies: Interessa saber quins guies porten cada itinerari, tenint en compte que un guia pot dur uns quants itineraris i que un itinerari pot ser assignat a m\u00e9s d'un guia en diferents hores. Aquestes hores s\u00f3n una dada d'inter\u00e8s. </li> <li>Cuidadors: s'encarreguen de cuidar les diferents esp\u00e8cies. Un cuidador pot encarregar-se d'unes quantes esp\u00e8cies i una esp\u00e8cie pot ser atesa per uns quants cuidadores. Ens interessa la data en la qual un cuidador es fa c\u00e0rrec d'una esp\u00e8cie. </li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T03_Model_Relacional/autoavaluaci/","title":"Autoavaluaci","text":"<p>Bases de Dades</p> <ul> <li>Tema 3: Model Relacional</li> <li>Objectius i coneixements previs</li> <li>1. Introducci\u00f3</li> <li>2. Estructura del Model Relacional</li> <li>3. Restriccions </li> <li>3.1 Restriccions inherents</li> <li>3.2 Restriccions d'usuari <ul> <li>3.2.1 Restricci\u00f3 de domini</li> <li>3.2.2 Restricci\u00f3 de clau principal</li> <li>3.2.3 Restricci\u00f3 d'unicitat</li> <li>3.2.4 Restricci\u00f3 de valor no nul</li> <li>3.2.5 Integritat referencial</li> <li>3.2.6 Restriccions externes</li> </ul> </li> <li>4. Tranformaci\u00f3 del M. E/R al M. Relacional </li> <li>4.1 Entitats</li> <li>4.2 Relacions 1:N</li> <li>4.3 Relacions M:N</li> <li>4.4 Relacions 1:1</li> <li>4.5 Entitats d\u00e8bils</li> <li>4.6 Resum depend\u00e8ncies</li> <li>4.7 Relacions tern\u00e0ries</li> <li>4.8 Especialitzacions</li> <li>4.9 Restriccions externes</li> <li>4.10 Exemple</li> <li>5. Llenguatges relacionals</li> <li>6. Exercicis</li> <li>Auto-avaluaci\u00f3</li> </ul> <p>\u00ab Anterior</p>"},{"location":"BD-T03_Model_Relacional/autoavaluaci/#auto-avaluacio","title":"Auto-avaluaci\u00f3","text":""},{"location":"BD-T03_Model_Relacional/autoavaluaci/#omplir-els-espais-en-blanc","title":"Omplir els espais en blanc","text":"<p>Intenta omplir els espais en blanc dels seg\u00fcents enunciats: </p> <p>L'element b\u00e0sic del model relacional \u00e9s la Buits (1):\u2002\u2002\u2002\u2002\u2002, que no \u00e9s m\u00e9s que una Buits (2):\u2002\u2002\u2002\u2002\u2002bidimensional. Cadascuna est\u00e0 fomada per files, tamb\u00e9 anomenades Buits (3):\u2002\u2002\u2002\u2002\u2002, i columnes, tamb\u00e9 anomenades Buits (4):\u2002\u2002\u2002\u2002\u2002</p> <p>MACROBUTTON DoFieldClick  [Envia] Habilita el javascript</p> <p></p>"},{"location":"BD-T03_Model_Relacional/autoavaluaci/#eleccio-multiple","title":"Elecci\u00f3 m\u00faltiple","text":""},{"location":"BD-T03_Model_Relacional/autoavaluaci/#questio","title":"Q\u00fcesti\u00f3","text":"<p>El conjunt de valors possibles que pot agafar una columna s'anomena: </p>"},{"location":"BD-T03_Model_Relacional/autoavaluaci/#respostes","title":"Respostes","text":"<p>Opci\u00f3 1</p> <p>univers </p> <p>Opci\u00f3 2</p> <p>domini </p> <p>Opci\u00f3 3</p> <p>camp </p> <p>Opci\u00f3 4</p> <p>cap de les anteriors </p>"},{"location":"BD-T03_Model_Relacional/autoavaluaci/#realimentacio","title":"Realimentaci\u00f3","text":"<p>Nooooooo </p> <p>Molt b\u00e9 </p> <p>Nooooooo </p> <p>Nooooooo </p>"},{"location":"BD-T03_Model_Relacional/autoavaluaci/#solucio","title":"Soluci\u00f3","text":"<ol> <li>Incorrecte (Realimentaci\u00f3)</li> <li>Opci\u00f3 correcta (Realimentaci\u00f3)</li> <li>Incorrecte (Realimentaci\u00f3)</li> <li>Incorrecte (Realimentaci\u00f3)</li> </ol>"},{"location":"BD-T03_Model_Relacional/autoavaluaci/#veritat-fals","title":"Veritat / fals","text":"<p>Indica si les seg\u00fcents afirmacions s\u00f3n correctes </p>"},{"location":"BD-T03_Model_Relacional/autoavaluaci/#questio-1","title":"Q\u00fcesti\u00f3 1","text":"<p>Els valors de les columnes han de ser multivaluats </p>"},{"location":"BD-T03_Model_Relacional/autoavaluaci/#pista","title":"Pista","text":"<p> Veritat  Mentida</p>"},{"location":"BD-T03_Model_Relacional/autoavaluaci/#realimentacio_1","title":"Realimentaci\u00f3","text":"<p>Mentida</p>"},{"location":"BD-T03_Model_Relacional/autoavaluaci/#questio-2","title":"Q\u00fcesti\u00f3 2","text":"<p>L'ordre de les files no \u00e9s significatiu </p>"},{"location":"BD-T03_Model_Relacional/autoavaluaci/#pista_1","title":"Pista","text":"<p> Veritat  Mentida</p>"},{"location":"BD-T03_Model_Relacional/autoavaluaci/#realimentacio_2","title":"Realimentaci\u00f3","text":"<p>Veritat</p>"},{"location":"BD-T03_Model_Relacional/autoavaluaci/#questio-3","title":"Q\u00fcesti\u00f3 3","text":"<p>L'ordre de les columnes s\u00ed que \u00e9s significatiu, ja que suposa canviar l'estructura </p>"},{"location":"BD-T03_Model_Relacional/autoavaluaci/#pista_2","title":"Pista","text":"<p> Veritat  Mentida</p>"},{"location":"BD-T03_Model_Relacional/autoavaluaci/#realimentacio_3","title":"Realimentaci\u00f3","text":"<p>Mentida</p> <p></p>"},{"location":"BD-T03_Model_Relacional/autoavaluaci/#eleccio-multiple_1","title":"Elecci\u00f3 m\u00faltiple","text":""},{"location":"BD-T03_Model_Relacional/autoavaluaci/#questio_1","title":"Q\u00fcesti\u00f3","text":"<p>Quina afirmaci\u00f3 \u00e9s la correcta? </p>"},{"location":"BD-T03_Model_Relacional/autoavaluaci/#respostes_1","title":"Respostes","text":"<p>Opci\u00f3 1</p> <p>La clau principal nom\u00e9s pot estar formada per un camp, que no se repetir\u00e0 ni agafar\u00e0 valors nuls. </p> <p>Opci\u00f3 2</p> <p>La clau principal pot estar formada per un camp o m\u00e9s d'un camp. En aquest \u00faltim cas algun camp pot agafar el valor nul, per\u00f2 no tots a l'hora. </p> <p>Opci\u00f3 3</p> <p>La clau principal est\u00e0 formada per unes quantes claus candidates, agafades utilitzant el \"sentit com\u00fa\" </p> <p>Opci\u00f3 4</p> <p>Cap de les anteriors </p>"},{"location":"BD-T03_Model_Relacional/autoavaluaci/#realimentacio_4","title":"Realimentaci\u00f3","text":"<p>Incorrecte </p> <p>Incorrecte </p> <p>Incorrecte </p> <p>Correcte </p>"},{"location":"BD-T03_Model_Relacional/autoavaluaci/#solucio_1","title":"Soluci\u00f3","text":"<ol> <li>Incorrecte (Realimentaci\u00f3)</li> <li>Incorrecte (Realimentaci\u00f3)</li> <li>Incorrecte (Realimentaci\u00f3)</li> <li>Opci\u00f3 correcta (Realimentaci\u00f3)</li> </ol>"},{"location":"BD-T03_Model_Relacional/autoavaluaci/#questio_2","title":"Q\u00fcesti\u00f3","text":"<p>El valor nul \u00e9s equivalent a: </p>"},{"location":"BD-T03_Model_Relacional/autoavaluaci/#respostes_2","title":"Respostes","text":"<p>Opci\u00f3 1</p> <p>el zero </p> <p>Opci\u00f3 2</p> <p>l'espai en blanc </p> <p>Opci\u00f3 3</p> <p>qualsevol de les anteriors </p> <p>Opci\u00f3 4</p> <p>cap de les anteriors </p>"},{"location":"BD-T03_Model_Relacional/autoavaluaci/#realimentacio_5","title":"Realimentaci\u00f3","text":"<p>Incorrecte </p> <p>Incorrecte </p> <p>Incorrecte </p> <p>Correcte !! </p>"},{"location":"BD-T03_Model_Relacional/autoavaluaci/#solucio_2","title":"Soluci\u00f3","text":"<ol> <li>Incorrecte (Realimentaci\u00f3)</li> <li>Incorrecte (Realimentaci\u00f3)</li> <li>Incorrecte (Realimentaci\u00f3)</li> <li>Opci\u00f3 correcta (Realimentaci\u00f3)</li> </ol>"},{"location":"BD-T03_Model_Relacional/autoavaluaci/#questio_3","title":"Q\u00fcesti\u00f3","text":"<p>El concepte d'integritat referencial s'aplica a trav\u00e9s de la ... </p>"},{"location":"BD-T03_Model_Relacional/autoavaluaci/#respostes_3","title":"Respostes","text":"<p>Opci\u00f3 1</p> <p>clau principal </p> <p>Opci\u00f3 2</p> <p>clau candidata </p> <p>Opci\u00f3 3</p> <p>clau externa </p> <p>Opci\u00f3 4</p> <p>cap de les anteriors </p>"},{"location":"BD-T03_Model_Relacional/autoavaluaci/#realimentacio_6","title":"Realimentaci\u00f3","text":"<p>Incorrecte </p> <p>Incorrecte </p> <p>Correcte !! </p> <p>Incorrecte </p>"},{"location":"BD-T03_Model_Relacional/autoavaluaci/#solucio_3","title":"Soluci\u00f3","text":"<ol> <li>Incorrecte (Realimentaci\u00f3)</li> <li>Incorrecte (Realimentaci\u00f3)</li> <li>Opci\u00f3 correcta (Realimentaci\u00f3)</li> <li>Incorrecte (Realimentaci\u00f3)</li> </ol>"},{"location":"BD-T03_Model_Relacional/autoavaluaci/#com-traduiries-del-model-er-al-relacional","title":"Com traduiries del Model E/R al Relacional","text":""},{"location":"BD-T03_Model_Relacional/autoavaluaci/#questio_4","title":"Q\u00fcesti\u00f3","text":"<p>Com traduiries una entitat? </p>"},{"location":"BD-T03_Model_Relacional/autoavaluaci/#respostes_4","title":"Respostes","text":"<p>Opci\u00f3 1</p> <p>com una nova taula </p> <p>Opci\u00f3 2</p> <p>com un camp </p> <p>Opci\u00f3 3</p> <p>dep\u00e9n de l'entitat </p> <p>Opci\u00f3 4</p> <p>com una clau externa </p>"},{"location":"BD-T03_Model_Relacional/autoavaluaci/#realimentacio_7","title":"Realimentaci\u00f3","text":"<p>Correcte !! </p> <p>Incorrecte </p> <p>Incorrecte </p> <p>Incorrecte </p>"},{"location":"BD-T03_Model_Relacional/autoavaluaci/#solucio_4","title":"Soluci\u00f3","text":"<ol> <li>Opci\u00f3 correcta (Realimentaci\u00f3)</li> <li>Incorrecte (Realimentaci\u00f3)</li> <li>Incorrecte (Realimentaci\u00f3)</li> <li>Incorrecte (Realimentaci\u00f3)</li> </ol>"},{"location":"BD-T03_Model_Relacional/autoavaluaci/#questio_5","title":"Q\u00fcesti\u00f3","text":"<p>I com traduiries una relaci\u00f3 1:N ? </p>"},{"location":"BD-T03_Model_Relacional/autoavaluaci/#respostes_5","title":"Respostes","text":"<p>Opci\u00f3 1</p> <p>com una nova taula </p> <p>Opci\u00f3 2</p> <p>com un camp </p> <p>Opci\u00f3 3</p> <p>dep\u00e9n de la relaci\u00f3 </p> <p>Opci\u00f3 4</p> <p>com una clau externa </p>"},{"location":"BD-T03_Model_Relacional/autoavaluaci/#realimentacio_8","title":"Realimentaci\u00f3","text":"<p>Incorrecte </p> <p>Incorrecte </p> <p>Incorrecte </p> <p>Correcte !! </p>"},{"location":"BD-T03_Model_Relacional/autoavaluaci/#solucio_5","title":"Soluci\u00f3","text":"<ol> <li>Incorrecte (Realimentaci\u00f3)</li> <li>Incorrecte (Realimentaci\u00f3)</li> <li>Incorrecte (Realimentaci\u00f3)</li> <li>Opci\u00f3 correcta (Realimentaci\u00f3)</li> </ol>"},{"location":"BD-T03_Model_Relacional/autoavaluaci/#questio_6","title":"Q\u00fcesti\u00f3","text":"<p>I com traduiries una relaci\u00f3 M:N </p>"},{"location":"BD-T03_Model_Relacional/autoavaluaci/#respostes_6","title":"Respostes","text":"<p>Opci\u00f3 1</p> <p>com una nova taula </p> <p>Opci\u00f3 2</p> <p>com un camp </p> <p>Opci\u00f3 3</p> <p>dep\u00e9n de la relaci\u00f3 </p> <p>This document was truncated here because it was created in the Evaluation Mode. Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T03_Model_Relacional/objectius_i_coneixements_previs/","title":"Objectius i coneixements previs","text":"<p>Bases de Dades</p> <ul> <li>Tema 3: Model Relacional</li> <li>Objectius i coneixements previs</li> <li>1. Introducci\u00f3</li> <li>2. Estructura del Model Relacional</li> <li>3. Restriccions </li> <li>3.1 Restriccions inherents</li> <li>3.2 Restriccions d'usuari <ul> <li>3.2.1 Restricci\u00f3 de domini</li> <li>3.2.2 Restricci\u00f3 de clau principal</li> <li>3.2.3 Restricci\u00f3 d'unicitat</li> <li>3.2.4 Restricci\u00f3 de valor no nul</li> <li>3.2.5 Integritat referencial</li> <li>3.2.6 Restriccions externes</li> </ul> </li> <li>4. Tranformaci\u00f3 del M. E/R al M. Relacional </li> <li>4.1 Entitats</li> <li>4.2 Relacions 1:N</li> <li>4.3 Relacions M:N</li> <li>4.4 Relacions 1:1</li> <li>4.5 Entitats d\u00e8bils</li> <li>4.6 Resum depend\u00e8ncies</li> <li>4.7 Relacions tern\u00e0ries</li> <li>4.8 Especialitzacions</li> <li>4.9 Restriccions externes</li> <li>4.10 Exemple</li> <li>5. Llenguatges relacionals</li> <li>6. Exercicis</li> <li>Auto-avaluaci\u00f3</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T03_Model_Relacional/objectius_i_coneixements_previs/#objectius-i-coneixements-previs","title":"Objectius i coneixements previs","text":""},{"location":"BD-T03_Model_Relacional/objectius_i_coneixements_previs/#objectius","title":"Objectius","text":"<p>Els objectius d'aquest tema s\u00f3n: </p> <ol> <li> <p>Con\u00e9ixer l'estructura b\u00e0sica del model: la taula.</p> </li> <li> <p>Saber descriure els camps, amb el seu domini, i saber triar la clau principal.</p> </li> <li> <p>Saber definir altres restriccions (no nul, \u00fanic, ...)</p> </li> <li> <p>Entendre el concepte de clau externa, i saber definir les necess\u00e0ries.</p> </li> <li> <p>Saber traduir correctament del Model Entitat-Relaci\u00f3 al Model Relacional.</p> </li> <li> <p>Redefinir les taules necess\u00e0ries atenent a motius pr\u00e0ctics.</p> </li> </ol> <p></p>"},{"location":"BD-T03_Model_Relacional/objectius_i_coneixements_previs/#coneixements-previs","title":"Coneixements previs","text":"<p>Els coneixements previs necessaris per al tema s\u00f3n els del tema 2: Model Entitat-Relaci\u00f3. En certa manera aquest tema aclarir\u00e0 conceptes d'aquell tema, ja que ens permetr\u00e0 aplicar-lo a una cosa palpable com s\u00f3n les taules, directament implementables en un SGBD Relacional. Aix\u00ed podrem concretar possibles ambig\u00fcitats del esquema Entitat-Relaci\u00f3, i saber si valen la pena determinades restriccions. </p> <p>Per\u00f2 entendre el Model Entitat-Relaci\u00f3 i dominar la interpretaci\u00f3 d'un esquema ser\u00e0 b\u00e0sic en el disseny d'una Base de Dades. Sempre comen\u00e7arem pel Model Entitat-Relaci\u00f3, i posteriorment el traduirem al Model Relacional, aplicant en tot cas el sentit com\u00fa. </p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T04_Normalitzacio/","title":"Index","text":"<p>Bases de Dades</p> <ul> <li>Tema 4: Normalitzaci\u00f3</li> <li>Objectius</li> <li>1. Introducci\u00f3</li> <li>2. Primer Forma Normal (1FN)</li> <li>3. Depend\u00e8ncia Funcional</li> <li>4. Segona Forma Normal (2FN)</li> <li>5. Depend\u00e8ncia Funcional Transitiva</li> <li>6. Tercera Forma Normal (3FN)</li> <li>7. Forma Normal Boyce-Codd (FNBC)</li> <li>Resum</li> <li>Exercicis</li> <li>Autoavaluaci\u00f3</li> </ul> <p>Seg\u00fcent \u00bb</p>"},{"location":"BD-T04_Normalitzacio/#tema-4-normalitzacio","title":"Tema 4: Normalitzaci\u00f3","text":"<p>Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial SenseObraDerivada 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T04_Normalitzacio/1_introducci/","title":"1 introducci","text":"<p>Bases de Dades</p> <ul> <li>Tema 4: Normalitzaci\u00f3</li> <li>Objectius</li> <li>1. Introducci\u00f3</li> <li>2. Primer Forma Normal (1FN)</li> <li>3. Depend\u00e8ncia Funcional</li> <li>4. Segona Forma Normal (2FN)</li> <li>5. Depend\u00e8ncia Funcional Transitiva</li> <li>6. Tercera Forma Normal (3FN)</li> <li>7. Forma Normal Boyce-Codd (FNBC)</li> <li>Resum</li> <li>Exercicis</li> <li>Autoavaluaci\u00f3</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T04_Normalitzacio/1_introducci/#1-introduccio","title":"1. Introducci\u00f3","text":"<p>El proc\u00e9s de normalitzaci\u00f3 s'encarrega de seguir una s\u00e8rie de passos o normes. Despr\u00e9s d'aplicar-les totes, s'obtenen les dades agrupades en diferents taules, de manera que \u00e9s l'estructura \u00f2ptima per a la seua implementaci\u00f3, gesti\u00f3 i explotaci\u00f3 des de diferents aplicacions futures. </p> <p>La normalitzaci\u00f3 es basa en que les dades han de ser independents de les aplicacions que les utilitzen, i per tant no seran optimitzades per a una aplicaci\u00f3 determinada sin\u00f3 que seran optimitzades, en general, per a qualsevol aplicaci\u00f3 futura. El seu objectiu \u00e9s obtenir el major nombre de taules possibles. Cadascuna d'aquestes taules estar\u00e0 formada pels atributs imprescindibles per a representar l'entitat o la relaci\u00f3 entre entitats. </p> <p>Avantatges que s'obtenen despr\u00e9s de la normalitzaci\u00f3: </p> <ul> <li> <p>Facilitat d'\u00fas. Les dades estan agrupades en taules que identifiquen clarament una entitat o una relaci\u00f3.</p> </li> <li> <p>Flexibilitat. La informaci\u00f3 que necessiten els usuaris es pot obtenir de les taules relacionals per mig de les operacions de l'\u00e0lgebra relacional. No es tenen unes estructures r\u00edgides de dades sin\u00f3 que es poden combinar de manera que s'obtinguen m\u00faltiples vistes.</p> </li> <li> <p>Facilitat de Implementaci\u00f3. Les taules resultants s\u00f3n simples.</p> </li> <li> <p>Claredat. La representaci\u00f3 de la informaci\u00f3 \u00e9s clara i senzilla per a l'usuari. S\u00f3n taules senzilles.</p> </li> <li> <p>Redund\u00e0ncia m\u00ednima. La informaci\u00f3 no estar\u00e0 duplicada innecess\u00e0riament dins de les estructures.</p> </li> <li> <p>M\u00e0xim rendiment de les aplicacions. Nom\u00e9s es tracta aquella informaci\u00f3 que ser\u00e0 d'utilitat a cada aplicaci\u00f3.</p> </li> </ul> <p>Dins de tot el proc\u00e9s de creaci\u00f3 d'una Bases de Dades, la normalitzaci\u00f3 es faria despr\u00e9s de construir tot l'esquema relacional, \u00e9s a dir, primer es construiria l'esquema amb el Model E/R, despr\u00e9s es traduiria al Model Relacional, i posteriorment es normalitzarien aquestes taules de l'esquema relacional. La veritat, per\u00f2, \u00e9s que normalment les taules que ens eixiran en l'esquema relacional estaran prou normalitzades, encara que pot ser molt convenient analitzar totes les taules. </p> <p>La vertadera utililitat i necessitat de la normalitzaci\u00f3 est\u00e0 en la conversi\u00f3 o actualitzaci\u00f3 de sistemes d'informaci\u00f3 antics. Aix\u00ed, si volem actualitzar una aplicaci\u00f3 basada en fitxers tradicionals, la normalitzaci\u00f3 de les taules ser\u00e0 absolutament necess\u00e0ria. </p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial SenseObraDerivada 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T04_Normalitzacio/2_primer_forma_normal_1fn/","title":"2 primer forma normal 1fn","text":"<p>Bases de Dades</p> <ul> <li>Tema 4: Normalitzaci\u00f3</li> <li>Objectius</li> <li>1. Introducci\u00f3</li> <li>2. Primer Forma Normal (1FN)</li> <li>3. Depend\u00e8ncia Funcional</li> <li>4. Segona Forma Normal (2FN)</li> <li>5. Depend\u00e8ncia Funcional Transitiva</li> <li>6. Tercera Forma Normal (3FN)</li> <li>7. Forma Normal Boyce-Codd (FNBC)</li> <li>Resum</li> <li>Exercicis</li> <li>Autoavaluaci\u00f3</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T04_Normalitzacio/2_primer_forma_normal_1fn/#2-primer-forma-normal-1fn","title":"2. Primer Forma Normal (1FN)","text":"Una taula est\u00e0 en 1FN si i nom\u00e9s si els valors que componen cada atribut d'una tupla s\u00f3n at\u00f2mics. \u00c9s a dir, en un atribut no han d'apar\u00e8ixer valors repetitius. <p>Per exemple, en la seg\u00fcent taula hi ha una s\u00e8rie de tipus de materials existents en una ferreteria. Un material t\u00e9 un codi que l'identifica, la seua descripci\u00f3 i les seues mides (la clau principal \u00e9s el camp subratllat) </p> <p>MATERIALS</p> COD-MAT DESCRIPCI\u00d3 MIDES 039 Cargol 3,5 - 5 - 7 - 9 067 Arandella 2 - 5 461 Broca 2,5 - 3 - 3,5 <p>Els problemes que planteja s\u00f3n els seg\u00fcents: </p> <ul> <li>La falta de espai en el camp per als valors que puguen apar\u00e8ixer o, pel contrari el desaprofitament de l'atribut quan existeixen pocs valors. </li> <li>La dificultat del tractament per a actualitzacions, consultes i recerques d'un valor determinat. </li> </ul> <p>Posar en 1FN </p> <p>Per a passar a 1FN una taula que no ho estava es descompon en dues distintes: </p> <p>A) La primera taula ser\u00e0 la projecci\u00f3 de la taula original sobre els seg\u00fcents atributs: </p> <ul> <li>La clau de la taula original. </li> <li>Els atributs at\u00f2mics (els que contenen valors \u00fanics). </li> </ul> <p>MATERIALS</p> COD-MAT DESCRIPCI\u00d3 039 Cargol 067 Arandella 461 Broca <p>B) La segona taula ser\u00e0 la projecci\u00f3 de la taula original sobre els seg\u00fcents atributs: </p> <ul> <li>La clau de la taula original. </li> <li>Els atributs que tenen valors m\u00faltiples, distribuint aquestos valors m\u00faltiples en tuples distintes i per tant en una fila existir\u00e0 un \u00fanic valor elemental. </li> </ul> <p>La clau d'aquesta segona taula estar\u00e0 formada per tots els atributs. </p> <p>MAT-MIDES</p> COD-MAT MIDA 039 3,5 039 5 039 7 039 9 067 2 067 5 461 2,5 461 3 461 3,5 <p>Nota</p> <p>Tamb\u00e9 haurem de ser capa\u00e7os de detectar que no est\u00e0 en 1FN quan tenim uns atributs multivaluats \"encoberts\". Per exemple, una variant de l'exemple anterior podria ser: </p> <p>MATERIALS</p> COD-MAT DESCRIPCI\u00d3 MIDA1 MIDA2 MIDA3 MIDA4 039 Cargol 3,5 5 7 9 067 Arandella 2 5 461 Broca 2,5 3 3,5 <p>Es veu que es tracta d'una manera de \"dissimular\" els atributs multivaluats. Estem davant del mateix cas que en l'exemple de dalt i tindrem els mateixos problemes, i per tant la soluci\u00f3 \u00e9s la mateixa.</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial SenseObraDerivada 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T04_Normalitzacio/3_dependncia_funcional/","title":"3 dependncia funcional","text":"<p>Bases de Dades</p> <ul> <li>Tema 4: Normalitzaci\u00f3</li> <li>Objectius</li> <li>1. Introducci\u00f3</li> <li>2. Primer Forma Normal (1FN)</li> <li>3. Depend\u00e8ncia Funcional</li> <li>4. Segona Forma Normal (2FN)</li> <li>5. Depend\u00e8ncia Funcional Transitiva</li> <li>6. Tercera Forma Normal (3FN)</li> <li>7. Forma Normal Boyce-Codd (FNBC)</li> <li>Resum</li> <li>Exercicis</li> <li>Autoavaluaci\u00f3</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T04_Normalitzacio/3_dependncia_funcional/#3-dependencia-funcional","title":"3. Depend\u00e8ncia Funcional","text":"<p>3.1 DEPEND\u00c8NCIA FUNCIONAL </p> Un atribut o conjunt d'atributs Y dep\u00e8n funcionalment de l'atribut o conjunt de atributs X, i es representa com X \u2192 Y , si i nom\u00e9s si cada valor de X es correspon amb un \u00fanic valor de Y. <p>Per exemple, entre DNI i NOM existeix una depend\u00e8ncia funcional, ja que el valor DNI es correspon amb un \u00fanic nom. </p> <p>DNI \u2192 NOM</p> <p>En aquest cas (suposant que el NOM \u00e9s \u00fanic i no existeixen dos noms iguals) s'acompleix tamb\u00e9 la depend\u00e8ncia </p> <p>NOM \u2192 DNI</p> <p>i ho podr\u00edem abreviar per </p> <p>DNI \u2190\u2192 NOM</p> <p>No sempre es d\u00f3na de forma biun\u00edvoca la depend\u00e8ncia funcional entre dos atributs, es m\u00e9s, en pocs casos succeeix. Per exemple, entre els atributs DNI i ADRE\u00c7A existeix una depend\u00e8ncia funcional ja que una persona identificada pel seu DNI viu en una \u00fanica ADRE\u00c7A. </p> <p>DNI \u2192 ADRECA</p> <p>Per\u00f2 en aquest cas no es d\u00f3na la depend\u00e8ncia en sentit invers, perqu\u00e8 en una ADRE\u00c7A viuen unes quantes persones. A m\u00e9s, l'adre\u00e7a no ens diu ni tan sols la ciutat on es troba (per exemple, el \"C/ Major, 7\" es troba en moltes ciutats) </p> <p>Hi ha atributs que no tenen entre ells una depend\u00e8ncia funcional com \u00e9s el cas de ADRE\u00c7A i DATA_NAIXEMENT. </p> <p>En moltes ocasions, per a determinar un \u00fanic valor d'un atribut, no \u00e9s suficient amb con\u00e8ixer el valor d'un altre atribut, sin\u00f3 que \u00e9s necessari trobar els valors d'uns quants atributs. Aix\u00f2 \u00e9s el que passa, si tenim els atributs: DNI, EMPRESA i SOU, i sabem que una persona pot treballar en m\u00e9s d'una empresa. Entre els atributs DNI i SOU no existeix cap depend\u00e8ncia funcional, ja que un individu pot guanyar sous distints en empreses distintes. Per\u00f2 si coneixem l'empresa en la qual treballa, s\u00ed que podem dir que: </p> <p>DNI . EMPRESA \u2192 SOU</p> <p>L'operador punt \".\" representa l'expressi\u00f3 \"junt amb\" o \"i\" entre els dos atributs i l'operador barra \"|\" fa refer\u00e8ncia a l'expressi\u00f3 \"o tamb\u00e9\". </p> <p>Per tant, podem dir que DNI \"junt amb\" EMPRESA determinen el SOU. I per a la depend\u00e8ncia: </p> <p>DNI \u2192 NOM | ADRECA</p> <p>direm que amb el DNI es coneix el NOM \"o tamb\u00e9\" l'ADRE\u00c7A. </p> <p>3.2 DEPEND\u00c8NCIA FUNCIONAL TOTAL </p> Es diu que l'atribut Y t\u00e9 una depend\u00e8ncia funcional total de l'atribut X si t\u00e9 una depend\u00e8ncia funcional de X i NO dep\u00e8n funcionalment de cap subconjunt de X. <p>Per exemple, una depend\u00e8ncia funcional seria: </p> <p>DNI . EMPRESA \u2192 NOM</p> <p>Per\u00f2, l\u00f2gicament, aquesta depend\u00e8ncia no \u00e9s total ja que NOM dep\u00e8n funcionalment de DNI. Per aix\u00f2, a aquesta depend\u00e8ncia s'anomena depend\u00e8ncia parcial. </p> <p>La depend\u00e8ncia funcional total seria: </p> <p>DNI . EMPRESA \u2192 SOU</p> <p>Ara s\u00ed, el SOU no dep\u00e8n funcionalment de cap subconjunt. </p> <p>\u00c9s evident que si X est\u00e0 format \u00fanicament per un atribut, la depend\u00e8ncia funcional ser\u00e0 total. </p> <p>Les depend\u00e8ncies que ens interessen per a la normalitzaci\u00f3 s\u00f3n sempre les depend\u00e8ncies funcionals totals. </p> <p>3.3 GRAF DE LES DEPEND\u00c8NCIES FUNCIONALS </p> <p>Serveix per a mostrar gr\u00e0ficament la relaci\u00f3 existent entre tots els atributs i \u00e9s una forma clara de tenir una visi\u00f3 general de les dades i de la cohesi\u00f3 existent entre elles. La clau principal es representa dins d'una caixa de l\u00ednies cont\u00ednues amb els seus atributs primaris. La resta dels atributs es representa fora de la caixa. </p> <p>Si existeixen depend\u00e8ncies d'un conjunt d'atributs que no s\u00f3n la clau, aniran dins d'una caixa de l\u00ednies discont\u00ednues per a no confondre-ho amb la clau principal de la taula. </p> <p>Exemple: </p> <p>A . B . C \u2192 M | S M \u2192 N B . C \u2192 O | R O \u2192 P C \u2192 Q (clau = A . B . C)</p> <p>El graf associat \u00e9s: </p> <p></p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial SenseObraDerivada 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T04_Normalitzacio/4_segona_forma_normal_2fn/","title":"4 segona forma normal 2fn","text":"<p>Bases de Dades</p> <ul> <li>Tema 4: Normalitzaci\u00f3</li> <li>Objectius</li> <li>1. Introducci\u00f3</li> <li>2. Primer Forma Normal (1FN)</li> <li>3. Depend\u00e8ncia Funcional</li> <li>4. Segona Forma Normal (2FN)</li> <li>5. Depend\u00e8ncia Funcional Transitiva</li> <li>6. Tercera Forma Normal (3FN)</li> <li>7. Forma Normal Boyce-Codd (FNBC)</li> <li>Resum</li> <li>Exercicis</li> <li>Autoavaluaci\u00f3</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T04_Normalitzacio/4_segona_forma_normal_2fn/#4-segona-forma-normal-2fn","title":"4. Segona Forma Normal (2FN)","text":"<p>Una taula es diu que est\u00e0 en 2FN si i nom\u00e9s si compleix dues condicions:</p><p>- Es troba en 1FN.</p><p>- Tot atribut secundari (aquells que no pertanyen a la clau principal, els que es troben fora de la caixa) dep\u00e8n totalment (t\u00e9 una depend\u00e8ncia funcional total) de la clau completa i, per tant, no d'una part d'ella.</p> <p>Aquesta forma normal nom\u00e9s es considera si la clau principal \u00e9s composta, i per tant, est\u00e0 formada per diversos atributs. </p> <p>Si una taula T t\u00e9 com a atributs A, B, C, D i la clau \u00e9s A . B complint-se les depend\u00e8ncies: </p> <p>A . B \u2192 C</p> <p>B \u2192 D</p> <p>S'observa que la taula no es troba en 2FN ja que l'atribut D no t\u00e9 una depend\u00e8ncia funcional total amb la clau completa A . B , sin\u00f3 amb una part de la clau (B). El graf de les depend\u00e8ncies funcionals seria:</p> <p></p> <p>Si existeix una fletxa que ix de l'interior de la caixa que engloba la clau, aleshores la taula no est\u00e0 en 2FN.</p> <p>Posar en 2FN </p> <p>Per a convertir una taula que no est\u00e0 en segona forma normal a 2FN, es realitza una projecci\u00f3 i es crea: </p> <p>A) Una primera taula amb la clau i totes les seues depend\u00e8ncies totals amb els atributs secundaris afectats: </p> <p></p> <p>B) Una segona taula amb la part de la clau que t\u00e9 depend\u00e8ncies, i els atributs secundaris implicats: </p> <p></p> <p>La clau de la nova taula T2 ser\u00e0 l'antiga part de la clau. </p> <p>Exemple: Taula amb les persones que treballen en diverses empreses amb el sou corresponent, amb els atributs:DNI , NOM , EMPRESA , SOU</p> <p>Entre els atributs existeixen les depend\u00e8ncies: </p> <p>DNI \u2192 NOM</p> <p>DNI . EMPRESA \u2192 SOU</p> <p>El graf que mostra les depend\u00e8ncies \u00e9s el seg\u00fcent: </p> <p></p> <p>\u00c9s evident que la taula no es troba en 2FN, despr\u00e9s de normalitzar s'obt\u00e9: </p> <p></p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial SenseObraDerivada 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T04_Normalitzacio/5_dependncia_funcional_transitiva/","title":"5 dependncia funcional transitiva","text":"<p>Bases de Dades</p> <ul> <li>Tema 4: Normalitzaci\u00f3</li> <li>Objectius</li> <li>1. Introducci\u00f3</li> <li>2. Primer Forma Normal (1FN)</li> <li>3. Depend\u00e8ncia Funcional</li> <li>4. Segona Forma Normal (2FN)</li> <li>5. Depend\u00e8ncia Funcional Transitiva</li> <li>6. Tercera Forma Normal (3FN)</li> <li>7. Forma Normal Boyce-Codd (FNBC)</li> <li>Resum</li> <li>Exercicis</li> <li>Autoavaluaci\u00f3</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T04_Normalitzacio/5_dependncia_funcional_transitiva/#5-dependencia-funcional-transitiva","title":"5. Depend\u00e8ncia Funcional Transitiva","text":"<p>La depend\u00e8ncia funcional transitiva s'aplica per a analitzar les taules en tercera forma normal (3FN). Consisteix b\u00e0sicament a considerar que un atribut no primari nom\u00e9s ha de con\u00e8ixer-se a trav\u00e9s de la clau principal o claus secund\u00e0ries. En un altre cas, estar\u00e0 produint redund\u00e0ncia d'informaci\u00f3 amb les anomalies t\u00edpiques que porta amb ella. </p> <p>Suposem tres subconjunts distints d'atributs A , B i C que pertanyen a una taula T, de manera que es compleixen les condicions: </p><p>A \u2192 B i B \u2212\u2215\u2192 A</p><p>Es diu que C t\u00e9 una depend\u00e8ncia funcional transitiva amb A o que \u00e9s transitivament dependent de A si es compleix que B \u2192 C</p> <p>Gr\u00e0ficament es pot mostrar: </p> <p></p> <p>Per tant, un atribut C \u00e9s transitivament dependent d'un altre A si es coneix per diferents vies, una directament, i una altra a partir d'un altre atribut intermedi B. </p> <p>Per exemple, considerem tres atributs que formen part de la taula ALUMNES: </p> <p>NUMMAT = n\u00fam. de matr\u00edcula. </p> <p>GRUP = Grup assignat. </p> <p>AULAGRUP = Aula assignada al grup. </p> <p>NUMMAT \u2192 GRUP | AULAGRUP</p> <p>GRUP \u2192 AULAGRUP</p> <p>L'atribut AULAGRUP \u00e9s transitivament dependent de NUMMAT, ja que es pot con\u00e8ixer per mig de l'atribut NUMMAT i a trav\u00e9s de l'atribut GRUP </p> <p></p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial SenseObraDerivada 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T04_Normalitzacio/6_tercera_forma_normal_3fn/","title":"6 tercera forma normal 3fn","text":"<p>Bases de Dades</p> <ul> <li>Tema 4: Normalitzaci\u00f3</li> <li>Objectius</li> <li>1. Introducci\u00f3</li> <li>2. Primer Forma Normal (1FN)</li> <li>3. Depend\u00e8ncia Funcional</li> <li>4. Segona Forma Normal (2FN)</li> <li>5. Depend\u00e8ncia Funcional Transitiva</li> <li>6. Tercera Forma Normal (3FN)</li> <li>7. Forma Normal Boyce-Codd (FNBC)</li> <li>Resum</li> <li>Exercicis</li> <li>Autoavaluaci\u00f3</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T04_Normalitzacio/6_tercera_forma_normal_3fn/#6-tercera-forma-normal-3fn","title":"6. Tercera Forma Normal (3FN)","text":"<p>Una taula es diu que est\u00e0 en 3FN si i nom\u00e9s si es compleixen dues condicions:</p><p>- Es troba en 2FN.</p><p>- No existeixen atributs no primaris (atributs que no formen part de la clau principal) que s\u00f3n transitivament dependents de cada clau candidata de la taula.</p> <p>A\u00e7\u00f2 vol dir que un atribut secundari nom\u00e9s es pot con\u00e8ixer a trav\u00e9s de la clau principal o claus candidates de la taula i no per mig d'un altre atribut no primari. </p> <p>En el graf de depend\u00e8ncies nom\u00e9s han de mostrar-se les depend\u00e8ncies transitives i no aquelles depend\u00e8ncies funcionals a partir de les claus candidates, perqu\u00e8 se sap que per ser claus ja coneixen tots els atributs. </p> <p>Exemple: A \u00e9s la clau principal, B \u00e9s una clau candidata i es donen les seg\u00fcents depend\u00e8ncies: </p> <p>A \u2192 B B \u2192 A C \u2192 D</p> <p>A \u2192 C B \u2192 C C \u2192 E</p> <p>A \u2192 D B \u2192 D</p> <p>A \u2192 E B \u2192 E</p> <p>El graf queda del seg\u00fcent mode:</p> O b\u00e9 <p>Les fletxes que mostren les depend\u00e8ncies funcionals que t\u00e9 la clau candidata B no es representen (com hem dit anteriorment) perqu\u00e8 s\u00f3n evidents i no simplifiquen la visi\u00f3 del graf. A m\u00e9s a m\u00e9s, per a la normalitzaci\u00f3, no es necessiten per a res; pel contrari, solen complicar l'an\u00e0lisi. </p> <p>La taula T no est\u00e0 en 3FN ja que els atributs D i E s\u00f3n transitivament dependents respecte de la clau A. </p> <p>Posar en 3FN </p> <p>Per a normalitzar una taula que no estiga en tercera forma normal, \u00e9s a dir, que tinga depend\u00e8ncies transitives, descompondrem la taula en m\u00e9s d'una taula: </p> <p>A) Una primera taula amb la clau principal m\u00e9s els atributs que no depenen transitivament </p> <p></p> <p>B) Una segona taula amb els atributs que depenen transitivament, m\u00e9s l'atribut de qui depenen, que ser\u00e0 clau principal </p> <p></p> <p>Es far\u00e0 una descomposici\u00f3 per cada depend\u00e8ncia transitiva que hi haja que afecte a camps distints. </p> <p>Per a l'exemple dels atributs NUMMAT, GRUP i AULAGRUP tenim el seg\u00fcent graf: </p> <p> </p> <p>Una vegada descomposta la taula en dos segons l'algoritme anterior, tindrem dues taules </p> <p></p> <p>Les dues taules resultants s\u00ed que es troben en 3FN. </p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial SenseObraDerivada 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T04_Normalitzacio/7_forma_normal_boycecodd_fnbc/","title":"7 forma normal boycecodd fnbc","text":"<p>Bases de Dades</p> <ul> <li>Tema 4: Normalitzaci\u00f3</li> <li>Objectius</li> <li>1. Introducci\u00f3</li> <li>2. Primer Forma Normal (1FN)</li> <li>3. Depend\u00e8ncia Funcional</li> <li>4. Segona Forma Normal (2FN)</li> <li>5. Depend\u00e8ncia Funcional Transitiva</li> <li>6. Tercera Forma Normal (3FN)</li> <li>7. Forma Normal Boyce-Codd (FNBC)</li> <li>Resum</li> <li>Exercicis</li> <li>Autoavaluaci\u00f3</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T04_Normalitzacio/7_forma_normal_boycecodd_fnbc/#7-forma-normal-boyce-codd-fnbc","title":"7. Forma Normal Boyce-Codd (FNBC)","text":"<p>Despr\u00e9s de la creaci\u00f3 de la 3FN es va observar, posteriorment, que podien haver anomalies que no eren abordades. De tota manera s\u00f3n unes redund\u00e0ncies ja molt extranyes, i que de vegades no valdr\u00e0 la pena considerar-les.</p> <p>S\u00f3n casos de taules que encara que estan en 3FN, mantenen una depend\u00e8ncia d'un atribut secundari amb part de la clau. \u00c9s l'\u00fanic cas de depend\u00e8ncia transitiva que se'ns podia haver escapat. Gr\u00e0ficament \u00e9s el seg\u00fcent cas: </p> <p></p> Una taula T est\u00e0 en FNBC si i nom\u00e9s si est\u00e0 en 1FN i les \u00faniques depend\u00e8ncies funcionals elementals s\u00f3n aquelles en les quals la clau principal (i claus candidates) determinen un atribut. <p>La definici\u00f3 engloba la 3FN ja que les depend\u00e8ncies transitives existeixen per mig d'atributs secundaris que no eren clau. </p> <p>Si la clau est\u00e0 formada per un \u00fanic atribut i ja estava en 3FN, la taula est\u00e0 en FNBC (com succe\u00efa amb la 2FN). </p> <p>Exemple: Taula d'una guia de carrers </p> <p>GUIA DE CARRERS</p> ADRE\u00c7A CIUTAT CODPOST C/ Pez, 2 Benicarl\u00f3 12580 C/ Luz, 5 Benicarl\u00f3 12580 C/ Mar, 4 Castell\u00f3 12005 C/ Sol, 4 Vinar\u00f2s 12500 C/ Sal, 9 Castell\u00f3 12004 C/ Mar, 4 Vinar\u00f2s 12500 <p>Les depend\u00e8ncies funcionals que ens trobem s\u00f3n: </p> <p>ADRE\u00c7A . CIUTAT \u2192 CODPOST</p> <p>CODPOST \u2192 CIUTAT</p> <p>Gr\u00e0ficament: </p> <p></p> <p>Si observem atentament les tuples d'una taula com aquesta, veurem que per a un mateix codi postal existeixen multitud de tuples que es corresponen amb la mateixa ciutat (tantes com adreces hi haja diferents), per tant existeix informaci\u00f3 duplicada. </p> <p>Si la informaci\u00f3, una vegada que es d\u00f3na d'alta no varia, \u00e9s m\u00e9s rendible que la depend\u00e8ncia funcional CODPOST \u2192 CIUTAT es trobe en una altra taula i que existisca una sola tupla per a cada codi postal. </p> <p>A m\u00e9s a m\u00e9s, qu\u00e8 succeeix si s'elimina la tupla amb adre\u00e7a \"C/ Sol, 4\" de \"Vinar\u00f2s\" i la tupla \"C/ Mar, 4\" de \"Vinar\u00f2s\"? El que ocorre \u00e9s que desapareix la relaci\u00f3 entre el codi postal \"12500\" i \"Vinar\u00f2s\" i potser aquestes dades haurien de mantenir-se. </p> <p>Si analitzem amb m\u00e9s detall la taula, veur\u00edem que en realitat es pot substituir la clau principal per A + C (en l'exemple ADRE\u00c7A + CODPOSTAL), ja que si A + B ja era clau principal, com per cada valor de C nom\u00e9s podem tenir un de B, la combinaci\u00f3 A + C tamb\u00e9 podr\u00e0 identificar un\u00edvocament cada ocurr\u00e8ncia de la taula. Per tant, si substituirem la clau principal, ja no tindr\u00edem dubtes de com normalitzar la taula, que ser\u00e0 justament com veurem a continuaci\u00f3: </p> \u00e9s equivalent a <p>Posar en FNBC </p> <p>L'algoritme de descomposici\u00f3 que s'aplica a una taula que no est\u00e0 en FNBC \u00e9s el seg\u00fcent: </p> <p>Si tenim una depend\u00e8ncia funcional C \u2192 B on C i B s\u00f3n disjunts, C \u00e9s una atribut no primari, i B forma part de la clau. </p> <p>S'obtenen les projeccions: </p> <p>A) Una primera taula T1 amb tots els atributs, excepte B (el que formava part de la clau principal); ara formar\u00e0 part de la clau principal C. </p> <p>B) Una segona taula T2 amb els atributs C i B, i ser\u00e0 la clau principal C</p> <p>En l'exemple inicial d'aquesta pregunta quedar\u00e0: </p> A) <p></p><p> </p> B) <p>En l'exemple de la GUIA DE CARRERS: </p> <p></p> <p>I quedarien amb la seg\u00fcent informaci\u00f3: </p> GUIA-ADRE\u00c7A GUIA-CODPOST ADRE\u00c7A CODPOST C/ Pez, 2 12580 C/ Luz, 5 12580 C/ Mar, 4 12005 C/ Sol, 4 12500 C/ Sal, 9 12004 C/ Mar, 4 12500 CODPOST CIUTAT 12004 Castell\u00f3 12005 Castell\u00f3 12500 Vinar\u00f2s 12580 Benicarl\u00f3 <p>Per \u00faltim, observem les taules que ens queden. Voldrem tenir una taula de codis postals? Si el disseny \u00e9s per a Correus o Telef\u00f2nica, o una empresa gran que tinga molts client i els vol tenir distribu\u00efts per codis postals, doncs segur que s\u00ed. </p> <p>Per\u00f2 si es tracta d'una empresa no massa gran, i que tampoc interessa massa la distribuci\u00f3 per codis postals, segurament mantenir una taula de codis postals pot semblar fins i tot rid\u00edcul. Aleshores, mantenir la taula en 3FN i assumir la miqueta de redund\u00e0ncia que suposa no tenir-la en FNBC, pot ser fins i tot saludable. Per aix\u00f2 s'ha comentat des del principi del tema la import\u00e0ncia de normalitzar fins la 3FN, i la FNBC t\u00e9 una import\u00e0ncia relativa. </p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial SenseObraDerivada 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T04_Normalitzacio/autoavaluaci/","title":"Autoavaluaci","text":"<p>Bases de Dades</p> <ul> <li>Tema 4: Normalitzaci\u00f3</li> <li>Objectius</li> <li>1. Introducci\u00f3</li> <li>2. Primer Forma Normal (1FN)</li> <li>3. Depend\u00e8ncia Funcional</li> <li>4. Segona Forma Normal (2FN)</li> <li>5. Depend\u00e8ncia Funcional Transitiva</li> <li>6. Tercera Forma Normal (3FN)</li> <li>7. Forma Normal Boyce-Codd (FNBC)</li> <li>Resum</li> <li>Exercicis</li> <li>Autoavaluaci\u00f3</li> </ul> <p>\u00ab Anterior</p>"},{"location":"BD-T04_Normalitzacio/autoavaluaci/#autoavaluacio","title":"Autoavaluaci\u00f3","text":""},{"location":"BD-T04_Normalitzacio/autoavaluaci/#eleccio-multiple","title":"Elecci\u00f3 m\u00faltiple","text":""},{"location":"BD-T04_Normalitzacio/autoavaluaci/#questio","title":"Q\u00fcesti\u00f3","text":"<p>Despr\u00e9s del proc\u00e9s de normalitzaci\u00f3, normalment el n\u00famero de taules resultants \u00e9s: </p>"},{"location":"BD-T04_Normalitzacio/autoavaluaci/#respostes","title":"Respostes","text":"<p>Opci\u00f3 1</p> <p>Superior </p> <p>Opci\u00f3 2</p> <p>Igual </p> <p>Opci\u00f3 3</p> <p>No t\u00e9 res a veure, \u00e9s independent </p> <p>Opci\u00f3 4</p> <p>Inferior </p>"},{"location":"BD-T04_Normalitzacio/autoavaluaci/#realimentacio","title":"Realimentaci\u00f3","text":"<p>Correcte !!! </p> <p>NOOOOOOOO !!! </p> <p>NOOOOOOOO !!! </p> <p>NOOOOOOOO !!! </p>"},{"location":"BD-T04_Normalitzacio/autoavaluaci/#solucio","title":"Soluci\u00f3","text":"<ol> <li>Opci\u00f3 correcta (Realimentaci\u00f3)</li> <li>Incorrecte (Realimentaci\u00f3)</li> <li>Incorrecte (Realimentaci\u00f3)</li> <li>Incorrecte (Realimentaci\u00f3)</li> </ol>"},{"location":"BD-T04_Normalitzacio/autoavaluaci/#eleccio-multiple_1","title":"Elecci\u00f3 m\u00faltiple","text":""},{"location":"BD-T04_Normalitzacio/autoavaluaci/#questio_1","title":"Q\u00fcesti\u00f3","text":"<p>La depend\u00e8ncia funcional entre 2 atributs, A i B, i que representem com A \u2192 B, significa: </p>"},{"location":"BD-T04_Normalitzacio/autoavaluaci/#respostes_1","title":"Respostes","text":"<p>Opci\u00f3 1</p> <p>que per cada valor de B nom\u00e9s en tenim un de A </p> <p>Opci\u00f3 2</p> <p>que per cada valor de A nom\u00e9s en tenim un de B </p> <p>Opci\u00f3 3</p> <p>que B dep\u00e9n de la funci\u00f3 que tinga A en la taula (com per exemple si \u00e9s clau principal) </p> <p>Opci\u00f3 4</p> <p>cap de les anteriors </p>"},{"location":"BD-T04_Normalitzacio/autoavaluaci/#realimentacio_1","title":"Realimentaci\u00f3","text":"<p>NOOOOOOOOO!!!! </p> <p>CORRECTE !! </p> <p>NOOOOOOOOO!!!! </p> <p>NOOOOOOOOO!!!! </p>"},{"location":"BD-T04_Normalitzacio/autoavaluaci/#solucio_1","title":"Soluci\u00f3","text":"<ol> <li>Incorrecte (Realimentaci\u00f3)</li> <li>Opci\u00f3 correcta (Realimentaci\u00f3)</li> <li>Incorrecte (Realimentaci\u00f3)</li> <li>Incorrecte (Realimentaci\u00f3)</li> </ol>"},{"location":"BD-T04_Normalitzacio/autoavaluaci/#eleccio-multiple_2","title":"Elecci\u00f3 m\u00faltiple","text":""},{"location":"BD-T04_Normalitzacio/autoavaluaci/#questio_2","title":"Q\u00fcesti\u00f3","text":"<p>Suposem una taula per a guardar les FACTURES d'una empresa. En ella tindrem, entre d'altres, dos atributs: num_fact i data_fact. Quina depend\u00e8ncia funcional penseu que tindrem entre ells? </p>"},{"location":"BD-T04_Normalitzacio/autoavaluaci/#respostes_2","title":"Respostes","text":"<p>Opci\u00f3 1</p> <p>num_fact \u2192 data_fact </p> <p>Opci\u00f3 2</p> <p>data_fact \u2192 num_fact </p> <p>Opci\u00f3 3</p> <p>num_fact \u2194 data_fact </p> <p>Opci\u00f3 4</p> <p>No hi ha cap depend\u00e8ncia funcional </p>"},{"location":"BD-T04_Normalitzacio/autoavaluaci/#realimentacio_2","title":"Realimentaci\u00f3","text":"<p>CORRECTE !! </p> <p>NOOOOOOOOOO!!!!!!! </p> <p>NOOOOOOOOOO!!!!!!! </p> <p>NOOOOOOOOOO!!!!!!! </p>"},{"location":"BD-T04_Normalitzacio/autoavaluaci/#solucio_2","title":"Soluci\u00f3","text":"<ol> <li>Opci\u00f3 correcta (Realimentaci\u00f3)</li> <li>Incorrecte (Realimentaci\u00f3)</li> <li>Incorrecte (Realimentaci\u00f3)</li> <li>Incorrecte (Realimentaci\u00f3)</li> </ol>"},{"location":"BD-T04_Normalitzacio/autoavaluaci/#eleccio-multiple_3","title":"Elecci\u00f3 m\u00faltiple","text":""},{"location":"BD-T04_Normalitzacio/autoavaluaci/#questio_3","title":"Q\u00fcesti\u00f3","text":"<p>I quina depend\u00e8ncia funcional hi haur\u00e0 entre data_fact i num_client? </p>"},{"location":"BD-T04_Normalitzacio/autoavaluaci/#respostes_3","title":"Respostes","text":"<p>Opci\u00f3 1</p> <p>data_fact \u2192 num_client </p> <p>Opci\u00f3 2</p> <p>num_client \u2192 data_fact </p> <p>Opci\u00f3 3</p> <p>data_fact \u2194 num_client </p> <p>Opci\u00f3 4</p> <p>No hi ha cap depend\u00e8ncia funcional </p>"},{"location":"BD-T04_Normalitzacio/autoavaluaci/#realimentacio_3","title":"Realimentaci\u00f3","text":"<p>NOOOOOOOOOO!!!!!!! </p> <p>NOOOOOOOOOO!!!!!!! </p> <p>NOOOOOOOOOO!!!!!!! </p> <p>CORRECTE !! </p>"},{"location":"BD-T04_Normalitzacio/autoavaluaci/#solucio_3","title":"Soluci\u00f3","text":"<ol> <li>Incorrecte (Realimentaci\u00f3)</li> <li>Incorrecte (Realimentaci\u00f3)</li> <li>Incorrecte (Realimentaci\u00f3)</li> <li>Opci\u00f3 correcta (Realimentaci\u00f3)</li> </ol>"},{"location":"BD-T04_Normalitzacio/autoavaluaci/#eleccio-multiple_4","title":"Elecci\u00f3 m\u00faltiple","text":""},{"location":"BD-T04_Normalitzacio/autoavaluaci/#questio_4","title":"Q\u00fcesti\u00f3","text":"De quina manera normalitzaries la seg\u00fcent taula:"},{"location":"BD-T04_Normalitzacio/autoavaluaci/#respostes_4","title":"Respostes","text":"<p>Opci\u00f3 1</p> <p></p> <p>Opci\u00f3 2</p> <p></p> <p>Opci\u00f3 3</p> <p></p>"},{"location":"BD-T04_Normalitzacio/autoavaluaci/#realimentacio_4","title":"Realimentaci\u00f3","text":"<p>NOOOOOOOOO !!!! </p> <p>NOOOOOOOOO !!!! </p> <p>CORRECTE ! </p>"},{"location":"BD-T04_Normalitzacio/autoavaluaci/#solucio_4","title":"Soluci\u00f3","text":"<ol> <li>Incorrecte (Realimentaci\u00f3)</li> <li>Incorrecte (Realimentaci\u00f3)</li> <li>Opci\u00f3 correcta (Realimentaci\u00f3)</li> </ol> <p>\u00ab Anterior</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial SenseObraDerivada 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T04_Normalitzacio/exercicis/","title":"Exercicis","text":"<p>Bases de Dades</p> <ul> <li>Tema 4: Normalitzaci\u00f3</li> <li>Objectius</li> <li>1. Introducci\u00f3</li> <li>2. Primer Forma Normal (1FN)</li> <li>3. Depend\u00e8ncia Funcional</li> <li>4. Segona Forma Normal (2FN)</li> <li>5. Depend\u00e8ncia Funcional Transitiva</li> <li>6. Tercera Forma Normal (3FN)</li> <li>7. Forma Normal Boyce-Codd (FNBC)</li> <li>Resum</li> <li>Exercicis</li> <li>Autoavaluaci\u00f3</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T04_Normalitzacio/exercicis/#exercicis","title":"Exercicis","text":""},{"location":"BD-T04_Normalitzacio/exercicis/#exercici-1","title":"Exercici 1","text":"<p>Normalitzar la taula relacional que t\u00e9 com a graf de depend\u00e8ncies funcionals el seg\u00fcent: </p> <p></p> <p>Podeu normalitzar-ho tot directament, sense haver de passar primer per 2FN , 3FN i FNBC. </p> <p></p>"},{"location":"BD-T04_Normalitzacio/exercicis/#exercici-2","title":"Exercici 2","text":"<p>En un Institut tenen distribu\u00efda la informaci\u00f3 en els seg\u00fcents fitxers:</p> <p>FGAL </p><p>CODAL NUMEX COGNOM1 COGNOM2 NOM CODCURS NOMCURS</p> <p>FASSIGN</p><p>CODCURS CODASSIG NOMCURS NOMASSIG CODPROF NOMPROF</p> <p>FPROF</p><p>CODPROF NOMPROF CODCURS1 CODASSIG1 CODCURS2 CODASSIG2 . . . CODCURS10 CODASSIG10</p> <p>FCURS</p><p>CODCURS NOMCURS CODTUTOR NOMTUTOR CODASSIG1 CODASSIG2 . . . CODASSIG17</p> <p>Normalitzeu els fitxers, si els considerem taules d\u2019una Base de Dades. Heu de parar especial atenci\u00f3 a veure si est\u00e0 en 1FN.</p> <p></p>"},{"location":"BD-T04_Normalitzacio/exercicis/#exercici-3","title":"Exercici 3","text":"<p>La factura d'un hotel \u00e9s la seg\u00fcent:</p> HOTEL PRIMAVERA Factura: 1934 Data: 15 desembre 2009 Client: Andreu Torl\u00e0 Gomis Habitaci\u00f3: 202 DNI: 18.012.345-W Tipus: Doble Domicili: C/ Palanques, 5 Tarifa: 2 CP: 12004 Poblaci\u00f3: Castell\u00f3 Tel\u00e8fon: 964-223344 N\u00fam. pers.: 2 Codi Concepte Quantitat Preu unitari Total 2 Est\u00e0ncia Mitja Pensi\u00f3 3 65 195 45 Dinar 2 15 30 23 Consum Bar 1 5,3 5,3 Base imponible: 230,3 IVA (16%): 36,85 ---------- Total : 267,15 <p>Si considerem tota la informaci\u00f3 en una \u00fanica taula tindrem:</p> <p>FACTURA</p> NUMFACT DATA NUMHAB TIPHAB TARHAB NOMCLI DNICLI ADRCLI CPCLI CIUCLI TELCLI NUMPERS COD1 CONCEPTE1 QUANT1 PREU1 TOTAL1 . . COD15 CONCEPTE15 QUANT15 PREU15 TOTAL15 TOTAL IVA TOTALIVA TOTFAC <p>Intenteu normalitzar-la. Pareu especial atenci\u00f3 aveure si est\u00e0 en 1FN.</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial SenseObraDerivada 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T04_Normalitzacio/objectius/","title":"Objectius","text":"<p>Bases de Dades</p> <ul> <li>Tema 4: Normalitzaci\u00f3</li> <li>Objectius</li> <li>1. Introducci\u00f3</li> <li>2. Primer Forma Normal (1FN)</li> <li>3. Depend\u00e8ncia Funcional</li> <li>4. Segona Forma Normal (2FN)</li> <li>5. Depend\u00e8ncia Funcional Transitiva</li> <li>6. Tercera Forma Normal (3FN)</li> <li>7. Forma Normal Boyce-Codd (FNBC)</li> <li>Resum</li> <li>Exercicis</li> <li>Autoavaluaci\u00f3</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T04_Normalitzacio/objectius/#objectius","title":"Objectius","text":""},{"location":"BD-T04_Normalitzacio/objectius/#objectius_1","title":"Objectius","text":"<p>El proc\u00e9s de normalitzaci\u00f3 consisteix en optimitzar les taules per eliminar tota redund\u00e0ncia i mal disseny possible. </p> <p>Hem de ser conscients, per\u00f2, que si la Base de Dades est\u00e0 ben dissenyada des del principi, estar\u00e0 pr\u00e0cticament normalitzada, m\u00e9s si tenim en compte que la Forma Normal Boyce-Codd elimina una redund\u00e0ncia molt rara de trobar, i que la major part de les ocasions no ens molestar\u00e0 aquesta miqueta de redud\u00e0ncia (abans al contrari, ens suposaria m\u00e9s mol\u00e8stia tenir una altra taula). </p> <p>La utilitat real de la normalitzaci\u00f3 ser\u00e0 quan partim d'una Base de Dades directament importada d'un sistema de fitxers (un fitxer \u2192 una taula), on ara s\u00ed normalment estar\u00e0 molt mal dissenyat. </p> <p>Els objectius m\u00ednims seran, per tant: </p> <ul> <li> <p>Entendre el problema de la redund\u00e0ncia i el mal disseny d'una Base de Dades.</p> </li> <li> <p>Detectar quan una taula no est\u00e0 en Primera Forma Normal.</p> </li> <li> <p>Saber passar una taula no normalitzada a Primera Forma Normal.</p> </li> <li> <p>Detectar totes les depend\u00e8ncies funcionals entre els atributs d'una taula.</p> </li> <li> <p>Saber passar una taula en Primera Forma Normal a Tercera Forma Normal (directament). </p> </li> </ul> <p>Els objectius d'ampliaci\u00f3 (i que no ens interessen tant) seran: </p> <ul> <li>Saber posar en Forma Normal Boyce-Codd </li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial SenseObraDerivada 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T04_Normalitzacio/resum/","title":"Resum","text":"<p>Bases de Dades</p> <ul> <li>Tema 4: Normalitzaci\u00f3</li> <li>Objectius</li> <li>1. Introducci\u00f3</li> <li>2. Primer Forma Normal (1FN)</li> <li>3. Depend\u00e8ncia Funcional</li> <li>4. Segona Forma Normal (2FN)</li> <li>5. Depend\u00e8ncia Funcional Transitiva</li> <li>6. Tercera Forma Normal (3FN)</li> <li>7. Forma Normal Boyce-Codd (FNBC)</li> <li>Resum</li> <li>Exercicis</li> <li>Autoavaluaci\u00f3</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T04_Normalitzacio/resum/#resum","title":"Resum","text":"1FN <p>Una taula est\u00e0 en 1FN si i nom\u00e9s si els valors que componen els atributs d'una tupla s\u00f3n at\u00f2mics.</p> <p>Es descompon la taula en dos </p> <p>1a.- Projecci\u00f3 de la clau junt amb els atributs que tenen valors at\u00f2mics. </p> <p>2a.- Nova clau amb els atributs que tenen valors m\u00faltiples (cal idear una nova clau). </p> 2FN <p>Una taula est\u00e0 en 2FN si i nom\u00e9s si compleix dues condicions:</p> <ul> <li>Est\u00e0 en 1FN.</li> <li>Tot atribut secundari (els que no pertanyen a la clau principal) dep\u00e8n totalment (t\u00e9 una depend\u00e8ncia funcional total) de la clau completa, i per tant, no d'una part d'ella.</li> </ul> <p>Es descompon la taula en dos </p> <p>1a.- Una taula amb la clau i totes les seues depend\u00e8ncies totals. </p> <p>2a.- Una altra taula amb la part de la clau que t\u00e9 depend\u00e8ncies, i els atributs secundaris implicats. </p> <p></p> 3FN <p>Una taula es troba en 3FN si i nom\u00e9s si es compleixen dues condicions:</p> <ul> <li>Est\u00e0 en 2FN.</li> <li>No existeixen atributs no primaris (que no formen part de la clau) que s\u00f3n transitivament dependents d'una clau candidata (cada possible clau de la taula).</li> </ul> <p>Es descompon la taula en dos </p> <p>1a.- Una taula amb la clau i tots els atributs no primaris que no s\u00f3n transitius. </p> <p>2a.- Una altra taula amb els atributs transitius i l'atribut no primari (que ser\u00e0 la clau de la nova taula). </p> <p></p> FNBC <p>Una taula est\u00e0 en FNBC si i nom\u00e9s si est\u00e0 en 1FN i les \u00faniques depend\u00e8ncies funcionals s\u00f3n aquelles en qu\u00e8 la clau principal (i claus candidates) determinen un atribut.</p> <p>Es descompon la taula en dos </p> <p>1a.- Una taula amb tots els atributs menys la part de la clau dependent de l'atribut secundari. La clau est\u00e0 formada per la resta de la clau i l'atribut secundari del que depenia part de la clau. </p> <p>2a.- Una altra taula en qu\u00e8 l'atribut de qu\u00e8 dep\u00e8n part de la clau ser\u00e0 la nova clau i aquesta part de la clau com a atribut secundari. </p> <p></p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial SenseObraDerivada 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T05_Annex_Access/","title":"Index","text":"<p>Bases de Dades</p> <ul> <li>Tema 5 (annex): Access avan\u00e7at</li> <li>Objectius</li> <li>Part I: Pr\u00e0ctica inicial </li> <li>1.1 Taules</li> <li>1.2 Consultes</li> <li>1.3 Formularis i Informes</li> <li>Part II: Macros </li> <li>2.1 Creaci\u00f3 d'una Macro</li> <li>2.2 Accions m\u00faltiples</li> <li>2.3 Submacros</li> <li>2.4 Condicions</li> <li>2.5 Resum d'accions</li> <li>2.6 Resum d'esdeveniments</li> <li>Part III: M\u00f2duls (Visual Basic) </li> <li>3.1 Creaci\u00f3 d'un M\u00f2dul</li> <li>3.2 Tipus de dades, Constants i Variables</li> <li>3.3 Tipus especials</li> <li>3.4 Operadors</li> <li>3.5 Funcions i Procediments</li> <li>3.6 Sent\u00e8ncies</li> <li>3.7 Funcions est\u00e0ndard</li> <li>3.8 Objectes especials: propietats i m\u00e8todes</li> <li>Part IV: Configurar l'aspecte </li> <li>4.1 Configurar la Barra d'Acc\u00e9s r\u00e0pid <ul> <li>Exercici 4.1</li> </ul> </li> <li>4.2 La cinta d'opcions <ul> <li>4.2.1 Modificaci\u00f3 per a tot Access </li> <li>Exercici 4.2</li> <li>4.2.2 Modificaci\u00f3 per a la Base de Dades actual </li> <li>Exercici 4.3 (voluntari per\u00f2 puntuable)</li> </ul> </li> <li>4.3 El panell de navegaci\u00f3</li> <li>4.4 Opcions d'aplicaci\u00f3 <ul> <li>Exercici 4.4</li> </ul> </li> <li>4.5 El panell de control <ul> <li>Exercici 4.5</li> </ul> </li> </ul> <p>Seg\u00fcent \u00bb</p>"},{"location":"BD-T05_Annex_Access/#tema-5-annex-access-avancat","title":"Tema 5 (annex): Access avan\u00e7at","text":"<p>Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial SenseObraDerivada 2.5 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T05_Annex_Access/11_taules/","title":"11 taules","text":"<p>Bases de Dades</p> <ul> <li>Tema 5 (annex): Access avan\u00e7at</li> <li>Objectius</li> <li>Part I: Pr\u00e0ctica inicial </li> <li>1.1 Taules</li> <li>1.2 Consultes</li> <li>1.3 Formularis i Informes</li> <li>Part II: Macros </li> <li>2.1 Creaci\u00f3 d'una Macro</li> <li>2.2 Accions m\u00faltiples</li> <li>2.3 Submacros</li> <li>2.4 Condicions</li> <li>2.5 Resum d'accions</li> <li>2.6 Resum d'esdeveniments</li> <li>Part III: M\u00f2duls (Visual Basic) </li> <li>3.1 Creaci\u00f3 d'un M\u00f2dul</li> <li>3.2 Tipus de dades, Constants i Variables</li> <li>3.3 Tipus especials</li> <li>3.4 Operadors</li> <li>3.5 Funcions i Procediments</li> <li>3.6 Sent\u00e8ncies</li> <li>3.7 Funcions est\u00e0ndard</li> <li>3.8 Objectes especials: propietats i m\u00e8todes</li> <li>Part IV: Configurar l'aspecte </li> <li>4.1 Configurar la Barra d'Acc\u00e9s r\u00e0pid <ul> <li>Exercici 4.1</li> </ul> </li> <li>4.2 La cinta d'opcions <ul> <li>4.2.1 Modificaci\u00f3 per a tot Access </li> <li>Exercici 4.2</li> <li>4.2.2 Modificaci\u00f3 per a la Base de Dades actual </li> <li>Exercici 4.3 (voluntari per\u00f2 puntuable)</li> </ul> </li> <li>4.3 El panell de navegaci\u00f3</li> <li>4.4 Opcions d'aplicaci\u00f3 <ul> <li>Exercici 4.4</li> </ul> </li> <li>4.5 El panell de control <ul> <li>Exercici 4.5</li> </ul> </li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T05_Annex_Access/11_taules/#11-taules","title":"1.1 Taules","text":"<p>Realitzar les seg\u00fcents q\u00fcestions:</p> <p>1.1) Crear una BD en blanc amb el nom Empresa.accdb</p> <p>1.2) Importar EMPLEAT i DEPARTAMENT de la Base de Dades OrEmpresa.accdb que es proporciona. El seg\u00fcent v\u00eddeo us explica com fer la importaci\u00f3\u00a0</p> <p>1.3) Importar una taula a partir del fitxer XML Familiar.xml</p> <p>Durant la importaci\u00f3 haurem de cuidar els seg\u00fcents aspectes:</p> <ul> <li>La clau principal ha de ser Dni + Nom</li> <li>El camp Data_n ha de ser de tipus Fecha/Hora</li> </ul> <p>El seg\u00fcent v\u00eddeo us explica com fer la importaci\u00f3:\u00a0</p> <p>1.4) Importar una taula a partir del fitxer de text PROJECTE.txt,</p> <p>Durant la importaci\u00f3 haurem de cuidar els seg\u00fcents aspectes:</p> <p>Num_p : ha de ser num\u00e8ric i que ocupe un byte. Ha de ser clau principal.</p> <p>Nom_p : (no res)</p> <p>Departament : num\u00e8ric byte, i el seu valor no pot ser nul (a\u00e7\u00f2 \u00faltim ho haureu de fer despr\u00e9s de la importaci\u00f3)</p> <p>El seg\u00fcent v\u00eddeo us explica com fer la importaci\u00f3:\u00a0</p> <p>1.5) Dissenyar la taula TREBALLA (observeu l'esquema Relacional per veure la seua estructura). Els camps seran dni, num_p i hores. Els tipus de dni i num_p venen condicionats per ser claus externes. L'atribut hores (de tipus num\u00e8ric menudet) ha de ser no nul, i major que zero (i per tant el seu valor predeterminat no conv\u00e9 que siga zero). No us oblideu de la clau principal.</p> <p>1.6) Crear totes les integritats referencials. Recordeu que la integritat referencial obliga que la clau externa agafe un dels valors ja introdu\u00efts de la clau principal on apunta (aix\u00ed per exemple, la fletxa que apunta des del camp Departament de la taula EMPLEAT fins el camp Num_d de la taula DEPARTAMENT obliga a posar a cada empleat un departament v\u00e0lid, \u00e9s a dir, dels existents en l'actualitat). A m\u00e9s les de FAMILIAR i TREBALLA han de modificar i esborrar en cascada.</p> <p>Segurament la m\u00e9s \"complicada\" de fer \u00e9s la reflexiva que marca els supervisors. Per a poder representar-la, en Access s'ha de posar la taula (en aquest cas EMPLEAT) 2 vegades i s'arrastra d'una a l'altra. No \u00e9s que siguen 2 taules, sin\u00f3 que s'afegeix a les relacions 2 vegades, per\u00f2 \u00e9s la mateixa taula.</p> <p>1.7) Dissenyar un formulari anomenat Treballa per a introduir les dades a aquesta taula. Els atributs Dni i Num_p s'introduiran per mig de quadres combinats, on es visualitzaran respectivament Dni - Nom i Num_p - Nom_p. L'atribut Hores s'introduir\u00e0 per mig d'un quadre de text.</p> <p>El seg\u00fcent v\u00eddeo explica com crear aquest formulari. La dificultat consisteix en definir b\u00e9 els quadres combinats. Per a poder explicar-lo millor, el primer quadre combinat es crea utilitzant l'assistent de quadre combinat. Despr\u00e9s intenta estudiar les propietats m\u00e9s \u00fatils. El segon quadre combinat es crea m\u00e9s \"a p\u00e8l\", modificant les propietats m\u00e9s importants.</p> <p>Introdu\u00efu a continuaci\u00f3 les seg\u00fcents dades. Observeu que entre par\u00e8ntesi est\u00e0 el Dni de l'empleat i el n\u00famero de projecte, per\u00f2 \u00fanicament a nivell informatiu. No ha d'apar\u00e9ixer en el quadre combinat.</p> \"dni\" \"Num_p\" hores Llopis Bernat, Jaume (18876543) Auditoria 98 (2) 10 Folch Mestre, Pilar (18932165) Auditoria 98 (2) 5 Peris Andreu, Joan (18933333) Programa comptabilitat (3) 10 Sebasti\u00e0 Broch, Ferran (18934567) Programa comptabilitat (3) 20 Garrido Vidal, Rosa (18900111) Control vendes (4) 5 Nebot Aliaga, Carme (18922222) Control vendes (4) 25 Folch Mestre, Pilar (18932165) Control vendes (4) 5 Garcia Tom\u00e0s, Al\u00edcia (18944444) Control vendes (4) 15 Garrido Vidal, Rosa (18900111) Recopilaci\u00f3 dades (5) 15 Folch Mestre, Pilar (18932165) An\u00e0lisi estad\u00edstica (6) 5 Sebasti\u00e0 Broch, Ferran (18934567) An\u00e0lisi estad\u00edstica (6) 10 Llopis Bernat, Jaume (18876543) Estudi rendiment (7) 5 Folch Mestre, Pilar (18932165) Estudi rendiment (7) 15 Garcia Tom\u00e0s, Al\u00edcia (18944444) Estudi rendiment (7) 5 <p>Per\u00f2 \u00bfcom estaran introdu\u00efdes de veritat les dades? \u00bfEstar\u00e0 el nom o el Dni? Les dades \"reals\" les veurem sempre en la taula (en aquest cas TREBALLA)</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial SenseObraDerivada 2.5 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T05_Annex_Access/12_consultes/","title":"12 consultes","text":"<p>Bases de Dades</p> <ul> <li>Tema 5 (annex): Access avan\u00e7at</li> <li>Objectius</li> <li>Part I: Pr\u00e0ctica inicial </li> <li>1.1 Taules</li> <li>1.2 Consultes</li> <li>1.3 Formularis i Informes</li> <li>Part II: Macros </li> <li>2.1 Creaci\u00f3 d'una Macro</li> <li>2.2 Accions m\u00faltiples</li> <li>2.3 Submacros</li> <li>2.4 Condicions</li> <li>2.5 Resum d'accions</li> <li>2.6 Resum d'esdeveniments</li> <li>Part III: M\u00f2duls (Visual Basic) </li> <li>3.1 Creaci\u00f3 d'un M\u00f2dul</li> <li>3.2 Tipus de dades, Constants i Variables</li> <li>3.3 Tipus especials</li> <li>3.4 Operadors</li> <li>3.5 Funcions i Procediments</li> <li>3.6 Sent\u00e8ncies</li> <li>3.7 Funcions est\u00e0ndard</li> <li>3.8 Objectes especials: propietats i m\u00e8todes</li> <li>Part IV: Configurar l'aspecte </li> <li>4.1 Configurar la Barra d'Acc\u00e9s r\u00e0pid <ul> <li>Exercici 4.1</li> </ul> </li> <li>4.2 La cinta d'opcions <ul> <li>4.2.1 Modificaci\u00f3 per a tot Access </li> <li>Exercici 4.2</li> <li>4.2.2 Modificaci\u00f3 per a la Base de Dades actual </li> <li>Exercici 4.3 (voluntari per\u00f2 puntuable)</li> </ul> </li> <li>4.3 El panell de navegaci\u00f3</li> <li>4.4 Opcions d'aplicaci\u00f3 <ul> <li>Exercici 4.4</li> </ul> </li> <li>4.5 El panell de control <ul> <li>Exercici 4.5</li> </ul> </li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T05_Annex_Access/12_consultes/#12-consultes","title":"1.2 Consultes","text":"<p>Continueu amb les seg\u00fcents q\u00fcestions:</p> <p>1.8) Construir una consulta anomenada 1-8:\u00a0 Empleats - Sou en Pessetes on tindrem el nom de l'empleat, Dni, sou en euros i sou en pessetes. (1euro = 166,386pts). Aquesta consulta ha d'anar ordenada de major sou a menor.</p> <p>1.9) Fer una consulta, 1-9: Empleats - comencen per G, on aparega el nom i dni d'aquells empleats que comencen per G.</p> <p>1.10) Construir una consulta, 1-10: Empleats - Departaments, amb el nom dels empleats i els noms dels departaments als quals pertanyen. Ordenat per nom d'empleat.</p> <p></p> <p>Atenci\u00f3</p> <p>\u00c9s m\u00e9s complicada del que sembla en un principi, ja que podeu tenir un efecte no desitjat. Observeu que hi ha d'haver 7 files en total.</p> <p>1.11) Construir una consulta anomenada 1-11: Empleats - N\u00famero de Projectes on tindrem el nom de l'empleat, Dni i n\u00famero de projectes en els quals treballa** </p> <p></p> <p>1.12) Construir una consulta pareguda a l'anterior anomenada 1-12: Projecte - Total d'hores on tindrem el nom del projecte, el n\u00famero de projecte i la suma de les hores treballades en ell.** </p> <p></p> <p>1.13) Construir una consulta anomenada 1-13: Familiars dels empleats amb sous mitjans d'un departament, on tindrem n\u00famero de departament, Dni, nom de l'empleat, nom del familiar, parentesc i sou de l'empleat, ordenat per nom empleat, dels empleats que tenen un sou entre 2.000 i 2.500 \u20ac. (ambd\u00f3s inclosos) d'un departament introdu\u00eft per teclat (ser\u00e0 un par\u00e0metre). Per exemple, si quan pregunte el departament s'introdueix el 3, el resultat seria:</p> <p></p> <p>Nota</p> <p>Per a posar un par\u00e0metre en una consulta per a que ens demane el valor per teclat, hem de posar entre claud\u00e0tors ([ ]) un nom que no siga com cap camp de les taules que entren en la consulta. D'aquesta manera, ens demanar\u00e0 el valor per teclat.</p> <p>1.14) Crear una consulta per a augmentar el sou un 5% als empleats del departament 3. Guardar aquesta consulta com: 1-14: Empleats - Augment Sou. El resultat d'executar-la ser\u00e0 que a partir d'ara els 2 empleats del departament 3 tindran un sou de 2.100\u20ac (abans el tenien de 2.000\u20ac). Ho podeu comprovar obrint la taula EMPLEAT.</p> <p>Atenci\u00f3  Aquesta consulta nom\u00e9s s'ha d'executar una vegada (sin\u00f3 augmentar\u00edem el sou m\u00e9s i m\u00e9s d'aquestos 2 empleats). Access nom\u00e9s avisa que va a procedir a actualitzar un n\u00famero determinat de files, per\u00f2 despr\u00e9s no trau cap resultat. Clar, perqu\u00e8 aquesta consulta \u00e9s de modificaci\u00f3 de dades, i no de mostrar dades.</p> <p>1.15) Construir una consulta de supervisors, on tindrem els dni i nom de tots els empleats, i el nombre de empleats que supervisa cadascun. Guardeu-la amb el nom 1-15: Empleats - Supervisors.</p> <p></p> <p>Pista</p> <p>Far\u00e0 falta posar 2 vegades la taula Empleat, una per a traure el nom i dni de cada empleat, i una altra per a poder comptar els que tenen a aquest de supervisor. I mireu que han d'eixir tots els empleats (fins i tot els que no supervisen a ning\u00fa, que s\u00f3n als que ix 0)\u00a0</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial SenseObraDerivada 2.5 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T05_Annex_Access/13_formularis_i_informes/","title":"13 formularis i informes","text":"<p>Bases de Dades</p> <ul> <li>Tema 5 (annex): Access avan\u00e7at</li> <li>Objectius</li> <li>Part I: Pr\u00e0ctica inicial </li> <li>1.1 Taules</li> <li>1.2 Consultes</li> <li>1.3 Formularis i Informes</li> <li>Part II: Macros </li> <li>2.1 Creaci\u00f3 d'una Macro</li> <li>2.2 Accions m\u00faltiples</li> <li>2.3 Submacros</li> <li>2.4 Condicions</li> <li>2.5 Resum d'accions</li> <li>2.6 Resum d'esdeveniments</li> <li>Part III: M\u00f2duls (Visual Basic) </li> <li>3.1 Creaci\u00f3 d'un M\u00f2dul</li> <li>3.2 Tipus de dades, Constants i Variables</li> <li>3.3 Tipus especials</li> <li>3.4 Operadors</li> <li>3.5 Funcions i Procediments</li> <li>3.6 Sent\u00e8ncies</li> <li>3.7 Funcions est\u00e0ndard</li> <li>3.8 Objectes especials: propietats i m\u00e8todes</li> <li>Part IV: Configurar l'aspecte </li> <li>4.1 Configurar la Barra d'Acc\u00e9s r\u00e0pid <ul> <li>Exercici 4.1</li> </ul> </li> <li>4.2 La cinta d'opcions <ul> <li>4.2.1 Modificaci\u00f3 per a tot Access </li> <li>Exercici 4.2</li> <li>4.2.2 Modificaci\u00f3 per a la Base de Dades actual </li> <li>Exercici 4.3 (voluntari per\u00f2 puntuable)</li> </ul> </li> <li>4.3 El panell de navegaci\u00f3</li> <li>4.4 Opcions d'aplicaci\u00f3 <ul> <li>Exercici 4.4</li> </ul> </li> <li>4.5 El panell de control <ul> <li>Exercici 4.5</li> </ul> </li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T05_Annex_Access/13_formularis_i_informes/#13-formularis-i-informes","title":"1.3 Formularis i Informes","text":"<p>1.16) Crear un formulari, utilitzant l'assistent, per a la taula Departament, posant tots els camps i totes les opcions per defecte. Us posar\u00e0 com a nom del formulari tamb\u00e9 Departament.</p> <p>1.17) Crear un formulari, utilitzant l'assistent, per a la taula Projecte, posant tots els camps i totes les opcions per defecte. Us posar\u00e0 com a nom del formulari tamb\u00e9 Projecte.</p> <p>1.18) En el formulari Departament, llevar el quadre de text corresponent al Director, i inserir un quadre combinat (utilitzant l'assistent: \"vareta m\u00e0gica\") per al camp director, de manera que es puga triar entre tots els empleats de l'empresa. Per a poder llegir millor \u00e9s convenient que s'oculte la clau principal, encara que se seleccione de la taula Empleat tant el Dni com el Nom. Aquest podria ser l'aspecte:</p> <p></p> <p>1.19) Aconseguir el mateix amb el camp departament del formulari Projecte, per\u00f2 ara, en compte d'esborrar el quadre de text, convertir-lo directament a quadre combinat i modificar les propietats per a que funcione com l'altre.</p> <p>1.20) Construir un formulari amb aquest aspecte guardeu-lo com Empleat-Familiar:** </p> <p> </p> <p>1.21) Crear un formulari amb un gr\u00e0fic circular basat en la consulta 1.12: Projecte - Total d'hores. Utilitzeu, en el moment de crear-lo, gr\u00e1fico din\u00e1mico. Poseu els camps oportuns en el mateixos llocs que en la seg\u00fcent imatge. Recordeu que el tipus ha de ser un gr\u00e0fic circular. Anomeneu-lo Projectes: Gr\u00e0fic d'hores.</p> <p></p> <p>El seg\u00fcent v\u00eddeo explica com fer-lo:</p> <p>1.22) Crear un informe que diga el nombre de familiars de cada empleat de cada departament. Haur\u00e0 de tenir el seg\u00fcent aspecte. Guardeu-lo amb el nom Informe: </p> <p></p> <p>Nota</p> <p>Haureu de considerar si es pot fer directament l'informe, i si no es pot quina soluci\u00f3 tenim (que segur que passar\u00e0 per crear una consulta pr\u00e8via on estiga tota la informaci\u00f3 que volem; i volem tots els empleats, fins i tot els que no tenen familiars)</p> <p>1.23) Crear un informe d'etiquetes on ha de constar el nom i l'adre\u00e7a de tots els familiars (l'adre\u00e7a d'un familiar l'obtenim per l'empleat). Donar-li el nom Etiquetes Familiars</p> <p></p> <p>Nota Segurament us far\u00e0 falta una consulta pr\u00e8via, per\u00f2 que \u00e9s prou senzilla.</p> <p>Per a veure el resultat correctament haureu d'anar a Vista Preliminar</p> <p>1.24 VOLUNTARI) Crear un informe com el que tens a continuaci\u00f3. Observa que el que tenim \u00e9s: per cada Departament, veure els Projectes que coordina, i en cada projecte les persones que hi treballen. Tenim totals per cada projecte i cada Departament. El Departament d'Inform\u00e0tica \u00e9s molt il\u00b7lustratiu, perqu\u00e8 coordina 2 projectes.</p> <p></p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial SenseObraDerivada 2.5 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T05_Annex_Access/21_creaci_duna_macro/","title":"21 creaci duna macro","text":"<p>Bases de Dades</p> <ul> <li>Tema 5 (annex): Access avan\u00e7at</li> <li>Objectius</li> <li>Part I: Pr\u00e0ctica inicial </li> <li>1.1 Taules</li> <li>1.2 Consultes</li> <li>1.3 Formularis i Informes</li> <li>Part II: Macros </li> <li>2.1 Creaci\u00f3 d'una Macro</li> <li>2.2 Accions m\u00faltiples</li> <li>2.3 Submacros</li> <li>2.4 Condicions</li> <li>2.5 Resum d'accions</li> <li>2.6 Resum d'esdeveniments</li> <li>Part III: M\u00f2duls (Visual Basic) </li> <li>3.1 Creaci\u00f3 d'un M\u00f2dul</li> <li>3.2 Tipus de dades, Constants i Variables</li> <li>3.3 Tipus especials</li> <li>3.4 Operadors</li> <li>3.5 Funcions i Procediments</li> <li>3.6 Sent\u00e8ncies</li> <li>3.7 Funcions est\u00e0ndard</li> <li>3.8 Objectes especials: propietats i m\u00e8todes</li> <li>Part IV: Configurar l'aspecte </li> <li>4.1 Configurar la Barra d'Acc\u00e9s r\u00e0pid <ul> <li>Exercici 4.1</li> </ul> </li> <li>4.2 La cinta d'opcions <ul> <li>4.2.1 Modificaci\u00f3 per a tot Access </li> <li>Exercici 4.2</li> <li>4.2.2 Modificaci\u00f3 per a la Base de Dades actual </li> <li>Exercici 4.3 (voluntari per\u00f2 puntuable)</li> </ul> </li> <li>4.3 El panell de navegaci\u00f3</li> <li>4.4 Opcions d'aplicaci\u00f3 <ul> <li>Exercici 4.4</li> </ul> </li> <li>4.5 El panell de control <ul> <li>Exercici 4.5</li> </ul> </li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T05_Annex_Access/21_creaci_duna_macro/#21-creacio-duna-macro","title":"2.1 Creaci\u00f3 d'una Macro","text":"<p>La manera inicial de crear una macro ser\u00e0 en la barra d'eines Crear a la dreta del tot, on hi ha un bot\u00f3 per a crear noves Macros o m\u00f2duls.</p> <p></p> <p>El que se'ns presentar\u00e0 per a construir la macro ser\u00e0 el seg\u00fcent:</p> <p></p> <p>El seg\u00fcent v\u00eddeo mostra tot el proc\u00e9s de creaci\u00f3 de la primera macro, ben senzilleta.</p> <p>Una vegada creada la macro es pot executar amb el bot\u00f3 d'execuci\u00f3 (si estem editant-la i demanant-nos pr\u00e8viament que la guardem).</p> <p>Si ja est\u00e0 guardada, podem executar-la amb l'opci\u00f3 \"Ejecutar\" del menu emergent (bot\u00f3 de la dreta sobre el nom de la macro), o senzillament fent doble-clic damunt d'ella.</p> <p>Les coses estaven distribu\u00efdes de forma diferent en Access 2007. Observeu sobretot que els Noms de macro (Submacros) i Condicions (Si) estaven dalt, en compte d'estar a la dreta com ara.</p> <p></p> <p></p>"},{"location":"BD-T05_Annex_Access/21_creaci_duna_macro/#exercici-21","title":"Exercici 2.1","text":"<p>En la B.D. de l'empresa, feu la macro de la figura de dalt, per\u00f2 amb el t\u00edtol \"Missatge de salutaci\u00f3\". Guardeu-la amb el nom \"Salutaci\u00f3\" i executeu-la.</p> <p>Ara ja podrem veure la macro a l'esquerra, en l'apartat de macros. Si no la veieu i esteu segurs que l'heu creada, segurament \u00e9s perqu\u00e8 Access no est\u00e0 configurat en aquest moment per veure tots els objectes. Trieu l'opci\u00f3 Todos los objetos de Access del Pannell d'exploraci\u00f3 (el que hi ha a l'esquerra), com us mostra la seg\u00fcent imatge:</p> <p></p> <p>Aquesta macro \u00e9s del tipus Macro Independent, que vol dir que no dep\u00e9n de cap altre objecte, i sempre la tindrem disponible.</p> <p>Com ja es va comentar ser\u00e0 molt normal enlla\u00e7ar la macro amb algun event. Per exemple quan fem clic a un bot\u00f3 d'un formulari.</p> <p></p>"},{"location":"BD-T05_Annex_Access/21_creaci_duna_macro/#exercici-22","title":"Exercici 2.2","text":"<p>Creeu-vos un formulari nou, sense utilitzar cap assistent de manera que quede en blanc, sense res. S'aconsegueix anant al bot\u00f3 Dise\u00f1o de formulario. Quan el guardeu li poseu el nom \"Botons\". Afegiu un bot\u00f3 de comando (mireu figura), per\u00f2 de moment sense utilitzar l'assistent (\"vareta m\u00e0gica\" desactivada; mireu figura). El que volem \u00e9s traure el missatge de salutaci\u00f3 quan fem clic en el bot\u00f3. Per aconseguir-ho, aneu a les propietats (bot\u00f3 dret sobre el bot\u00f3, o tenint-lo seleccionat anar a Hoja de Propiedades) a la pestanya \"eventos\", sobre l'esdeveniment \"al hacer clic\" trieu la macro Salutaci\u00f3. Per acabar, canvieu el r\u00e8tol Comando0 per Saludar. Ho podeu fer directament sobre el bot\u00f3, o canviant la propietat \"Titulo\"</p> <p></p> <p></p> <p>Per a poder comprovar el seu funcionament, haurem \"d'executar el formulari\", \u00e9s a dir anar de la \"Vista Dise\u00f1o\" del Formulari a la \"Vista Formulario\".</p> <p>Ara anem a crear una Macro\u00a0que no ser\u00e0 Independent, sin\u00f3 associada a un objecte. Ho aprofitarem per veure una manera m\u00e9s r\u00e0pida per fer el proc\u00e9s de creaci\u00f3 d'una macro associada a un esdeveniment.</p> <p></p>"},{"location":"BD-T05_Annex_Access/21_creaci_duna_macro/#exercici-23","title":"Exercici 2.3","text":"<p>Col\u00b7loqueu un altre bot\u00f3, amb el t\u00edtol Despedir. Aneu a la pestanya d'esdeveniments de les propietat. Per\u00f2 en compte de triar la macro en l'esdeveniment \"al hacer clic\", feu clic als tres puntets del costat. Trieu l'opci\u00f3 \"Generador de macros\". Autom\u00e0ticament va a crear-la. Trieu una altra vegada un quadre de missatge (CuadroDeMensaje) i poseu el missatge \"Ad\u00e9u\". Ara tindrem 2 possibilitats de guardar-la.</p> <ul> <li>Si apretem l'opci\u00f3 de Guardar como l'estarem creant com una Macro independent (la veurem en l'apartat de Macros del Pannell d'exploraci\u00f3). \u00c9s possible que en Access 2013 no ens done aquesta possibilitat.</li> <li>Si apretem a l'opci\u00f3 de Guardar o quan tanquem la Macro contestem afirmativament la pregunta de \u00bfDesea guardar los cambios realizados en la macro y actualizar la propiedad? l'estarem creant com una Macro incrustada en l'objecte actual (que \u00e9s un bot\u00f3 de comando), i no la veurem en l'apartat de Macros del Pannell d'exploraci\u00f3.</li> </ul> <p>Trieu aquesta segona possibilitat, i veureu com en l'esdeveniment \"al hacer clic\" us posar\u00e0 [Macro incrustada]</p> <p>Ja hem vist dues maneres d'anar a la creaci\u00f3 d'una macro. En veurem una tercera, que ser\u00e0 utilitzant l'assistent. L'assistent ens proposar\u00e0 que triem una de entre les accions m\u00e9s comunes a l'hora d'utilitzar un bot\u00f3 </p> <p></p>"},{"location":"BD-T05_Annex_Access/21_creaci_duna_macro/#exercici-24","title":"Exercici 2.4","text":"<p>Col\u00b7loqueu un tercer bot\u00f3 per\u00f2 activant pr\u00e8viament l'assistent (\"vareta m\u00e0gica\"). Entre les accions possibles que ens proposa, agrupades per categories, triarem \"Ejecutar macro\", del grup \"Otras\". Presentar\u00e0 les macros independents creades fins el moment. Triem l'\u00fanica creada fins el moment, Salutaci\u00f3. Podeu posar una imatge en el bot\u00f3, o un comentari. Deixeu la imatge.</p> <p>El resultat ha estat que l'assistent ha creat una Macro incrustada que a la seua vegada executa l'acci\u00f3 Executar Macro, concretament la macro Salutaci\u00f3. Ho podeu comprovar mirant les propietats del bot\u00f3.</p> <p>Nota</p> <p>En versions anteriors a Access 2007, que no existien les macros incrustades, l'assistent el que feia era introduir un procediment en Access Basic (unes quantes instruccions).</p> <p>Per a editar una macro ja creada: </p> <ul> <li>si \u00e9s una macro independent es pot fer des del Pannell d'exploraci\u00f3, apretant amb el bot\u00f3 de la dreta damunt de la macro i triant \"Vista dise\u00f1o\", o si est\u00e0 associada a algun event d'un control d'un formulari, fent clic als tres puntets del costat.</li> <li>si \u00e9s una macro incrustada nom\u00e9s ho podrem fer d'aquesta segona manera. </li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial SenseObraDerivada 2.5 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T05_Annex_Access/22_accions_mltiples/","title":"22 accions mltiples","text":"<p>Bases de Dades</p> <ul> <li>Tema 5 (annex): Access avan\u00e7at</li> <li>Objectius</li> <li>Part I: Pr\u00e0ctica inicial </li> <li>1.1 Taules</li> <li>1.2 Consultes</li> <li>1.3 Formularis i Informes</li> <li>Part II: Macros </li> <li>2.1 Creaci\u00f3 d'una Macro</li> <li>2.2 Accions m\u00faltiples</li> <li>2.3 Submacros</li> <li>2.4 Condicions</li> <li>2.5 Resum d'accions</li> <li>2.6 Resum d'esdeveniments</li> <li>Part III: M\u00f2duls (Visual Basic) </li> <li>3.1 Creaci\u00f3 d'un M\u00f2dul</li> <li>3.2 Tipus de dades, Constants i Variables</li> <li>3.3 Tipus especials</li> <li>3.4 Operadors</li> <li>3.5 Funcions i Procediments</li> <li>3.6 Sent\u00e8ncies</li> <li>3.7 Funcions est\u00e0ndard</li> <li>3.8 Objectes especials: propietats i m\u00e8todes</li> <li>Part IV: Configurar l'aspecte </li> <li>4.1 Configurar la Barra d'Acc\u00e9s r\u00e0pid <ul> <li>Exercici 4.1</li> </ul> </li> <li>4.2 La cinta d'opcions <ul> <li>4.2.1 Modificaci\u00f3 per a tot Access </li> <li>Exercici 4.2</li> <li>4.2.2 Modificaci\u00f3 per a la Base de Dades actual </li> <li>Exercici 4.3 (voluntari per\u00f2 puntuable)</li> </ul> </li> <li>4.3 El panell de navegaci\u00f3</li> <li>4.4 Opcions d'aplicaci\u00f3 <ul> <li>Exercici 4.4</li> </ul> </li> <li>4.5 El panell de control <ul> <li>Exercici 4.5</li> </ul> </li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T05_Annex_Access/22_accions_mltiples/#22-accions-multiples","title":"2.2 Accions m\u00faltiples","text":"<p>Es pot especificar m\u00e9s d'una acci\u00f3 en una macro. Nom\u00e9s s'han de posar en l\u00ednies consecutives (apretem a + Agregar nueva accion que hi ha baix de l'acci\u00f3 anterior), i s'executaran en l'ordre definit.</p> <p>Per exemple podem modificar la macro Salutaci\u00f3 per a que mostre despr\u00e8s del missatge \"Hola\" un altre missatge: \"Qu\u00e8 tal?\". I podem fer al principi de la macro que mostre un rellotge d'arena en el cursor (l'acci\u00f3 \u00e9s MostrarCursorDeRelojDeArena, i en versions anterior es deia senzillament RelojDeArena). Observeu que per a recol\u00b7locar les accions tenim les fletxes verdes de pujar i baixar a la dreta de cada acci\u00f3.</p> <p></p>"},{"location":"BD-T05_Annex_Access/22_accions_mltiples/#exercici-25","title":"Exercici 2.5","text":"<p>Col\u00b7locar un altre bot\u00f3 amb el t\u00edtol Tancar per a tancar el formulari \"Botons\", avisant primer que es va a tancar per mig d'un quadre de missatge que diga \"Va a tancar-se aquest formulari\". L'acci\u00f3 de tancar es diu \"CerrarVentana\", i si no s'especifica res, tancar\u00e0 l'objecte actual (el formulari actual). La macro ha de ser independent i s'ha de dir Tancar.</p> <p></p>"},{"location":"BD-T05_Annex_Access/22_accions_mltiples/#exercici-26","title":"Exercici 2.6","text":"<ul> <li>Crear un formulari per a Empleat (l'\u00fanic que ens queda), per mig de l'opci\u00f3 \"Autoformulario\", que en Access 2013 es fa seleccionant la taula Empleat i anant a Crear \u2192 Formulario. Deixeu-lo amb el nom Empleat.</li> <li>Crear un nou formulari (en blanc) anomenat \"Men\u00fa Principal\". Posar un bot\u00f3 de tancar el formulari com el de l'exercici anterior, aprofitant la mateixa macro, ja que \u00e9s independent.</li> <li>Crear un altre bot\u00f3 per anar al formulari \"Empleat\". L'acci\u00f3 ser\u00e0 \"AbrirFormulario\" i evidentment en els par\u00e0metres s'ha de posar (o triar) el nom del formulari que volem obrir: Empleat. La macro ha de ser independent, i s'ha d'anomenar \"Obrir Formularis\".</li> <li>Crear 4 botons m\u00e9s, que posteriorment serviran per a anar a tots els formularis. L'aspecte podria ser aquest</li> </ul> <p>Nota</p> <p>El par\u00e0metre Modo de la ventana indica de quina manera s'obrir\u00e0 el formulari (en aquest cas Empleat). Les m\u00e9s interessants s\u00f3n:</p> <ul> <li>Normal: obrir\u00e0 el formulari en una nova pestanya. Podem tornar a l'original (Men\u00fa principal) i anar alternant entre les pestanyes obertes.</li> <li>Di\u00e0leg: obrir\u00e0 el formulari en una finestra, i fins que no la tanquem (en aquest cas el formulari Empleat) no podrem fer res m\u00e9s en Access</li> </ul> <p>Anem a triar el mode\u00a0Di\u00e0leg, encara que en el punt seg\u00fcent es tornar\u00e0 a plantejar el tema.</p> <p>Nota</p> <p>Aquest exercici no utilitza realment accions m\u00faltiples. \u00c9s senzillament un exercici de preparaci\u00f3 per al que ve despr\u00e9s.</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial SenseObraDerivada 2.5 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T05_Annex_Access/23_submacros/","title":"23 submacros","text":"<p>Bases de Dades</p> <ul> <li>Tema 5 (annex): Access avan\u00e7at</li> <li>Objectius</li> <li>Part I: Pr\u00e0ctica inicial </li> <li>1.1 Taules</li> <li>1.2 Consultes</li> <li>1.3 Formularis i Informes</li> <li>Part II: Macros </li> <li>2.1 Creaci\u00f3 d'una Macro</li> <li>2.2 Accions m\u00faltiples</li> <li>2.3 Submacros</li> <li>2.4 Condicions</li> <li>2.5 Resum d'accions</li> <li>2.6 Resum d'esdeveniments</li> <li>Part III: M\u00f2duls (Visual Basic) </li> <li>3.1 Creaci\u00f3 d'un M\u00f2dul</li> <li>3.2 Tipus de dades, Constants i Variables</li> <li>3.3 Tipus especials</li> <li>3.4 Operadors</li> <li>3.5 Funcions i Procediments</li> <li>3.6 Sent\u00e8ncies</li> <li>3.7 Funcions est\u00e0ndard</li> <li>3.8 Objectes especials: propietats i m\u00e8todes</li> <li>Part IV: Configurar l'aspecte </li> <li>4.1 Configurar la Barra d'Acc\u00e9s r\u00e0pid <ul> <li>Exercici 4.1</li> </ul> </li> <li>4.2 La cinta d'opcions <ul> <li>4.2.1 Modificaci\u00f3 per a tot Access </li> <li>Exercici 4.2</li> <li>4.2.2 Modificaci\u00f3 per a la Base de Dades actual </li> <li>Exercici 4.3 (voluntari per\u00f2 puntuable)</li> </ul> </li> <li>4.3 El panell de navegaci\u00f3</li> <li>4.4 Opcions d'aplicaci\u00f3 <ul> <li>Exercici 4.4</li> </ul> </li> <li>4.5 El panell de control <ul> <li>Exercici 4.5</li> </ul> </li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T05_Annex_Access/23_submacros/#23-submacros","title":"2.3 Submacros","text":"<p>En l'exercici anterior estaria b\u00e9 tenir en el men\u00fa principal un bot\u00f3 per anar a cada formulari. A\u00e7\u00f2 comen\u00e7a a fer-se molt extens, ja que si creem una macro per a cada acci\u00f3, ja en tindr\u00edem 4 m\u00e9s de cop. Pot ser convenient agrupar les macros, de manera que hi haja dins d'una macro global unes quantes submacros. Posteriorment la manera de fer refer\u00e8ncia a una submacro dins de la macro global ser\u00e0 NomMacroGlobal.NomSubmacro.</p> <p>En el seg\u00fcent v\u00eddeo s'explica com crear submacros. Es fa sobre l'exemple ja comen\u00e7at en l'\u00faltim exercici, i per tant costa un poc m\u00e9s al principi per estar recol\u00b7locant les coses. La seguna submacro es comen\u00e7a de zero.</p> En Access 2007 es feia per mig del bot\u00f3 \"Nombres de macro\". Donar\u00e0 l'opci\u00f3 de posar un nom davant de cada macro individual (que pot constar de m\u00e9s d'una acci\u00f3; la macro individual finalitza quan comen\u00e7a l'altra). La manera de fer refer\u00e8ncia a una submacro era la mateixa: NomGrupMacros.NomSubmacro. <p></p>"},{"location":"BD-T05_Annex_Access/23_submacros/#exercici-27","title":"Exercici 2.7","text":"<ul> <li>Modificar la Macro \"Obrir Formularis\" per a tenir les submacros individuals: \"Obrir Empleat\", \"Obrir Empleat-Familiar\",\"Obrir Departament\", \"Obrir Projecte\" i \"Obrir Treballa\".</li> <li>Posar en l'esdeveniment Al hacer clic de cada bot\u00f3 del formulari \"Men\u00fa principal\" la submacro corresponent per anar als formularis Empleat, Empleat-Familiar, Departament, Projecte i Treballa</li> </ul> <p>Ara ja tenim el men\u00fa principal, per\u00f2 si observeu, podeu depenent del mode d'obrir la finestra, podr\u00edem obrir tots els formularis a l'hora, quedant la cosa un poc desordenada. Per tant, posarem en totes les submacros l'acci\u00f3 d'obrir formulari amb l'opci\u00f3 \"Modo de la ventana: Di\u00e1logo\", amb la qual cosa no es pot fer res fora del formulari fins que no es tanque.</p> <p>Observeu que tamb\u00e9 amb el par\u00e0metre \"Modo de Datos\" de l'acci\u00f3 Abrir formulario, tenim 3 possibilitats: Agregar (que obrir\u00e0 el formulari \u00fanicament per a introduir nous registre, sense poder revisar els ja existents), Modificar (opci\u00f3 per defecte que permet fer de tot: modificar els existents, afegir-ne de nous, ...) i S\u00f3lo lectura (que obrir\u00e0 el formulari nom\u00e9s per a veure les dades existents, sense poder modificar-les ni afegir de noves).</p> <p>Per acabar d'arreglar el formulari Men\u00fa Principal, podem llevar-li les opcions de despla\u00e7ament, selecci\u00f3 i separaci\u00f3 de registres, ja que amb aquest formulari no ens hem de despla\u00e7ar per registres. Ser\u00e0 posar NO a les propietats: \"Selectores de registro\", \"Botones de desplazamiento\" i \"Separadores de registros\", que estan en la pestanya Formato de les propietats.</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial SenseObraDerivada 2.5 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T05_Annex_Access/24_condicions/","title":"24 condicions","text":"<p>Bases de Dades</p> <ul> <li>Tema 5 (annex): Access avan\u00e7at</li> <li>Objectius</li> <li>Part I: Pr\u00e0ctica inicial </li> <li>1.1 Taules</li> <li>1.2 Consultes</li> <li>1.3 Formularis i Informes</li> <li>Part II: Macros </li> <li>2.1 Creaci\u00f3 d'una Macro</li> <li>2.2 Accions m\u00faltiples</li> <li>2.3 Submacros</li> <li>2.4 Condicions</li> <li>2.5 Resum d'accions</li> <li>2.6 Resum d'esdeveniments</li> <li>Part III: M\u00f2duls (Visual Basic) </li> <li>3.1 Creaci\u00f3 d'un M\u00f2dul</li> <li>3.2 Tipus de dades, Constants i Variables</li> <li>3.3 Tipus especials</li> <li>3.4 Operadors</li> <li>3.5 Funcions i Procediments</li> <li>3.6 Sent\u00e8ncies</li> <li>3.7 Funcions est\u00e0ndard</li> <li>3.8 Objectes especials: propietats i m\u00e8todes</li> <li>Part IV: Configurar l'aspecte </li> <li>4.1 Configurar la Barra d'Acc\u00e9s r\u00e0pid <ul> <li>Exercici 4.1</li> </ul> </li> <li>4.2 La cinta d'opcions <ul> <li>4.2.1 Modificaci\u00f3 per a tot Access </li> <li>Exercici 4.2</li> <li>4.2.2 Modificaci\u00f3 per a la Base de Dades actual </li> <li>Exercici 4.3 (voluntari per\u00f2 puntuable)</li> </ul> </li> <li>4.3 El panell de navegaci\u00f3</li> <li>4.4 Opcions d'aplicaci\u00f3 <ul> <li>Exercici 4.4</li> </ul> </li> <li>4.5 El panell de control <ul> <li>Exercici 4.5</li> </ul> </li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T05_Annex_Access/24_condicions/#24-condicions","title":"2.4 Condicions","text":"<p>En les macros \u00e9s d'extremada utilitat exacutar una acci\u00f3 \u00fanicament si s'acompleix una condici\u00f3. Les condicions es posen amb l'acci\u00f3\u00a0Si (condicional). Com en el cas de les submacros, podem posar el\u00a0Si, tant arrastrant de la dreta, com triant l'acci\u00f3 Si. Totes les accions que posem dins del\u00a0Si s'executaran nom\u00e9s si s'acompleix la condici\u00f3.</p> <p>Des de la versi\u00f3 Access 2010 es pot posar la cl\u00e0usula Si no, que nom\u00e9s s'exefcuta si no s'acompleix la condici\u00f3.</p> <p>En el seg\u00fcent v\u00eddeo es mostra la creaci\u00f3 d'una macro amb condici\u00f3, i posteriorment s'amplia per a posar la part negativa, quan no s'acompleix la condici\u00f3:</p> En Access 20107 la manera de posar condicions era apretant al bot\u00f3 que es veu a l'esquerra. Apareixia una columna nova on es posava la condici\u00f3, i nom\u00e9s en cas que s'acomplira la condici\u00f3 s'executava l'acci\u00f3 de la columna de la dreta. <p></p>"},{"location":"BD-T05_Annex_Access/24_condicions/#exercici-28","title":"Exercici 2.8","text":"<p>Crear una macro incrustada en el control Sou del Formulari Empleat per a traure un missatge d'informaci\u00f3 si hem posat un sou molt gran a un empleat (m\u00e9s de 4.000\u20ac). </p> <p>La condici\u00f3 \u00e9s Sou&gt;4000. </p> <p>El moment d'activar \u00e9s en eixir del control Sou (esdeveniment Al Salir*). </p> <p>Heu d'observar que traur\u00e0 el missatge, per\u00f2 no impedir\u00e0 l'acci\u00f3. </p> <p>Nota</p> <p>Sou fa refer\u00e8ncia al control Sou del formulari Empleat, no al camp Sou de la taula Empleat. Podeu comprovar en el formulari Empleat que efectivament el control que fa refer\u00e8ncia al sou porta aquest nom, i que est\u00e0 lligat amb el camp sou. Per\u00f2 \u00e9s important saber que fa refer\u00e8ncia a un control del formulari. Si el formulari no estiguera obert, Access no sabria a que es refereix. Per\u00f2 com que la macro est\u00e0 incrustada en el formulari, no es pot executar si el formulari no est\u00e0 obert. </p> <p></p>"},{"location":"BD-T05_Annex_Access/24_condicions/#exercici-29","title":"Exercici 2.9","text":"<p>Crear una macro independent anomenada Comprovaci\u00f3 data_n per a exigir la restricci\u00f3 que la data de naixement d'un empleat no siga posterior a la data actual. I ara s\u00ed que intentarem impedir aquesta data.</p> <ul> <li>Les accions a realitzar podrien ser: traure un missatge i no executar l'event (aix\u00ed si l'event \u00e9s en eixir del control, en cancel\u00b7lar-lo no eixirem del control). I les dues accions s'han d'executar \u00fanicament si s'acompleix la condici\u00f3. La seg\u00fcent imatge ho il\u00b7lustra:</li> </ul> <p></p> <p>Com podem comprovar si les accions que hem de fer en cas que s'acomplesca la condici\u00f3 s\u00f3n m\u00e9s d'una, han d'anar dins del Si ... Finalizar si.</p> <ul> <li>Si aquesta macro l'executem en eixir del component data_n del formulari Empleat, anir\u00e0 quasi sempre b\u00e9, per\u00f2 si quan estem editant una data err\u00f2nia tanquem el formulari, ens eixir\u00e0 el missatge (i potser m\u00e9s d'una vegada) per\u00f2 la guardar\u00e0. Per evitar aquest efecte no desitjat, podr\u00edem executar tamb\u00e9 la macro abans d'actualitzar el registre (\u00e9s l'esdeveniment Antes de actualizar del formulari, no del control)</li> </ul> <p>Nota</p> <p>Com que la Macro Comprovaci\u00f3 data_n \u00e9s independent, la podem executar en qualsevol moment. Per\u00f2 com fa refer\u00e8ncia al control data_n que \u00e9s un objecte del formulari Empleat, si no est\u00e0 obert aquest formulari donar\u00e0 un error.</p> <p>En Access 2007, la macro quedar\u00e0 d'aquesta manera. Observeu que posem les 2 accions en l\u00ednies diferents, i abans hem de tenir la condici\u00f3 en les 2 files. Tamb\u00e9 valdia posar punts suspensius (...) en la condici\u00f3 de la segona fila, cosa que equival a repetir la condici\u00f3</p> <p></p> <p>En realitat tot a\u00e7\u00f2 de la data de naixement ho podr\u00edem haver solucionat amb una senzilla regla de validaci\u00f3 en el moment de dissenyar la taula. </p> <p>Per\u00f2 suposem ara la seg\u00fcent restricci\u00f3: la data de naixement d'una filla o fill no pot ser posterior a la data de naixement del pare o la mare. Si volem posar aquesta restricci\u00f3 en la taula familiar, no podem posar-la com una regla de validaci\u00f3, perqu\u00e8 afecta valors d'una altra taula (Empleat). Posar\u00edem la macro \"Antes de actualizar\" en el subformulari \"Familiar Subformulario\", fent refer\u00e8ncia a [Data_n] (data de naixement del familiar) i al control Data_n del formulari \"Empleat-Familiar\". </p> <p></p>"},{"location":"BD-T05_Annex_Access/24_condicions/#exercici-210","title":"Exercici 2.10","text":"<p>Feu l'anterior restricci\u00f3 amb una Macro independent com la de la figura seg\u00fcent. La condici\u00f3 \u00e9s:</p> <p>([Parentesc] Como \"fill*\") Y ([Data_n]&lt;=[Formularios].[Empleat-Familiar].[Data_n])</p> <p>No us enganyeu amb cap car\u00e0cter, perqu\u00e8 sin\u00f3 Access no ho entendr\u00e0. Si us d\u00f3na error reviseu el nom de cada objecte (sobretot del formulari Empleat-Familiar).</p> <p>Tots els elements que no estan qualificats (no porten el nom de l'objecte davant, separat amb un punt) faran refer\u00e8ncia a objectes del formulari actual, en aquest cas el formulari Familiar Subformulario. Si volem fer refer\u00e8ncia a un altre objecte, haurem de posar on est\u00e0. Aquesta \u00e9s la ra\u00f3 d'haver de posar [Formularios].[Empleat-Familiar].[data_n] per a fer refer\u00e8ncia a aquest element.</p> <p>Guardeu la macro amb el nom \"Data naixement fills\", i el moment d'executar-la \u00e9s abans d'actualitzar en el subformulari \"Familiar Subformulario\".</p> <p></p> <p>Aix\u00ed \u00e9s com quedaria en Access 207. Observeu que la segona vegada, en compte de tornar a posar tota la condici\u00f3, es pot posar \"...\".</p> <p></p> <p></p>"},{"location":"BD-T05_Annex_Access/24_condicions/#eercici-211","title":"Eercici 2.11","text":"<p>En el Tema 3, de Model Relacional, les coses que no pod\u00edem representar amb el model, les deix\u00e0vem com restriccions externes. L'\u00fanica manera de fer-les efectives seria amb Macros i per mig de programes (M\u00f2duls) de Visual Basic.</p> <p>Feu complir la seg\u00fcent restricci\u00f3 amb una macro independent, anomenada Control projectes:</p> <p>El n\u00famero total de projectes treballats per un treballador no ha de ser major que 4.</p> <p>El moment de controlar ser\u00e0 abans d'actualitzar un registre en la taula TREBALLA, per tant com en els casos anteriors, haurem controlar l'esdeveniment del formulari Treballa anomenat Antes de actualizar.</p> <p>S'haur\u00e0 d'utilitzar la funci\u00f3 DCont per a comptar els projectes en els quals est\u00e0 treballant, i tenir en compte que el que s'est\u00e0 introduint encara no est\u00e0 introdu\u00eft del tot. Aquesta funci\u00f3 t\u00e9 3 par\u00e0metres: el primer el camp que volem comptar (un que no estiga buit, per exemple [dni]; el segon \u00e9s l'\u00e0mbit de recerca, que en el nostre cas \u00e9s la taula Treballa; el tercer \u00e9s un criteri per a seleccionar les files (si no posem res se comptaran totes les files), que en el nostre cas seria [dni]=[Formularios].[Treballa].[Cuadro_combinado0].</p> <p>Aneu amb compte amb el nom del control on es col\u00b7loca el dni en el formulari Treballa. En el meu cas s'anomena Cuadro_combinado0, per\u00f2 potser vosaltres no tingueu el mateix nom.</p> <p>Aquesta seria la condici\u00f3 (en el meu cas):</p> <p>DCont(\"[num_p]\";\"Treballa\";\"[dni]=[Formularios].[Treballa].[Cuadro_combinado0]\")+1&gt;4</p> <p>I aix\u00ed quedaria la macro</p> <p></p> <p>Per a poder comprovar el funcionament de la macro, podeu intentar introduir una nova fila (cuideu que siga nova, no modifiqueu una fila anterior), per mig del formulari Treballa, amb les seg\u00fcnets dades:</p> <ul> <li>Pilar Folch Mestre (18932165)</li> <li>Auditoria ordin\u00e0ria</li> <li>7 hores</li> </ul> <p>Com que Pilar Folch ja estava treballant en 4 projectes, treballar en aquest altre passaria de 4 projectes, i per tant hauria de donar error (la macro cancelaria l'event).</p> <p>En el cas d'Access 2007 quedaria:\u00a0</p> <p></p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial SenseObraDerivada 2.5 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T05_Annex_Access/25_resum_daccions/","title":"25 resum daccions","text":"<p>Bases de Dades</p> <ul> <li>Tema 5 (annex): Access avan\u00e7at</li> <li>Objectius</li> <li>Part I: Pr\u00e0ctica inicial </li> <li>1.1 Taules</li> <li>1.2 Consultes</li> <li>1.3 Formularis i Informes</li> <li>Part II: Macros </li> <li>2.1 Creaci\u00f3 d'una Macro</li> <li>2.2 Accions m\u00faltiples</li> <li>2.3 Submacros</li> <li>2.4 Condicions</li> <li>2.5 Resum d'accions</li> <li>2.6 Resum d'esdeveniments</li> <li>Part III: M\u00f2duls (Visual Basic) </li> <li>3.1 Creaci\u00f3 d'un M\u00f2dul</li> <li>3.2 Tipus de dades, Constants i Variables</li> <li>3.3 Tipus especials</li> <li>3.4 Operadors</li> <li>3.5 Funcions i Procediments</li> <li>3.6 Sent\u00e8ncies</li> <li>3.7 Funcions est\u00e0ndard</li> <li>3.8 Objectes especials: propietats i m\u00e8todes</li> <li>Part IV: Configurar l'aspecte </li> <li>4.1 Configurar la Barra d'Acc\u00e9s r\u00e0pid <ul> <li>Exercici 4.1</li> </ul> </li> <li>4.2 La cinta d'opcions <ul> <li>4.2.1 Modificaci\u00f3 per a tot Access </li> <li>Exercici 4.2</li> <li>4.2.2 Modificaci\u00f3 per a la Base de Dades actual </li> <li>Exercici 4.3 (voluntari per\u00f2 puntuable)</li> </ul> </li> <li>4.3 El panell de navegaci\u00f3</li> <li>4.4 Opcions d'aplicaci\u00f3 <ul> <li>Exercici 4.4</li> </ul> </li> <li>4.5 El panell de control <ul> <li>Exercici 4.5</li> </ul> </li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T05_Annex_Access/25_resum_daccions/#25-resum-daccions","title":"2.5 Resum d'accions","text":"<p>A continuaci\u00f3 farem un resum de les accions m\u00e9s comuns que es poden incorporar en les macros d'Access. Quan utilitzem l'assistent en inserir un bot\u00f3, quasi totes les accions que ens proposa l'assistent estaran en aquesta llista. Les agruparem segons la funci\u00f3:</p> <p>Obrir i tancar Objectes</p> Acci\u00f3Comentari AbrirTabla<p>Per a obrir qualsevol d'aquestos objectes en qualsevol dels seus formats: disseny, full de c\u00e0lcul, formulari, ...</p><p>En formularis i informes es pot, a m\u00e9s, definir un filtre.</p> AbrirConsulta AbrirFormulario AbrirInforme AbrirModuloVisualBasic CerrarVentanaPer a tancar qualsevol objecte. Si no s'especifica quin, es tancar\u00e0 l'objecte actiu <p>Nota</p> <p>Si no es veu alguna d'aquestes accions de macro (com per exemple AbrirModuloVisualBasic), activeu el bot\u00f3 Mostrar todas las acciones</p> <p></p>"},{"location":"BD-T05_Annex_Access/25_resum_daccions/#exercici-212","title":"Exercici 2.12","text":"<p>Col\u00b7locar dos botons en \"Men\u00fa Principal\" per a obrir els dos informes existents en la Base de Dades Empresa. Feu-lo per mig de una macro independent anomenada Obrir Informes que contindr\u00e0 dos submacros: Obrir Informe i Obrir Etiquetes.</p> <p>Els podeu obrir en \"Vista Preliminar\", per veure millor com queda l'informe.</p> <p>Col\u00b7locar un altre bot\u00f3 per a obrir el gr\u00e0fic dels projectes: Projectes - Gr\u00e0fic d'hores. Feu-lo per mig d'una macro independent anomenada Obrir Grafic. La millor manera per obrir el gr\u00e0fic \u00e9s amb la vista \"Gr\u00e1ficoDin\u00e1mico\".</p> <p></p>"},{"location":"BD-T05_Annex_Access/25_resum_daccions/#exercici-213-voluntari","title":"Exercici 2.13 (voluntari)","text":"<p>Modifiqueu la consulta \"13: Augment de Sou\", per generalitzar-la i que demane per teclat el departament al qual se li augmenta el sou, i el percentatge. \u00c9s a dir, el departament i l'augment (del qual hem d'introduir una quantitat num\u00e8rica, que ser\u00e0 agafada com un percentatge) seran dos par\u00e0metres. Recordeu que els par\u00e0metres es posen entre claud\u00e0tors ([ ]) i no han de coincidir amb cap camp de les taules de la consulta. D'aquesta manera, Access ens demanar\u00e0 un valor per a aquestos par\u00e0metres.</p> <p>Posteriorment col\u00b7loqueu un altre bot\u00f3 en \"Men\u00fa Principal\" per a obrir aquesta consulta (per mig d'una macro incrustada).</p> <p></p>"},{"location":"BD-T05_Annex_Access/25_resum_daccions/#exercici-214","title":"Exercici 2.14","text":"<p>Intentarem col\u00b7locar un bot\u00f3 en el formulari \"Empleat\" per anar als seus familiars. La idea ser\u00e0 obrir el Formulari \"Empleat-Familiar\", per\u00f2 aplicant un filtre, \u00e9s a dir que nom\u00e9s es vegen els familiars de l'empleat actiu en el formulari \"Empleat\". De moment utilitzarem l'assistent quan col\u00b7loquem el bot\u00f3 \"Familiar\" en el formulari \"Empleat\". L'acci\u00f3 que voldrem ser\u00e0 obrir un formulari, per\u00f2 quan arriben a la seg\u00fcent pantalla:</p> <p></p> <p>Haurem de triar la primera opci\u00f3, equivalent a aplicar un filtre. La condici\u00f3 d'aquest filtre \u00e9s que ha de coincidir el Dni, i per a aconseguir-ho triem els dos Dni de les dues columnes i apretem al bot\u00f3 &lt;-&gt;:</p> <p></p> <p>I a la seg\u00fcent pantalla podem triar un text o una imatge per al bot\u00f3. Trieu un text, per exemple Familiars.</p> <p>El que ha fet l'assistent \u00e9s crear una macro incrustada.</p> <p>En Access 2007 no funcionaria com esper\u00e0vem, i en compte de visualitzar-se en el formulari Empleat-Familiar \u00fanicament l'empleat que ten\u00edem en el formulari Empleat, es veurien tots. Es pot arreglar tenint en comte el seg\u00fcent exercici.</p> <p></p>"},{"location":"BD-T05_Annex_Access/25_resum_daccions/#exercici-215","title":"Exercici 2.15","text":"<p>Ara ho farem el mateix proc\u00e9s per mig d'una macro independent creada per nosaltres, per a ser m\u00e9s conscient del que fem.</p> <p>Col\u00b7loqueu un altre bot\u00f3, aquesta vegada sense l'assistent, per anar als Projectes en els quals treballa aquest empleat. Generarem una nova macro, anomenada \"Projectes d'un empleat\", en la qual obrirem el formulari \"Treballa\" per\u00f2 posant la seg\u00fcent condici\u00f3 en \"Condicion WHERE\"</p> <p>dni=Formularios.Empleat.dni</p> <p>D'aquesta manera obliguem a que el camp Dni de Treballa coincidisca amb el contingut del control dni situat en el formulari \"Empleat\".</p> <p>Segurament haur\u00e0 funcionat b\u00e9. I hi ha una difer\u00e8ncia en el moment de crear la condici\u00f3. En la macro incrustada en el bot\u00f3 d'anar als familiars, tindrem en la\u00a0Condicion WHERE :</p> <p>\"[Dni]=\" &amp; \"'\" &amp; [Dni] &amp; \"'\"</p> <p>A\u00e7\u00f2 podria ser ambigu, i de fet en Access 2007 no funcionaria, ja que Dni podria no saber a qui es refereix, si al control del formulari\u00a0Empleat-Familiar o al control del formulari Empleat. En canvi en la nostra macro (creada per nosaltres) no hem deixat lloc a l'ambig\u00fcitat, i en el cas d'Access 2007 seria la manera de solucionar\u00a0 el problema:</p> <p>dni=Formularios.Empleat.dni</p> <p>Execucions i parades</p> CancelarEvento Cancel\u00b7la l'event que ha provocar aquesta macro. Si \u00e9s abans d'actulitzar, no l'actualitza, si \u00e9s abans d'eixir no eixir\u00e0, ... DetenerMacro Finalitza l'execuci\u00f3 de la present macro. DetenerTodasMacros Finalitza la present macro i totes aquelles a les quals pot cridar. EjecutarSQL Executa una sent\u00e8ncia SQL de manipulaci\u00f3 (inserci\u00f3, esborrat, ...) EjecutarC\u00f3digo Executa un procediment o funci\u00f3 de VBA (Visual Basic for Applications). EjecutarMacro Executa una altra macro. EjecutarAplicaci\u00f3n Executa un programa executable extern a Access. EjecutarComandoDeMen\u00fa Executa una de les accions definides en els men\u00fas est\u00e0ndar d'Access SalirDeAccess Tanca Access <p></p>"},{"location":"BD-T05_Annex_Access/25_resum_daccions/#exercici-216","title":"Exercici 2.16","text":"<p>Canvieu la macro \"Tancar\", i en compte de l'acci\u00f3 \"Cerrar\", poseu \"Salir\". Despr\u00e9s de comprovar l'efecte, torneu a deixar-la com estava. Per\u00f2 observeu com ser\u00e0 molt \u00fatil en aplicacions completes destinades a usuaris no experts. </p> <p>Recerca de dades i despla\u00e7ament</p> IrRegistro Es despla\u00e7a a un determinat registre. Es pot triar: anar al primer, anar a l'anterior, anar al seg\u00fcent, anar a l'\u00faltim o anar a un registre determinat. BuscarRegistro Buscar un registre que acomplesca unes condicions. BuscarRegistroSiguiente Busca el seg\u00fcent que acompleix les condicions. <p></p>"},{"location":"BD-T05_Annex_Access/25_resum_daccions/#exercici-217","title":"Exercici 2.17","text":"<p>Crear dos botons de navegaci\u00f3 per al formulari \"Projecte\": un per anar al seg\u00fcent registre ( &gt; ) i un altre per anar a l'anterior ( &lt; ). Les dues macros associades, que poden ser incrustades, utilitzaran l'acci\u00f3 \"IrARegistro\".</p> <p>No aniran del tot b\u00e9, ja que al final i al principi, si anem m\u00e9s enll\u00e0 dels registres que tenim, pot donar problemes. Per\u00f2 de moment tenim suficient.</p> <p>Altres</p> DefinirPropiedad Canvia el valor d'una propietat d'un control d'un formulari o informe. Pot servir per exemple per a fer visible un control, posant a -1 (vertader) la propietat Visible. EstablecerValor Canvia el valor de qualsevol control o qualsevol propietat. Tamb\u00e9 pot servir per a fer visible un control: en elemento Boton1.Visible; i en expresi\u00f3n True**. NuevaConsulta Actualitza les dades d'un control que dep\u00e8n d'una consulta (un quadre combinat, un subformulari, ...) EnviarTeclas Guarda en la mem\u00f2ria intermitja de teclat les tecles especificades. IrAControl Activa el control especificat. MostrarCursorDeRelojDeArena Mostra el rellotge d'arena mentre es va executant la macro. MaximizarVentana, MinimizarVentana Maximitza i minimitza, respectivament, la finestra activa. RestaurarVentana Restaura una finestra maximitzada o minimitzada a la grand\u00e0ria anterior. Bip Emet un so. CuadroDeMensaje Presenta un missatge. Imprimir Imprimeix l'objecte ExportarConFormato Trau l'eixida cap a un fitxer Excel, Word o de text. ImportarExportarDatos Importa o exporta dades des de o cap a B.D. externes d'altres tipus. <p>Recordeu que si no es veu alguna de les accions abans esmentades, \u00e9s perqu\u00e8 no est\u00e0 activat el bot\u00f3 Mostrar todas las acciones</p> <p></p>"},{"location":"BD-T05_Annex_Access/25_resum_daccions/#exercici-218-voluntari","title":"Exercici 2.18 (voluntari)","text":"<p>Posar dos botons en el formulari \"Botons\" anomenats Boto1 i Boto2, de manera que quan s'aprete el primer es visualitze el segon i es deixe de visualitzar el primer, i a l'inrev\u00e9s. Heu de ser conscients que s'ha de fer m\u00e9s d'una acci\u00f3: quan punxem en un bot\u00f3, aquest \u00e9s l'actiu, i si l'intentem fer-lo invisible ens donar\u00e0 un error perqu\u00e8 no es pot deixar de visualitzar un control que \"tiene el enfoque\" Per tant les accions seran en aquest ordre:</p> <ul> <li>Fer visible l'altre Bot\u00f3 (propietat Visible de l'altre bot\u00f3 a True)</li> <li>Passar el control a l'altre bot\u00f3 (IrAControl)</li> <li>Per \u00faltim fer invisible aquest bot\u00f3 (propietat Visible d'aquest bot\u00f3 a False)</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial SenseObraDerivada 2.5 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T05_Annex_Access/26_resum_desdeveniments/","title":"26 resum desdeveniments","text":"<p>Bases de Dades</p> <ul> <li>Tema 5 (annex): Access avan\u00e7at</li> <li>Objectius</li> <li>Part I: Pr\u00e0ctica inicial </li> <li>1.1 Taules</li> <li>1.2 Consultes</li> <li>1.3 Formularis i Informes</li> <li>Part II: Macros </li> <li>2.1 Creaci\u00f3 d'una Macro</li> <li>2.2 Accions m\u00faltiples</li> <li>2.3 Submacros</li> <li>2.4 Condicions</li> <li>2.5 Resum d'accions</li> <li>2.6 Resum d'esdeveniments</li> <li>Part III: M\u00f2duls (Visual Basic) </li> <li>3.1 Creaci\u00f3 d'un M\u00f2dul</li> <li>3.2 Tipus de dades, Constants i Variables</li> <li>3.3 Tipus especials</li> <li>3.4 Operadors</li> <li>3.5 Funcions i Procediments</li> <li>3.6 Sent\u00e8ncies</li> <li>3.7 Funcions est\u00e0ndard</li> <li>3.8 Objectes especials: propietats i m\u00e8todes</li> <li>Part IV: Configurar l'aspecte </li> <li>4.1 Configurar la Barra d'Acc\u00e9s r\u00e0pid <ul> <li>Exercici 4.1</li> </ul> </li> <li>4.2 La cinta d'opcions <ul> <li>4.2.1 Modificaci\u00f3 per a tot Access </li> <li>Exercici 4.2</li> <li>4.2.2 Modificaci\u00f3 per a la Base de Dades actual </li> <li>Exercici 4.3 (voluntari per\u00f2 puntuable)</li> </ul> </li> <li>4.3 El panell de navegaci\u00f3</li> <li>4.4 Opcions d'aplicaci\u00f3 <ul> <li>Exercici 4.4</li> </ul> </li> <li>4.5 El panell de control <ul> <li>Exercici 4.5</li> </ul> </li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T05_Annex_Access/26_resum_desdeveniments/#26-resum-desdeveniments","title":"2.6 Resum d'esdeveniments","text":"<p>Serviran per a executar, quan es produesca l'esdeveniment, una macro o un procediment d'Access Basic. A continuaci\u00f3 va una relaci\u00f3 d'alguns d'ells, amb l'instant en qu\u00e8 es produeixen.</p> Esdeveniment Moment en qu\u00e8 es produeix Al abrir Quan s'obre un formulari o informe, per\u00f2 abans de visualitzar el primer registre Al cargar Despr\u00e9s d'obrir i visualitzar els registres (no es pot cancel\u00b7lar) Al cambiar el tama\u00f1o Despr\u00e9s de carregar, i cada vegada que es canvie la grand\u00e0ria de la finestra del formulari o informe Al activar Quan la finestra passa a ser l'activa (potser en l'aplicaci\u00f3 tinguem m\u00e9s d'una finestra oberta en un moment donat) Al desactivar Quan la finestra deixa de ser l'activa. Al descargar Quan es tanca un formulari o informe, per\u00f2 abans que s'esborre de la pantalla. Al cerrar Quan es tanca el formulari o informe (no es pot cancel\u00b7lar) Antes de actualizar Abans que els canvis efectuats en el control o en el formulari es guarden en la B.D. Despu\u00e9s de actualizar Despr\u00e9s d'actualitzar les dades. No es pot cancel\u00b7lar, per\u00f2 s\u00ed desfer. Antes de insertar Quan es comen\u00e7a a introduir el primer car\u00e0cter d'una fila nova. Despu\u00e9s de insertar Quan ja s'ha inserit la fila nova. Al eliminar Just abans d'eliminar la fila Antes de confirmar eliminaci\u00f3n Despr\u00e9s d'eliminar, per\u00f2 abans de visualitzar-se la finestra de confirmaci\u00f3 d'eliminaci\u00f3. Despu\u00e9s de confirmar eliminaci\u00f3n Despr\u00e9s d'eliminar i confirmar l'eliminaci\u00f3. Al activar registro Quan se selecciona un nou registre, per\u00f2 abans de visualitzar-lo. Al cambiar Sempre que es canvie el contingut del quadre de text o quadre combinat Al no estar en la lista Si s'introdueix un valor en un quadre combinat que no est\u00e0 en la llista associada. Al entrar, Al salir Respectivament quan el control passa a ser l'actiu i quan deixa de ser. Al hacer clic, Al hacer doble clic Quan es fa un clic (baixar el bot\u00f3 del ratol\u00ed i tornar a pujar-lo) o dos seguits. Al bajar el mouse, Al subir el mouse Quan apretem un bot\u00f3 del ratol\u00ed i quan l'amollem (respectivament) Al mover el mouse Quan es meneja el ratol\u00ed per damunt del control o formulari. No cal tenir algun bot\u00f3 apretat. Al presionar una tecla Quan s'aprete (i s'acaba d'apretar) una tecla o combinaci\u00f3 de tecles. Al bajar una tecla Quan s'aprete una tecla Al subir una tecla Quan es deixa d'apretar <p></p>"},{"location":"BD-T05_Annex_Access/26_resum_desdeveniments/#exercici-219","title":"Exercici 2.19","text":"<p>Per a provar l'ordre en qu\u00e8 es produeixen tots els events relacionats amb l'obertura d'un formulari, feu que isca un comentari a cadascun d'ells: Al abrir: obrint; Al cargar: Carregant; Al cambiar tama\u00f1o: canviant grand\u00e0ria; Al activar: activant. Feu-lo sobre el formulari Botons, i tot amb macros incrustades.</p> <p>Feu el mateix amb els relacionats amb la tancada. </p> <p></p>"},{"location":"BD-T05_Annex_Access/26_resum_desdeveniments/#exercici-220-voluntari","title":"Exercici 2.20 (voluntari)","text":"<p>En el formulari \"Empleat\" tenim un bot\u00f3 per anar als familiars de l'empleat (i nom\u00e9s d'ell). Estaria molt b\u00e9 que si l'empleat no t\u00e9 familiars, doncs que no es puga anar a veure'ls fent que no aparega el bot\u00f3, o encara millor, deshabilitant-lo, de manera que no es puga fer clic.</p> <p>Feu-la com una macro independent anomenada Vis_Familiars.</p> <p>El moment on activar la macro \u00e9s Al activar registro, ja que \u00e9s quan se situa en el nou registre.</p> <p>La manera de saber si t\u00e9 o no familiars \u00e9s comptar-los amb la funci\u00f3 DCont, ja utilitzada en l'exercici 2.11. \u00c9s una funci\u00f3 un poc llandosa, que ha de tenir la sintaxi exacta per a que funcione. La manera de comptar els familiars del present empleat \u00e9s:</p> <p>DCont(\"[Dni]\";\"Familiar\";\"[dni]=[Formularios].[Empleat].[dni]\")</p> <p>Nota</p> <p>Podeu tenir l'efecte \"col\u00b7lateral\" que si desactiveu el bot\u00f3 quan tinguem un empleat sense familiars, ja no aparega actiu quan anem a un que s\u00ed que es t\u00e9.</p> <p>Haureu de fer, per tant, dues accions:</p> <ul> <li>Si no en t\u00e9 \u2192 desactivar el bot\u00f3</li> <li>Si s\u00ed que en t\u00e9 \u2192 activar el bot\u00f3</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial SenseObraDerivada 2.5 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T05_Annex_Access/31_creaci_dun_mdul/","title":"31 creaci dun mdul","text":"<p>Bases de Dades</p> <ul> <li>Tema 5 (annex): Access avan\u00e7at</li> <li>Objectius</li> <li>Part I: Pr\u00e0ctica inicial </li> <li>1.1 Taules</li> <li>1.2 Consultes</li> <li>1.3 Formularis i Informes</li> <li>Part II: Macros </li> <li>2.1 Creaci\u00f3 d'una Macro</li> <li>2.2 Accions m\u00faltiples</li> <li>2.3 Submacros</li> <li>2.4 Condicions</li> <li>2.5 Resum d'accions</li> <li>2.6 Resum d'esdeveniments</li> <li>Part III: M\u00f2duls (Visual Basic) </li> <li>3.1 Creaci\u00f3 d'un M\u00f2dul</li> <li>3.2 Tipus de dades, Constants i Variables</li> <li>3.3 Tipus especials</li> <li>3.4 Operadors</li> <li>3.5 Funcions i Procediments</li> <li>3.6 Sent\u00e8ncies</li> <li>3.7 Funcions est\u00e0ndard</li> <li>3.8 Objectes especials: propietats i m\u00e8todes</li> <li>Part IV: Configurar l'aspecte </li> <li>4.1 Configurar la Barra d'Acc\u00e9s r\u00e0pid <ul> <li>Exercici 4.1</li> </ul> </li> <li>4.2 La cinta d'opcions <ul> <li>4.2.1 Modificaci\u00f3 per a tot Access </li> <li>Exercici 4.2</li> <li>4.2.2 Modificaci\u00f3 per a la Base de Dades actual </li> <li>Exercici 4.3 (voluntari per\u00f2 puntuable)</li> </ul> </li> <li>4.3 El panell de navegaci\u00f3</li> <li>4.4 Opcions d'aplicaci\u00f3 <ul> <li>Exercici 4.4</li> </ul> </li> <li>4.5 El panell de control <ul> <li>Exercici 4.5</li> </ul> </li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T05_Annex_Access/31_creaci_dun_mdul/#31-creacio-dun-modul","title":"3.1 Creaci\u00f3 d'un M\u00f2dul","text":"<p>Per a crear un procediment en un m\u00f2dul est\u00e0ndard, primer s'haur\u00e0 de crear el m\u00f2dul com s'indica en la seg\u00fcent imatge.</p> <p></p> <p>Per a visualitzar el m\u00f2dul associat a un formulari o informe haurem d'estar en la vista disseny del formulari o informe, i haurem d'apretar en el botonet que hi ha dalt a la dreta (Ver c\u00f3digo).</p> <p></p> <p>En realitat quan est\u00e0 en marxa Access est\u00e0 tamb\u00e9 en marxa l'editor de Visual Basic. Podem alternar entre Access i aquest editor amb Alt-F11.</p> <p>Quan creem un m\u00f2dul, del tipus que siga, ens apareixer\u00e0 l'editor de Visual Basic, que t\u00e9 el seg\u00fcent aspecte:</p> <p></p> <p>Per a inserir les funcions o procediments podem triar el bot\u00f3 adequat (ens preguntar\u00e0 pel nom i si volem que siga una funci\u00f3 o un procediment) o directament comen\u00e7ar a escriure Function nom() o Sub nom(). Autom\u00e0ticament, en veure que \u00e9s un nova funci\u00f3 o procediment, posar\u00e0 una ratlla separadora i tamb\u00e9 End Function o End Sub, segons el cas.</p> <p>Si volem poder utilitzar una variable des de qualsevol funci\u00f3 o procediment del m\u00f2dul (s'anomena variable global) l'haurem de col\u00b7locar al principi, abans de la declaraci\u00f3 de la primera funci\u00f3 o procediment.</p> <p>Per a executar, podem fer clic en el bot\u00f3 d'executar, estant situats en les l\u00ednies de la funci\u00f3.</p> <p></p>"},{"location":"BD-T05_Annex_Access/31_creaci_dun_mdul/#exercici-31","title":"Exercici 3.1","text":"<p>Crear la seg\u00fcent funci\u00f3 Data_avui en un m\u00f2dul est\u00e0ndard nou que despr\u00e9s anomenarem Funcions.</p> <p></p> <p>Podeu comprovar com aquest entorn ofereix molt ajuda \"en l\u00ednia\", mentre anem escrivint les sent\u00e8ncies. Pot servir fins i tot per a comprovar que la sintaxi de les instruccions i de les funcions \u00e9s correcta.</p> <p>El que fa la funci\u00f3 \u00e9s traure la data d'avui (funci\u00f3 Date), amb un determinat format. Hi ha molts car\u00e0cters que tenen significat per a la funci\u00f3 Format, com s\u00f3n d per al dia (en distints formats), m per al mes, y per a l'any...  Si volem traure algun d'aquestos car\u00e0cters \"especials\", haurem d'utilitzar davant el car\u00e0cter d'escape: **</p> <p>Podeu consultar m\u00e9s informaci\u00f3 en l'ajuda d'Access (F1).</p> <p>Quan acabeu apreteu al bot\u00f3 de guardar, i us dir\u00e0 de guardar M\u00f3dulo1. Poseu-li el nom de Funcions</p> <p></p>"},{"location":"BD-T05_Annex_Access/31_creaci_dun_mdul/#exercici-32","title":"Exercici 3.2","text":"<p>Exercici 3.2 </p> <p>Col\u00b7locar un altre bot\u00f3 en el formulari Botons de manera que s'execute aquesta funci\u00f3. </p> <p>En les propietats, en l'esdeveniment \"Al hacer clic\", s'haur\u00e0 de posar =Data_avui() (no us oblideu de posar el signe igual) </p> <p></p>"},{"location":"BD-T05_Annex_Access/31_creaci_dun_mdul/#exercici-33","title":"Exercici 3.3","text":"<p>Una altra manera d'executar la funci\u00f3 \u00e9s per mig d'una macro. </p> <p>Crear una macro independent anomenada M_Data_Avui que execute la funci\u00f3 Data_avui(). L'acci\u00f3 que s'ha d'executar en la macro ser\u00e0 EjecutarC\u00f3digo. </p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial SenseObraDerivada 2.5 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T05_Annex_Access/32_tipus_de_dades_constants_i_variables/","title":"32 tipus de dades constants i variables","text":"<p>Bases de Dades</p> <ul> <li>Tema 5 (annex): Access avan\u00e7at</li> <li>Objectius</li> <li>Part I: Pr\u00e0ctica inicial </li> <li>1.1 Taules</li> <li>1.2 Consultes</li> <li>1.3 Formularis i Informes</li> <li>Part II: Macros </li> <li>2.1 Creaci\u00f3 d'una Macro</li> <li>2.2 Accions m\u00faltiples</li> <li>2.3 Submacros</li> <li>2.4 Condicions</li> <li>2.5 Resum d'accions</li> <li>2.6 Resum d'esdeveniments</li> <li>Part III: M\u00f2duls (Visual Basic) </li> <li>3.1 Creaci\u00f3 d'un M\u00f2dul</li> <li>3.2 Tipus de dades, Constants i Variables</li> <li>3.3 Tipus especials</li> <li>3.4 Operadors</li> <li>3.5 Funcions i Procediments</li> <li>3.6 Sent\u00e8ncies</li> <li>3.7 Funcions est\u00e0ndard</li> <li>3.8 Objectes especials: propietats i m\u00e8todes</li> <li>Part IV: Configurar l'aspecte </li> <li>4.1 Configurar la Barra d'Acc\u00e9s r\u00e0pid <ul> <li>Exercici 4.1</li> </ul> </li> <li>4.2 La cinta d'opcions <ul> <li>4.2.1 Modificaci\u00f3 per a tot Access </li> <li>Exercici 4.2</li> <li>4.2.2 Modificaci\u00f3 per a la Base de Dades actual </li> <li>Exercici 4.3 (voluntari per\u00f2 puntuable)</li> </ul> </li> <li>4.3 El panell de navegaci\u00f3</li> <li>4.4 Opcions d'aplicaci\u00f3 <ul> <li>Exercici 4.4</li> </ul> </li> <li>4.5 El panell de control <ul> <li>Exercici 4.5</li> </ul> </li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T05_Annex_Access/32_tipus_de_dades_constants_i_variables/#32-tipus-de-dades-constants-i-variables","title":"3.2 Tipus de dades, Constants i Variables","text":"<p>Els tipus v\u00e0lids de dades s\u00f3n similars als definits en Access. Tindrem m\u00e9s facilitat per a definir-los, i tindrem un tipus molt interessant. Quasi tots els tipus tenen un car\u00e0cter que, seguint el nom de la variable, fa que siga d'aquest tipus. Aix\u00ed per a declarar una variable entera podem posar Dim nom AS Integer, o senzillament Dim nom%. </p> Tipus de Dades Significat Grand\u00e0ria Car\u00e0cter identificador Byte Enter positiu 1 byte Integer Enter 2 bytes % Long Enter llarg 4 bytes &amp; Currency Enter molt llarg 8 bytes @ Single Real simple precisi\u00f3 4 bytes ! Double Real doble precisi\u00f3 8 bytes # Boolean True (-1) o False (0) 2 bytes String Cadena 1 byte per car\u00e0cter $ Date Data-Hora 8 bytes Variant Variable: qualsevol tipus 1 byte fins 64Kb <p>Especialment interessant \u00e9s el tipus VARIANT, que pot guardar dades de qualsevol tipus. Millor dit, depenent del valor actual funciona com d'un tipus o d'un altre. El seg\u00fcent codi no donaria error: </p> <p>Dim v As Variant  v = 4  v = v + 2  v = \"Hola\" </p> <p>El que s\u00ed que donaria error seria despr\u00e9s </p> <p>v = v + 2 </p> <p>perqu\u00e8 en aquest instant la variable \u00e9s alfanum\u00e8rica. </p> <p></p>"},{"location":"BD-T05_Annex_Access/32_tipus_de_dades_constants_i_variables/#exercici-34","title":"Exercici 3.4","text":"<p>Crear una altra funci\u00f3, en el mateix m\u00f2dul d'abans, amb el nom Prova_Variant on estiguen les instruccions anteriors, per\u00f2 despr\u00e9s de cadascuna visualitzar el contingut de v amb MsgBox(v).</p> <ul> <li>Per a definir constants s'utilitza </li> </ul> <p>[Global] Const nom =  <ul> <li>Per a definir variables</li> </ul> <p>Dim nom [AS tipus] (per defecte Variant) </p> <ul> <li>Per a definir vectors</li> </ul> <p>Dim nom ([l\u00edmit_interior TO] l\u00edmit_superior) [AS tipus]</p> <p>Aix\u00ed per exemple, DIM v(10) AS Integer crea un vector de 11 enters (el l\u00edmit inferior \u00e9s 0, a no ser que es diga expressament amb la sent\u00e8ncia OPTION BASE 1, i aleshores l'\u00edndex inicial ser\u00e0 1). </p> <p>Tamb\u00e9 es pot alterar l'\u00edndex inicial d'aquesta manera: DIM v(10 TO 20) AS Integer. Tamb\u00e9 crea un vector de 11 posicions, per\u00f2 el sub\u00edndex ha d'anar entre 10 i 20 (sin\u00f3 donar\u00e0 un error d'estar fora de rang). </p> <p>Tamb\u00e9 es poden definir matrius de dos o m\u00e9s dimensions (fins 60 dimensions). S'hauran d'especificar els l\u00edmits de cada dimensi\u00f3 separats per comes: DIM m(5,10)</p> <ul> <li> <p>Per a definir variables globals (o vectors globals) poseu Global en compte de Dim. Aleshores es podr\u00e0 accedir a la variable des de qualsevol lloc del m\u00f2dul. Recordem que hi havia una altra manera de crear una variable global, i que era posar-la dalt de tot, abans de la declaraci\u00f3 de la primera funci\u00f3 o procediment. Si una variable no \u00e9s global, ser\u00e0 local i nom\u00e9s es pot accedir a ella des del procediment o funci\u00f3 on s'ha creat. La immensa majoria de les variables seran locals. \u00danicament haurem d'especificar variables globals en casos molt concrets. </p> </li> <li> <p>Per a variables est\u00e0tiques (s\u00f3n locals per\u00f2 no volem que es reinicialitzen cada vegada que s'executa el procediment on estan) poseu Static en compte de Dim.</p> </li> </ul> <p></p>"},{"location":"BD-T05_Annex_Access/32_tipus_de_dades_constants_i_variables/#exercici-35","title":"Exercici 3.5","text":"<p>Per a provar el funcionament d'una variable est\u00e0tica, creeu la funci\u00f3 MissatgeIncrementat en el m\u00f2dul de sempre on es cree una variable est\u00e0tica de tipus Integer sense donar-li un valor inicial (s'iniciar\u00e0 a 0). Incrementeu-la en una unitat i tragueu un missatge amb el valor de la variable. Proveu a executar unes quantes vegades la funci\u00f3. Fins i tot inseriu un bot\u00f3 en el formulari Botons que execute aquesta funci\u00f3. Veureu que \u00fanicament es reiniciar\u00e0 quan tanqueu la Base de Dades. </p> <p>Registres </p> <p>Podem definir estructures pr\u00f2pies de dades (registres), formades per unes quantes dades individuals que anomenarem camps: </p> <p>TYPE nom_tipus nom_camp AS tipus ... END TYPE</p> <p>Aquestes estructures s'han de definir al principi del m\u00f2dul, en la zona de declaracions, i si estan en un m\u00f2dul de Formulari o d'Informe s'ha de posar davant Private. </p> <p>La manera d'utilitzar una estructura d'aquestes \u00e9s definir una variable del tipus, i despr\u00e9s utilitzar-la seguida del nom del camp separada per un punt. </p> <p>Dim v as nom_tipus</p> <p>v.nom_camp = valor ... </p> <p>Per exemple, podem definir el tipus anomenat Punt per a representar les coordenades x i y d'un pun en el pla. En una funci\u00f3, primer demanarem les coordenades d'un punt, i despr\u00e9s les mostrarem. Per a demanar les dades utilitzem la funci\u00f3 InputBox, que obre una finestra on es pot introduir una informaci\u00f3 en un quadre de text, i despr\u00e9s la funci\u00f3 torna aquesta informaci\u00f3. Recordeu que la definici\u00f3 del tipus (Type) ha d'anar dalt de tot. </p> <p>Type Punt x As Integer y As Integer End Type</p> <p>Function Coordenades() Dim p As Punt</p> <p>p.x = InputBox(\"Coordenada x\") p.y = InputBox(\"Coordenada y\") MsgBox (\"(\" &amp; p.x &amp; \",\" &amp; p.y &amp; \")\") End Function </p> <p></p>"},{"location":"BD-T05_Annex_Access/32_tipus_de_dades_constants_i_variables/#exercici-36-voluntari","title":"Exercici 3.6 (voluntari)","text":"<p>Definir el tipus Nom format per 3 camps: Nom_p, Cognom1 i Cognom2. Posteriorment crear una altra funci\u00f3 del mateix m\u00f2dul, anomenada Tipus, on heu de definir una variable del tipus Nom, demanar un valor per a cada camp (per mig de la funci\u00f3 InputBox), i despr\u00e9s traure-ho tot junt. </p> <p>Recordeu que la definici\u00f3 dels tipus ha d'anar al principi del m\u00f2dul, en la zona de declaracions </p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial SenseObraDerivada 2.5 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T05_Annex_Access/33_tipus_especials/","title":"33 tipus especials","text":"<p>Bases de Dades</p> <ul> <li>Tema 5 (annex): Access avan\u00e7at</li> <li>Objectius</li> <li>Part I: Pr\u00e0ctica inicial </li> <li>1.1 Taules</li> <li>1.2 Consultes</li> <li>1.3 Formularis i Informes</li> <li>Part II: Macros </li> <li>2.1 Creaci\u00f3 d'una Macro</li> <li>2.2 Accions m\u00faltiples</li> <li>2.3 Submacros</li> <li>2.4 Condicions</li> <li>2.5 Resum d'accions</li> <li>2.6 Resum d'esdeveniments</li> <li>Part III: M\u00f2duls (Visual Basic) </li> <li>3.1 Creaci\u00f3 d'un M\u00f2dul</li> <li>3.2 Tipus de dades, Constants i Variables</li> <li>3.3 Tipus especials</li> <li>3.4 Operadors</li> <li>3.5 Funcions i Procediments</li> <li>3.6 Sent\u00e8ncies</li> <li>3.7 Funcions est\u00e0ndard</li> <li>3.8 Objectes especials: propietats i m\u00e8todes</li> <li>Part IV: Configurar l'aspecte </li> <li>4.1 Configurar la Barra d'Acc\u00e9s r\u00e0pid <ul> <li>Exercici 4.1</li> </ul> </li> <li>4.2 La cinta d'opcions <ul> <li>4.2.1 Modificaci\u00f3 per a tot Access </li> <li>Exercici 4.2</li> <li>4.2.2 Modificaci\u00f3 per a la Base de Dades actual </li> <li>Exercici 4.3 (voluntari per\u00f2 puntuable)</li> </ul> </li> <li>4.3 El panell de navegaci\u00f3</li> <li>4.4 Opcions d'aplicaci\u00f3 <ul> <li>Exercici 4.4</li> </ul> </li> <li>4.5 El panell de control <ul> <li>Exercici 4.5</li> </ul> </li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T05_Annex_Access/33_tipus_especials/#33-tipus-especials","title":"3.3 Tipus especials","text":"<p>Hi ha d'altres tipus molt especials, que s\u00f3n objectes (de programaci\u00f3 orientada a objectes) que ens serviran per fer consultes SQL sobre les taules de la B.D. D'entre tots anem a triar-ne 2 per la seua import\u00e0ncia: </p> <p>DATABASE \u00e9s un tipus que fa refer\u00e8ncia a un Base de Dades </p> <p>RECORDSET (conjunt de registres) \u00e9s un tipus que podr\u00e0 inicialitzar-se amb un conjunt de registres provinent d'una taula o una consulta SQL. Ens permetr\u00e0 manipular les dades a nivell de registre. </p> <p>Per a posar un valor a una variable d'aquestos tipus s'utilitza la sent\u00e8ncia Set. </p> <p>El seg\u00fcent exemple trau el nombre d'empleats. </p> Function QuantsEmpleats() Dim BD As Database 'defineix una variable DataBase Dim rs As Recordset 'defineix una variable RecordSet Set BD = CurrentDb 'inicialitza BD a l'actual Set rs = BD.OpenRecordset(\"Empleat\") 'inicialitza el rs com la taula Empleat rs.MoveLast 'se'n va a l'\u00faltim registre MsgBox (\"Hi ha \" &amp; rs.RecordCount &amp; \" empleats\") 'trau el nombre de registres en rs End Function I el seg\u00fcent el nombre d'empleats del departament 5 <p>Function QuantsDel5() Dim BD As Database Dim rst As Recordset Set BD = CurrentDb Set rst = BD.OpenRecordset(\"SELECT * FROM EMPLEAT WHERE departament=5\") rst.MoveLast MsgBox (\"Hi ha \" &amp; rst.RecordCount &amp; \" empleats\") End Function</p> <p></p>"},{"location":"BD-T05_Annex_Access/33_tipus_especials/#exercici-37","title":"Exercici 3.7","text":"<p>Copiar les dues funcions anteriors i provar-les. </p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial SenseObraDerivada 2.5 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T05_Annex_Access/34_operadors/","title":"34 operadors","text":"<p>Bases de Dades</p> <ul> <li>Tema 5 (annex): Access avan\u00e7at</li> <li>Objectius</li> <li>Part I: Pr\u00e0ctica inicial </li> <li>1.1 Taules</li> <li>1.2 Consultes</li> <li>1.3 Formularis i Informes</li> <li>Part II: Macros </li> <li>2.1 Creaci\u00f3 d'una Macro</li> <li>2.2 Accions m\u00faltiples</li> <li>2.3 Submacros</li> <li>2.4 Condicions</li> <li>2.5 Resum d'accions</li> <li>2.6 Resum d'esdeveniments</li> <li>Part III: M\u00f2duls (Visual Basic) </li> <li>3.1 Creaci\u00f3 d'un M\u00f2dul</li> <li>3.2 Tipus de dades, Constants i Variables</li> <li>3.3 Tipus especials</li> <li>3.4 Operadors</li> <li>3.5 Funcions i Procediments</li> <li>3.6 Sent\u00e8ncies</li> <li>3.7 Funcions est\u00e0ndard</li> <li>3.8 Objectes especials: propietats i m\u00e8todes</li> <li>Part IV: Configurar l'aspecte </li> <li>4.1 Configurar la Barra d'Acc\u00e9s r\u00e0pid <ul> <li>Exercici 4.1</li> </ul> </li> <li>4.2 La cinta d'opcions <ul> <li>4.2.1 Modificaci\u00f3 per a tot Access </li> <li>Exercici 4.2</li> <li>4.2.2 Modificaci\u00f3 per a la Base de Dades actual </li> <li>Exercici 4.3 (voluntari per\u00f2 puntuable)</li> </ul> </li> <li>4.3 El panell de navegaci\u00f3</li> <li>4.4 Opcions d'aplicaci\u00f3 <ul> <li>Exercici 4.4</li> </ul> </li> <li>4.5 El panell de control <ul> <li>Exercici 4.5</li> </ul> </li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T05_Annex_Access/34_operadors/#34-operadors","title":"3.4 Operadors","text":"<p>Anem a fer un breu resum dels operadors que utilitza Access Basic, agrupats per categries. </p> <ul> <li>OPERADORS MATEM\u00c0TICS</li> </ul> <p>+\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 -\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 *\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 /\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 ** (disvisi\u00f3 entera)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 Mod (m\u00f2dul)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 ^** (exponencial) </p> <ul> <li>OPERADORS RELACIONALS</li> </ul> <p>=\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 &lt;&gt;\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 &lt;\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 &gt;\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 &lt;= &gt;= Is (igualtat d'objectes) </p> <ul> <li>OPERADORS L\u00d2GICS</li> </ul> <p>Not\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 And\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 Or\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 Xor\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 Eqv (comparaci\u00f3 bin\u00e0ria)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 </p> <p>Imp (contrari Xor) </p> <ul> <li>OPERADORS DE CADENA</li> </ul> <p>+\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 &amp;\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 els dos concatenen </p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial SenseObraDerivada 2.5 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T05_Annex_Access/35_funcions_i_procediments/","title":"35 funcions i procediments","text":"<p>Bases de Dades</p> <ul> <li>Tema 5 (annex): Access avan\u00e7at</li> <li>Objectius</li> <li>Part I: Pr\u00e0ctica inicial </li> <li>1.1 Taules</li> <li>1.2 Consultes</li> <li>1.3 Formularis i Informes</li> <li>Part II: Macros </li> <li>2.1 Creaci\u00f3 d'una Macro</li> <li>2.2 Accions m\u00faltiples</li> <li>2.3 Submacros</li> <li>2.4 Condicions</li> <li>2.5 Resum d'accions</li> <li>2.6 Resum d'esdeveniments</li> <li>Part III: M\u00f2duls (Visual Basic) </li> <li>3.1 Creaci\u00f3 d'un M\u00f2dul</li> <li>3.2 Tipus de dades, Constants i Variables</li> <li>3.3 Tipus especials</li> <li>3.4 Operadors</li> <li>3.5 Funcions i Procediments</li> <li>3.6 Sent\u00e8ncies</li> <li>3.7 Funcions est\u00e0ndard</li> <li>3.8 Objectes especials: propietats i m\u00e8todes</li> <li>Part IV: Configurar l'aspecte </li> <li>4.1 Configurar la Barra d'Acc\u00e9s r\u00e0pid <ul> <li>Exercici 4.1</li> </ul> </li> <li>4.2 La cinta d'opcions <ul> <li>4.2.1 Modificaci\u00f3 per a tot Access </li> <li>Exercici 4.2</li> <li>4.2.2 Modificaci\u00f3 per a la Base de Dades actual </li> <li>Exercici 4.3 (voluntari per\u00f2 puntuable)</li> </ul> </li> <li>4.3 El panell de navegaci\u00f3</li> <li>4.4 Opcions d'aplicaci\u00f3 <ul> <li>Exercici 4.4</li> </ul> </li> <li>4.5 El panell de control <ul> <li>Exercici 4.5</li> </ul> </li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T05_Annex_Access/35_funcions_i_procediments/#35-funcions-i-procediments","title":"3.5 Funcions i Procediments","text":"<p>FUNCIONS </p> <p>Les sent\u00e8ncies per definir una funci\u00f3 s\u00f3n </p> <p>[STATIC][PUBLIC|PRIVATE] FUNCTION nom_funci\u00f3 ([p1 [AS tipus], ...]) [AS tipus_funci\u00f3] (sent\u00e8ncies de la funci\u00f3) [nom_funci\u00f3 = expressi\u00f3] END FUNCTION</p> <p>Com s'observa potser duga par\u00e0metres o potser no, i podem definir de quin tipus \u00e9s la funci\u00f3 (el tipus que tornar\u00e0) o no. </p> <p>Si es declara STATIC totes les variables locals seran est\u00e0tiques (\u00e9s a dir, conservaran el valor entre cridades) </p> <p>Si es declara PUBLIC (que \u00e9s l'opci\u00f3 per defecte) la funci\u00f3 estar\u00e0 disponible des de qualsevol lloc, qualsevol m\u00f2dul de la Base de Dades </p> <p>Si es declara PRIVATE la funci\u00f3 nom\u00e9s estar\u00e0 disponible des del m\u00f2dul on est\u00e0 declarada. </p> <p>PROCEDIMENTS </p> <p>Un procediment \u00e9s molt paregut, excepte que no torna un valor </p> <p>[STATIC][PUBLIC | PRIVATE] SUB nom_subrutina ([arg1 [AS tipus], ...]) (sent\u00e8ncies del procediment) END SUB</p> <p>Encara que les funcions i els procediments es poden executar directament (com ho estem fent fins ara), o cridant-los directament en resposta a un event (com en l'exercici 3.2), moltes vegades es cridaran des d'altres m\u00f2duls. </p> <p>Per a cridar una funci\u00f3 o procediment \u00e9s suficient posar el seu nom o Call i el seu nom. Recordeu que si \u00e9s una funci\u00f3 que torna un valor, aquest es podr\u00e0 assignar, posar en una expressi\u00f3, ... </p> <p></p>"},{"location":"BD-T05_Annex_Access/35_funcions_i_procediments/#exercici-38","title":"Exercici 3.8","text":"<p>Provar a declarar la funci\u00f3 de l'exercici 3.5, MissatgeIncrementat(), com a Private. Intentar utilitzar-la apretant el bot\u00f3 del formulari Botons. Despr\u00e9s deixar-la com estava. </p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial SenseObraDerivada 2.5 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T05_Annex_Access/36_sentncies/","title":"36 sentncies","text":"<p>Bases de Dades</p> <ul> <li>Tema 5 (annex): Access avan\u00e7at</li> <li>Objectius</li> <li>Part I: Pr\u00e0ctica inicial </li> <li>1.1 Taules</li> <li>1.2 Consultes</li> <li>1.3 Formularis i Informes</li> <li>Part II: Macros </li> <li>2.1 Creaci\u00f3 d'una Macro</li> <li>2.2 Accions m\u00faltiples</li> <li>2.3 Submacros</li> <li>2.4 Condicions</li> <li>2.5 Resum d'accions</li> <li>2.6 Resum d'esdeveniments</li> <li>Part III: M\u00f2duls (Visual Basic) </li> <li>3.1 Creaci\u00f3 d'un M\u00f2dul</li> <li>3.2 Tipus de dades, Constants i Variables</li> <li>3.3 Tipus especials</li> <li>3.4 Operadors</li> <li>3.5 Funcions i Procediments</li> <li>3.6 Sent\u00e8ncies</li> <li>3.7 Funcions est\u00e0ndard</li> <li>3.8 Objectes especials: propietats i m\u00e8todes</li> <li>Part IV: Configurar l'aspecte </li> <li>4.1 Configurar la Barra d'Acc\u00e9s r\u00e0pid <ul> <li>Exercici 4.1</li> </ul> </li> <li>4.2 La cinta d'opcions <ul> <li>4.2.1 Modificaci\u00f3 per a tot Access </li> <li>Exercici 4.2</li> <li>4.2.2 Modificaci\u00f3 per a la Base de Dades actual </li> <li>Exercici 4.3 (voluntari per\u00f2 puntuable)</li> </ul> </li> <li>4.3 El panell de navegaci\u00f3</li> <li>4.4 Opcions d'aplicaci\u00f3 <ul> <li>Exercici 4.4</li> </ul> </li> <li>4.5 El panell de control <ul> <li>Exercici 4.5</li> </ul> </li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T05_Annex_Access/36_sentncies/#36-sentencies","title":"3.6 Sent\u00e8ncies","text":"<ul> <li>Assignaci\u00f3:</li> </ul> <p>variable = expressi\u00f3 </p> <ul> <li>Condicional:</li> </ul> <p>IF condici\u00f3 THEN sent\u00e8ncies [ELSEIF condici\u00f3 THEN sent\u00e8ncies ] [ELSE sent\u00e8ncies ] END IF </p> <ul> <li>Condicional m\u00faltiple:</li> </ul> <p>SELECT CASE expressi\u00f3 a comprovar  CASE llista sent\u00e8ncies ... [CASE ELSE sent\u00e8ncies ] END SELECT </p> <ul> <li>Bucle Do ...Loop</li> </ul> <p>DO [{WHILE | UNTIL} condici\u00f3] sent\u00e8ncies LOOP </p> <p>DO  sent\u00e8ncies LOOP [{WHILE | UNTIL} condici\u00f3] </p> <ul> <li>Bucle For ... Next </li> </ul> <p>FOR comptador = valor_inicial TO valor_final [ STEP increment] sent\u00e8ncies NEXT [comptador] </p> <ul> <li>Bucle For Each... Next </li> </ul> <p>\u00c9s una variant del bucle For que permet que el comptador no siga num\u00e8ric creixent (o decreixent) sin\u00f3 que anir\u00e0 agafant els valors d'una llista, d'un grup (que podr\u00e0 ser un vector o un altre conjunt, com veurem m\u00e9s avant) </p> <p>FOR EACH element IN grup sent\u00e8ncies NEXT [element] </p> <ul> <li>Bucle While ... Wend</li> </ul> <p>WHILE condici\u00f3 sent\u00e8ncies WEND </p> <p>En els dos primers bucles tenim la possibilitat de eixir directament (Exit Do, Exit For) </p> <ul> <li>Executar l'acci\u00f3 d'una macro: DoCmd.nom_acci\u00f3_macro.</li> </ul> <p>Aix\u00ed per exemple, podem obrir el formulari Departament amb </p> <p>DoCmd.OpenForm \"Departament\" </p> <p>Es poden fer quasi totes les accions que en les macros (no oblidem de posar-lo en angl\u00e8s), excepte algunes perqu\u00e8 ja tenen la seua pr\u00f2pia funci\u00f3 o m\u00e8tode. </p> <p>Les que no es poden fer s\u00f3n: </p> <p>CuadroMsg: utilitzar directament la funci\u00f3 MsgBox</p> <p>EstablecerValor: utilitzar l'operador = per a assignar. </p> <p>DetenerMacro: no est\u00e0 disponible en Visual Basic. </p> <p>DetenerTodasMacros: no est\u00e0 disponible en Visual Basic. </p> <p>EjecutarCodigo: directament posar el nom de la funci\u00f3 o procediment </p> <p>EjecutarAplicaci\u00f3n: utilitzar la funci\u00f3 Shell</p> <p>EnviarTeclas: utilitzar directament la funci\u00f3 SendKeys</p> <p></p>"},{"location":"BD-T05_Annex_Access/36_sentncies/#exercici-39","title":"Exercici 3.9","text":"<p>Proveu la seg\u00fcent funci\u00f3 que trau la taula de multiplicar del 7.\u00a0 </p> <p>Function Taula_7() Dim i% Dim s$</p> <p>s = \"\" For i = 1 To 10 Step 1\u00a0\u00a0 'si no posem step 1 igual incrementar\u00e0 en 1 s = s &amp; \" 7 x \" &amp; i &amp; \" = \" &amp; 7 * i &amp; Chr(10) Next i MsgBox (s) End Function </p> <p></p>"},{"location":"BD-T05_Annex_Access/36_sentncies/#exercici-310","title":"Exercici 3.10","text":"<p>Fer una funci\u00f3 anomenada Imparells que mostre els nombres imparells entre 1 i 50.</p> <p>Intenteu que el resultat es mostre en una \u00fanica finestra, per la incomoditat de que mostre cadascun en una finestra (i en s\u00f3n 25). Ho podeu fer separant els numeros per espais en blanc, o baixant de l\u00ednia (per a anar a una noval l\u00ednia podeu fer incloure el car\u00e0cter de nova l\u00ednia, que \u00e9s chr(10)), tal i com est\u00e0 en l'exemple de la Taula del 7.</p> <p>Incloure posteriorment un bot\u00f3 en el formulari Botons que quan s'aprete s'execute la funci\u00f3 anterior.</p> <p></p>"},{"location":"BD-T05_Annex_Access/36_sentncies/#exercici-311-voluntari","title":"Exercici 3.11 (voluntari)","text":"<p>Incloure un altre bot\u00f3 en el formulari Botons que quan s'aprete s'execute la funci\u00f3 Sumar() (situada en el m\u00f2dul Funcions) la qual ha d'anar demanant n\u00fameros per mig de la funci\u00f3 inputbox() i els ha d'anar sumant, fins introduir el 0. Aleshores ha de traure el resultat de la suma.</p> <p></p>"},{"location":"BD-T05_Annex_Access/36_sentncies/#exercici-312","title":"Exercici 3.12","text":"<p>Copiar el seg\u00fcent procediment, per a provar la sent\u00e8ncia FOR EACH</p> <p>Sub vector() Dim vec(5) Dim element vec(0) = 4 + 5 vec(1) = \"Hola\" vec(2) = \"Ad\u00e9u\" vec(3) = Date vec(4) = Time For Each element In vec MsgBox (element) Next element End Sub </p> <p>Observeu que el vector \u00e9s de 6 elements, i que l'\u00faltim element del vector no est\u00e0 inicialitzat, i per tant t\u00e9 el valor nul (per ser tot el vector Variant) </p> <p></p>"},{"location":"BD-T05_Annex_Access/36_sentncies/#exercici-313","title":"Exercici 3.13","text":"<p>Fer una altra vegada el control sobre el sou major de 4.000 \u20ac, per\u00f2 aix\u00ed com abans nom\u00e9s s'avisava, ara donarem la possibilitat d'introduir-lo o no.</p> <p>Per tant substituirem la macro incrustada que es va fer en l'exercici 2.8 per una funci\u00f3 associada a l'eixida del control Sou (estar\u00e0 situada en el m\u00f2dul associat al formulari Empleat).</p> <p>La funci\u00f3 MsgBox t\u00e9 els seg\u00fcents arguments:</p> <p>MsgBox(comentari,botons_a_posar,t\u00edtol_finestra,fitxer_ajuda,context) As bot\u00f3_cont</p> <p>Els botons a posar s\u00f3n constants definides que indiquen quins botons volem que isquen. En el nostre exemple posar\u00edem vbYesNo, i la contestaci\u00f3 que hem de mirar \u00e9s vbNo (si s'ha apretat el bot\u00f3 de No), on posar\u00edem l'acci\u00f3 DoCmd.CancelEvent. \u00c9s a dir quedaria la condici\u00f3 d'aquesta manera</p> <p>If MsgBox(\"Molt alt. Segur que vols el valor \" &amp; Sou &amp; \" ?\", vbYesNo) = vbNo Then</p> <p>Aneu en compte. El de dalt nom\u00e9s s'ha d'executar si el sou \u00e9s superior a 4.000 \u20ac.</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial SenseObraDerivada 2.5 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T05_Annex_Access/37_funcions_estndard/","title":"37 funcions estndard","text":"<p>Bases de Dades</p> <ul> <li>Tema 5 (annex): Access avan\u00e7at</li> <li>Objectius</li> <li>Part I: Pr\u00e0ctica inicial </li> <li>1.1 Taules</li> <li>1.2 Consultes</li> <li>1.3 Formularis i Informes</li> <li>Part II: Macros </li> <li>2.1 Creaci\u00f3 d'una Macro</li> <li>2.2 Accions m\u00faltiples</li> <li>2.3 Submacros</li> <li>2.4 Condicions</li> <li>2.5 Resum d'accions</li> <li>2.6 Resum d'esdeveniments</li> <li>Part III: M\u00f2duls (Visual Basic) </li> <li>3.1 Creaci\u00f3 d'un M\u00f2dul</li> <li>3.2 Tipus de dades, Constants i Variables</li> <li>3.3 Tipus especials</li> <li>3.4 Operadors</li> <li>3.5 Funcions i Procediments</li> <li>3.6 Sent\u00e8ncies</li> <li>3.7 Funcions est\u00e0ndard</li> <li>3.8 Objectes especials: propietats i m\u00e8todes</li> <li>Part IV: Configurar l'aspecte </li> <li>4.1 Configurar la Barra d'Acc\u00e9s r\u00e0pid <ul> <li>Exercici 4.1</li> </ul> </li> <li>4.2 La cinta d'opcions <ul> <li>4.2.1 Modificaci\u00f3 per a tot Access </li> <li>Exercici 4.2</li> <li>4.2.2 Modificaci\u00f3 per a la Base de Dades actual </li> <li>Exercici 4.3 (voluntari per\u00f2 puntuable)</li> </ul> </li> <li>4.3 El panell de navegaci\u00f3</li> <li>4.4 Opcions d'aplicaci\u00f3 <ul> <li>Exercici 4.4</li> </ul> </li> <li>4.5 El panell de control <ul> <li>Exercici 4.5</li> </ul> </li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T05_Annex_Access/37_funcions_estndard/#37-funcions-estandard","title":"3.7 Funcions est\u00e0ndard","text":"<p>A continuaci\u00f3 veurem algunes de les funcions que ens proporciona VBA agrupades per categories </p> <p>FUNCIONS MATEM\u00c0TIQUES </p> Abs(n): valor absolut de n Cos(r): cosinus Exp(n)*: el n\u00famero e*** elevat a una pot\u00e8ncia Hex(n): Converteix a hexadecimal Int(r): part entera de r Log(r)*: logaritme en base e* de r Oct(n): converteix a octal Randomize(n): inicialitza el generador de n\u00fameros aleatoris Rnd(): n\u00famero aleatori entre 0 i 1 Sin(r): sinus Tan(n): tangent <p>FUNCIONS DE CONVERSI\u00d3 </p> Convertir a un determinat tipus CBool, CByte, CCur, CDate, CDbl, Cdec, CInt, CLng, CSng, CStr, CVar, CVErr <p>FUNCIONS DE TRACTAMENT DE CADENA </p> <p>(Nota: Hi ha moltes funcions que poden o no dur un $ al final: la versi\u00f3 que no en porta torna un valor Variant, mentre que la que s\u00ed que en duu torna un String) </p> Asc(text) Codi ASCII del primer car\u00e0cter Chr(n) Torna el car\u00e0cter corresponent al codi ASCII n Format(text,format) Torna el valor amb el format indicat InStr(i,cadena,subcadena) Torna la posici\u00f3 en la qual es troba la subcadena dins de la cadena (si no la troba, 0), comen\u00e7ant des de la posici\u00f3 i Lcase(text) Passa a min\u00fascules Left(text,n) Torna n car\u00e0cters del costat esquerre Len(text) Llarg\u00e0ria de la cadena Ltrim(text) Elimina els espais en blanc de l'esquerra Mid(text,i,n) Torna n car\u00e0cters, comen\u00e7ant des de la posici\u00f3 i. Si no s'especifica n \u00e9s fins el final de la cadena Right(text,n) Torna n car\u00e0cters del costat dret Rtrim(text) Elimina els espais en blanc de la dreta Space(n) Torna una cadena amb el n\u00famero de espais en blanc especificat Str(n) Converteix un n\u00famero en una cadena StrComp(text1,text2) Compara dues cadenes (els car\u00e0cters ASCII). Es pot fer que distingisca maj\u00fascules i min\u00fascules, o que no ho fa\u00e7a String(n,c) Torna una cadena amb el car\u00e0cter c repetit n vegades Trim(text) Elimina els espais en blanc dels dos costats Ucase(text) Passa a maj\u00fascules Val(text) Converteix una cadena en un n\u00famero <p>FUNCIONS DE DATA I HORA </p> Now: dia i hora del sistema Date: dia del sistema Time: hora del sistema Day: trau el dia d'una data Month: trau el mes d'una data Weekday: trau el dia de la setmana (diumenge 1, dilluns\u00a02, ...) Year: trau l'any d'una data Hour: trau l'hora Minute: trau els minuts Second: trau els segons DateDiff: difer\u00e8ncia entre dues dates (en el format especificat: dies, mesos, ...) DateAdd: suma a una data un n\u00famero determinat de espais temporals (dies, ...) <p>FUNCIONS D'AGREGAT </p> <p>Totes aquestes funcions treballen sobre un conjunt de valors, de files tretes d'alguna taula. Sempre tindran 3 arguments: </p> <ul> <li>Expresi\u00f3n: indica el camp que es busca, sobre el qual es vol fer alguna cosa.</li> <li>Dominio: indica la nom de la taula o consulta d'on es trauen les dades.</li> <li>Criterio: indica una possible selecci\u00f3 de les files de la taula.</li> </ul> DAvg: calcula la mitjana DCount: compta quantes files DLookup: torna el valor del camp de la primera fila que satisfa el criteri DFirst: torna el primer valor del camp especificat DLast: torna l'\u00faltim DMin: valor m\u00ednim DMax:** valor m\u00e0xim DStDev: desviaci\u00f3 t\u00edpica DSum: suma DVar: vari\u00e0ncia <p>Nota: Aquestes funcions les veurem b\u00e9 en el tema de SQL. </p> <p>ALTRES FUNCIONS </p> InputBox Quadre de entrada. Torna un String. El format de la funci\u00f3 \u00e9s: InputBox(missatge[, t\u00edtol][, valor per defecte][, xpos][, ypos][, helpfile, context]) MsgBox Finestra de missatge. Es poden especificar els botons que apareixeran i la funci\u00f3 torna un valor que equival al bot\u00f3 apretat MsgBox(missatge[, botons][, t\u00edtol][, helpfile, context]) <p></p>"},{"location":"BD-T05_Annex_Access/37_funcions_estndard/#exercici-314-voluntari","title":"Exercici 3.14 (voluntari)","text":"<p>Per mig de les funcions de cadena intentar traure, en una etiqueta nova en el formulari Empleat, els noms dels empleats canviant l'ordre (nom + cognoms). Feu-lo progressivament aix\u00ed:</p> <ul> <li>Primer l'intenteu traure amb el mateix format que est\u00e0, \u00e9s a dir Cognoms, Nom </li> <li>Despr\u00e9s intenteu-lo amb el format de la figura: nom i cognoms. Es tractar\u00e0 de trobar la coma (amb InStr() ) </li> <li>Traure primer el que hi ha darrere de la coma (pot anar molt b\u00e9 la funci\u00f3 Mid, ja que pot traure fins el final de la cadena).</li> <li>Despr\u00e9s el que hi ha davant, i segurament la funci\u00f3 m\u00e9s c\u00f2moda ser\u00e0 Left().</li> <li>Per complicar-lo un poc m\u00e9s, podr\u00edem traure els cognoms en maj\u00fascules.</li> </ul> <p>La propietat de l'etiqueta que s'ha de modificar \u00e9s Caption. Haureu de mirar el nom que us d\u00f3na per a l'etiqueta, que pot canviar d'uns a una altres.</p> <p>Aquest seria l'aspecte:</p> <p></p> <p>El moment oport\u00fa podria ser \"Al activar registro\". Com que alguns de vosaltres tindreu una macro per aquest event (realitzada en l'exercici 2.20, que era voluntari), podeu substituir-la pel procediment (que pot esat associat al formulari), i dins d'aquest cridar la macro amb:</p> <p>DoCmd.RunMacro \"nom_de_la_macro\"</p> <p>Aix\u00ed es es faran les dues feines, la de l'exercici 2.20 i la d'aquest exercici.</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial SenseObraDerivada 2.5 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T05_Annex_Access/38_objectes_especials_propietats_i_mtodes/","title":"38 objectes especials propietats i mtodes","text":"<p>Bases de Dades</p> <ul> <li>Tema 5 (annex): Access avan\u00e7at</li> <li>Objectius</li> <li>Part I: Pr\u00e0ctica inicial </li> <li>1.1 Taules</li> <li>1.2 Consultes</li> <li>1.3 Formularis i Informes</li> <li>Part II: Macros </li> <li>2.1 Creaci\u00f3 d'una Macro</li> <li>2.2 Accions m\u00faltiples</li> <li>2.3 Submacros</li> <li>2.4 Condicions</li> <li>2.5 Resum d'accions</li> <li>2.6 Resum d'esdeveniments</li> <li>Part III: M\u00f2duls (Visual Basic) </li> <li>3.1 Creaci\u00f3 d'un M\u00f2dul</li> <li>3.2 Tipus de dades, Constants i Variables</li> <li>3.3 Tipus especials</li> <li>3.4 Operadors</li> <li>3.5 Funcions i Procediments</li> <li>3.6 Sent\u00e8ncies</li> <li>3.7 Funcions est\u00e0ndard</li> <li>3.8 Objectes especials: propietats i m\u00e8todes</li> <li>Part IV: Configurar l'aspecte </li> <li>4.1 Configurar la Barra d'Acc\u00e9s r\u00e0pid <ul> <li>Exercici 4.1</li> </ul> </li> <li>4.2 La cinta d'opcions <ul> <li>4.2.1 Modificaci\u00f3 per a tot Access </li> <li>Exercici 4.2</li> <li>4.2.2 Modificaci\u00f3 per a la Base de Dades actual </li> <li>Exercici 4.3 (voluntari per\u00f2 puntuable)</li> </ul> </li> <li>4.3 El panell de navegaci\u00f3</li> <li>4.4 Opcions d'aplicaci\u00f3 <ul> <li>Exercici 4.4</li> </ul> </li> <li>4.5 El panell de control <ul> <li>Exercici 4.5</li> </ul> </li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T05_Annex_Access/38_objectes_especials_propietats_i_mtodes/#38-objectes-especials-propietats-i-metodes","title":"3.8 Objectes especials: propietats i m\u00e8todes","text":"<p>Visual Basic \u00e9s un llenguatge de programaci\u00f3 orientat a objectes. Els objectes s\u00f3n un conjunt de dades i de procediments (en POO els procediments d'un objecte s'anomenen m\u00e8todes). La manera d'especificar un camp de l'objecte o un m\u00e8tode \u00e9s similar: nom_objecte.nom_camp_o_procediment.</p> <p>Dels objectes ja definits en VBA anem a veure 2 que utilitzarem especialment. </p> <p>Nota Important</p> <p>Aquestos objectes pertanyen a la col\u00b7lecci\u00f3 d'objectes DAO (Data Access Objects). Depenent de la configuraci\u00f3 particular de l'Access, podria ser que aquestos objectes no estigueren disponibles en primera inst\u00e0ncia.\u00a0 Per a que estiguen disponibles haur\u00edem d'anar dis de l'editor de Visual Basic a Herramientas \u2192 Referencias\u00a0 i activar Microsoft DAO 3.6 Object Library o una similar. </p> <p>DataBase </p> <p>\u00c9s un objecte que fa refer\u00e8ncia a una Base de Dades. </p> <p>Operacions: </p> <ul> <li> <p>Set variable_BD = CurrentDB per a que apunte a l'actual Base de Dades</p> </li> <li> <p>Set variable_BD = nothing per a que no apunte a res</p> </li> </ul> <p>Nota</p> <p>Es pot fer que apunte a altres Bases de Dades que no siguen l'actual, per\u00f2 resulta m\u00e9s complicat d'estructurar. Per als objectius d'aquest curs tenim prou amb la Base de Dades actual (CurrentDB) </p> <ul> <li>OpenRecordSet(origen, mode) </li> </ul> <p>L'origen pot ser una taula, una consulta o una sent\u00e8ncia SQL. </p> <p>El mode indica el mode d'obertura, nom\u00e9s lectura, lectura-escriptura, ... </p> <p>RecordSet </p> <p>\u00c9s un objecte que fa refer\u00e8ncia a un conjunt de registres </p> <p>Operacions: </p> <ul> <li> <p>Set variable_RS = variable_BD.OpenRecordSet(origen, mode) </p> </li> <li> <p>Close: per a tancar el RecordSet. </p> </li> <li> <p>M\u00e8todes Move, per a despla\u00e7ar entre els registres: MoveFirst, MoveLast, MoveNext, MovePrevious. </p> </li> <li> <p>M\u00e8todes Find, per a localitzar registres: FindFirst, FindNext, FindPrevious, ...</p> </li> <li> <p>Delete, per a esborrar el registre actual. </p> </li> <li> <p>Modificaci\u00f3, on s'hauria de preparar primer, fer la modificaci\u00f3 al camp, i actualitzar </p> </li> </ul> <p>Nom_RS.Edit  Nom_rs!nom_camp=valor Nom_RS.Update </p> <ul> <li>Inserci\u00f3 de registres, on tamb\u00e9 s'has de preparar primer, posar els valors als camps i per \u00faltim actualitzar: </li> </ul> <p>Nom_RS.AddNew  Nom_rs!nom_camp_1=valor_1 ... Nom_rs!nom_camp_n=valor_n Nom_RS.Update </p> <ul> <li> <p>RecordCount: compta el nombre de registres del RecordSet (\u00e9s convenient fer primer un MoveLast, per a rec\u00f2rrer pr\u00e8viament tot el RecorSet). </p> </li> <li> <p>BOF, EOF: propietats que indiquen respectivament principi i final de fitxer.</p> </li> </ul> <p></p>"},{"location":"BD-T05_Annex_Access/38_objectes_especials_propietats_i_mtodes/#exercici-315","title":"Exercici 3.15","text":"<p>Treure el nom de tots els empleats en una \u00fanica finestra. Servir\u00e0 per veure com rec\u00f2rrer un recordset des del principi fins el final. Anirem acumulant els noms dels empleats en una variable (amb el car\u00e0cter de baixar de l\u00ednia), per a mostrar al final aquesta variable. </p> <p>Sub Noms_Empleats() Dim bd As Database Dim rs As Recordset Dim s As String</p> <p>Set bd = CurrentDb Set rs = bd.OpenRecordset(\"Empleat\") rs.MoveFirst s = \"\" While Not rs.EOF s = s &amp; rs!Nom &amp; Chr(10) rs.MoveNext Wend MsgBox (s) End Sub </p> <p></p>"},{"location":"BD-T05_Annex_Access/38_objectes_especials_propietats_i_mtodes/#exercici-316-voluntari","title":"Exercici 3.16 (voluntari)","text":"<p>Col\u00b7locar un bot\u00f3 en Men\u00fa Principal anomenat Pujada selectiva, que demane una quantitat (ser\u00e0 el que es pujar\u00e0 als empleats) i despr\u00e9s que vaja preguntant si es puja el sou a cadascun dels empleats. Nom\u00e9s en el cas de contestar afirmativament s'ha de pujar (en cas contrari es deixa igual). La funci\u00f3 ha d'estar en el m\u00f2dul est\u00e0ndard Funcions, i s'ha d'anomenar Pujada_selectiva. </p> <p></p>"},{"location":"BD-T05_Annex_Access/38_objectes_especials_propietats_i_mtodes/#exercici-317","title":"Exercici 3.17","text":"<p>Posar un bot\u00f3 en el formulari Treballa anomenat Nou Projecte, de manera que anir\u00edem al formulari Projecte per a introduir-ne un nou. \u00c9s convenient obrir-lo en Mode di\u00e0leg (acDialog). </p> <p>Quan tornem de la introducci\u00f3 del projecte s'haur\u00e0 d'actualitzar la llista de projectes del quadre combinat Num_p (per\u00f2 observeu el nom que teniu en el vostre formulari Treballa). Es fa per mig d'un m\u00e8tode del quadre combinat anomenat Requery, que torna a executar la consulta interna que omple la llista. </p> <p>Tamb\u00e9 estaria b\u00e9 que aquest quadre combinat estiguera seleccionat i que es desplegara autom\u00e0ticament la llista adjunta (m\u00e8todes SetFocus i DropDown respectivament). </p> <p></p>"},{"location":"BD-T05_Annex_Access/38_objectes_especials_propietats_i_mtodes/#exercici-318-voluntari","title":"Exercici 3.18 (voluntari)","text":"<p>Fer acomplir la restricci\u00f3 externa que diu: </p> <p>RexR1: El cap d'un departament ha de ser membre d'aquest </p> <p>Per no complicar-nos la vida, ho farem en el formulari Departament, i en el quadre combinat on se selecciona el director, nom\u00e9s traure els membres del departament (per tant, nom\u00e9s heu de canviar la consulta associada al quadre combinat). </p> <p>Tindrem una complicaci\u00f3, i \u00e9s que quan s'executa la consulta que d\u00f3na els noms dels empleats del departament, se selaccionaran els del primer departament. Quan anem al seg\u00fcent registre, continuarem amb la mateixa llista. Soluci\u00f3: cada vegada que canviem de registre (\"Al activar registro\") obligar a fer una altra vegada la consulta. Com hem vist en l'exercici anterior, aix\u00f2 \u00e9s un m\u00e8tode del mateix quadre combinat: Director.Requery (si \u00e9s que Director \u00e9s el nom del quadre combinat). </p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial SenseObraDerivada 2.5 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T05_Annex_Access/41_configurar_la_barra_daccs_rpid/","title":"41 configurar la barra daccs rpid","text":"<p>Bases de Dades</p> <ul> <li>Tema 5 (annex): Access avan\u00e7at</li> <li>Objectius</li> <li>Part I: Pr\u00e0ctica inicial </li> <li>1.1 Taules</li> <li>1.2 Consultes</li> <li>1.3 Formularis i Informes</li> <li>Part II: Macros </li> <li>2.1 Creaci\u00f3 d'una Macro</li> <li>2.2 Accions m\u00faltiples</li> <li>2.3 Submacros</li> <li>2.4 Condicions</li> <li>2.5 Resum d'accions</li> <li>2.6 Resum d'esdeveniments</li> <li>Part III: M\u00f2duls (Visual Basic) </li> <li>3.1 Creaci\u00f3 d'un M\u00f2dul</li> <li>3.2 Tipus de dades, Constants i Variables</li> <li>3.3 Tipus especials</li> <li>3.4 Operadors</li> <li>3.5 Funcions i Procediments</li> <li>3.6 Sent\u00e8ncies</li> <li>3.7 Funcions est\u00e0ndard</li> <li>3.8 Objectes especials: propietats i m\u00e8todes</li> <li>Part IV: Configurar l'aspecte </li> <li>4.1 Configurar la Barra d'Acc\u00e9s r\u00e0pid <ul> <li>Exercici 4.1</li> </ul> </li> <li>4.2 La cinta d'opcions <ul> <li>4.2.1 Modificaci\u00f3 per a tot Access </li> <li>Exercici 4.2</li> <li>4.2.2 Modificaci\u00f3 per a la Base de Dades actual </li> <li>Exercici 4.3 (voluntari per\u00f2 puntuable)</li> </ul> </li> <li>4.3 El panell de navegaci\u00f3</li> <li>4.4 Opcions d'aplicaci\u00f3 <ul> <li>Exercici 4.4</li> </ul> </li> <li>4.5 El panell de control <ul> <li>Exercici 4.5</li> </ul> </li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T05_Annex_Access/41_configurar_la_barra_daccs_rpid/#41-configurar-la-barra-dacces-rapid","title":"4.1 Configurar la Barra d'Acc\u00e9s r\u00e0pid","text":"<p>La barra d'acc\u00e9s r\u00e0pid \u00e9s la que es troba dalt de tot a l'esquerra. Inclou uns quants controls (en principi nom\u00e9s hi ha 3: guardar, desfer i re-fer). Podrem afegir m\u00e9s accions, considerant que haurien de ser poques per no saturar-lo. En el nostre exemple inclourem 2 accions: una de car\u00e0cter general, com \u00e9s eixir d'Access, i una altra particular. Hem de fer la consideraci\u00f3 que la modificaci\u00f3 tindr\u00e0 efecte per a tot Access. \u00c9s a dir, que si obrim una altra Base de Dades diferent a l'actual, la barra d'acc\u00e9s tamb\u00e9 estar\u00e0 modificada.</p> <p>Per a configurar la barra d'acc\u00e9s r\u00e0pid, podem apretar a la fletxeta que es troba a la dreta de la mateixa barra per afegir les opcions m\u00e9s comunes o anar a M\u00e1s comandos. Arribarem a la mateixa pantalla que si fem Archivo \u2192 Opciones \u2192 Barra de herramientas de acceso r\u00e1pido.</p> <p>Aquesta ser\u00e0 la pantalla</p> <p></p> <p>El seg\u00fcent v\u00eddeo mostra com afegir un bot\u00f3 per a la macro M_Data_Avui i per a Salir (tancar Access). Tamb\u00e9 posarem uns separadors per a fer-lo m\u00e9s atractiu.</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial SenseObraDerivada 2.5 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T05_Annex_Access/421_modificaci_per_a_tot_access/","title":"421 modificaci per a tot access","text":"<p>Bases de Dades</p> <ul> <li>Tema 5 (annex): Access avan\u00e7at</li> <li>Objectius</li> <li>Part I: Pr\u00e0ctica inicial </li> <li>1.1 Taules</li> <li>1.2 Consultes</li> <li>1.3 Formularis i Informes</li> <li>Part II: Macros </li> <li>2.1 Creaci\u00f3 d'una Macro</li> <li>2.2 Accions m\u00faltiples</li> <li>2.3 Submacros</li> <li>2.4 Condicions</li> <li>2.5 Resum d'accions</li> <li>2.6 Resum d'esdeveniments</li> <li>Part III: M\u00f2duls (Visual Basic) </li> <li>3.1 Creaci\u00f3 d'un M\u00f2dul</li> <li>3.2 Tipus de dades, Constants i Variables</li> <li>3.3 Tipus especials</li> <li>3.4 Operadors</li> <li>3.5 Funcions i Procediments</li> <li>3.6 Sent\u00e8ncies</li> <li>3.7 Funcions est\u00e0ndard</li> <li>3.8 Objectes especials: propietats i m\u00e8todes</li> <li>Part IV: Configurar l'aspecte </li> <li>4.1 Configurar la Barra d'Acc\u00e9s r\u00e0pid <ul> <li>Exercici 4.1</li> </ul> </li> <li>4.2 La cinta d'opcions <ul> <li>4.2.1 Modificaci\u00f3 per a tot Access </li> <li>Exercici 4.2</li> <li>4.2.2 Modificaci\u00f3 per a la Base de Dades actual </li> <li>Exercici 4.3 (voluntari per\u00f2 puntuable)</li> </ul> </li> <li>4.3 El panell de navegaci\u00f3</li> <li>4.4 Opcions d'aplicaci\u00f3 <ul> <li>Exercici 4.4</li> </ul> </li> <li>4.5 El panell de control <ul> <li>Exercici 4.5</li> </ul> </li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T05_Annex_Access/421_modificaci_per_a_tot_access/#421-modificacio-per-a-tot-access","title":"4.2.1 Modificaci\u00f3 per a tot Access","text":"<p>En Access 2013 resulta molt c\u00f2mode, la modificaci\u00f3 general de la cinta d'opcions. Amb modificaci\u00f3 general ens referim a una modificaci\u00f3 que afectar\u00e0 sempre a Acess, siga quina siga la Base de Dades que obrim.</p> <p>Senzillament haurem d'anar a\u00a0Archivo \u2192 Opciones \u2192 Personalizar cinta de opciones</p> <p>Tamb\u00e9 es pot anar apretant amb el bot\u00f3 de la dreta sobre qualsevol punt de la cinta d'opcions i triant Personalizar cinta de opciones.</p> <p>En el seg\u00fcent v\u00eddeo es crea una fitxa nova en la cinta d'opcions, incorporant moltes de les macros ja creades.</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial SenseObraDerivada 2.5 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T05_Annex_Access/422_modificaci_per_a_la_base_de_dades_actual/","title":"422 modificaci per a la base de dades actual","text":"<p>Bases de Dades</p> <ul> <li>Tema 5 (annex): Access avan\u00e7at</li> <li>Objectius</li> <li>Part I: Pr\u00e0ctica inicial </li> <li>1.1 Taules</li> <li>1.2 Consultes</li> <li>1.3 Formularis i Informes</li> <li>Part II: Macros </li> <li>2.1 Creaci\u00f3 d'una Macro</li> <li>2.2 Accions m\u00faltiples</li> <li>2.3 Submacros</li> <li>2.4 Condicions</li> <li>2.5 Resum d'accions</li> <li>2.6 Resum d'esdeveniments</li> <li>Part III: M\u00f2duls (Visual Basic) </li> <li>3.1 Creaci\u00f3 d'un M\u00f2dul</li> <li>3.2 Tipus de dades, Constants i Variables</li> <li>3.3 Tipus especials</li> <li>3.4 Operadors</li> <li>3.5 Funcions i Procediments</li> <li>3.6 Sent\u00e8ncies</li> <li>3.7 Funcions est\u00e0ndard</li> <li>3.8 Objectes especials: propietats i m\u00e8todes</li> <li>Part IV: Configurar l'aspecte </li> <li>4.1 Configurar la Barra d'Acc\u00e9s r\u00e0pid <ul> <li>Exercici 4.1</li> </ul> </li> <li>4.2 La cinta d'opcions <ul> <li>4.2.1 Modificaci\u00f3 per a tot Access </li> <li>Exercici 4.2</li> <li>4.2.2 Modificaci\u00f3 per a la Base de Dades actual </li> <li>Exercici 4.3 (voluntari per\u00f2 puntuable)</li> </ul> </li> <li>4.3 El panell de navegaci\u00f3</li> <li>4.4 Opcions d'aplicaci\u00f3 <ul> <li>Exercici 4.4</li> </ul> </li> <li>4.5 El panell de control <ul> <li>Exercici 4.5</li> </ul> </li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T05_Annex_Access/422_modificaci_per_a_la_base_de_dades_actual/#422-modificacio-per-a-la-base-de-dades-actual","title":"4.2.2 Modificaci\u00f3 per a la Base de Dades actual","text":"<p>Com es comentava al principi d'aquesta Part IV, resulta m\u00e9s complicat modificar la cinta d'opcions de manera que afecte nom\u00e9s a la Base de Dades actual.</p> <p>La manera de definir la cinta canvia radicalment de com es creaven en versions anteriors a Access 2007, les barres i els men\u00fas. Ara es definir\u00e0 en XML. Aquest codi XML pot estar guardat en m\u00e9s d'un lloc, definir-lo de m\u00e9s d'una manera. Nosaltres veurem possiblement el lloc m\u00e9s senzill per a col\u00b7locar aquest codi XML que definir\u00e0 la cinta d'opcions. Ser\u00e0 col\u00b7locar-la en una taula especial, amb una estructura predeterminada. No intentarem fer un estudi exhaustiu. Ens aconformarem en veure un exemple, i sobre aquest exemple com es podria modificar el codi XML per a modificar la cinta d'opcions.</p> <p>Nota</p> <p>Al final de la pregunta hi ha un v\u00eddeo on es mostra tot el proc\u00e9s</p> <p>Primer pas: Preparaci\u00f3</p> <p>Per a poder visulitzar totes les taules, i poder visualitzar possible errors en el moment de crear la cinta d'opcions farem dues preparacions inicials:</p> <p>1.- Visualitzar les taules de sistema</p> <p>S\u00f3n taules que utilitza el mateix Access, i per defecte estan ocultes per a no marejar, per\u00f2 ara ens far\u00e0 falta tenir-les visibles.</p> <p>Es fa amb el bot\u00f3 de la dreta en l'explorador d'objectes, anant a les Opciones de navegaci\u00f3n, i activant Mostrar objetos del sistema </p> <p>2.- Habilitar la presentaci\u00f3 dels missatges d'error</p> <p>Si quan posem el codi XML hi ha alguna cosa malament ens anir\u00e0 molt b\u00e9 que ens mostre quin \u00e9s l'error. Podem fer que els mostre d'aquesta manera:</p> <p>Anar al men\u00fa ARCHIVO, i despr\u00e9s anar a les Opciones. En Configuraci\u00f3n de cliente, en l'apartat General haurem d'activar l'opci\u00f3 Mostrar errores de interfaz de usuario en el complemento</p> <p>Segon pas: Crear la taula del sistema USysRibbons</p> <p>En la taula USysRibbon \u00e9s on guardarem el codi XML. Obligat\u00f2riament ha de tenir la seg\u00fcent estructura:</p> Nom del camp Tipus Grand\u00e0ria ID Autonum\u00e8ric Enter llarg RibbonName Texto 255 RibbonXml Memo <p>Nota</p> <p>Podeu importar la taula, juntament amb un formulari per a poder visualitzar-la (i modificar-la) c\u00f2modament, des de la base de dades adjunta ribbon.accdb</p> <p>Cada fila que introdu\u00efm en la taula USysRibbons ser\u00e0 una cinta d'opcions que podrem associar a la nostra aplicaci\u00f3. En RibbonName posarem el nom de la cinta, i en RibbonXml les diferents opcions de la cinta en format XML. Mirem aquest exemple, que \u00e9s el que teniu en la Base de Dades ribbon.accdb.</p> <p></p> <p>Com es pot apreciar , t\u00e9 una estructura jer\u00e0rquica, per anar definint la cinta (ribbon), les fitxes (tab), els grups (group) i les opcions individuals (button). Els elements tindran un camp per a identificar-los (id) i en moltes ocasions una etiqueta (label) que \u00e9s la que es mostrar\u00e0 en la cinta.</p> <p>Concretament l'element button, que defineix les diferents opcions individuals, t\u00e9 entre d'altres els seg\u00fcents camps:</p> <ul> <li>id: identificador que no ha de coincidir amb cap altre.</li> <li>label: etiqueta que es mostrar\u00e0 en la cinta</li> <li>imageMSO: image de la icona d'entre les ja definides que s'associar\u00e0 a l'opci\u00f3. Definir una imatge pr\u00f2pia suposa massa esfor\u00e7 per als objectius d'aquest tema.</li> <li>size: grand\u00e0ria de la icona, que potser gran (large) o menuda (normal).</li> <li>onAction: nom de la macro que s'executar\u00e0 en apretar el bot\u00f3.</li> <li>supertip: missatge emergent que eixir\u00e0 quan ens situem damunt del bot\u00f3.</li> </ul> <p>Tercer pas: Activar-la</p> <p>Una vegada creada la taula (que per cert, si ocultem els objectes de sistema tamb\u00e9 s'amagar\u00e0), per a posar-la visible en la nostra aplicaci\u00f3 basada en Access, haurem de reiniciar Access o com a m\u00ednim la Base de Dades, per a que tinguen efecte els canvis. Aquestos seran els pasos:</p> <ol> <li>Tancar la Base de Dades i tornar a obrir-la.</li> <li>Anar a les Opcions d'Access (bot\u00f3 principal d'Office -&gt; Opcions d'Access), concretament a les opcions de Base de datos actual</li> <li>En l'apartat de Opciones de barra de herramientas y de la cinta de opciones l'opci\u00f3 Nombre de banda de opciones \u00e9s un quadre combinat on ja podrem triar la nostra cinta.</li> <li>Tancar una altra vegada la Base de Dades i tornar a obrir-la.</li> </ol> <p>Per a cada canvi que fem en la cinta (editant la taula USysRibbons) haurem de tancar la BD i tornar a obrir-la, ja que \u00e9s en aquest moment quan es configura la cinta d'opcions.</p> <p>En el cas de tenir alguna errada en el codi XML, en el moment d'obrir la Base de Dades ens ho comunicar\u00e0.</p> <p>Resum de tots els passos</p> <p>En el seg\u00fcent v\u00eddeo es realitzen tots els pasos anteriors.</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial SenseObraDerivada 2.5 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T05_Annex_Access/42_la_cinta_dopcions/","title":"42 la cinta dopcions","text":"<p>Bases de Dades</p> <ul> <li>Tema 5 (annex): Access avan\u00e7at</li> <li>Objectius</li> <li>Part I: Pr\u00e0ctica inicial </li> <li>1.1 Taules</li> <li>1.2 Consultes</li> <li>1.3 Formularis i Informes</li> <li>Part II: Macros </li> <li>2.1 Creaci\u00f3 d'una Macro</li> <li>2.2 Accions m\u00faltiples</li> <li>2.3 Submacros</li> <li>2.4 Condicions</li> <li>2.5 Resum d'accions</li> <li>2.6 Resum d'esdeveniments</li> <li>Part III: M\u00f2duls (Visual Basic) </li> <li>3.1 Creaci\u00f3 d'un M\u00f2dul</li> <li>3.2 Tipus de dades, Constants i Variables</li> <li>3.3 Tipus especials</li> <li>3.4 Operadors</li> <li>3.5 Funcions i Procediments</li> <li>3.6 Sent\u00e8ncies</li> <li>3.7 Funcions est\u00e0ndard</li> <li>3.8 Objectes especials: propietats i m\u00e8todes</li> <li>Part IV: Configurar l'aspecte </li> <li>4.1 Configurar la Barra d'Acc\u00e9s r\u00e0pid <ul> <li>Exercici 4.1</li> </ul> </li> <li>4.2 La cinta d'opcions <ul> <li>4.2.1 Modificaci\u00f3 per a tot Access </li> <li>Exercici 4.2</li> <li>4.2.2 Modificaci\u00f3 per a la Base de Dades actual </li> <li>Exercici 4.3 (voluntari per\u00f2 puntuable)</li> </ul> </li> <li>4.3 El panell de navegaci\u00f3</li> <li>4.4 Opcions d'aplicaci\u00f3 <ul> <li>Exercici 4.4</li> </ul> </li> <li>4.5 El panell de control <ul> <li>Exercici 4.5</li> </ul> </li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T05_Annex_Access/42_la_cinta_dopcions/#42-la-cinta-dopcions","title":"4.2 La cinta d'opcions","text":"<p>A partir d'Access 2007 fins a la versi\u00f3 actual, s'han substitu\u00eft men\u00fas i barres d'eines per la Cinta d'opcions (ribbon).</p> <p>La cinta d'opcions consta de fitxes, i en cada fitxa tindrem uns Grups d'opcions, amb les Opcions individuals. Cada opci\u00f3 pot tenir una icona associada, i a m\u00e9s pot tenir 2 grand\u00e0ries, gran i normal. Fins i tot, es pot visualitzar el comentari de l'opci\u00f3, o \u00fanicament la seua icona.</p> <p></p> <p>A banda de les Fitxes est\u00e0ndar ja creades, nosaltres podrem modificar-les o encara millor, crear fitxes noves amb les nostres opcions.</p> <p>Hi ha dues maneres de modificar la cinta d'opcions:</p> <ul> <li>Modificar la cinta d'opcions per a tot Access. \u00c9s a dir, modificar la cinta d'opcions de tota l'aplicaci\u00f3, personalitzant-la al nostre gust. D'aquesta manera, siga quina siga la Base de Dades que s'\u00f2briga, estar\u00e0 la cinta d'opcions modificada.</li> <li>Modificar la cinta d'opcions per a una Base de Dades en concret. \u00c9s a dir, incorporar les modificacions a la Base de Dades. No afectar\u00e0 per tant a les altres possibles Bases de Dades.</li> </ul> <p>Mentre que la primera forma \u00e9s prou senzilla i intu\u00eftiva, la segona forma requereix la creaci\u00f3 d'una nova taula, intruduir codi XML en ella, i resulta m\u00e9s complicat.</p> <p>Practicarem les dues maneres, construint pr\u00e0cticament la mateixa Fitxa de la cinta d'opcions pels dos m\u00e8todes.</p> <p>En Access 2007 nom\u00e9s es podia fer de la segona manera, \u00e9s a dir, incorporar la modificaci\u00f3 a la Base de Dades. No es podia modificar la cinta d'opcions de forma general.</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial SenseObraDerivada 2.5 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T05_Annex_Access/43_el_panell_de_navegaci/","title":"43 el panell de navegaci","text":"<p>Bases de Dades</p> <ul> <li>Tema 5 (annex): Access avan\u00e7at</li> <li>Objectius</li> <li>Part I: Pr\u00e0ctica inicial </li> <li>1.1 Taules</li> <li>1.2 Consultes</li> <li>1.3 Formularis i Informes</li> <li>Part II: Macros </li> <li>2.1 Creaci\u00f3 d'una Macro</li> <li>2.2 Accions m\u00faltiples</li> <li>2.3 Submacros</li> <li>2.4 Condicions</li> <li>2.5 Resum d'accions</li> <li>2.6 Resum d'esdeveniments</li> <li>Part III: M\u00f2duls (Visual Basic) </li> <li>3.1 Creaci\u00f3 d'un M\u00f2dul</li> <li>3.2 Tipus de dades, Constants i Variables</li> <li>3.3 Tipus especials</li> <li>3.4 Operadors</li> <li>3.5 Funcions i Procediments</li> <li>3.6 Sent\u00e8ncies</li> <li>3.7 Funcions est\u00e0ndard</li> <li>3.8 Objectes especials: propietats i m\u00e8todes</li> <li>Part IV: Configurar l'aspecte </li> <li>4.1 Configurar la Barra d'Acc\u00e9s r\u00e0pid <ul> <li>Exercici 4.1</li> </ul> </li> <li>4.2 La cinta d'opcions <ul> <li>4.2.1 Modificaci\u00f3 per a tot Access </li> <li>Exercici 4.2</li> <li>4.2.2 Modificaci\u00f3 per a la Base de Dades actual </li> <li>Exercici 4.3 (voluntari per\u00f2 puntuable)</li> </ul> </li> <li>4.3 El panell de navegaci\u00f3</li> <li>4.4 Opcions d'aplicaci\u00f3 <ul> <li>Exercici 4.4</li> </ul> </li> <li>4.5 El panell de control <ul> <li>Exercici 4.5</li> </ul> </li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T05_Annex_Access/43_el_panell_de_navegaci/#43-el-panell-de-navegacio","title":"4.3 El panell de navegaci\u00f3","text":"<p>En el panell de navegaci\u00f3 (que en versions anteriors s'anomenava panell d'exploraci\u00f3 d'objectes), situat normalment a l'esquerra, hau\u00edem de limitar l'acc\u00e9s \u00fanicament als objectes que ens interessa. Per exemple, pot ser molt convenient tenir formularis per a totes les introduccions i modificacions de dades de totes les taules, i despr\u00e9s que els usuaris \"normals\" no tinguen acc\u00e9s a les mateixes taules. Aix\u00ed podr\u00edem evitar manipulacions de les taules, i coses fins i tot pitjors.</p> <p>La primera aproximaci\u00f3 seria ocultar el panell d'exploraci\u00f3. Es fa des de ARCHIVO \u2192 Opciones \u2192 Base de datos actual, com es pot observar en la seg\u00fcent figura.</p> <p></p> <p>Una altra possibilitat, seria mostrar \u00fanicament el que ens interessa. Ho farem en les opcions de navegaci\u00f3 del panell de navegaci\u00f3.</p> <p>El seg\u00fcent v\u00eddeo explica com fer alguns canvis.</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial SenseObraDerivada 2.5 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T05_Annex_Access/44_opcions_daplicaci/","title":"44 opcions daplicaci","text":"<p>Bases de Dades</p> <ul> <li>Tema 5 (annex): Access avan\u00e7at</li> <li>Objectius</li> <li>Part I: Pr\u00e0ctica inicial </li> <li>1.1 Taules</li> <li>1.2 Consultes</li> <li>1.3 Formularis i Informes</li> <li>Part II: Macros </li> <li>2.1 Creaci\u00f3 d'una Macro</li> <li>2.2 Accions m\u00faltiples</li> <li>2.3 Submacros</li> <li>2.4 Condicions</li> <li>2.5 Resum d'accions</li> <li>2.6 Resum d'esdeveniments</li> <li>Part III: M\u00f2duls (Visual Basic) </li> <li>3.1 Creaci\u00f3 d'un M\u00f2dul</li> <li>3.2 Tipus de dades, Constants i Variables</li> <li>3.3 Tipus especials</li> <li>3.4 Operadors</li> <li>3.5 Funcions i Procediments</li> <li>3.6 Sent\u00e8ncies</li> <li>3.7 Funcions est\u00e0ndard</li> <li>3.8 Objectes especials: propietats i m\u00e8todes</li> <li>Part IV: Configurar l'aspecte </li> <li>4.1 Configurar la Barra d'Acc\u00e9s r\u00e0pid <ul> <li>Exercici 4.1</li> </ul> </li> <li>4.2 La cinta d'opcions <ul> <li>4.2.1 Modificaci\u00f3 per a tot Access </li> <li>Exercici 4.2</li> <li>4.2.2 Modificaci\u00f3 per a la Base de Dades actual </li> <li>Exercici 4.3 (voluntari per\u00f2 puntuable)</li> </ul> </li> <li>4.3 El panell de navegaci\u00f3</li> <li>4.4 Opcions d'aplicaci\u00f3 <ul> <li>Exercici 4.4</li> </ul> </li> <li>4.5 El panell de control <ul> <li>Exercici 4.5</li> </ul> </li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T05_Annex_Access/44_opcions_daplicaci/#44-opcions-daplicacio","title":"4.4 Opcions d'aplicaci\u00f3","text":"<p>Per a continuar donant l'aspecte d'una aplicaci\u00f3, podem utilitzar una s\u00e8rie d'opcions que es troben en les opcions d'Access, concretament en l'apartat \"Base de datos actual\". En la imatge seg\u00fcent es comenten algunes d'elles. Podeu provar-les per veure com queda l'aplicaci\u00f3.</p> <p></p> <p>De les opcions anteriors, \u00e9s especialment interessant la de \"Mostrar formulario\", ja que autom\u00e0ticament ens pot mostrar un formulari des del qual poder accedir a la resta de formularis i informes de l'aplicaci\u00f3, com \u00e9s Men\u00fa Principal en el nostre cas. Si a m\u00e9s en aquest formulari posem un bot\u00f3 de tancar no \u00fanicament el formulari o la Base de Dades, sin\u00f3 tot l'Access, ja anem pel bon cam\u00ed.</p> <p>La seg\u00fcent imatge \u00e9s la continuaci\u00f3 de l'anterior.</p> <p></p> <p>Una consideraci\u00f3 molt important a fer \u00e9s que si desactivem l'opci\u00f3 \"Permitir el uso de menus no restringidos\", a banda que pr\u00e0cticament no es podr\u00e0 utilitzar altra fitxa de la cinta d'opcions que la nostra, \u00e9s que no es podr\u00e0 entrar a les opcions d'Access (almenys en versions anteriors d'Access), cosa molt recomanable per a les aplicacions que van destinades a usuaris no experts. Per\u00f2, com ho farem els Administradors de l'aplicaci\u00f3 per a \"retocar\" el que vulguem a partir d'ara? El truc que ens proporciona Access \u00e9s obrir la Base de Dades mentre presionem la tecla de maj\u00fascules. Aleshores no tindr\u00e0 efecte aquesta opci\u00f3.</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial SenseObraDerivada 2.5 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T05_Annex_Access/45_el_panell_de_control/","title":"45 el panell de control","text":"<p>Bases de Dades</p> <ul> <li>Tema 5 (annex): Access avan\u00e7at</li> <li>Objectius</li> <li>Part I: Pr\u00e0ctica inicial </li> <li>1.1 Taules</li> <li>1.2 Consultes</li> <li>1.3 Formularis i Informes</li> <li>Part II: Macros </li> <li>2.1 Creaci\u00f3 d'una Macro</li> <li>2.2 Accions m\u00faltiples</li> <li>2.3 Submacros</li> <li>2.4 Condicions</li> <li>2.5 Resum d'accions</li> <li>2.6 Resum d'esdeveniments</li> <li>Part III: M\u00f2duls (Visual Basic) </li> <li>3.1 Creaci\u00f3 d'un M\u00f2dul</li> <li>3.2 Tipus de dades, Constants i Variables</li> <li>3.3 Tipus especials</li> <li>3.4 Operadors</li> <li>3.5 Funcions i Procediments</li> <li>3.6 Sent\u00e8ncies</li> <li>3.7 Funcions est\u00e0ndard</li> <li>3.8 Objectes especials: propietats i m\u00e8todes</li> <li>Part IV: Configurar l'aspecte </li> <li>4.1 Configurar la Barra d'Acc\u00e9s r\u00e0pid <ul> <li>Exercici 4.1</li> </ul> </li> <li>4.2 La cinta d'opcions <ul> <li>4.2.1 Modificaci\u00f3 per a tot Access </li> <li>Exercici 4.2</li> <li>4.2.2 Modificaci\u00f3 per a la Base de Dades actual </li> <li>Exercici 4.3 (voluntari per\u00f2 puntuable)</li> </ul> </li> <li>4.3 El panell de navegaci\u00f3</li> <li>4.4 Opcions d'aplicaci\u00f3 <ul> <li>Exercici 4.4</li> </ul> </li> <li>4.5 El panell de control <ul> <li>Exercici 4.5</li> </ul> </li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T05_Annex_Access/45_el_panell_de_control/#45-el-panell-de-control","title":"4.5 El panell de control","text":"<p>Access 2013 ens ofereix una manera alternativa de construir un formulari com el de Men\u00fa Principal, sense haver de dissenyar-lo nosaltres. Ser\u00e0 molt similar, per\u00f2 fet de forma m\u00e9s c\u00f2moda, encara que no tan vers\u00e0til.</p> <p>Es fa amb l\"Administrador del panel de control\". Hauria d'estar a la fitxa de la cinta d'opcions \"Herramientas de base de datos\", per\u00f2 \u00e9s possible que no el trobem \"a la primera.</p> <p>El seg\u00fcent v\u00eddeo explica com construir un panell de control similar al formulari Men\u00fa principal</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial SenseObraDerivada 2.5 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T05_Annex_Access/exercici_41/","title":"Exercici 41","text":"<p>Bases de Dades</p> <ul> <li>Tema 5 (annex): Access avan\u00e7at</li> <li>Objectius</li> <li>Part I: Pr\u00e0ctica inicial </li> <li>1.1 Taules</li> <li>1.2 Consultes</li> <li>1.3 Formularis i Informes</li> <li>Part II: Macros </li> <li>2.1 Creaci\u00f3 d'una Macro</li> <li>2.2 Accions m\u00faltiples</li> <li>2.3 Submacros</li> <li>2.4 Condicions</li> <li>2.5 Resum d'accions</li> <li>2.6 Resum d'esdeveniments</li> <li>Part III: M\u00f2duls (Visual Basic) </li> <li>3.1 Creaci\u00f3 d'un M\u00f2dul</li> <li>3.2 Tipus de dades, Constants i Variables</li> <li>3.3 Tipus especials</li> <li>3.4 Operadors</li> <li>3.5 Funcions i Procediments</li> <li>3.6 Sent\u00e8ncies</li> <li>3.7 Funcions est\u00e0ndard</li> <li>3.8 Objectes especials: propietats i m\u00e8todes</li> <li>Part IV: Configurar l'aspecte </li> <li>4.1 Configurar la Barra d'Acc\u00e9s r\u00e0pid <ul> <li>Exercici 4.1</li> </ul> </li> <li>4.2 La cinta d'opcions <ul> <li>4.2.1 Modificaci\u00f3 per a tot Access </li> <li>Exercici 4.2</li> <li>4.2.2 Modificaci\u00f3 per a la Base de Dades actual </li> <li>Exercici 4.3 (voluntari per\u00f2 puntuable)</li> </ul> </li> <li>4.3 El panell de navegaci\u00f3</li> <li>4.4 Opcions d'aplicaci\u00f3 <ul> <li>Exercici 4.4</li> </ul> </li> <li>4.5 El panell de control <ul> <li>Exercici 4.5</li> </ul> </li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T05_Annex_Access/exercici_41/#exercici-41","title":"Exercici 4.1","text":""},{"location":"BD-T05_Annex_Access/exercici_41/#exercici-41_1","title":"Exercici 4.1","text":"<p>Configura la Barra d'acc\u00e9s r\u00e0pid tal i com s'ha mostrat en l'apartat 4.1.</p> <p>Fes una captura de tota la finestra d'Access on es veja la barra d'acc\u00e9s r\u00e0pid. Anomena-la Exercici4_1.png (o .jpg)</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial SenseObraDerivada 2.5 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T05_Annex_Access/exercici_42/","title":"Exercici 42","text":"<p>Bases de Dades</p> <ul> <li>Tema 5 (annex): Access avan\u00e7at</li> <li>Objectius</li> <li>Part I: Pr\u00e0ctica inicial </li> <li>1.1 Taules</li> <li>1.2 Consultes</li> <li>1.3 Formularis i Informes</li> <li>Part II: Macros </li> <li>2.1 Creaci\u00f3 d'una Macro</li> <li>2.2 Accions m\u00faltiples</li> <li>2.3 Submacros</li> <li>2.4 Condicions</li> <li>2.5 Resum d'accions</li> <li>2.6 Resum d'esdeveniments</li> <li>Part III: M\u00f2duls (Visual Basic) </li> <li>3.1 Creaci\u00f3 d'un M\u00f2dul</li> <li>3.2 Tipus de dades, Constants i Variables</li> <li>3.3 Tipus especials</li> <li>3.4 Operadors</li> <li>3.5 Funcions i Procediments</li> <li>3.6 Sent\u00e8ncies</li> <li>3.7 Funcions est\u00e0ndard</li> <li>3.8 Objectes especials: propietats i m\u00e8todes</li> <li>Part IV: Configurar l'aspecte </li> <li>4.1 Configurar la Barra d'Acc\u00e9s r\u00e0pid <ul> <li>Exercici 4.1</li> </ul> </li> <li>4.2 La cinta d'opcions <ul> <li>4.2.1 Modificaci\u00f3 per a tot Access </li> <li>Exercici 4.2</li> <li>4.2.2 Modificaci\u00f3 per a la Base de Dades actual </li> <li>Exercici 4.3 (voluntari per\u00f2 puntuable)</li> </ul> </li> <li>4.3 El panell de navegaci\u00f3</li> <li>4.4 Opcions d'aplicaci\u00f3 <ul> <li>Exercici 4.4</li> </ul> </li> <li>4.5 El panell de control <ul> <li>Exercici 4.5</li> </ul> </li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T05_Annex_Access/exercici_42/#exercici-42","title":"Exercici 4.2","text":""},{"location":"BD-T05_Annex_Access/exercici_42/#exercici-42_1","title":"Exercici 4.2","text":"<p>Captura una imatge on es veja la pestanya FITXA EMPRESA de la cinta d'opcions. . Anomena-la Exercici4_2.png (o .jpg)</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial SenseObraDerivada 2.5 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T05_Annex_Access/exercici_43_voluntari_per_puntuable/","title":"Exercici 43 voluntari per puntuable","text":"<p>Bases de Dades</p> <ul> <li>Tema 5 (annex): Access avan\u00e7at</li> <li>Objectius</li> <li>Part I: Pr\u00e0ctica inicial </li> <li>1.1 Taules</li> <li>1.2 Consultes</li> <li>1.3 Formularis i Informes</li> <li>Part II: Macros </li> <li>2.1 Creaci\u00f3 d'una Macro</li> <li>2.2 Accions m\u00faltiples</li> <li>2.3 Submacros</li> <li>2.4 Condicions</li> <li>2.5 Resum d'accions</li> <li>2.6 Resum d'esdeveniments</li> <li>Part III: M\u00f2duls (Visual Basic) </li> <li>3.1 Creaci\u00f3 d'un M\u00f2dul</li> <li>3.2 Tipus de dades, Constants i Variables</li> <li>3.3 Tipus especials</li> <li>3.4 Operadors</li> <li>3.5 Funcions i Procediments</li> <li>3.6 Sent\u00e8ncies</li> <li>3.7 Funcions est\u00e0ndard</li> <li>3.8 Objectes especials: propietats i m\u00e8todes</li> <li>Part IV: Configurar l'aspecte </li> <li>4.1 Configurar la Barra d'Acc\u00e9s r\u00e0pid <ul> <li>Exercici 4.1</li> </ul> </li> <li>4.2 La cinta d'opcions <ul> <li>4.2.1 Modificaci\u00f3 per a tot Access </li> <li>Exercici 4.2</li> <li>4.2.2 Modificaci\u00f3 per a la Base de Dades actual </li> <li>Exercici 4.3 (voluntari per\u00f2 puntuable)</li> </ul> </li> <li>4.3 El panell de navegaci\u00f3</li> <li>4.4 Opcions d'aplicaci\u00f3 <ul> <li>Exercici 4.4</li> </ul> </li> <li>4.5 El panell de control <ul> <li>Exercici 4.5</li> </ul> </li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T05_Annex_Access/exercici_43_voluntari_per_puntuable/#exercici-43-voluntari-pero-puntuable","title":"Exercici 4.3 (voluntari per\u00f2 puntuable)","text":""},{"location":"BD-T05_Annex_Access/exercici_43_voluntari_per_puntuable/#exercici-43-voluntari-pero-puntuable_1","title":"Exercici 4.3 (voluntari per\u00f2 puntuable)","text":"<p>Construeix la cinta d'opcions per a la Base de Dades de l'apartat 4.2.2.</p> <p>En aquest cas no cal guardar cap imatge, perqu\u00e8 lliurareu tota la Base de Dades</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial SenseObraDerivada 2.5 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T05_Annex_Access/exercici_44/","title":"Exercici 44","text":"<p>Bases de Dades</p> <ul> <li>Tema 5 (annex): Access avan\u00e7at</li> <li>Objectius</li> <li>Part I: Pr\u00e0ctica inicial </li> <li>1.1 Taules</li> <li>1.2 Consultes</li> <li>1.3 Formularis i Informes</li> <li>Part II: Macros </li> <li>2.1 Creaci\u00f3 d'una Macro</li> <li>2.2 Accions m\u00faltiples</li> <li>2.3 Submacros</li> <li>2.4 Condicions</li> <li>2.5 Resum d'accions</li> <li>2.6 Resum d'esdeveniments</li> <li>Part III: M\u00f2duls (Visual Basic) </li> <li>3.1 Creaci\u00f3 d'un M\u00f2dul</li> <li>3.2 Tipus de dades, Constants i Variables</li> <li>3.3 Tipus especials</li> <li>3.4 Operadors</li> <li>3.5 Funcions i Procediments</li> <li>3.6 Sent\u00e8ncies</li> <li>3.7 Funcions est\u00e0ndard</li> <li>3.8 Objectes especials: propietats i m\u00e8todes</li> <li>Part IV: Configurar l'aspecte </li> <li>4.1 Configurar la Barra d'Acc\u00e9s r\u00e0pid <ul> <li>Exercici 4.1</li> </ul> </li> <li>4.2 La cinta d'opcions <ul> <li>4.2.1 Modificaci\u00f3 per a tot Access </li> <li>Exercici 4.2</li> <li>4.2.2 Modificaci\u00f3 per a la Base de Dades actual </li> <li>Exercici 4.3 (voluntari per\u00f2 puntuable)</li> </ul> </li> <li>4.3 El panell de navegaci\u00f3</li> <li>4.4 Opcions d'aplicaci\u00f3 <ul> <li>Exercici 4.4</li> </ul> </li> <li>4.5 El panell de control <ul> <li>Exercici 4.5</li> </ul> </li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T05_Annex_Access/exercici_44/#exercici-44","title":"Exercici 4.4","text":""},{"location":"BD-T05_Annex_Access/exercici_44/#exercici-44_1","title":"Exercici 4.4","text":"<p>Aquest exercici consta de 2 parts, corresponents als punts 4.3 i 4.4.</p> <ul> <li>Modificar el panell de navegaci\u00f3 per a que nom\u00e9s es vegen els formularis i informes. Ocultar expressament la vista de les taules, tal i com es fa en el v\u00eddeo del punt 3. Captureu una imatge on es veja el panell de navegaci\u00f3 i poseu-li el nom Exercici4_4a.png (o .jpg).</li> <li>Modifica les opcions de l'aplicaci\u00f3 per a que s'\u00f2briga autom\u00e0ticament el formulari Men\u00fa principal, i per a que no es permeta l'acc\u00e9s a men\u00fas no restringits (\u00e9s a dir, que nom\u00e9s aparega la nostra o nostra cinta d'opcions, i en tot cas la de Inicio).</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial SenseObraDerivada 2.5 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T05_Annex_Access/exercici_45/","title":"Exercici 45","text":"<p>Bases de Dades</p> <ul> <li>Tema 5 (annex): Access avan\u00e7at</li> <li>Objectius</li> <li>Part I: Pr\u00e0ctica inicial </li> <li>1.1 Taules</li> <li>1.2 Consultes</li> <li>1.3 Formularis i Informes</li> <li>Part II: Macros </li> <li>2.1 Creaci\u00f3 d'una Macro</li> <li>2.2 Accions m\u00faltiples</li> <li>2.3 Submacros</li> <li>2.4 Condicions</li> <li>2.5 Resum d'accions</li> <li>2.6 Resum d'esdeveniments</li> <li>Part III: M\u00f2duls (Visual Basic) </li> <li>3.1 Creaci\u00f3 d'un M\u00f2dul</li> <li>3.2 Tipus de dades, Constants i Variables</li> <li>3.3 Tipus especials</li> <li>3.4 Operadors</li> <li>3.5 Funcions i Procediments</li> <li>3.6 Sent\u00e8ncies</li> <li>3.7 Funcions est\u00e0ndard</li> <li>3.8 Objectes especials: propietats i m\u00e8todes</li> <li>Part IV: Configurar l'aspecte </li> <li>4.1 Configurar la Barra d'Acc\u00e9s r\u00e0pid <ul> <li>Exercici 4.1</li> </ul> </li> <li>4.2 La cinta d'opcions <ul> <li>4.2.1 Modificaci\u00f3 per a tot Access </li> <li>Exercici 4.2</li> <li>4.2.2 Modificaci\u00f3 per a la Base de Dades actual </li> <li>Exercici 4.3 (voluntari per\u00f2 puntuable)</li> </ul> </li> <li>4.3 El panell de navegaci\u00f3</li> <li>4.4 Opcions d'aplicaci\u00f3 <ul> <li>Exercici 4.4</li> </ul> </li> <li>4.5 El panell de control <ul> <li>Exercici 4.5</li> </ul> </li> </ul> <p>\u00ab Anterior</p>"},{"location":"BD-T05_Annex_Access/exercici_45/#exercici-45","title":"Exercici 4.5","text":""},{"location":"BD-T05_Annex_Access/exercici_45/#exercici-45_1","title":"Exercici 4.5","text":"<p>Crea un panell de control com el realitzat en el punt 4.5, on es puga accedir als formularis i informes, organitzat en dos panells, el principal i el d'informes.</p> <p>\u00ab Anterior</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial SenseObraDerivada 2.5 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T05_Annex_Access/objectius/","title":"Objectius","text":"<p>Bases de Dades</p> <ul> <li>Tema 5 (annex): Access avan\u00e7at</li> <li>Objectius</li> <li>Part I: Pr\u00e0ctica inicial </li> <li>1.1 Taules</li> <li>1.2 Consultes</li> <li>1.3 Formularis i Informes</li> <li>Part II: Macros </li> <li>2.1 Creaci\u00f3 d'una Macro</li> <li>2.2 Accions m\u00faltiples</li> <li>2.3 Submacros</li> <li>2.4 Condicions</li> <li>2.5 Resum d'accions</li> <li>2.6 Resum d'esdeveniments</li> <li>Part III: M\u00f2duls (Visual Basic) </li> <li>3.1 Creaci\u00f3 d'un M\u00f2dul</li> <li>3.2 Tipus de dades, Constants i Variables</li> <li>3.3 Tipus especials</li> <li>3.4 Operadors</li> <li>3.5 Funcions i Procediments</li> <li>3.6 Sent\u00e8ncies</li> <li>3.7 Funcions est\u00e0ndard</li> <li>3.8 Objectes especials: propietats i m\u00e8todes</li> <li>Part IV: Configurar l'aspecte </li> <li>4.1 Configurar la Barra d'Acc\u00e9s r\u00e0pid <ul> <li>Exercici 4.1</li> </ul> </li> <li>4.2 La cinta d'opcions <ul> <li>4.2.1 Modificaci\u00f3 per a tot Access </li> <li>Exercici 4.2</li> <li>4.2.2 Modificaci\u00f3 per a la Base de Dades actual </li> <li>Exercici 4.3 (voluntari per\u00f2 puntuable)</li> </ul> </li> <li>4.3 El panell de navegaci\u00f3</li> <li>4.4 Opcions d'aplicaci\u00f3 <ul> <li>Exercici 4.4</li> </ul> </li> <li>4.5 El panell de control <ul> <li>Exercici 4.5</li> </ul> </li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T05_Annex_Access/objectius/#objectius","title":"Objectius","text":""},{"location":"BD-T05_Annex_Access/objectius/#objectius_1","title":"Objectius","text":"<p>En la primera part d'aquest tema s'ha seguit un tutorial per a con\u00e9ixer els aspectes m\u00e9s b\u00e0sics d'Access. Els objectius d'aquesta segona part s\u00f3n: </p> <ul> <li> <p>Assegurar-nos que els conceptes b\u00e0sics referents a Taules, Consultes, Formularis i Informes s'han assolit convenientment.</p> </li> <li> <p>Desenvolupar Macros, com a eina senzilla d'encadenar accions que responguen a un determinat esdeveniment.</p> </li> <li> <p>Desenvolupar procediments i funcions per a fer tractaments potents en resposta a determinats esdeveniments.</p> </li> <li> <p>Configurar Access per a que tinga un aspecte intuitiu i atractiu. </p> </li> </ul> <p>L'objectiu final \u00e9s aconseguir aplicacions senceres basades en una Base de Dades </p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial SenseObraDerivada 2.5 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T05_Annex_Access/part_i_prctica_inicial/","title":"Part i prctica inicial","text":"<p>Bases de Dades</p> <ul> <li>Tema 5 (annex): Access avan\u00e7at</li> <li>Objectius</li> <li>Part I: Pr\u00e0ctica inicial </li> <li>1.1 Taules</li> <li>1.2 Consultes</li> <li>1.3 Formularis i Informes</li> <li>Part II: Macros </li> <li>2.1 Creaci\u00f3 d'una Macro</li> <li>2.2 Accions m\u00faltiples</li> <li>2.3 Submacros</li> <li>2.4 Condicions</li> <li>2.5 Resum d'accions</li> <li>2.6 Resum d'esdeveniments</li> <li>Part III: M\u00f2duls (Visual Basic) </li> <li>3.1 Creaci\u00f3 d'un M\u00f2dul</li> <li>3.2 Tipus de dades, Constants i Variables</li> <li>3.3 Tipus especials</li> <li>3.4 Operadors</li> <li>3.5 Funcions i Procediments</li> <li>3.6 Sent\u00e8ncies</li> <li>3.7 Funcions est\u00e0ndard</li> <li>3.8 Objectes especials: propietats i m\u00e8todes</li> <li>Part IV: Configurar l'aspecte </li> <li>4.1 Configurar la Barra d'Acc\u00e9s r\u00e0pid <ul> <li>Exercici 4.1</li> </ul> </li> <li>4.2 La cinta d'opcions <ul> <li>4.2.1 Modificaci\u00f3 per a tot Access </li> <li>Exercici 4.2</li> <li>4.2.2 Modificaci\u00f3 per a la Base de Dades actual </li> <li>Exercici 4.3 (voluntari per\u00f2 puntuable)</li> </ul> </li> <li>4.3 El panell de navegaci\u00f3</li> <li>4.4 Opcions d'aplicaci\u00f3 <ul> <li>Exercici 4.4</li> </ul> </li> <li>4.5 El panell de control <ul> <li>Exercici 4.5</li> </ul> </li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T05_Annex_Access/part_i_prctica_inicial/#part-i-practica-inicial","title":"Part I: Pr\u00e0ctica inicial","text":"<p>Aquesta pr\u00e0ctica t\u00e9 la voluntat de servir de rep\u00e0s del tutorial d'Access. Seran una s\u00e8rie de exercicis sobre una mateixa Base de Dades, la corresponent a l'exemple amb qu\u00e8 s'il\u00b7lustra el Tema 2: Model Entitat-Relaci\u00f3. Repetim ac\u00ed la breu an\u00e0lisi de requisits de l' Empresa: </p> <ol> <li> <p>La companyia est\u00e0 organitzada en departaments. Cadascun t\u00e9 nom \u00fanic, n\u00famero \u00fanic i un empleat que el dirigeix. Ens interessa la data en la qual va comen\u00e7ar a dirigir-lo. </p> </li> <li> <p>Cada departament controla una s\u00e8rie de projectes. Cadascun d'aquestos projectes t\u00e9 nom i n\u00famero \u00fanics, i estar\u00e0 coordinat per un \u00fanic departament. </p> </li> <li> <p>De cada empleat ens interessa el nom (format per dos cognoms i nom de pila), DNI, adre\u00e7a, tel\u00e8fon, sou i data de naixement. Tot empleat est\u00e0 assignat a un departament, i moltes vegades tindr\u00e0 un supervisor. Pot treballar en m\u00e9s d'un projecte (no necess\u00e0riament controlats pel mateix departament) i treballar\u00e0 un determinat n\u00famero d'hores a la setmana en cada projecte. En un projecte sempre treballar\u00e0, com a m\u00ednim, un empleat. </p> </li> <li> <p>Volem saber tamb\u00e9 els familiars de cada empleat, per administrar els termes dels segurs. Volem saber el nom, data de naixement i parentesc amb l'empleat. </p> </li> </ol> <p>L'estructura de les taules \u00e9s la seg\u00fcent: </p> <p></p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial SenseObraDerivada 2.5 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T05_Annex_Access/part_ii_macros/","title":"Part ii macros","text":"<p>Bases de Dades</p> <ul> <li>Tema 5 (annex): Access avan\u00e7at</li> <li>Objectius</li> <li>Part I: Pr\u00e0ctica inicial </li> <li>1.1 Taules</li> <li>1.2 Consultes</li> <li>1.3 Formularis i Informes</li> <li>Part II: Macros </li> <li>2.1 Creaci\u00f3 d'una Macro</li> <li>2.2 Accions m\u00faltiples</li> <li>2.3 Submacros</li> <li>2.4 Condicions</li> <li>2.5 Resum d'accions</li> <li>2.6 Resum d'esdeveniments</li> <li>Part III: M\u00f2duls (Visual Basic) </li> <li>3.1 Creaci\u00f3 d'un M\u00f2dul</li> <li>3.2 Tipus de dades, Constants i Variables</li> <li>3.3 Tipus especials</li> <li>3.4 Operadors</li> <li>3.5 Funcions i Procediments</li> <li>3.6 Sent\u00e8ncies</li> <li>3.7 Funcions est\u00e0ndard</li> <li>3.8 Objectes especials: propietats i m\u00e8todes</li> <li>Part IV: Configurar l'aspecte </li> <li>4.1 Configurar la Barra d'Acc\u00e9s r\u00e0pid <ul> <li>Exercici 4.1</li> </ul> </li> <li>4.2 La cinta d'opcions <ul> <li>4.2.1 Modificaci\u00f3 per a tot Access </li> <li>Exercici 4.2</li> <li>4.2.2 Modificaci\u00f3 per a la Base de Dades actual </li> <li>Exercici 4.3 (voluntari per\u00f2 puntuable)</li> </ul> </li> <li>4.3 El panell de navegaci\u00f3</li> <li>4.4 Opcions d'aplicaci\u00f3 <ul> <li>Exercici 4.4</li> </ul> </li> <li>4.5 El panell de control <ul> <li>Exercici 4.5</li> </ul> </li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T05_Annex_Access/part_ii_macros/#part-ii-macros","title":"Part II: Macros","text":"<p>Una macro \u00e9s una seq\u00fc\u00e8ncia ordenada d'accions que s'executa b\u00e9 expressament, b\u00e9 en resposta a un esdeveniment (\"event\") com la pulsaci\u00f3 amb el ratol\u00ed, o una tecla, o quan es carrega un formulari, etc.</p> <ul> <li>Les accions que es poden executar s\u00f3n molt variades: obrir un altre formulari o informe, localitzar un registre, treure un missatge, afegir o eliminar registres, etc. En la pen\u00faltima pregunta d'aquesta part es veu un resum de les accions que es poden incorporar en una macro.</li> <li>I el moment en el qual es poden executar, els esdeveniments, tamb\u00e9 \u00e9s molt variat. En l'\u00faltima pregunta es fa un resum dels esdeveniments, en resposta dels quals es pot executar una macro.</li> </ul> <p>Tant les macros com els m\u00f2duls de programa en Visual Basic serveixen per al mateix objectiu. La difer\u00e8ncia entre utilitzar una cosa o l'altra \u00e9s la senzillesa i la pot\u00e8ncia. Les macros seran m\u00e9s senzilles i r\u00e0pides de realitzar (sobretot per a usuaris no experts). Els m\u00f2duls de VBA, que \u00e9s el Visual Basic incorporat en Access, s\u00f3n m\u00e9s potents ja que per mig de programa podrem fer qualsevol cosa, per\u00f2 m\u00e9s inc\u00f2modes de fer per als no familiaritzats en Visual Basic.</p> <p>A partir del Access 2007 les macros poden estar situades en dos llocs.</p> <ul> <li>Com a objectes independents</li> <li>Associades a un control o un Formulari o Informe, aleshores es diu que estan incrustades</li> </ul> <p>En versions anteriors nom\u00e9s estaven les Macros independents.</p> <p>Encara que en Access 2013 les macros funcionen b\u00e0sicament igual que en Access 2007 (que \u00e9s quan van canviar molt respecte versions anteriors, incorporant les macros incrustades), l'aspecte s\u00ed que canvia canvia un poc. Per aix\u00f2 conservar\u00e9 algunes imatges d'Access 2007, comparant-les amb les d'Access 2013.</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial SenseObraDerivada 2.5 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T05_Annex_Access/part_iii_mduls_visual_basic/","title":"Part iii mduls visual basic","text":"<p>Bases de Dades</p> <ul> <li>Tema 5 (annex): Access avan\u00e7at</li> <li>Objectius</li> <li>Part I: Pr\u00e0ctica inicial </li> <li>1.1 Taules</li> <li>1.2 Consultes</li> <li>1.3 Formularis i Informes</li> <li>Part II: Macros </li> <li>2.1 Creaci\u00f3 d'una Macro</li> <li>2.2 Accions m\u00faltiples</li> <li>2.3 Submacros</li> <li>2.4 Condicions</li> <li>2.5 Resum d'accions</li> <li>2.6 Resum d'esdeveniments</li> <li>Part III: M\u00f2duls (Visual Basic) </li> <li>3.1 Creaci\u00f3 d'un M\u00f2dul</li> <li>3.2 Tipus de dades, Constants i Variables</li> <li>3.3 Tipus especials</li> <li>3.4 Operadors</li> <li>3.5 Funcions i Procediments</li> <li>3.6 Sent\u00e8ncies</li> <li>3.7 Funcions est\u00e0ndard</li> <li>3.8 Objectes especials: propietats i m\u00e8todes</li> <li>Part IV: Configurar l'aspecte </li> <li>4.1 Configurar la Barra d'Acc\u00e9s r\u00e0pid <ul> <li>Exercici 4.1</li> </ul> </li> <li>4.2 La cinta d'opcions <ul> <li>4.2.1 Modificaci\u00f3 per a tot Access </li> <li>Exercici 4.2</li> <li>4.2.2 Modificaci\u00f3 per a la Base de Dades actual </li> <li>Exercici 4.3 (voluntari per\u00f2 puntuable)</li> </ul> </li> <li>4.3 El panell de navegaci\u00f3</li> <li>4.4 Opcions d'aplicaci\u00f3 <ul> <li>Exercici 4.4</li> </ul> </li> <li>4.5 El panell de control <ul> <li>Exercici 4.5</li> </ul> </li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T05_Annex_Access/part_iii_mduls_visual_basic/#part-iii-moduls-visual-basic","title":"Part III: M\u00f2duls (Visual Basic)","text":"<p>Ja hem vist que les macros s\u00f3n eines potents per completar la B.D. Per\u00f2 a pesar de la seua pot\u00e8ncia hi ha moments en els quals no \u00e9s suficient. El que farem ser\u00e0 crear procediments i funcions en llenguatge Visual Basic. En realitat el llenguatge disponible en Access \u00e9s VBA (Visual Basic for Applications) que \u00e9s un subconjunt quasi complet de Visual Basic i que \u00e9s el que est\u00e0 incorportat en moltes aplicacions Microsoft, entre ells totes les del Office. </p> <p>Els procediments i funcions els col\u00b7locarem en M\u00f2duls. Per tant els m\u00f2duls no s\u00f3n m\u00e9s que col\u00b7leccions de procediments i funcions. </p> <p>Els m\u00f2duls poden ser de tres tipus, a l'igual que ens passava amb les macros: </p> <ul> <li> <p>Els m\u00f2duls est\u00e0ndard, on haur\u00edem de col\u00b7locar els procediments i funcions que s\u00f3n utilitzats en m\u00e9s d'un formulari o informe. Per exemple ens podr\u00edem definir una funci\u00f3 que calcule l'edat d'una persona, a partir de la data de naixement, que es passaria com a par\u00e0metre. Aquesta funci\u00f3 es podria utilitzar en molts formularis. </p> </li> <li> <p>Els m\u00f2duls de classe, que serviran per a definir nous objectes (de Programaci\u00f3 Orientada a Objectes). No els utilitzarem en aquest curs.</p> </li> <li> <p>Els m\u00f2duls de formulari i informe (o m\u00f2duls incrustats). Cada formulari i cada informe t\u00e9 un m\u00f2dul associat, on se solen definir els procediments que afecten als events del propi formulari o informe. Seran en aquest cas (normalment) procediments privats que no es poden executar fora del formulari o informe. Hi han avantatges per a definir procediments en el m\u00f2dul associat al formulari: primer, la comoditat a l'hora de definir els procediments que afecten a un event del formulari (o a un control del formulari); segon, \u00e9s m\u00e9s compacte, ja que va tot junt, formulari i codi, i fins que no es carregue el formulari no estaran disponibles els procediments (sense ocupar per tant lloc en la mem\u00f2ria). </p> </li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial SenseObraDerivada 2.5 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T05_Annex_Access/part_iv_configurar_laspecte/","title":"Part iv configurar laspecte","text":"<p>Bases de Dades</p> <ul> <li>Tema 5 (annex): Access avan\u00e7at</li> <li>Objectius</li> <li>Part I: Pr\u00e0ctica inicial </li> <li>1.1 Taules</li> <li>1.2 Consultes</li> <li>1.3 Formularis i Informes</li> <li>Part II: Macros </li> <li>2.1 Creaci\u00f3 d'una Macro</li> <li>2.2 Accions m\u00faltiples</li> <li>2.3 Submacros</li> <li>2.4 Condicions</li> <li>2.5 Resum d'accions</li> <li>2.6 Resum d'esdeveniments</li> <li>Part III: M\u00f2duls (Visual Basic) </li> <li>3.1 Creaci\u00f3 d'un M\u00f2dul</li> <li>3.2 Tipus de dades, Constants i Variables</li> <li>3.3 Tipus especials</li> <li>3.4 Operadors</li> <li>3.5 Funcions i Procediments</li> <li>3.6 Sent\u00e8ncies</li> <li>3.7 Funcions est\u00e0ndard</li> <li>3.8 Objectes especials: propietats i m\u00e8todes</li> <li>Part IV: Configurar l'aspecte </li> <li>4.1 Configurar la Barra d'Acc\u00e9s r\u00e0pid <ul> <li>Exercici 4.1</li> </ul> </li> <li>4.2 La cinta d'opcions <ul> <li>4.2.1 Modificaci\u00f3 per a tot Access </li> <li>Exercici 4.2</li> <li>4.2.2 Modificaci\u00f3 per a la Base de Dades actual </li> <li>Exercici 4.3 (voluntari per\u00f2 puntuable)</li> </ul> </li> <li>4.3 El panell de navegaci\u00f3</li> <li>4.4 Opcions d'aplicaci\u00f3 <ul> <li>Exercici 4.4</li> </ul> </li> <li>4.5 El panell de control <ul> <li>Exercici 4.5</li> </ul> </li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T05_Annex_Access/part_iv_configurar_laspecte/#part-iv-configurar-laspecte","title":"Part IV: Configurar l'aspecte","text":"<p>Per acabar de perfilar una aplicaci\u00f3, en aquest cas basada en Access, haur\u00edem de poder aconseguir crear men\u00fas i barres d'eines (botons situats en la part superior per fer les feines m\u00e9s usuals de forma molt r\u00e0pida). Per \u00faltim tamb\u00e9 haur\u00edem d'aconseguir automatitzar millor l'inici de l'aplicaci\u00f3 i \"amagar\" els objectes de la Base de Dades, de manera que l'usuari final sempre interactue per mig de formularis (i no puga, per exemple, modificar l'estructura d'una taula o esborrar una consulta). Tot aix\u00f2 \u00e9s el que veurem en aquesta part. Aix\u00ed arribarem a construir una vertadera aplicaci\u00f3 basada en una Base de Dades Access.</p> <p>Pel que fa a men\u00fas i barres d'eines, en la versi\u00f3 Access 2007 es va canviar molt respecte a les versions anteriors. Ara ja no parl\u00e0vem per separat de men\u00fas i barres d'eines. Access 2007 els va substituir per la cinta d'opcions (ribbon) que \u00e9s molt m\u00e9s atractiva visualment, per\u00f2 que canvia radicalment en la manera de contruir-se, i era molt pesada de construir.</p> <p>Afortunadament en la versi\u00f3 Access 2013 \u00e9s molt m\u00e9s c\u00f2mode de construir la cinta d'opcions, i no s'ha de tocar XML obligat\u00f2riament</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial SenseObraDerivada 2.5 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T05_Annex_Base/","title":"Index","text":"<p>Bases de Dades</p> <ul> <li>Tema 5 (annex): Base avan\u00e7at</li> <li>Objectius</li> <li>Part I: Pr\u00e0ctica inicial </li> <li>1.1 Taules</li> <li>1.2 Consultes</li> <li>1.3 Formularis i Informes</li> <li>Part II: Macros (Voluntari) </li> <li>2.1 Creaci\u00f3 i execuci\u00f3 directa d'una Macro</li> <li>2.2 Quan executar una macro: esdeveniments</li> <li>2.3 Obrir autom\u00e0ticament un formulari</li> <li>2.4 Exemple avan\u00e7at: compliment de restriccions externes</li> </ul> <p>Seg\u00fcent \u00bb</p>"},{"location":"BD-T05_Annex_Base/#tema-5-annex-base-avancat","title":"Tema 5 (annex): Base avan\u00e7at","text":"<p>Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial SenseObraDerivada 2.5 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T05_Annex_Base/11_taules/","title":"11 taules","text":"<p>Bases de Dades</p> <ul> <li>Tema 5 (annex): Base avan\u00e7at</li> <li>Objectius</li> <li>Part I: Pr\u00e0ctica inicial </li> <li>1.1 Taules</li> <li>1.2 Consultes</li> <li>1.3 Formularis i Informes</li> <li>Part II: Macros (Voluntari) </li> <li>2.1 Creaci\u00f3 i execuci\u00f3 directa d'una Macro</li> <li>2.2 Quan executar una macro: esdeveniments</li> <li>2.3 Obrir autom\u00e0ticament un formulari</li> <li>2.4 Exemple avan\u00e7at: compliment de restriccions externes</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T05_Annex_Base/11_taules/#11-taules","title":"1.1 Taules","text":"<p>Realitzar les seg\u00fcents q\u00fcestions:</p> <p>1.1) Crear una BD en blanc amb el nom Empresa.odb</p> <p>1.2) Crear les taules DEPARTAMENT i EMPLEAT amb els seg\u00fcents tipus de dades</p> <p>DEPARTAMENT (num_d: integer, nom_d: varchar, director: varchar(10), data: date)</p> <p>(no nul, \u00fanic)</p> <p>EMPLEAT (dni: varchar(10), nom: varchar(30), adreca: varchar(30), telefon: varchar(9), sou: decimal(6,2), data_n: date, departament: integer, supervisor: varchar(10))</p> <p>(no nul)</p> <p>No us oblideu de les claus principals, respectivament num_d i dni , i que els camps director (DEPARTAMENT) i departament (EMPLEAT) s\u00f3n no nuls. A m\u00e9s director (DEPARTAMENT) ha de ser \u00fanic.</p> <p>1.3) Copiar les dades des de Empresa.ods (un full de c\u00e0lcul). Les dades estan en les p\u00e0gines DEPARTAMENT i EMPLEAT respectivament, i heu d'incloure els noms dels camps que estan en la primera l\u00ednia. Quan enganxeu en la Base de Dades, recordeu d'afegir a les taules ja existents.</p> <p>1.4) Copiar les dades de FAMILIAR des del mateix full de c\u00e0lcul (p\u00e0gina FAMILIAR). Tamb\u00e9 heu d'incloure els noms dels camps que estan en la primera l\u00ednia.Quan enganxeu, feu-lo en un taula nova (definici\u00f3 i dades), a la qual li heu de posar el nom FAMILIAR. Durant el proc\u00e9s preguntar\u00e0 quins camps volem incorporar (tots) i els tipus de dades de cada camp. Aprofiteu eixe moment per posar que el nom del camp \u00e9s dni_emp (no Dni) i que el camp data_n \u00e9s de tipus date. En aquest moment NO heu de crear la clau principal</p> <p>1.5) Crear la clau principal de FAMILIAR, formada per dni_emp + nom</p> <p>1.6) Crea la taula PROJECTE amb les seg\u00fcents caracter\u00edstiques:</p> <p>PROJECTE (num_p: integer, nom_p: varchar, departament: integer)</p> <p>(no nul)</p> <p>No us oblideu de que num_p \u00e9s la clau principal, i que el camp\u00a0Departament \u00e9s no nul.</p> <p>1.7) Copiar les dades de PROJECTE des del mateix full de c\u00e0lcul (p\u00e0gina Projecte). Observeu que ara no tenim el nom dels camps, per tant hem d'aconseguir afegir les dades a la taula PROJECTE, per\u00f2 desmarcar la casella\u00a0 Usar la primera l\u00ednia com a noms de les columnes</p> <p>1.8) Crea la taula TREBALLA amb la seg\u00fcent estructura</p> <p>TREBALLA (dni: varchar(10), num_p: integer, hores: integer)</p> <p>No us oblideu de la clau principal formada per dni + num_p</p> <p>1.9) Crear totes les integritats referencials. Recordeu que la integritat referencial obliga que la clau externa agafe un dels valors ja introdu\u00efts de la clau principal on apunta (aix\u00ed per exemple, la fletxa que apunta des del camp Departament de la taula EMPLEAT fins el camp Num_d de la taula DEPARTAMENT obliga a posar a cada empleat un departament v\u00e0lid, \u00e9s a dir, dels existents en l'actualitat). A m\u00e9s les de FAMILIAR i TREBALLA han de modificar i esborrar en cascada.</p> <p>Segurament la m\u00e9s \"complicada\" de fer \u00e9s la reflexiva que marca els supervisors. Per a poder representar-la, en Base heu d'arrastrar des del camp que ser\u00e0 clau externa fins la clau principal de la mateixa taula.</p> <p>Ac\u00ed teniu una imatge on es veuen totes les integritats referencials:</p> <p></p> <p>1.10) Dissenyar un formulari anomenat Treballa per a introduir les dades a aquesta taula. Els atributs Dni i Num_p s'introduiran per mig de quadres de llista\u00a0(List Box). En el primer es visualitzaran per m\u00e9s comoditat els\u00a0noms dels empleat, encara que en realitat servir\u00e0 per a introduir el\u00a0dni. En el segon visualitzarem els\u00a0noms dels projectes, encara que en realitat s'introduir\u00e0 el\u00a0num_p.\u00a0L'atribut Hores s'introduir\u00e0 per mig d'un quadre de text.</p> <p>El seg\u00fcent v\u00eddeo explica com crear aquest formulari. La dificultat consisteix en definir b\u00e9 els quadres de llista. El quadre combinat (Combo Box) no resulta ser tan \u00fatil en LibreOffice Base, ja que no \u00e9s tan flexible i no ens permet visualitzar un camp (per exemple el nom de l'empleat)\u00a0per\u00f2 utilitzar en realitat un altre (el dni de l'empleat).</p> <p>Introdu\u00efu a continuaci\u00f3 les seg\u00fcents dades. Observeu que entre par\u00e8ntesi est\u00e0 el Dni de l'empleat i el n\u00famero de projecte, per\u00f2 \u00fanicament a nivell informatiu. No ha d'apar\u00e9ixer en el quadre combinat.</p> \"dni\" \"Num_p\" hores Llopis Bernat, Jaume (18876543) Auditoria 98 (2) 10 Folch Mestre, Pilar (18932165) Auditoria 98 (2) 5 Peris Andreu, Joan (18933333) Programa comptabilitat (3) 10 Sebasti\u00e0 Broch, Ferran (18934567) Programa comptabilitat (3) 20 Garrido Vidal, Rosa (18900111) Control vendes (4) 5 Nebot Aliaga, Carme (18922222) Control vendes (4) 25 Folch Mestre, Pilar (18932165) Control vendes (4) 5 Garcia Tom\u00e0s, Al\u00edcia (18944444) Control vendes (4) 15 Garrido Vidal, Rosa (18900111) Recopilaci\u00f3 dades (5) 15 Folch Mestre, Pilar (18932165) An\u00e0lisi estad\u00edstica (6) 5 Sebasti\u00e0 Broch, Ferran (18934567) An\u00e0lisi estad\u00edstica (6) 10 Llopis Bernat, Jaume (18876543) Estudi rendiment (7) 5 Folch Mestre, Pilar (18932165) Estudi rendiment (7) 15 Garcia Tom\u00e0s, Al\u00edcia (18944444) Estudi rendiment (7) 5 <p>Per\u00f2 \u00bfcom estaran introdu\u00efdes de veritat les dades? \u00bfEstar\u00e0 el nom o el Dni? Les dades \"reals\" les veurem sempre en la taula (en aquest cas TREBALLA)</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial SenseObraDerivada 2.5 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T05_Annex_Base/12_consultes/","title":"12 consultes","text":"<p>Bases de Dades</p> <ul> <li>Tema 5 (annex): Base avan\u00e7at</li> <li>Objectius</li> <li>Part I: Pr\u00e0ctica inicial </li> <li>1.1 Taules</li> <li>1.2 Consultes</li> <li>1.3 Formularis i Informes</li> <li>Part II: Macros (Voluntari) </li> <li>2.1 Creaci\u00f3 i execuci\u00f3 directa d'una Macro</li> <li>2.2 Quan executar una macro: esdeveniments</li> <li>2.3 Obrir autom\u00e0ticament un formulari</li> <li>2.4 Exemple avan\u00e7at: compliment de restriccions externes</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T05_Annex_Base/12_consultes/#12-consultes","title":"1.2 Consultes","text":"<p>Continueu amb les seg\u00fcents q\u00fcestions:</p> <p>2.1) Construir una consulta anomenada 2.1: Empleats - Sou en Pessetes on tindrem el nom de l'empleat, Dni, sou en euros i sou en pessetes. (1euro = 166,386pts). Aquesta consulta ha d'anar ordenada de major sou a menor.</p> <p>2.2) Fer una consulta, 2.2: Empleats - comencen per G, on aparega el nom i dni d'aquells empleats que comencen per G.</p> <p>2.3) Construir una consulta, 2.3: Empleats - Departaments, amb el nom dels empleats i els noms dels departaments als quals pertanyen. Ordenat per nom d'empleat.</p> <p></p> <p>Atenci\u00f3</p> <p>\u00c9s m\u00e9s complicada del que sembla en un principi, ja que podeu tenir un efecte no desitjat. Observeu que hi ha d'haver 7 files en total.</p> <p>2.4) Construir una consulta anomenada 2.4: Empleats - N\u00famero de Projectes on tindrem el nom de l'empleat, Dni i n\u00famero de projectes en els quals treballa, ordenat pel nom de l'empleat** </p> <p></p> <p>2.5) Construir una consulta pareguda a l'anterior anomenada 2.5: Projectes - Total hores on tindrem el nom del projecte, el n\u00famero de projecte i la suma de les hores treballades en ell, ordenat pel nom del projecte** </p> <p></p> <p>2.6) Construir una consulta anomenada 2.6: Familiars dels empleats amb sous mitjans d'un departament, on tindrem n\u00famero de departament, Dni, nom de l'empleat, nom del familiar, parentesc i sou de l'empleat, ordenat per nom empleat, dels empleats que tenen un sou entre 2.000 i 2.500 \u20ac. (ambd\u00f3s inclosos) d'un departament introdu\u00eft per teclat (ser\u00e0 un par\u00e0metre). Per exemple, si quan pregunte el departament s'introdueix el 3, el resultat seria:</p> <p></p> <p>Nota</p> <p>Per a posar un par\u00e0metre en una consulta per a que ens demane el valor per teclat, hem de posar dos punts davant d'un nom que no siga com cap camp de les taules que entren en la consulta i que no tinga espais en blanc. Per exemple :Numero_Departament. D'aquesta manera, ens demanar\u00e0 el valor per teclat.</p> <p>2.7) Construir una consulta de supervisors, on tindrem els dni i nom de tots els empleats, i el nombre de empleats que supervisa cadascun. Guardeu-la amb el nom 2.7: Empleats - Supervisors.</p> <p></p> <p>Pista</p> <p>Far\u00e0 falta posar 2 vegades la taula Empleat, una per a traure el nom i dni de cada empleat, i una altra per a poder comptar els que tenen a aquest de supervisor. I mireu que han d'eixir tots els empleats (fins i tot els que no supervisen a ning\u00fa, que s\u00f3n als que ix 0)\u00a0</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial SenseObraDerivada 2.5 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T05_Annex_Base/13_formularis_i_informes/","title":"13 formularis i informes","text":"<p>Bases de Dades</p> <ul> <li>Tema 5 (annex): Base avan\u00e7at</li> <li>Objectius</li> <li>Part I: Pr\u00e0ctica inicial </li> <li>1.1 Taules</li> <li>1.2 Consultes</li> <li>1.3 Formularis i Informes</li> <li>Part II: Macros (Voluntari) </li> <li>2.1 Creaci\u00f3 i execuci\u00f3 directa d'una Macro</li> <li>2.2 Quan executar una macro: esdeveniments</li> <li>2.3 Obrir autom\u00e0ticament un formulari</li> <li>2.4 Exemple avan\u00e7at: compliment de restriccions externes</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T05_Annex_Base/13_formularis_i_informes/#13-formularis-i-informes","title":"1.3 Formularis i Informes","text":"<p>3.1) Crear un formulari, utilitzant l'assistent, per a la taula PROJECTE, posant tots els camps i totes les opcions per defecte. Us posar\u00e0 com a nom del formulari tamb\u00e9 PROJECTE. Com veureu, aquest formulari que \u00e9s amb format \"Com a full de dades\", \u00e9s molt paregut a la presentaci\u00f3 de les dades de la taula.</p> <p></p> <p>3.2) Crear un formulari, utilitzant l'assistent, per a la taula DEPARTAMENT, per\u00f2 en el moment de triar els camps, deixar per a l'\u00faltim lloc el camp\u00a0director . I a m\u00e9s en el punt 5 de l'assistent, \"5. Organitzeu els controls\", triar el primer format \"En columnes - Etiquetes a l'esquerra\". Us posar\u00e0 com a nom del formulari tamb\u00e9 DEPARTAMENT.</p> <p> </p> <p>3.3) Al formulari DEPARTAMENT li hem donat l'aspecte En columnes. Aquest aspecte agrupa cada control amb l'etiqueta, per si s'han de recol\u00b7locar, que vagen junts. Ara intentarem canviar el quadre de text corresponent al director per un Quadre de Llista, com els del formulari Treballa. El primer que hem de fer \u00e9s desagrupar-los. Despr\u00e9s amb el bot\u00f3 de la dreta podem convertir el Quadre de Text en Quadre de llista. Haurem de modificar les propietats del control per a que ens porte les dades d'una consulta SQL. Aquesta consulta ha d'agafar el nom i el dni (en aquest ordre) de la taula EMPLEAT, ordenant pel nom de forma ascendent. En la pestanya\u00a0General modifiqueu tamb\u00e9 la propietat Desplegable a S\u00ed. D'aquesta manera estem aconseguint un ComboBox. I poseu en el Recompte de l\u00ednies el valor 8, per a que es mostren tots els empleats. Aquest hauria de ser l'aspecte final del formulari:</p> <p></p> <p>3.4) Construir un formulari amb l'aspecte de la imatge. Per aconseguir-ho haureu de triar en la primera pantalla de l'assistent els camps de la taula EMPLEAT , i en la seg\u00fcent pantalla afegir un subformulari basat en la relaci\u00f3 FAMILIAR. En el punt 5 de l'assistent, \"5. Organitzeu els controls\", triarem la disposici\u00f3\u00a0\"En columnes - Etiquetes a l'esquerra\" per al formulari principal i\u00a0 \"Com a full de dades\" per al subformulari. Guardeu-lo com Empleat-Familiar:** </p> <p> </p> <p>3.5) Crear un informe que diga el nombre de familiars de cada empleat de cada departament. Haur\u00e0 de tenir el seg\u00fcent aspecte. Guardeu-lo amb el nom Informe: </p> <p></p> <p>Nota</p> <p>Haureu de considerar si es pot fer directament l'informe, i si no es pot quina soluci\u00f3 tenim (que segur que passar\u00e0 per crear una consulta pr\u00e8via on estiga tota la informaci\u00f3 que volem; i volem tots els empleats, fins i tot els que no tenen familiars)</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial SenseObraDerivada 2.5 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T05_Annex_Base/21_creaci_i_execuci_directa_duna_macro/","title":"21 creaci i execuci directa duna macro","text":"<p>Bases de Dades</p> <ul> <li>Tema 5 (annex): Base avan\u00e7at</li> <li>Objectius</li> <li>Part I: Pr\u00e0ctica inicial </li> <li>1.1 Taules</li> <li>1.2 Consultes</li> <li>1.3 Formularis i Informes</li> <li>Part II: Macros (Voluntari) </li> <li>2.1 Creaci\u00f3 i execuci\u00f3 directa d'una Macro</li> <li>2.2 Quan executar una macro: esdeveniments</li> <li>2.3 Obrir autom\u00e0ticament un formulari</li> <li>2.4 Exemple avan\u00e7at: compliment de restriccions externes</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T05_Annex_Base/21_creaci_i_execuci_directa_duna_macro/#21-creacio-i-execucio-directa-duna-macro","title":"2.1 Creaci\u00f3 i execuci\u00f3 directa d'una Macro","text":"<p>La manera inicial de crear una macro ser\u00e0 en el men\u00fa\u00a0 Eines -&gt; Macros -&gt; Organitza les macros -&gt; Basic</p> <p></p> <p>(despr\u00e9s de la primera vegada podrem anar un poc m\u00e9s directament amb Eines -&gt; Macros -&gt; Edita les macros )</p> <p>El que se'ns presentar\u00e0 per a organitzar les macros ser\u00e0 el seg\u00fcent:</p> <p></p> <p>Per\u00f2 el lloc on vol col\u00b7locar les macros seria un lloc personal (les meves macros). Millor col\u00b7locar les macros en la mateixa Base de Dades, que en el nostre exemple \u00e9s Empresa.odb. Aix\u00ed, si copiem la Base de Dades, les macros viatjaran amb ella. Per tant, ens situem en Empresa.odb i apretem al bot\u00f3 Crea:</p> <p></p> <p>En preguntar\u00e0 per un nom de m\u00f2dul, on van tots els procediments de les macros. El nom que ens proposa Module1 ens va b\u00e9.</p> <p>Se'ns obrir\u00e0 una finestra on podem observar que est\u00e0 esperant a que escriguem el codi dels procediments en qu\u00e8 consistiran les macros</p> <p></p> <p>Anem a crear una macro molt senzilleta, per a saludar, escrivint senzillament la sent\u00e8ncia print(\"Hola\") dins del procediment (Sub). Aprofitem per a canviar el nom del procediment a Saludar en compte de Main, i despr\u00e9s apretem el bot\u00f3 de play (o F5) per a executar-la. Aix\u00ed ens quedar\u00e0 la cosa:</p> <p></p> <p>Aquesta macro s'haur\u00e0 executat de forma directa sense problemes. Per\u00f2 per a poder executar les macros no de forma directa sin\u00f3 en resposta a un esdeveniment, haurem de baixar la seguretat i permetre l'execuci\u00f3 de macros.</p> <p>Es fa en el men\u00fa Eines -&gt; Opcions -&gt; Seguretat -&gt; Seguretat de les macros, i triar la seguretat m\u00e9s baixa, en la qual s\u00ed que permetrem l'execuci\u00f3</p> <p></p> <p>Ara anem a crear una Macro\u00a0que no ser\u00e0 Independent, sin\u00f3 associada a un objecte. Ho aprofitarem per veure una manera m\u00e9s r\u00e0pida per fer el proc\u00e9s de creaci\u00f3 d'una macro associada a un esdeveniment.</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial SenseObraDerivada 2.5 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T05_Annex_Base/22_quan_executar_una_macro_esdeveniments/","title":"22 quan executar una macro esdeveniments","text":"<p>Bases de Dades</p> <ul> <li>Tema 5 (annex): Base avan\u00e7at</li> <li>Objectius</li> <li>Part I: Pr\u00e0ctica inicial </li> <li>1.1 Taules</li> <li>1.2 Consultes</li> <li>1.3 Formularis i Informes</li> <li>Part II: Macros (Voluntari) </li> <li>2.1 Creaci\u00f3 i execuci\u00f3 directa d'una Macro</li> <li>2.2 Quan executar una macro: esdeveniments</li> <li>2.3 Obrir autom\u00e0ticament un formulari</li> <li>2.4 Exemple avan\u00e7at: compliment de restriccions externes</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T05_Annex_Base/22_quan_executar_una_macro_esdeveniments/#22-quan-executar-una-macro-esdeveniments","title":"2.2 Quan executar una macro: esdeveniments","text":"<p>L'anterior manera d'executar les macros \u00e9s la m\u00e9s senzilla, per\u00f2 no \u00e9s l'habitual, no \u00e9s gens pr\u00e0ctica.</p> <p>El m\u00e9s habitual \u00e9s executar la macro en produir-se un\u00a0esdeveniment (evento , event): quan apretem un bot\u00f3, en actualitzar-se algun camp d'un formulari, quan visualitzem un nou registre...</p> <p>La llista d'esdeveniments \u00e9s molt llarga, i en aquest annex que t\u00e9 una pretensi\u00f3 merament introduct\u00f2ria nom\u00e9s veurem uns pocs esdeveniments.</p> <p>Per a poder fer la primera prova, anem a crear un nou formulari que anomenarem\u00a0Men\u00fa principal per motius que veurem despr\u00e9s.</p> <p>En aquest formulari posarem un bot\u00f3 (Bot\u00f3 per pr\u00e9mer)\u00a0i fem doble-clic sobre ell per a anar a les propietats del bot\u00f3. Posarem\u00a0l'etiqueta\u00a0Saludar, i en la pestanya\u00a0Esdeveniments apretarem als 3 puntets que estan al costat de\u00a0Aprova l'acci\u00f3, per a triar l'\u00fanica macro que tenim de moment:\u00a0Saludar</p> <p>Per a poder comprovar-ho hem d'anar al mode d'execuci\u00f3 del formulari, abandonant el mode d'edici\u00f3.</p> <p>Per a fer m\u00e9s \u00fatil aquest formulari, intentarem posar un bot\u00f3 per a poder anar a cadascun dels formularis que hem creat per a les diferents taules Tamb\u00e9 posarem un bot\u00f3 per a eixir de LibreOffice Base.</p> <p>Pr\u00e8viament haurem de crear les macros per a poder anar a cadascun dels formularis i per a eixir. L'acci\u00f3 ser\u00e0\u00a0open\u00a0sobre el formulari, que primer hem de buscar. L'acci\u00f3 d'eixir ser\u00e0\u00a0Close(True) sobre el document que \u00e9s aquesta Base de Dades.</p> <p>Copieu-vos el seg\u00fcent codi dins del\u00a0Module1 de\u00a0Empresa.odb, on teniu ja la macro de saludar. Recordeu que per a anar al codi de VisualBasic heu de fer\u00a0 Eines -&gt; Macros -&gt; Organitza les macros -&gt; Basic. Hem posat tamb\u00e9 la macro\u00a0Saludar (nom\u00e9s ha d'estar una vegada, clar)</p> <p>Sub Saludar</p> <p>print(\"Hola\")</p> <p>End Sub</p> <p>Sub obrirDepartament</p> <p>ThisDatabaseDocument.FormDocuments.getbyname(\"DEPARTAMENT\").open</p> <p>End Sub</p> <p>Sub obrirEmpleatFamiliar</p> <p>ThisDatabaseDocument.FormDocuments.getbyname(\"EMPLEAT-FAMILIAR\").open</p> <p>End Sub</p> <p>Sub obrirProjecte</p> <p>ThisDatabaseDocument.FormDocuments.getbyname(\"PROJECTE\").open</p> <p>End Sub</p> <p>Sub obrirTreballa</p> <p>ThisDatabaseDocument.FormDocuments.getbyname(\"Treballa\").open</p> <p>End Sub</p> <p>Sub eixir</p> <p>ThisDatabaseDocument.Close(True)</p> <p>End Sub</p> <p>A continuaci\u00f3, heu de modificar el bot\u00f3 que ja teniu per a posar-li l'etiqueta\u00a0DEPARTAMENT i canviar la macro de quan s'apreta el bot\u00f3 (esdeveniment Aprova l'acci\u00f3) per la macro\u00a0obrirDepartament.</p> <p>Despr\u00e9s haureu de crear 3 botons m\u00e9s per a obrir els altres 3 formularis, i un altre bot\u00f3 per a eixir (macro\u00a0eixir).</p> <p>Aquest podria ser l'aspecte del formulari:</p> <p></p> <p>NOTA</p> <p>Heu de cuidar que en el codi de les macros heu posat el formulari que voleu obrir EXACTAMENT IGUAL\u00a0que el nom real que li heu donat al formulari. Per exemple, si el formulari es diu\u00a0Treballa i en la macro hem posat\u00a0</p> <p>Sub obrirTreballa ThisDatabaseDocument.FormDocuments.getbyname(\"TREBALLA\").open End Sub</p> <p>\u00c9s a dir, que el nom \u00e9s nom\u00e9s amb la primera maj\u00fascula, per\u00f2 en la macro ho hem posat tot amb maj\u00fascules.</p> <p>Ens apareixer\u00e0 el seg\u00fcent error:</p> <p></p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial SenseObraDerivada 2.5 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T05_Annex_Base/23_obrir_automticament_un_formulari/","title":"23 obrir automticament un formulari","text":"<p>Bases de Dades</p> <ul> <li>Tema 5 (annex): Base avan\u00e7at</li> <li>Objectius</li> <li>Part I: Pr\u00e0ctica inicial </li> <li>1.1 Taules</li> <li>1.2 Consultes</li> <li>1.3 Formularis i Informes</li> <li>Part II: Macros (Voluntari) </li> <li>2.1 Creaci\u00f3 i execuci\u00f3 directa d'una Macro</li> <li>2.2 Quan executar una macro: esdeveniments</li> <li>2.3 Obrir autom\u00e0ticament un formulari</li> <li>2.4 Exemple avan\u00e7at: compliment de restriccions externes</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T05_Annex_Base/23_obrir_automticament_un_formulari/#23-obrir-automaticament-un-formulari","title":"2.3 Obrir autom\u00e0ticament un formulari","text":"<p>Amb la creaci\u00f3 del formulari\u00a0Men\u00fa principal estem fent una esp\u00e8cie d'aplicaci\u00f3 basada en la Base de Dades, de manera que un usuari no expert podria veure i actualitzar la informaci\u00f3 a partir dels formularis, i el Mn\u00fa principal li permetria navegar per ells.</p> <p>Per a completar aquesta \"aplicaci\u00f3\", podr\u00edem intentar que en obrir la Base de Dades\u00a0Empresa.odb, autom\u00e0ticament s'obrira el formulari\u00a0Men\u00fa principal.</p> <p>Ho podem aconseguir creant una nova macro per a obrir el formulari\u00a0Men\u00fa principal, per\u00f2 no ser\u00e0 tan senzilla com les d'abans, ja quepel moment en qu\u00e8 voldrem obrir aquest formulari (al principi, de forma autom\u00e0tica), ens hem d'assegurar que ja s'ha fet la connexi\u00f3 a aquesta Base de Dades. No podem estar segurs perqu\u00e8 l'estem obrint en aquest moment.</p> <p>Copieu la seg\u00fcent macro al final del\u00a0Module1 de\u00a0Empresa.odb:</p> <p>Sub obrirMenuPrincipal</p> <p>If  Not Thisdatabasedocument.currentcontroller.isConnected Then Thisdatabasedocument.currentcontroller.connect</p> <p>ThisDatabaseDocument.FormDocuments.getbyname(\"Men\u00fa Principal\").open</p> <p>End Sub</p> <p>I ara, per a que s'execute aquesta macro en obrir\u00a0Empresa.odb, hem d'anar a\u00a0Eines -&gt; Personalitza -&gt; pestanya Esdeveniments\u00a0, i en l'opci\u00f3\u00a0Obre un document triar la macro\u00a0obrirMenuPrincipal </p> <p></p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial SenseObraDerivada 2.5 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T05_Annex_Base/24_exemple_avanat_compliment_de_restriccions_externes/","title":"24 exemple avanat compliment de restriccions externes","text":"<p>Bases de Dades</p> <ul> <li>Tema 5 (annex): Base avan\u00e7at</li> <li>Objectius</li> <li>Part I: Pr\u00e0ctica inicial </li> <li>1.1 Taules</li> <li>1.2 Consultes</li> <li>1.3 Formularis i Informes</li> <li>Part II: Macros (Voluntari) </li> <li>2.1 Creaci\u00f3 i execuci\u00f3 directa d'una Macro</li> <li>2.2 Quan executar una macro: esdeveniments</li> <li>2.3 Obrir autom\u00e0ticament un formulari</li> <li>2.4 Exemple avan\u00e7at: compliment de restriccions externes</li> </ul> <p>\u00ab Anterior</p>"},{"location":"BD-T05_Annex_Base/24_exemple_avanat_compliment_de_restriccions_externes/#24-exemple-avancat-compliment-de-restriccions-externes","title":"2.4 Exemple avan\u00e7at: compliment de restriccions externes","text":"<p>Podem utilitzar les macros per a aconseguir alguna de les restriccions externes del Model Relacional, ja que per mig del codi podem aconseguir coses molt potents.</p> <p>Per exemple, en l'esquema del Model Relacional hav\u00edem apuntat aquesta restricci\u00f3 externa:</p> <p>Rex1: El cap d'un departament ha de ser membre d'aquest</p> <p>Com podr\u00edem aconseguir a\u00e7\u00f2? Doncs si en el formulari Departament\u00a0en el\u00a0quadre de llista que hav\u00edem fet per a triar el director, nom\u00e9s mostrem els membres del Departament que s'est\u00e0 visualitzant, ho tindr\u00edem prou b\u00e9 per a acomplir la restricci\u00f3. Est\u00e0 clar que no ho aconseguirem sempre, ja que si anem a editar les dades en la taula directament, ens ho saltarem. Per\u00f2 \u00e9s una primera manera d'aconseguir-ho. En el Tema 7, ho podrem fer de manera m\u00e9s seriosa.</p> <p>Copieu el seg\u00fcent codi al costat de les altres macros que hav\u00edem fet. Evidentment, aquesta macro ja \u00e9s molt avan\u00e7ada, molt m\u00e9s dels objectius introductoris d'aquest annex. Per tant, agafeu-la \u00fanicament com un exemple.\u00a0</p> <p>Sub DirectorDepartament</p> <p>form_container = ThisDatabaseDocument.FormDocuments.getByName(\"DEPARTAMENT\")</p> <p>form_container.open</p> <p>formDepartament = form_container.Component.getDrawPage().getForms().getByIndex(0)</p> <p>campDepartament = formDepartament.getByName(\"fmtnum_d\")</p> <p>departament = campDepartament.getCurrentValue</p> <p>sSql = \"SELECT \"\"nom\"\" , \"\"dni\"\" FROM \"\"EMPLEAT\"\"\" &amp;_</p> <p>\" WHERE \"\"departament\"\" = '\" &amp; departament &amp; \"' ORDER BY \"\"nom\"\" ASC\"</p> <p>director = formDepartament.getByName(\"txtdirector\")</p> <p>director.listsource = array(sSql)</p> <p>director.refresh()</p> <p>End Sub</p> <p>En definitiva el que fem \u00e9s agafar el valor que t\u00e9 el camp\u00a0num_d del formulari\u00a0Departament, i fer una sent\u00e8ncia SQL seleccionant els empleats d'aquest departament. Aix\u00f2 li ho assignem al camp\u00a0director, i el\u00a0refresquem per a que ens ho mostre en aquest mateix moment.</p> <p>Falta saber el moment en qu\u00e8 hem d'executar aquesta macro. Haur\u00e0 de ser cada vegada que ens situem en un nou registre de la taula Departament. Aquest esdeveniment s'anomena\u00a0Despr\u00e9s del canvi de registre, i \u00e9s un esdeveniment del mateix\u00a0formulari, no de cap control. En ell triarem la macro que acabem de copiar, que es diu\u00a0DirectorDepartament</p> <p></p> <p>Quan executem el formulari, podem observar que en el quadre de llista nom\u00e9s estan els empleats del present departament</p> <p></p> <p>\u00ab Anterior</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial SenseObraDerivada 2.5 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T05_Annex_Base/objectius/","title":"Objectius","text":"<p>Bases de Dades</p> <ul> <li>Tema 5 (annex): Base avan\u00e7at</li> <li>Objectius</li> <li>Part I: Pr\u00e0ctica inicial </li> <li>1.1 Taules</li> <li>1.2 Consultes</li> <li>1.3 Formularis i Informes</li> <li>Part II: Macros (Voluntari) </li> <li>2.1 Creaci\u00f3 i execuci\u00f3 directa d'una Macro</li> <li>2.2 Quan executar una macro: esdeveniments</li> <li>2.3 Obrir autom\u00e0ticament un formulari</li> <li>2.4 Exemple avan\u00e7at: compliment de restriccions externes</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T05_Annex_Base/objectius/#objectius","title":"Objectius","text":""},{"location":"BD-T05_Annex_Base/objectius/#objectius_1","title":"Objectius","text":"<p>En la primera part d'aquest tema s'ha seguit un tutorial per a con\u00e9ixer els aspectes m\u00e9s b\u00e0sics de Base. Els objectius d'aquesta segona part s\u00f3n:</p> <ul> <li>Assegurar-nos que s'han assolit convenientment els conceptes b\u00e0sics referents a </li> <li>Taules</li> <li>Consultes</li> <li>Formularis</li> <li>Informes</li> <li>Mostrar un exemple d'una macro que ens pot ajudar a entendre que per mig de les macros podem arribar a implementar algunes restriccions externes</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial SenseObraDerivada 2.5 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T05_Annex_Base/part_i_prctica_inicial/","title":"Part i prctica inicial","text":"<p>Bases de Dades</p> <ul> <li>Tema 5 (annex): Base avan\u00e7at</li> <li>Objectius</li> <li>Part I: Pr\u00e0ctica inicial </li> <li>1.1 Taules</li> <li>1.2 Consultes</li> <li>1.3 Formularis i Informes</li> <li>Part II: Macros (Voluntari) </li> <li>2.1 Creaci\u00f3 i execuci\u00f3 directa d'una Macro</li> <li>2.2 Quan executar una macro: esdeveniments</li> <li>2.3 Obrir autom\u00e0ticament un formulari</li> <li>2.4 Exemple avan\u00e7at: compliment de restriccions externes</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T05_Annex_Base/part_i_prctica_inicial/#part-i-practica-inicial","title":"Part I: Pr\u00e0ctica inicial","text":"<p>Aquesta pr\u00e0ctica t\u00e9 la voluntat de servir de rep\u00e0s del tutorial de Base. Seran una s\u00e8rie de exercicis sobre una mateixa Base de Dades, la corresponent a l'exemple amb qu\u00e8 s'il\u00b7lustra el Tema 2: Model Entitat-Relaci\u00f3. Repetim ac\u00ed la breu an\u00e0lisi de requisits de l' Empresa:</p> <ol> <li>La companyia est\u00e0 organitzada en departaments. Cadascun t\u00e9 nom \u00fanic, n\u00famero \u00fanic i un empleat que el dirigeix. Ens interessa la data en la qual va comen\u00e7ar a dirigir-lo.</li> <li>Cada departament controla una s\u00e8rie de projectes. Cadascun d'aquestos projectes t\u00e9 nom i n\u00famero \u00fanics, i estar\u00e0 coordinat per un \u00fanic departament.</li> <li>De cada empleat ens interessa el nom (format per dos cognoms i nom de pila), DNI, adre\u00e7a, tel\u00e8fon, sou i data de naixement. Tot empleat est\u00e0 assignat a un departament, i moltes vegades tindr\u00e0 un supervisor. Pot treballar en m\u00e9s d'un projecte (no necess\u00e0riament controlats pel mateix departament) i treballar\u00e0 un determinat n\u00famero d'hores a la setmana en cada projecte. En un projecte sempre treballar\u00e0, com a m\u00ednim, un empleat.</li> <li>Volem saber tamb\u00e9 els familiars de cada empleat, per administrar els termes dels segurs. Volem saber el nom, data de naixement i parentesc amb l'empleat.</li> </ol> <p>L'estructura de les taules \u00e9s la seg\u00fcent:</p> <p></p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial SenseObraDerivada 2.5 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T05_Annex_Base/part_ii_macros_voluntari/","title":"Part ii macros voluntari","text":"<p>Bases de Dades</p> <ul> <li>Tema 5 (annex): Base avan\u00e7at</li> <li>Objectius</li> <li>Part I: Pr\u00e0ctica inicial </li> <li>1.1 Taules</li> <li>1.2 Consultes</li> <li>1.3 Formularis i Informes</li> <li>Part II: Macros (Voluntari) </li> <li>2.1 Creaci\u00f3 i execuci\u00f3 directa d'una Macro</li> <li>2.2 Quan executar una macro: esdeveniments</li> <li>2.3 Obrir autom\u00e0ticament un formulari</li> <li>2.4 Exemple avan\u00e7at: compliment de restriccions externes</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T05_Annex_Base/part_ii_macros_voluntari/#part-ii-macros-voluntari","title":"Part II: Macros (Voluntari)","text":"<p>Una macro \u00e9s una seq\u00fc\u00e8ncia ordenada d'accions que s'executa b\u00e9 expressament, b\u00e9 en resposta a un esdeveniment (\"event\") com la pulsaci\u00f3 amb el ratol\u00ed, o una tecla, o quan es carrega un formulari, etc.</p> <ul> <li>Les accions que es poden executar s\u00f3n molt variades: obrir un altre formulari o informe, localitzar un registre, treure un missatge, afegir o eliminar registres, etc. En la pen\u00faltima pregunta d'aquesta part es veu un resum de les accions que es poden incorporar en una macro.</li> <li>I el moment en el qual es poden executar, els esdeveniments, tamb\u00e9 \u00e9s molt variat. En l'\u00faltima pregunta es fa un resum dels esdeveniments, en resposta dels quals es pot executar una macro.</li> </ul> <p>Hem de fer una matisaci\u00f3 important perqu\u00e8 per a LibreOffice Base les macros no s\u00f3n el mateix que en Access, el SGBD personal de \"refer\u00e8ncia\"</p> <ul> <li>En Access, les accions es poden fer per mig de Macros o per mig de m\u00f2duls (programes fets en Basic) </li> <li>Les Macros s\u00f3n una s\u00e8rie d'accions predeterminades que trobem en un llista d'accions possibles</li> <li>Els m\u00f2duls s\u00f3n conjunts de programes: procediments i/o funcions, escrites en Visual Basic</li> <li>En canvi en LibreOffice, les macros s'escriuen en Visual Basic. Per tant no s\u00f3n similars a les macros d'Access sin\u00f3 als m\u00f2duls d'Access</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial SenseObraDerivada 2.5 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T06_SQL_III_PostgreSQL/","title":"Index","text":"<p>Bases de Dades</p> <ul> <li>Tema 6: SQL - DDL i consultes d'actualitzaci\u00f3 (part III)</li> <li>3.1 Introducci\u00f3</li> <li>3.2 DDL </li> <li>3.2.1 Tipus de dades</li> <li>3.2.2 CREATE TABLE <ul> <li>Exercicis</li> </ul> </li> <li>3.2.3 Restriccions (Constraint) <ul> <li>Exercicis</li> </ul> </li> <li>3.2.4 ALTER TABLE <ul> <li>Exercicis</li> </ul> </li> <li>3.2.5 DROP TABLE</li> <li>3.2.6 \u00cdndex <ul> <li>Exercicis</li> </ul> </li> <li>3.2.7 Vistes <ul> <li>Exercicis</li> </ul> </li> <li>3.2.8. Creaci\u00f3 d'altres objectes: seq\u00fc\u00e8ncies, dominis i tipus. <ul> <li>3.2.8.1 Seq\u00fc\u00e8ncies</li> <li>3.2.8.2 Dominis</li> <li>3.2.8.3 Tipus de dades</li> </ul> </li> <li>3.3 Consultes d'actualitzaci\u00f3 </li> <li>3.3.1 INSERT <ul> <li>Exercicis</li> </ul> </li> <li>3.3.2 DELETE <ul> <li>Exercicis</li> </ul> </li> <li>3.3.3 UPDATE <ul> <li>Exercicis</li> </ul> </li> <li>Exercicis de tot el tema</li> </ul> <p>Seg\u00fcent \u00bb</p>"},{"location":"BD-T06_SQL_III_PostgreSQL/#tema-6-sql-ddl-i-consultes-dactualitzacio-part-iii","title":"Tema 6: SQL - DDL i consultes d'actualitzaci\u00f3 (part III)","text":"<p>Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T06_SQL_III_PostgreSQL/31_introducci/","title":"31 introducci","text":"<p>Bases de Dades</p> <ul> <li>Tema 6: SQL - DDL i consultes d'actualitzaci\u00f3 (part III)</li> <li>3.1 Introducci\u00f3</li> <li>3.2 DDL </li> <li>3.2.1 Tipus de dades</li> <li>3.2.2 CREATE TABLE <ul> <li>Exercicis</li> </ul> </li> <li>3.2.3 Restriccions (Constraint) <ul> <li>Exercicis</li> </ul> </li> <li>3.2.4 ALTER TABLE <ul> <li>Exercicis</li> </ul> </li> <li>3.2.5 DROP TABLE</li> <li>3.2.6 \u00cdndex <ul> <li>Exercicis</li> </ul> </li> <li>3.2.7 Vistes <ul> <li>Exercicis</li> </ul> </li> <li>3.2.8. Creaci\u00f3 d'altres objectes: seq\u00fc\u00e8ncies, dominis i tipus. <ul> <li>3.2.8.1 Seq\u00fc\u00e8ncies</li> <li>3.2.8.2 Dominis</li> <li>3.2.8.3 Tipus de dades</li> </ul> </li> <li>3.3 Consultes d'actualitzaci\u00f3 </li> <li>3.3.1 INSERT <ul> <li>Exercicis</li> </ul> </li> <li>3.3.2 DELETE <ul> <li>Exercicis</li> </ul> </li> <li>3.3.3 UPDATE <ul> <li>Exercicis</li> </ul> </li> <li>Exercicis de tot el tema</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T06_SQL_III_PostgreSQL/31_introducci/#31-introduccio","title":"3.1 Introducci\u00f3","text":"<p>Fins el moment nom\u00e9s hem vist una sent\u00e8ncia, el SELECT, una sent\u00e8ncia molt potent per a poder consultar el contingut de les taules d'una Base de Dades. Per\u00f2 el llenguatge SQL \u00e9s m\u00e9s complet, i permet tamb\u00e9 crear l'estructura de les taules i altres objectes. I tamb\u00e9 ens permetr\u00e0 manipular la informaci\u00f3, introduint dades noves, eliminant-ne o modificant les ja existents.</p> <p>Subdividirem, aquesta part del tema en dos grans blocs:</p> <ul> <li>DDL (Data Definition Language) llenguatge de definici\u00f3 de dades. \u00c9s el que ens permetr\u00e0 definir les estructures de dades: taules, vistes, i com veurem en altres temes, m\u00e9s objectes.</li> <li>Consultes d'actualitzaci\u00f3. No canvien cap estructura de cap taula, sin\u00f3 que modifiquen el contingut de les taules. I nom\u00e9s hi ha 3 possibilitats en la modificaci\u00f3 del contingut: inserir noves files (INSERT), modificar les ja existents en algun camp determinat (UPDATE) o esborrar files (DELETE)</li> </ul> <p>Durant tota aquesta tercera part de SQL farem consultes per a crear o modificar taules, o per a modificar les dades de les taules.</p> <p>No ens conv\u00e9 en absolut treballar sobre la Base de Dades geo ni sobre factura, ja que el que far\u00edem seria \"boicotejar-nos\" entre nosaltres. Treballarem amb dues Bases de Dades noves:</p> <ul> <li>proves (connectant-nos com l'usuari proves): servir\u00e0 per a fer proves, com el seu propi nom indica. Tots els exemples els farem en aquesta BD</li> <li>f_grup_9999x, on grup \u00e9s el codi del vostre grup (p.ex 1cfsg, 1cfsj, 1cfsl...), 9999 seran les 4 \u00faltimes xifres del vostre DNI, i x \u00e9s la lletra del vostre NIF. \u00c9s a dir, tindreu una Base de Dades per a cadasc\u00fa de vosaltres, i un usuari amb el mateix nom. \u00c9s on haureu de treballar els exercicis.</li> </ul> <p>Us recomane vivament que us creeu una altra connexi\u00f3 per a cadascuna de les Bases de Dades anteriors. D'aquesta manera, segurament en tindreu quatre connexions: la de geo, la de factura, la de proves i la de f_grup_9999x (substituint per les dades del vostre grup i NIF)</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T06_SQL_III_PostgreSQL/321_tipus_de_dades/","title":"321 tipus de dades","text":"<p>Bases de Dades</p> <ul> <li>Tema 6: SQL - DDL i consultes d'actualitzaci\u00f3 (part III)</li> <li>3.1 Introducci\u00f3</li> <li>3.2 DDL </li> <li>3.2.1 Tipus de dades</li> <li>3.2.2 CREATE TABLE <ul> <li>Exercicis</li> </ul> </li> <li>3.2.3 Restriccions (Constraint) <ul> <li>Exercicis</li> </ul> </li> <li>3.2.4 ALTER TABLE <ul> <li>Exercicis</li> </ul> </li> <li>3.2.5 DROP TABLE</li> <li>3.2.6 \u00cdndex <ul> <li>Exercicis</li> </ul> </li> <li>3.2.7 Vistes <ul> <li>Exercicis</li> </ul> </li> <li>3.2.8. Creaci\u00f3 d'altres objectes: seq\u00fc\u00e8ncies, dominis i tipus. <ul> <li>3.2.8.1 Seq\u00fc\u00e8ncies</li> <li>3.2.8.2 Dominis</li> <li>3.2.8.3 Tipus de dades</li> </ul> </li> <li>3.3 Consultes d'actualitzaci\u00f3 </li> <li>3.3.1 INSERT <ul> <li>Exercicis</li> </ul> </li> <li>3.3.2 DELETE <ul> <li>Exercicis</li> </ul> </li> <li>3.3.3 UPDATE <ul> <li>Exercicis</li> </ul> </li> <li>Exercicis de tot el tema</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T06_SQL_III_PostgreSQL/321_tipus_de_dades/#321-tipus-de-dades","title":"3.2.1 Tipus de dades","text":"<p>En el moment de definir un camp haurem d'especificar obligat\u00f2riament de quin tipus ser\u00e0. Ja es van veure els tipus b\u00e0sics d'Access en el tutorial del tema 5. Ara els veurem els tipus b\u00e0sics de PostgreSQL, i veurem que hi haur\u00e0 molts tipus similars (com en tots els SGBD).</p> <p>En el seg\u00fcent quadre es resumeixen els tipus de dades m\u00e9s importants de PostgreSQL. \u00c9s un conjunt molt extens, que fins i tot pot ampliar l'usuari amb la instrucci\u00f3 CREATE TYPE, com veurem al final del tema. S\u00f3n especialment interessants els tipus geom\u00e8trics (amb POINT, BOX,...) i el INET (adre\u00e7a IP).</p> TIPUS DE DADESDESCRIPCI\u00d3BYTES CAR\u00c0CTERCHARUn car\u00e0cter.1 byte CHAR(n)Cadena fixa de n car\u00e0cters.(4+n) bytes VARCHAR(n)Cadena de car\u00e0cters de llarg\u00e0ria variable, amb un m\u00e0xim de n car\u00e0cters. S\u2019ha d\u2019especificar la llarg\u00e0ria.(4+x) bytes TEXTIgual que l'anterior, per\u00f2 no s'ha d'especificar la llarg\u00e0ria m\u00e0xima.(4+x) bytes NUM\u00c8RICDECIMAL(n,d)N\u00famero amb una precisi\u00f3 de n xifres, amb d decimals. Si no es posa d no hi ha decimals. La precisi\u00f3 m\u00e0xima \u00e9s de 1000 xifres.variable NUMERIC(n,d)Igual que l'anterior FLOAT4 , REALComa flotant de simple precisi\u00f3 (6 xifres decimals)4 bytes FLOAT8 , FLOAT , DOUBLE PRECISIONComa flotant doble precisi\u00f3 (15 xifres decimals)8 bytes INT2 , SMALLINTEnter (-32.768,32767)2 bytes INT4 , INT , INTEGEREnter (-2.147.483.648, 2.147.483.647)4 bytes INT8 , BIGINTEnter amb unes 18 xifres8 bytes SERIALAutonum\u00e8ric (internament es crea una seq\u00fc\u00e8ncia)4 bytes DATADATETipus data. Valor m\u00ednim 1-1-4713 AC. Valor m\u00e0xim 31-12-5874897 DC.4 bytes TIMETipus hora. Guarda fins a la micra de segon8\u00a0bytes TIMESTAMPTipus data-hora (combinant les caracter\u00edstiques dels dos anteriors)8 bytes INTERVALUn interval de temps (amb precisi\u00f3 d'un microsegon, per\u00f2 que pot arribar als 178.000.000 anys)12 bytes BOOLBoole\u00e0, amb valors True i False1 byte GEOM\u00c8TRICPOINTUn punt de l'espai bidimensional (x,y) (dos float8)16 bytes LSEGSegment de l\u00ednia definit per 2 punts (x1,y1) (x2,y2)32 bytes BOXRectangle, definit pels extrems (x1,y1) (x2,y2)32 bytes PATHConjunt de punts que representen una figura oberta o tancada: (x1,y1), ..., (xn,yn)16+16n bytes POLYGONConjunt de punts que representen un figura tancada (x1,y1), ..., (xn,yn) (similar al path tancat)40+16n bytes CIRCLECercle representat pel centre i el radi24 bytes INETAdre\u00e7a IP, de 4 n\u00fameros separats per punts, amb n\u00famero de bits de la m\u00e0scara separat per /variable <p>Tamb\u00e9 disposarem d'un tipus enumerat. El veurem en l'\u00faltima pregunta del tema.</p> <p>En la documentaci\u00f3 de PostgreSQL trobarem tots els tipus possibles: http://www.postgresql.org/docs/9.5/static/datatype.md</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T06_SQL_III_PostgreSQL/322_create_table/","title":"322 create table","text":"<p>Bases de Dades</p> <ul> <li>Tema 6: SQL - DDL i consultes d'actualitzaci\u00f3 (part III)</li> <li>3.1 Introducci\u00f3</li> <li>3.2 DDL </li> <li>3.2.1 Tipus de dades</li> <li>3.2.2 CREATE TABLE <ul> <li>Exercicis</li> </ul> </li> <li>3.2.3 Restriccions (Constraint) <ul> <li>Exercicis</li> </ul> </li> <li>3.2.4 ALTER TABLE <ul> <li>Exercicis</li> </ul> </li> <li>3.2.5 DROP TABLE</li> <li>3.2.6 \u00cdndex <ul> <li>Exercicis</li> </ul> </li> <li>3.2.7 Vistes <ul> <li>Exercicis</li> </ul> </li> <li>3.2.8. Creaci\u00f3 d'altres objectes: seq\u00fc\u00e8ncies, dominis i tipus. <ul> <li>3.2.8.1 Seq\u00fc\u00e8ncies</li> <li>3.2.8.2 Dominis</li> <li>3.2.8.3 Tipus de dades</li> </ul> </li> <li>3.3 Consultes d'actualitzaci\u00f3 </li> <li>3.3.1 INSERT <ul> <li>Exercicis</li> </ul> </li> <li>3.3.2 DELETE <ul> <li>Exercicis</li> </ul> </li> <li>3.3.3 UPDATE <ul> <li>Exercicis</li> </ul> </li> <li>Exercicis de tot el tema</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T06_SQL_III_PostgreSQL/322_create_table/#322-create-table","title":"3.2.2 CREATE TABLE","text":"<p>Permet crear una nova taula. Obligat\u00f2riament s'hauran d'especificar els camps i els tipus de dades de cada camp. \u00d2bviament, una vegada creada la taula estar\u00e0 buida, sense cap fila.</p> <p>Sintaxi</p> <p>CREATE TABLE taula  ( camp1 tipus [(grand\u00e0ria)] [DEFAULT valor] [restricci\u00f311] [restricci\u00f312] [...]  [, camp2 tipus [(grand\u00e0ria)] [DEFAULT valor] [restricci\u00f321] [restricci\u00f322] [...]  [, ...]]  [, restricci\u00f3multiple1 [, ...]] )</p> <p>Podem observar que la definici\u00f3 de l'estructura de la taula va entre par\u00e8ntesis, separant per comes la definici\u00f3 de cada camp.</p> <ul> <li>El nom de la taula no ha de ser el de cap altre objecte anterior (taula o vista). Si volem posar un nom amb m\u00e9s d'una paraula o amb una paraula reservada, l'haurem de posar entre cometes dobles; per\u00f2 no us ho aconselle, \u00e9s preferible la utilitzaci\u00f3 del gui\u00f3 baix, i aix\u00ed nom\u00e9s \u00e9s una paraula.</li> <li>En cada camp posarem el seu nom i el tipus. Si el tipus de dades \u00e9s VARCHAR, podrem posar opcionalment la grand\u00e0ria m\u00e0xima (si no la posem ser\u00e0 de 255 en el cas de text). Si el tipus de dades \u00e9s NUMERIC, podrem posar opcionalment la grand\u00e0ria (n\u00famero de xifres significatives) i n\u00famero de xifres de la part fraccion\u00e0ria.</li> <li>Podem posar ocionalment un valor per defecte amb la cl\u00e0usula DEFAULT. D'aquesta manera, en introduir una nova fila en la taula, si no li posem valor a aquest camp, agafar\u00e0 el valor per defecte. En el valor es pot posar una constant del tipus del camp, o una expressi\u00f3 amb funcions, sempre que torne una dada dels tipus del camp.</li> <li>Podem posar opcionalment restriccions a cada camp. Hauran d'anar abans de la coma que separa del seg\u00fcent camp. Tamb\u00e9 poden haver restriccions que afecten a m\u00e9s d'un camp, que preferiblement posarem al final de la definici\u00f3 de la taula. Veurem les restriccions en el seg\u00fcent punt.</li> </ul> <p>Exemples</p> <p>Si voleu practicar aquestos exemples, feu-lo sobre la Base de Dades proves (usuari proves, contrasenya proves). Si us d\u00f3na error perqu\u00e8 la taula que aneu a crear ja est\u00e0 creada la taula, esborreu-la primer, i torneu a executar la sent\u00e8ncia.</p> <ol> <li>Crear una nova taula anomenada EMPLEAT1 amb dos camps, un anomenat dni de tipus text i llarg\u00e0ria 10 i un altre anomenat nom amb llarg\u00e0ria 50.</li> </ol> <p>CREATE TABLE EMPLEAT1 (dni VARCHAR (10) , nom VARCHAR (50));</p> <ol> <li>Crear una taula anomenada EMPLEAT2 amb un camp text de 10 car\u00e0cters anomenat dni; un altre camp de tipus text de llarg\u00e0ria predeterminada (255) anomenat nom; un altre camp anomenat data_naixement de tipus data; un altre anomenat sou de tipus num\u00e8ric, amb 6 xifres significatives, de les quals 2 ha de ser de la part fraccion\u00e0ria i un \u00faltim anomenat departament de tipus num\u00e8ric menudet (INT2 o SMALLINT).</li> </ol> <p>CREATE TABLE EMPLEAT2  ( dni VARCHAR(10) ,  nom VARCHAR ,  data_naixement DATE ,  sou NUMERIC(6,2) ,  departament INT2 )</p> <ol> <li>Crear una taula anomenada EMPLEAT3 com el de l'exemple anterior, per\u00f2 amb dos camps m\u00e9s al final: un camp anomenat poblacio de tipus text de 50 car\u00e0cters, i amb el valor per defecte Castell\u00f3 i un \u00faltim anomenat data_incorporacio de tipus data i valor per defecte la data d'avui</li> </ol> <p>CREATE TABLE EMPLEAT3  ( dni VARCHAR(10) ,  nom VARCHAR ,  data_naixement DATE ,  sou NUMERIC(6,2) ,  departament INT2 , poblacio VARCHAR(50) DEFAULT 'Castell\u00f3' ,  data_incorporacio DATE DEFAULT CURRENT_DATE )</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T06_SQL_III_PostgreSQL/323_restriccions_constraint/","title":"323 restriccions constraint","text":"<p>Bases de Dades</p> <ul> <li>Tema 6: SQL - DDL i consultes d'actualitzaci\u00f3 (part III)</li> <li>3.1 Introducci\u00f3</li> <li>3.2 DDL </li> <li>3.2.1 Tipus de dades</li> <li>3.2.2 CREATE TABLE <ul> <li>Exercicis</li> </ul> </li> <li>3.2.3 Restriccions (Constraint) <ul> <li>Exercicis</li> </ul> </li> <li>3.2.4 ALTER TABLE <ul> <li>Exercicis</li> </ul> </li> <li>3.2.5 DROP TABLE</li> <li>3.2.6 \u00cdndex <ul> <li>Exercicis</li> </ul> </li> <li>3.2.7 Vistes <ul> <li>Exercicis</li> </ul> </li> <li>3.2.8. Creaci\u00f3 d'altres objectes: seq\u00fc\u00e8ncies, dominis i tipus. <ul> <li>3.2.8.1 Seq\u00fc\u00e8ncies</li> <li>3.2.8.2 Dominis</li> <li>3.2.8.3 Tipus de dades</li> </ul> </li> <li>3.3 Consultes d'actualitzaci\u00f3 </li> <li>3.3.1 INSERT <ul> <li>Exercicis</li> </ul> </li> <li>3.3.2 DELETE <ul> <li>Exercicis</li> </ul> </li> <li>3.3.3 UPDATE <ul> <li>Exercicis</li> </ul> </li> <li>Exercicis de tot el tema</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T06_SQL_III_PostgreSQL/323_restriccions_constraint/#323-restriccions-constraint","title":"3.2.3 Restriccions (Constraint)","text":"<p>Per mig de les restriccions podrem definir dins d'una taula restriccions d'usuari com s\u00f3n la definici\u00f3 de la clau principal, claus externes, camps no nuls i camps \u00fanics. </p> <p>Hi ha dues maneres de definir restriccions: les que afecten a un \u00fanic camp (i que es posen en la mateixa definici\u00f3 del camp) i les que afecten o poden afectar a m\u00e9s d'un camp, que s'han de definir separadament de la definici\u00f3 dels camps. Comencem per les primeres, per ser m\u00e9s senzilles d'entendre: </p> <p>Restriccions de camp \u00fanic</p> <p>S\u00f3n restriccions que es posen en la mateixa definici\u00f3 del camp i nom\u00e9s afectaran a aquest camp: van per tant despr\u00e9s del tipus de dades del camp i abans de la coma de separaci\u00f3 dels camps.</p> <p>La sintaxi \u00e9s</p> <p>[ CONSTRAINT nom ] {PRIMARY KEY | UNIQUE | NOT NULL | REFERENCES taula2 [(camp1)] | CHECK (condici\u00f3)}</p> <p>Si no posem nom a la restricci\u00f3 (CONSTRAINT nom) PostgreSQL li assignar\u00e0 autom\u00e0ticament un nom. A\u00e7\u00f2 pot resultar c\u00f2mode en ocasions, per a no haver d'inventar-nos noms per a les restriccions, per\u00f2 despr\u00e9s ens limitaria a que no podr\u00edem retocar aquestes restriccions.</p> <p>Els tipus de restriccions que podem definir s\u00f3n:</p> <ul> <li>PRIMARY KEY: el camp ser\u00e0 clau principal.</li> </ul> <p>Per exemple, d'aquesta manera definirem la taula EMPLEAT3 (com la de l'apartat anterior) amb el camp dni com a clau principal. Recordeu que l'heu d'esborrar primer (potser no l'estigueu visualitzant en pgAdmin, per\u00f2 s\u00ed que est\u00e0 creada; refresqueu constantment les taules per saber la situaci\u00f3 actual)</p> <p>CREATE TABLE EMPLEAT3  ( dni VARCHAR(10) CONSTRAINT cp_emp3 PRIMARY KEY,  nom VARCHAR ,  data_naixement DATE ,  sou NUMERIC(6,2) ,  departament INT2 , poblacio VARCHAR(50) DEFAULT 'Castell\u00f3' ,  data_incorporacio DATE DEFAULT CURRENT_DATE )</p> <p>Nota</p> <p>Podeu comprovar que si no poseu nom a la restrici\u00f3, \u00e9s a dir si poseu directament dni TEXT(10) PRIMARY KEY , i aneu al disseny de la taula (fent-li clic des de pgAdmin; recordeu que heu de refrescar per a que apareguen els nous obectes), PostgreSQL posa autom\u00e0ticament un nom a la restricci\u00f3 format pel nom de la taula seguit de _pkey.</p> <p>Tingueu en compte tamb\u00e9 que si la taula ja existia donar\u00e0 un error. Nom\u00e9s heu d'esborrar-la primer.</p> <ul> <li>UNIQUE: el camp ser\u00e0 \u00fanic, \u00e9s a dir, no es podr\u00e0 agafar dues vegades el mateix valor en aquest camp (Indexat sense duplicats en Access). PostgreSQL generar\u00e0 autom\u00e0ticament un \u00edndex per a aquest camp. Veurem qu\u00e8 \u00e9s un \u00edndex en la pregunta 3.2.6.</li> </ul> <p>Per exemple, d'aquesta manera definir\u00edem la taula EMPLEAT3 amb la restricci\u00f3 que el camp nom no es pot repetir (si voleu provar la sent\u00e8ncia feu-lo en la BD proves, i si ja existeix l'esborreu primer):</p> <p>CREATE TABLE EMPLEAT3  ( dni VARCHAR(10) ,  nom VARCHAR CONSTRAINT u_nom UNIQUE,  data_naixement DATE ,  sou NUMERIC(6,2) ,  departament INT2 , poblacio VARCHAR(50) DEFAULT 'Castell\u00f3' ,  data_incorporacio DATE DEFAULT CURRENT_DATE )</p> <ul> <li>NOT NULL: el camp no podr\u00e0 agafar un valor nul (Requerido en Access). Hem de ser conscients que no val la pena definir com a no nula la clau principal, ja que per definici\u00f3 ja ho \u00e9s.</li> </ul> <p>Per exemple, d'aquesta manera definirem que el camp nom ha de ser no nul.</p> <p>CREATE TABLE EMPLEAT3  ( dni VARCHAR(10) ,  nom VARCHAR CONSTRAINT nn_nom NOT NULL ,  data_naixement DATE ,  sou NUMERIC(6,2) ,  departament INT2 , poblacio VARCHAR(50) DEFAULT 'Castell\u00f3' ,  data_incorporacio DATE DEFAULT CURRENT_DATE )</p> <ul> <li>REFERENCES: servir\u00e0 per a definir que aquest camp \u00e9s una clau externa. Haurem d'especificar obligat\u00f2riament la taula a la qual apunta, i opcionalment podem posar entre par\u00e8ntesis el camp de la taula al qual apunta, encara que si no ho posem, per defecte apuntar\u00e0 a la clau principal (i nosaltres sempre voldrem apuntar a la clau principal).</li> </ul> <p>Per exemple, d'aquesta manera podem definir la clau externa que apunta a la taula DEPARTAMENT (i que indica que l'empleat pertany al departament). Abans de crear aquesta versi\u00f3 de EMPLEAT3, hem de tenir creada la taula DEPARTAMENT, sin\u00f3 donar\u00e0 error:</p> <p>CREATE TABLE DEPARTAMENT ( num_d INT2 CONSTRAINT cp_dep PRIMARY KEY , nom_d VARCHAR(50) , director VARCHAR(10) , data DATE );</p> <p>CREATE TABLE EMPLEAT3  ( dni VARCHAR(10) ,  nom VARCHAR ,  data_naixement DATE ,  sou NUMERIC(6,2) ,  departament INT2 CONSTRAINT ce_emp3_dep REFERENCES DEPARTAMENT , poblacio VARCHAR(50) DEFAULT 'Castell\u00f3' ,  data_incorporacio DATE DEFAULT CURRENT_DATE );</p> <p>Com ja es va veure en el tema 3 (Model Relacional) i en el tema 5 (Access), hi ha 3 maneres d'actuar quan s'esborra o es modifica una fila de la taula principal que t\u00e9 associades files en la taula relacionada per mig de la clau externa. Per exemple, qu\u00e8 fem amb els familiars d'un empleat si esborrem l'empleat? Aquestes maneres d'actuar s'han d'especificar en el moment de definir la clau externa. La manera de posar-les en SQL i el significat s\u00f3n les seg\u00fcents:</p> <ul> <li>NO ACTION: no es deixar\u00e0 esborrar o modificar de la taula principal si en t\u00e9 alguna fila relacionada. \u00c9s l'opci\u00f3 per defecte. Aix\u00ed en l'exemple d'EMPLEAT3, amb una clau externa que apunta a DEPARTAMENT, si intentem esborrar o modificar el numero d'un departament que t\u00e9 empleats, ens donar\u00e0 un missatge d'error, avisant que com t\u00e9 registres relacionats en una altra taula no es pot esborrar o modificar.</li> <li>CASCADE: s'esborraran (o modificaran) en cascada els registres relacionats de la taula on est\u00e0 la clau externa. S'especificar\u00e0 amb ON DELETE CASCADE o ON UPDATE CASCADE. </li> </ul> <p>CREATE TABLE EMPLEAT3  ( dni VARCHAR(10) ,  nom VARCHAR ,  data_naixement DATE ,  sou NUMERIC(6,2) ,  departament INT2 CONSTRAINT ce_emp3_dep REFERENCES DEPARTAMENT ON DELETE CASCADE ON UPDATE CASCADE , poblacio VARCHAR(50) DEFAULT 'Castell\u00f3' ,  data_incorporacio DATE DEFAULT CURRENT_DATE )</p> <p>D'aquesta manera si esborrem un departament de la taula DEPARTAMENT, s'esborraran tamb\u00e9 els empleats de la taula EMPLEATS3 d'aquest departament. I si en la taula DEPARTAMENT modifiquem un n\u00famero de departament, per exemple de 5 a 50, aquest valor ser\u00e0 el nou valor en el camp departament de la taula EMPLEAT3 per a aquells que abans ten\u00eden un 5.</p> <ul> <li>SET NULL: posar\u00e0 a nul el camp que \u00e9s clau externa dels registres que estiguen relacionats amb l'esborrat o modificat de la taula principal. Aix\u00ed, si f\u00e9rem la seg\u00fcent definici\u00f3 de la taula EMPLEAT3 </li> </ul> <p>CREATE TABLE EMPLEAT3  ( dni VARCHAR(10) ,  nom VARCHAR ,  data_naixement DATE ,  sou NUMERIC(6,2) ,  departament INT2 CONSTRAINT ce_emp3_dep REFERENCES DEPARTAMENT ON DELETE SET NULL , poblacio VARCHAR(50) DEFAULT 'Castell\u00f3' ,  data_incorporacio DATE DEFAULT CURRENT_DATE )</p> <p>en el cas que esborrem el departament 5, no donaria cap error per aquesta restricci\u00f3 d'integritat, i posaria a nul el departament d'aquells empleats que abans eren del departament 5.</p> <ul> <li>CHECK: far\u00e0 una comprovaci\u00f3 per a validar els valors introdu\u00efts per a aquest camp. La condici\u00f3 de validaci\u00f3 ha d'anar entre par\u00e8ntesis, i ha de ser una expressi\u00f3, normalment de comparaci\u00f3 del camp en q\u00fcesti\u00f3 amb algun valor.</li> </ul> <p>Per exemple, anem a exigir que el sou siga estrictament positiu (per tipus de dades num\u00e8ric, podria agafar el valor 0 o valors negatius)</p> <p>CREATE TABLE EMPLEAT3  ( dni VARCHAR(10) ,  nom VARCHAR ,  data_naixement DATE ,  sou NUMERIC(6,2) CONSTRAINT sou_positiu CHECK (sou &gt; 0),  departament INT2 , poblacio VARCHAR(50) DEFAULT 'Castell\u00f3' ,  data_incorporacio DATE DEFAULT CURRENT_DATE )</p> <p>Evidentment es pot posar m\u00e9s d'una restricci\u00f3 en la definici\u00f3 d'una taula. En aquest exemple arrepleguem totes les anteriors, \u00e9s a dir, definim la taula EMPLEAT3 amb tots els seus camps, i definint la clau principal (dni), amb el camp nom \u00fanic, amb el sou estrictament positiu, i amb el camp departament que ser\u00e0 clau externa que apunta a la taula DEPARTAMENT. Per complicar-lo un poc m\u00e9s tamb\u00e9 exigirem que el camp nom siga no nul, i aix\u00ed veure que es pot posar m\u00e9s d'una restricci\u00f3 en un camp.</p> <p>CREATE TABLE EMPLEAT3  ( dni VARCHAR(10) CONSTRAINT cp_emp3 PRIMARY KEY ,  nom VARCHAR CONSTRAINT u_nom UNIQUE CONSTRAINT nn_nom NOT NULL ,  data_naixement DATE ,  sou NUMERIC(6,2) CONSTRAINT sou_positiu CHECK (sou &gt; 0) ,  departament INT2 CONSTRAINT ce_emp3_dep REFERENCES DEPARTAMENT , poblacio VARCHAR(50) DEFAULT 'Castell\u00f3' ,  data_incorporacio DATE DEFAULT CURRENT_DATE )</p> <p>Observeu que com a q\u00fcesti\u00f3 d'estil s'han posat noms a les restriccions que d'alguna manera suggereixen el motiu de la restricci\u00f3. Aix\u00ed, cp_emp3 vol dir clau princpal de EMPLEAT3, u_nom vol dir que el camp nom \u00e9s \u00fanic, nn_nom vol dir que nom \u00e9s no nul, nn_sou vol dir que sou \u00e9s no nul, i ce_emp3_dep vol dir clau externa de la taula EMPLEAT3 a la taula DEPARTAMENT. Si tenim un criteri clar per als noms de les restriccions, si despr\u00e9s les volem desactivar temporalment o senzillament esborrar-les, ho podrem fer des de SQL.</p> <p>Restriccions de camp m\u00faltiple</p> <p>Tamb\u00e9 s'anomenen restriccions de taula, en contraposici\u00f3 a les anteriors, que s\u00f3n restriccions de camp. S\u00f3n restriccions que van dins de la definici\u00f3 d'una taula per\u00f2 fora de la definici\u00f3 d'un camp, i que poden afectar a un o m\u00e9s d'un camp. S'haur\u00e0 de definir expressament a quin o quins camps afecten.</p> <p>La sintaxi general, en aquesta ocasi\u00f3 \u00e9s</p> <p>[ CONSTRAINT nom ] {PRIMARY KEY | UNIQUE | FOREIGN KEY | CHECK (condicio)} (c11 [,c12][,...])  [ REFERENCES taula2 [ (c21 [,c22][,...]) ] ]  [ ON DELETE {CASCADE | SET NULL}] [ON UPDATE {CASCADE | SET NULL}] ]</p> <p>Igual que abans, si no posem nom a la restricci\u00f3 (CONSTRAINT nom) PostgreSQL li n'assignar\u00e0 un autom\u00e0ticament, que ser\u00e0 constru\u00eft de manera molt l\u00f2gica.</p> <p>Observeu que ara sempre especifiquem el o els camps afectats.</p> <p>Els tipus de restriccions s\u00f3n els mateixos que en el cas anterior, per\u00f2 la sintaxi variar\u00e0 lleugerament:</p> <ul> <li>PRIMARY KEY: posarem entre par\u00e8ntesis el camp o camps (en aquest cas separats per comes) que seran clau principal.</li> </ul> <p>Per exemple, definim una altra vegada el camp dni com a clau principal de la taula EMPLEAT3</p> <p>CREATE TABLE EMPLEAT3  ( dni VARCHAR(10) ,  nom VARCHAR ,  data_naixement DATE ,  sou NUMERIC(6,2) ,  departament INT2 , poblacio VARCHAR(50) DEFAULT 'Castell\u00f3' ,  data_incorporacio DATE DEFAULT CURRENT_DATE ,  CONSTRAINT cp_emp3 PRIMARY KEY (dni) )</p> <p>I ara un altre per a definir la clau principal de FAMILIAR. Com la clau est\u00e0 formada per 2 camps, estem obligats a utilitzar una restricci\u00f3 de camp m\u00faltiple.</p> <p>CREATE TABLE FAMILIAR ( dni VARCHAR(10),  nom VARCHAR,  data_n DATE,  parentesc VARCHAR(50),  CONSTRAINT cp_fam2 PRIMARY KEY (dni,nom) )</p> <p>Com coment\u00e0vem, si la clau principal est\u00e0 formada per 2 camps estarem obligats a utilitzar una restricci\u00f3 de camp m\u00faltiple. Un error prou com\u00fa seria el seg\u00fcent:</p> <p>CREATE TABLE FAMILIAR2 ( dni VARCHAR(10) PRIMARY KEY,  nom VARCHAR PRIMARY KEY,  data_n DATE,  parentesc VARCHAR(50) )</p> <p>Podeu comprovar que donar\u00e0 error, perqu\u00e8 estem intentant definir 2 claus principals. La clau principal \u00e9s \u00fanica, aix\u00f2 s\u00ed formada per 2 camps en aquesta ocasi\u00f3.</p> <ul> <li>UNIQUE: ara posarem entre par\u00e8ntesis el o els camps que seran \u00fanics (en el seu conjunt). PostgreSQL generar\u00e0 autom\u00e0ticament un \u00edndex per a aquesta combinaci\u00f3 de camps. Veurem qu\u00e8 \u00e9s un \u00edndex en la pregunta 3.2.6.</li> </ul> <p>Per exemple, modifiquem la definici\u00f3 de EMPLEAT3 (anomenant-la EMPLEAT4) , amb un camp per als cognoms i un camp per al nom. Definirem la restricci\u00f3 que els camps cognoms i nom (en conjunt) no es poden repetir.</p> <p>CREATE TABLE EMPLEAT4  ( dni VARCHAR(10),  cognoms VARCHAR,  nom VARCHAR,  data_naixement DATE,  sou NUMERIC(6,2) ,  departament INT2 ,  CONSTRAINT u_nom4 UNIQUE (cognoms,nom) )</p> <ul> <li>NOT NULL.</li> </ul> <p>No existeix aquesta opci\u00f3 com a restricci\u00f3 m\u00faltiple. Per tant s'ha de definir sempre com a restricci\u00f3 de camp \u00fanic.</p> <ul> <li>FOREIGN KEY: servir\u00e0 per a definir que aquest o aquestos camps s\u00f3n una clau externa. \u00c9s la que m\u00e9s varia en la seua sintaxi, ja que hem d'especificar tant el o els camps d'aquesta taula que s\u00f3n clau externa, com la taula a la qual apunta (i en tot cas el o els camps on s'apunta, encara que si no ho posem apuntar\u00e0 a la clau principal de l'altra taula, cosa que voldrem sempre):</li> </ul> <p>[CONSTRAINT nom] FOREIGN KEY (c11 [,c12][,...]) REFERENCES taula2 [(c21 [,c22][,...])] [ON DELETE {CASCADE | SET NULL}] [ON UPDATE {CASCADE | SET NULL}]</p> <p>En l'exemple de la clau externa que apunta a la taula DEPARTAMENT quedar\u00e0 aix\u00ed:</p> <p>CREATE TABLE EMPLEAT3  ( dni VARCHAR(10) ,  nom VARCHAR ,  data_naixement DATE ,  sou NUMERIC(6,2) ,  departament INT2 , poblacio VARCHAR(50) DEFAULT 'Castell\u00f3' ,  data_incorporacio DATE DEFAULT CURRENT_DATE , CONSTRAINT ce_emp3_dep FOREIGN KEY (departament) REFERENCES DEPARTAMENT )</p> <ul> <li>CHECK: ara la condici\u00f3 de validaci\u00f3 podr\u00e0 afectar a m\u00e9s d'un camp</li> </ul> <p>Per exemple podr\u00edem exigir que la data d'incorporaci\u00f3 siga estrictament posterior a la data de naixement</p> <p>CREATE TABLE EMPLEAT3  ( dni VARCHAR(10) ,  nom VARCHAR ,  data_naixement DATE ,  sou NUMERIC(6,2) ,  departament INT2 , poblacio VARCHAR(50) DEFAULT 'Castell\u00f3' ,  data_incorporacio DATE DEFAULT CURRENT_DATE , CONSTRAINT check_dates CHECK (data_incorporacio &gt; data_naixement) )</p> <p>O una altra una miqueta m\u00e9s real, anem a agafar empleats de m\u00e9s de 18 anys, i per tant\u00a0 anem a exigir que la data d'incorporaci\u00f3 siga m\u00e9s de 18 anys posterior a la data de naixement. Per a aix\u00f2 utilitzem la funci\u00f3 AGE(f1,f2) que calcula el temps entre la data d2 i la data d1 (que ha de ser la posterior), i d'ah\u00ed extraurem els anys amb EXTRACT(year FROM ...)</p> <p>CREATE TABLE EMPLEAT3 ( dni VARCHAR(10) , nom VARCHAR , data_naixement DATE , sou NUMERIC(6,2) , departament INT2 , poblacio VARCHAR(50) DEFAULT 'Castell\u00f3' , data_incorporacio DATE DEFAULT CURRENT_DATE , CONSTRAINT check_dates  CHECK (EXTRACT(year FROM AGE(data_incorporacio,data_naixement) ) &gt;=18 ) )</p> <p>Evidentment, es poden barrejar les restriccions de camp \u00fanic i les de camp m\u00faltiple. Ac\u00ed en tenim un exemple on s'arrepleguen moltes (no totes) les restriccions anteriors. Hem posat de camp m\u00faltiple la dels 18 anys dels empleats, perqu\u00e8 no hi ha un altre remei, i tamb\u00e9 la de no repetici\u00f3 del camp nom, encara que podia ser de camp \u00fanic:</p> <p>CREATE TABLE EMPLEAT3  ( dni VARCHAR(10) CONSTRAINT cp_emp3 PRIMARY KEY ,  nom VARCHAR CONSTRAINT nn_nom NOT NULL ,  data_naixement DATE ,  sou NUMERIC(6,2) CONSTRAINT sou_positiu CHECK (sou &gt; 0) ,  departament INT2 CONSTRAINT ce_emp3_dep REFERENCES DEPARTAMENT , poblacio VARCHAR(50) DEFAULT 'Castell\u00f3' ,  data_incorporacio DATE DEFAULT CURRENT_DATE , CONSTRAINT u_nom3 UNIQUE (nom) ,  CONSTRAINT check_dates  CHECK (EXTRACT(year FROM AGE(data_incorporacio,data_naixement) ) &gt;=18 ) )</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T06_SQL_III_PostgreSQL/324_alter_table/","title":"324 alter table","text":"<p>Bases de Dades</p> <ul> <li>Tema 6: SQL - DDL i consultes d'actualitzaci\u00f3 (part III)</li> <li>3.1 Introducci\u00f3</li> <li>3.2 DDL </li> <li>3.2.1 Tipus de dades</li> <li>3.2.2 CREATE TABLE <ul> <li>Exercicis</li> </ul> </li> <li>3.2.3 Restriccions (Constraint) <ul> <li>Exercicis</li> </ul> </li> <li>3.2.4 ALTER TABLE <ul> <li>Exercicis</li> </ul> </li> <li>3.2.5 DROP TABLE</li> <li>3.2.6 \u00cdndex <ul> <li>Exercicis</li> </ul> </li> <li>3.2.7 Vistes <ul> <li>Exercicis</li> </ul> </li> <li>3.2.8. Creaci\u00f3 d'altres objectes: seq\u00fc\u00e8ncies, dominis i tipus. <ul> <li>3.2.8.1 Seq\u00fc\u00e8ncies</li> <li>3.2.8.2 Dominis</li> <li>3.2.8.3 Tipus de dades</li> </ul> </li> <li>3.3 Consultes d'actualitzaci\u00f3 </li> <li>3.3.1 INSERT <ul> <li>Exercicis</li> </ul> </li> <li>3.3.2 DELETE <ul> <li>Exercicis</li> </ul> </li> <li>3.3.3 UPDATE <ul> <li>Exercicis</li> </ul> </li> <li>Exercicis de tot el tema</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T06_SQL_III_PostgreSQL/324_alter_table/#324-alter-table","title":"3.2.4 ALTER TABLE","text":"<p>Permet modificar l'estructura d'una taula ja existent, b\u00e9 afegint, llevant o modificant camps (columnes), b\u00e9 afegint o llevant restriccions. Tamb\u00e9 servir\u00e0 per a canviar el nom d'un camp i fins i tot canviar el nom de la taula</p> <p>Sintaxi</p> <p>Per a alterar l'estructura d'algun camp o restricci\u00f3 utilitzarem aquesta sintaxi:</p> <p>ALTER TABLE taula  {ADD | DROP | ALTER} {COLUMN camp | CONSTRAINT restricci\u00f3m\u00faltiple}</p> <p>Per a canviar el nom d'un camp:</p> <p>ALTER TABLE taula  RENAME [COLUMN] camp TO nou_nom_camp</p> <p>Per a canviar el nom de la taula:</p> <p>ALTER TABLE taula  RENAME TO nou_nom_taula</p> <p>Afegir camp o restricci\u00f3</p> <p>Si volem afegir una columna o una restricci\u00f3, l'haurem de definir totalment.</p> <ul> <li>En el cas d'un camp, haurem d'especificar el nom, el tipus i opcionalment una restricci\u00f3 que afecte nom\u00e9s al camp. Per exemple, aquesta sent\u00e8ncia afegeix el camp supervisor (de tipus text de 10) a la taula EMPLEAT3. Observeu que en la definici\u00f3 del camp poden entrar restriccions de camp \u00fanic.</li> </ul> <p>ALTER TABLE EMPLEAT3  ADD COLUMN supervisor VARCHAR(10)</p> <ul> <li>En el cas d'una restricci\u00f3, aquesta ser\u00e0 del tipus de restricci\u00f3 m\u00faltiple, amb la sintaxi que vam veure en l'apartat de restriccions. Per exemple, aquesta sent\u00e8ncia afegeix la clau externa reflexiva (de EMPLEAT3 a EMPLEAT3) que indica els supervisors. El dni hauria de ser la clau principal de EMPLEAT3</li> </ul> <p>ALTER TABLE EMPLEAT3  ADD CONSTRAINT ce_emp3_emp3 FOREIGN KEY (supervisor) REFERENCES EMPLEAT3 (dni)</p> <p>Modificar un camp</p> <p>Podem fer dues coses: modificar el tipus del camp o modificar el valor per defecte (posar valor per defecte o llevar-lo)</p> <p>Per a canviar el tipus haurem d'utilitzar la sintaxi ... ALTER COLUMN camp TYPE nou_tipus . Per exemple anem a fer que el camp poblacio siga de 25 car\u00e0cters</p> <p>ALTER TABLE EMPLEAT3  ALTER COLUMN poblacio TYPE VARCHAR(25)</p> <p>Canviar el tipus de dades \u00e9s autom\u00e0tic quan els tipus s\u00f3n compatibles entre ells. Si no ho s\u00f3n ens donar\u00e0 error, per\u00f2 segurament ho podrem esquivar amb la cl\u00e0usula USING, que ens permet posar a continuaci\u00f3 el camp i aprofitem per a posar un operador de conversi\u00f3 de tipus (::) amb aquesta sintaxi:</p> <p>ALTER TABLE TAULA ALTER COLUMN camp TYPE tipus_nou USING camp::tipus_nou</p> <p>Per a canviar el valor per defecte utilitzarem la sintaxi: ... ALTER COLUMN camp {SET | DROP} DEFAULT [expressi\u00f3] </p> <p>ALTER TABLE EMPLEAT3  ALTER COLUMN poblacio DROP DEFAULT</p> <p>Esborrar camp o restricci\u00f3</p> <p>Si volem llevar un camp o una restricci\u00f3 \u00e9s suficient amb especificar el nom del camp o de la restricci\u00f3 (per aix\u00f2 pot ser molt interessant donar nom a les restriccions). En el primer exemple llevem la clau externa del supervisor. En la segona llevem el camp supervisor.</p> <p>ALTER TABLE EMPLEAT3  DROP CONSTRAINT ce_emp3_emp3;</p> <p>ALTER TABLE EMPLEAT3  DROP COLUMN supervisor</p> <p>Renomenar un camp</p> <p>Per exemple renomenem el camp data_incorporacio a data_inc:</p> <p>ALTER TABLE EMPLEAT3  RENAME COLUMN data_incorporacio TO data_inc</p> <p>Renomenar la taula</p> <p>Ara li posarem el nom EMP3 a la taula EMPLEAT3</p> <p>ALTER TABLE EMPLEAT3  RENAME TO EMP3</p> <p>Exemples</p> <ol> <li>Modificar la taula EMP3 per afegir el camp cp (codi postal) de tipus text de 5 car\u00e0cters.</li> </ol> <p>ALTER TABLE EMP3 ADD COLUMN cp VARCHAR(5);</p> <ol> <li>Modificar la taula EMP3 per modificar el camp anterior i que siga de tipus num\u00e8ric.</li> </ol> <p>ALTER TABLE EMP3 ALTER COLUMN cp TYPE NUMERIC(5) USING CP::NUMERIC;</p> <ol> <li>Modificar la taula EMP3 per afegir la restricci\u00f3 (encara que siga un poc estranya) que no es pot repetir la combinaci\u00f3 codi postal i poblaci\u00f3.</li> </ol> <p>ALTER TABLE EMP3 ADD CONSTRAINT u_cp_pobl UNIQUE (cp,poblacio);</p> <ol> <li>Modificar la taula EMP3 per esborrar la restricci\u00f3 anterior</li> </ol> <p>ALTER TABLE EMP3 DROP CONSTRAINT u_cp_pobl;</p> <ol> <li>Modificar la taula EMP3 per modificar el nom del camp cp a codi_postal</li> </ol> <p>ALTER TABLE EMP3 RENAME COLUMN\u00a0 cp TO codi_postal;</p> <ol> <li>Renomenar la taula EMP3 a EMPLEAT3</li> </ol> <p>ALTER TABLE EMP3 RENAME TO EMPLEAT3;</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T06_SQL_III_PostgreSQL/325_drop_table/","title":"325 drop table","text":"<p>Bases de Dades</p> <ul> <li>Tema 6: SQL - DDL i consultes d'actualitzaci\u00f3 (part III)</li> <li>3.1 Introducci\u00f3</li> <li>3.2 DDL </li> <li>3.2.1 Tipus de dades</li> <li>3.2.2 CREATE TABLE <ul> <li>Exercicis</li> </ul> </li> <li>3.2.3 Restriccions (Constraint) <ul> <li>Exercicis</li> </ul> </li> <li>3.2.4 ALTER TABLE <ul> <li>Exercicis</li> </ul> </li> <li>3.2.5 DROP TABLE</li> <li>3.2.6 \u00cdndex <ul> <li>Exercicis</li> </ul> </li> <li>3.2.7 Vistes <ul> <li>Exercicis</li> </ul> </li> <li>3.2.8. Creaci\u00f3 d'altres objectes: seq\u00fc\u00e8ncies, dominis i tipus. <ul> <li>3.2.8.1 Seq\u00fc\u00e8ncies</li> <li>3.2.8.2 Dominis</li> <li>3.2.8.3 Tipus de dades</li> </ul> </li> <li>3.3 Consultes d'actualitzaci\u00f3 </li> <li>3.3.1 INSERT <ul> <li>Exercicis</li> </ul> </li> <li>3.3.2 DELETE <ul> <li>Exercicis</li> </ul> </li> <li>3.3.3 UPDATE <ul> <li>Exercicis</li> </ul> </li> <li>Exercicis de tot el tema</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T06_SQL_III_PostgreSQL/325_drop_table/#325-drop-table","title":"3.2.5 DROP TABLE","text":"<p>Ens servir\u00e0 per esborrar absolutament una taula, tant les dades com l'estructura. S'ha d'anar amb compte amb ella, perqu\u00e8 \u00e9s una operaci\u00f3 que no es pot desfer, i per tant potencialment molt perillosa.</p> <p>Sintaxi</p> <p>DROP TABLE taula</p> <p>Exemples</p> <p>DROP TABLE FAMILIAR</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T06_SQL_III_PostgreSQL/326_ndex/","title":"326 ndex","text":"<p>Bases de Dades</p> <ul> <li>Tema 6: SQL - DDL i consultes d'actualitzaci\u00f3 (part III)</li> <li>3.1 Introducci\u00f3</li> <li>3.2 DDL </li> <li>3.2.1 Tipus de dades</li> <li>3.2.2 CREATE TABLE <ul> <li>Exercicis</li> </ul> </li> <li>3.2.3 Restriccions (Constraint) <ul> <li>Exercicis</li> </ul> </li> <li>3.2.4 ALTER TABLE <ul> <li>Exercicis</li> </ul> </li> <li>3.2.5 DROP TABLE</li> <li>3.2.6 \u00cdndex <ul> <li>Exercicis</li> </ul> </li> <li>3.2.7 Vistes <ul> <li>Exercicis</li> </ul> </li> <li>3.2.8. Creaci\u00f3 d'altres objectes: seq\u00fc\u00e8ncies, dominis i tipus. <ul> <li>3.2.8.1 Seq\u00fc\u00e8ncies</li> <li>3.2.8.2 Dominis</li> <li>3.2.8.3 Tipus de dades</li> </ul> </li> <li>3.3 Consultes d'actualitzaci\u00f3 </li> <li>3.3.1 INSERT <ul> <li>Exercicis</li> </ul> </li> <li>3.3.2 DELETE <ul> <li>Exercicis</li> </ul> </li> <li>3.3.3 UPDATE <ul> <li>Exercicis</li> </ul> </li> <li>Exercicis de tot el tema</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T06_SQL_III_PostgreSQL/326_ndex/#326-index","title":"3.2.6 \u00cdndex","text":"<p>Els \u00edndex s\u00f3n estructures de dades que permeten mantenir ordenada una taula respecte a un o m\u00e9s d'un camp, cadascun d'ells de forma ascendent o descendent.</p> <p>Tenir un \u00edndex per un determinat camp o camps permet reduir dr\u00e0sticament el temps utilitzat en ordenar per ells (perqu\u00e8 ja es mant\u00e9 aquest ordre) i tamb\u00e9 quan es busca un determinat valor d'aquest camp, ja que com est\u00e0 ordenat es poden fer recerques bin\u00e0ries o dicot\u00f2miques. Quan no est\u00e0 ordenat no hi ha m\u00e9s remei que fer una recerca seq\u00fcencial, que \u00e9s considerablement m\u00e9s lenta.</p> <p>De tota manera no s'ha d'abusar dels \u00edndex, ja que \u00e9s una estructura addicional de dades que ocupar\u00e0 espai, i que com s'han de mantenir els \u00edndex constantment actualitzats, cada vegada que es realitza una operaci\u00f3 d'actualitzaci\u00f3 (inserci\u00f3, modificaci\u00f3 o esborrat) s'ha de reestructurar l'\u00edndex, per a posar o llevar l'element al seu lloc.</p> <p>El seg\u00fcent v\u00eddeo intenta explicar de forma molt senzilla com es podria implementar un \u00edndex, per poder observar les caracter\u00edstiques anteriors. Hem de ser conscients, per\u00f2, que tot aquest proc\u00e9s \u00e9s transparent per a l'usuari, que nom\u00e9s notaria, en crear un \u00edndex, que els SELECT van m\u00e9s r\u00e0pids, i els INSERT, DELETE i UPDATE van m\u00e9s lents.</p> <p>Creaci\u00f3 d'\u00edndex</p> <p>A banda de la creaci\u00f3 expl\u00edcita d'\u00edndex que farem en aquesta pregunta, PostgreSQL crea impl\u00edcitament un \u00edndex cada vegada que:</p> <ul> <li>Creem una clau princpal</li> <li>Creem una restricci\u00f3 d'unicitat (UNIQUE)</li> </ul> <p>En ambd\u00f3s casos ser\u00e0 un \u00edndex que no es podr\u00e0 repetir. Per tant, en els casos anteriors no cal crear un \u00edndex, perqu\u00e8 PostgreSQL ja ho ha fet autom\u00e0ticament.</p> <p>En PostgreSQL la creaci\u00f3 d'\u00edndex \u00e9s molt completa. Anem a veure una versi\u00f3 resumida:</p> <p>CREATE [UNIQUE] INDEX nom_\u00edndex  ON taula (c1 [ASC|DESC][, c2 [ASC|DESC], ...] [NULLS { FIRST | LAST }] )</p> <p>Si posem l'opci\u00f3 UNIQUE impedir\u00e0 que es repetesquen els valors del camp (o camps) que formen l'\u00edndex, de forma similar a la restricci\u00f3 UNIQUE del CONSTRAINT.</p> <p>L'opci\u00f3 d'ordenaci\u00f3 per defecte \u00e9s l'ascendent.</p> <p>Podem fer que els nuls estiguen al principi de tot o al final de tot, segons ens convinga:</p> <ul> <li>FIRST: far\u00e0 que en l'ordenaci\u00f3 els valors nuls vagen abans de qualsevol altre valor. Aquesta \u00e9s l'opci\u00f3 per defecte si l'ordre \u00e9s descendenta m\u00e9s de crear l'\u00edndex fa que siga clau principal. Evidentment no ha d'haver una clau principal creada amb anterioritat.</li> <li>LAST: els valors nuls estaran al final de tot, despr\u00e9s de qualsevol altre valor. \u00c9s l'opci\u00f3 per defecte quan l'ordre \u00e9s ascendent.</li> </ul> <p>Exemples</p> <ol> <li>Crear un \u00edndex en la taula EMPLEAT4 per al camp departament en ordre ascendent .</li> </ol> <p>CREATE INDEX i_dep ON EMPLEAT4 (departament);</p> <ol> <li>Crear un index per al camp data_naixement (descendent) i sou (ascendent) en la taula EMPLEAT4. En els dos casos, data_naixement i sou, s'han d'ordenar els valors nuls al final</li> </ol> <p>CREATE INDEX i_dat_sou ON EMPLEAT4 (data_naixement DESC NULLS LAST, sou NULLS LAST);</p> <p>Esborrar un \u00edndex </p> <p>La sent\u00e8ncia d'esborrar un \u00edndex \u00e9s molt senzilla. Nom\u00e9s hem d'especificar el nom de l'\u00edndex i la taula on est\u00e0 definit. </p> <p>DROP INDEX nom_\u00edndex ON taula </p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T06_SQL_III_PostgreSQL/327_vistes/","title":"327 vistes","text":"<p>Bases de Dades</p> <ul> <li>Tema 6: SQL - DDL i consultes d'actualitzaci\u00f3 (part III)</li> <li>3.1 Introducci\u00f3</li> <li>3.2 DDL </li> <li>3.2.1 Tipus de dades</li> <li>3.2.2 CREATE TABLE <ul> <li>Exercicis</li> </ul> </li> <li>3.2.3 Restriccions (Constraint) <ul> <li>Exercicis</li> </ul> </li> <li>3.2.4 ALTER TABLE <ul> <li>Exercicis</li> </ul> </li> <li>3.2.5 DROP TABLE</li> <li>3.2.6 \u00cdndex <ul> <li>Exercicis</li> </ul> </li> <li>3.2.7 Vistes <ul> <li>Exercicis</li> </ul> </li> <li>3.2.8. Creaci\u00f3 d'altres objectes: seq\u00fc\u00e8ncies, dominis i tipus. <ul> <li>3.2.8.1 Seq\u00fc\u00e8ncies</li> <li>3.2.8.2 Dominis</li> <li>3.2.8.3 Tipus de dades</li> </ul> </li> <li>3.3 Consultes d'actualitzaci\u00f3 </li> <li>3.3.1 INSERT <ul> <li>Exercicis</li> </ul> </li> <li>3.3.2 DELETE <ul> <li>Exercicis</li> </ul> </li> <li>3.3.3 UPDATE <ul> <li>Exercicis</li> </ul> </li> <li>Exercicis de tot el tema</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T06_SQL_III_PostgreSQL/327_vistes/#327-vistes","title":"3.2.7 Vistes","text":"<p>Les vistes, tamb\u00e9 anomenades esquemes externs, consisteixen en visions particulars de la B.D. Es correspon al nivell extern de l'arquitectura a tres nivells. Les taules, que s\u00f3n les que realment contenen les dades i donen la visi\u00f3 global de la B.D., corresponen al nivell conceptual.</p> <p>La sintaxi b\u00e0sica \u00e9s la seg\u00fcent:</p> <p>CREATE VIEW nom_vista  AS subconsulta [WITH READ ONLY];</p> <p>on se li d\u00f3na un nom, \u00e9s el resultat d'una subconsulta (un SELECT), i tenim la possibilitat d'impedir la modificaci\u00f3 de les dades.</p> <p>Per exemple, una vista amb les comarques, el n\u00famero de poblacions de cada comarca, el total d'habitats i l'altura mitjana:</p> <p>CREATE OR REPLACE VIEW ESTADISTICA AS </p> <p>SELECT nom_c, count(nom) AS num_p,sum(poblacio) AS pobl, avg(altura) AS alt_mitjana </p> <p>FROM POBLACIONS GROUP BY nom_c ORDER BY nom_c;</p> <p>Nota</p> <p>Si voleu provar aquesta vista, ho podeu fer en la Base de Dades\u00a0geo, ja que en ella tenim dades per a la consulta que proporciona les dades a la vista.\u00a0Recordeu que ens estem connectant tots com el mateix usuari, per tant si alg\u00fa ha creat un objecte (en aquest cas una vista) no es podr\u00e0 utilitzar aquest nom per a crear un altre objecte. Per aix\u00f2 \u00e9s convenient que si feu una prova de crear un objecte, despr\u00e9s esborreu aquest objecte.** </p> <p>Observeu la sintaxi CREATE OR REPLACE, que va molt b\u00e9 per a crear, i si ja existeix per a substituir. Com que estem accedint tots com el mateix usuari, ser\u00e0 prou normal que l'objecte ja existesca per haver-lo creat un company. D'aquesta manera el substituirem. No passa res per esborrar un objecte ja existent, ja que tot a\u00e7\u00f2 s\u00f3n proves.</p> <p>La manera d'utilitzar-la \u00e9s com una taula normal, per\u00f2 ja sabem, que en realitat les dades estan en les taules.</p> <p>SELECT *  FROM ESTADISTICA;</p> <p>I fins i tot es pot jugar amb taules i vistes. En aquesta sent\u00e8ncia traurem la prov\u00edncia, nom de la comarca, n\u00famero de pobles i altura mitjana de les comarques amb 5 o menys pobles:</p> <p>SELECT provincia,COMARQUES.nom_c,num_p,alt_mitjana FROM COMARQUES , ESTADISTICA WHERE COMARQUES.nom_c=ESTADISTICA.nom_c and num_p &lt;= 5;</p> <p>Per a esborrar una vista</p> <p>DROP VIEW nom_vista</p> <p>Per exemple, per a esborrar la vista anterior:a esborrar una vista</p> <p>DROP VIEW ESTADISTICA;</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T06_SQL_III_PostgreSQL/3281_seqncies/","title":"3281 seqncies","text":"<p>Bases de Dades</p> <ul> <li>Tema 6: SQL - DDL i consultes d'actualitzaci\u00f3 (part III)</li> <li>3.1 Introducci\u00f3</li> <li>3.2 DDL </li> <li>3.2.1 Tipus de dades</li> <li>3.2.2 CREATE TABLE <ul> <li>Exercicis</li> </ul> </li> <li>3.2.3 Restriccions (Constraint) <ul> <li>Exercicis</li> </ul> </li> <li>3.2.4 ALTER TABLE <ul> <li>Exercicis</li> </ul> </li> <li>3.2.5 DROP TABLE</li> <li>3.2.6 \u00cdndex <ul> <li>Exercicis</li> </ul> </li> <li>3.2.7 Vistes <ul> <li>Exercicis</li> </ul> </li> <li>3.2.8. Creaci\u00f3 d'altres objectes: seq\u00fc\u00e8ncies, dominis i tipus. <ul> <li>3.2.8.1 Seq\u00fc\u00e8ncies</li> <li>3.2.8.2 Dominis</li> <li>3.2.8.3 Tipus de dades</li> </ul> </li> <li>3.3 Consultes d'actualitzaci\u00f3 </li> <li>3.3.1 INSERT <ul> <li>Exercicis</li> </ul> </li> <li>3.3.2 DELETE <ul> <li>Exercicis</li> </ul> </li> <li>3.3.3 UPDATE <ul> <li>Exercicis</li> </ul> </li> <li>Exercicis de tot el tema</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T06_SQL_III_PostgreSQL/3281_seqncies/#3281-sequencies","title":"3.2.8.1 Seq\u00fc\u00e8ncies","text":"<p>Tamb\u00e9 es poden crear seq\u00fc\u00e8ncies (SEQUENCE), que s\u00f3n objectes que agafen valors num\u00e8rics que van incrementant-se (com l'autonum\u00e8ric).</p> <p>CREATE SEQUENCE nom_seq\u00fc\u00e8ncia  [START WITH valor_inicial]  [INCREMENTED BY valor_increment] ... ;</p> <p>La sent\u00e8ncia \u00e9s m\u00e9s llarga, per a considerar m\u00e9s casos. Per a nosaltres est\u00e0 b\u00e9 aix\u00ed.</p> <p>Per defecte, el valor inicial \u00e9s 1, i l'increment tamb\u00e9 1.</p> <p>\u00c9s un objecte independent de les taules. S'utilitza de la seg\u00fcent manera:</p> <p>CURRVAL ('nom_seq\u00fc\u00e8ncia') torna el valor actual (ha d'estar inicialitzat)</p> <p>NEXTVAL('nom_seq\u00fc\u00e8ncia') incrementa la seq\u00fc\u00e8ncia i torna el nou valor (excepte la primera vegada que l'inicia amb el valor inicial)</p> <p>La manera habitual d'utilitzar-lo ser\u00e0 per obtenir un valor que s'afegir\u00e0 a un camp d'una taula (normalment la clau principal).</p> <p>Suposem que tenim una taula anomenada FACTURA amb l'estructura que ve a continuaci\u00f3, i volem que la clau principal siga un autonum\u00e8ric. Ho podem provar sobre la Base de Dades i usuari\u00a0proves.</p> <p>CREATE TABLE FACTURA ( num_f NUMERIC(7) CONSTRAINT cp_fact PRIMARY KEY, data DATE, client VARCHAR(10));</p> <p>Primer ens crearem la seq\u00fc\u00e8ncia:</p> <p>CREATE SEQUENCE s_num_fac START WITH 2016001;</p> <p>Despr\u00e9s l'utilitzem:</p> <p>INSERT INTO FACTURA VALUES (NEXTVAL('s_num_fac'), '15-01-2016','cli001');</p> <p>Si ara mirem el contingut de la taula FACTURA obtindrem:</p> <p></p> <p>O fins i tot en el moment de declarar la taula, li posem un valor per defecte al camp, que ser\u00e0 el seg\u00fcent de la seq\u00fc\u00e8ncia. No haurem d'introduir ara res en la columna\u00a0num_f,\u00a0 que agafa el valor de la seq\u00fc\u00e8ncia</p> <p>CREATE TABLE FACTURA2 ( num_f NUMERIC(7) CONSTRAINT cp_fact2 PRIMARY KEY DEFAULT NEXTVAL('s_num_fac'), data DATE, client VARCHAR(10));</p> <p>INSERT INTO FACTURA2(data,client) VALUES ('15-01-2016','cli001');</p> <p>Observeu tamb\u00e9 que en la taula FACTURA2, el valor comen\u00e7a per 2016002, ja que el primer valor l'hav\u00edem utilitzat en FACTURA. Per tant el contingut de la taula FACTURA2 ser\u00e0:</p> <p>Tamb\u00e9 ho podr\u00edem haver fet declarant la clau de tipus SERIAL, que el que fa \u00e9s implementar una seq\u00fc\u00e8ncia, i donar valors successius per al camp on est\u00e0 definida. Per\u00f2 d'aquesta manera la seq\u00fc\u00e8ncia comen\u00e7a sempre per 1</p> <p>CREATE TABLE FACTURA3 ( num_f SERIAL CONSTRAINT cp_fact3 PRIMARY KEY, data DATE, client VARCHAR(10));</p> <p>I despr\u00e9s fer la inserci\u00f3 d'aquesta manera:</p> <p>INSERT INTO FACTURA3(data,client) VALUES ('15-01-2016','cli001')</p> <p>Com coment\u00e0vem, el valor introdu\u00eft per la seq\u00fc\u00e8ncia ser\u00e0 1:</p> <p></p> <p>Tornarem a veure aquest exemple en les consultes d'actualitzaci\u00f3, concretament el INSERT.</p> <p>Per a esborrar una seq\u00fc\u00e8ncia utilitzarem la sent\u00e8ncia DROP SEQUENCE:</p> <p>DROP SEQUENCE s_num_fac</p> <p>De moment aquesta sent\u00e8ncia ens donaria error, ja que la taula FACTURA2 utilitza aquesta seq\u00fc\u00e8ncia. Esborrarem primer les 3 taules, i despr\u00e9s la seq\u00fc\u00e8ncia per a no interferir amb els companys/es.</p> <p>DROP TABLE FACTURA, FACTURA2, FACTURA3;</p> <p>DROP SEQUENCE s_num_fac;</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T06_SQL_III_PostgreSQL/3282_dominis/","title":"3282 dominis","text":"<p>Bases de Dades</p> <ul> <li>Tema 6: SQL - DDL i consultes d'actualitzaci\u00f3 (part III)</li> <li>3.1 Introducci\u00f3</li> <li>3.2 DDL </li> <li>3.2.1 Tipus de dades</li> <li>3.2.2 CREATE TABLE <ul> <li>Exercicis</li> </ul> </li> <li>3.2.3 Restriccions (Constraint) <ul> <li>Exercicis</li> </ul> </li> <li>3.2.4 ALTER TABLE <ul> <li>Exercicis</li> </ul> </li> <li>3.2.5 DROP TABLE</li> <li>3.2.6 \u00cdndex <ul> <li>Exercicis</li> </ul> </li> <li>3.2.7 Vistes <ul> <li>Exercicis</li> </ul> </li> <li>3.2.8. Creaci\u00f3 d'altres objectes: seq\u00fc\u00e8ncies, dominis i tipus. <ul> <li>3.2.8.1 Seq\u00fc\u00e8ncies</li> <li>3.2.8.2 Dominis</li> <li>3.2.8.3 Tipus de dades</li> </ul> </li> <li>3.3 Consultes d'actualitzaci\u00f3 </li> <li>3.3.1 INSERT <ul> <li>Exercicis</li> </ul> </li> <li>3.3.2 DELETE <ul> <li>Exercicis</li> </ul> </li> <li>3.3.3 UPDATE <ul> <li>Exercicis</li> </ul> </li> <li>Exercicis de tot el tema</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T06_SQL_III_PostgreSQL/3282_dominis/#3282-dominis","title":"3.2.8.2 Dominis","text":"<p>Els dominis s\u00f3n els conjunts de valors que pot agafar un determinat camp. Habitualment es posa senzillament un tipus de dades. Per\u00f2 el model relacional te\u00f2ric \u00e9s m\u00e9s restrictiu, i els dominis encara podrien ser subconjunts d'aquestos tipus de dades.</p> <p>Normalment aquestos subconjunts es realitzen per mig dels check, que permeten una regla de validaci\u00f3 (una condici\u00f3) per a donar les dades com a bones (per exemple, un sou sempre \u00e9s positiu, per tant, a banda de fer que siga num\u00e8ric podr\u00edem obligar a que f\u00f3ra positiu).</p> <p>PostgreSQL permet definir dominis, que seran d'un determinat tipus base, d'una grand\u00e0ria determinada (opcional), amb un valor per defecte (opcional) i fins i tot amb una cl\u00e0usula check. A partir d'aquest moment, un o m\u00e9s d'un camp els podrem definir d'aquest domini (amb l'avantatge que canviant el domini canviem el tipus de tots els camps que el tenen).</p> <p>Anem a veure alguns exemples que es poden realitzar sobre l'usuari proves.</p> <p>CREATE DOMAIN sou AS numeric(7,2) CHECK (VALUE &gt; 0);</p> <p>Si us d\u00f3na error perqu\u00e8 ja existia el domini, senzillament esborreu el domini anterior i ho torneu a provar</p> <p>Ara podr\u00edem definir la taula:</p> <p>CREATE TABLE EMPLEAT5 ( cod_e varchar(5) primary key, nom_e varchar(50), salari sou);</p> <p>Si intentem introduir la dada del sou malament (per exemple posant-lo negatiu) veurem que d\u00f3na error.</p> <p></p> <p>Un altre exemple, que farem sobre la Base de Dades proves, encara que \u00e9s un exemple basat en les taules que ten\u00edem en geo.</p> <p>En la taula de POBLACIONS tenim les coordenades (latitud i longitud). Podr\u00edem intentar fer uns dominis per a marcar l'hemisferi (N S per a latitud, i E W per a longitud), els graus de latitud (-90\u00ba a 90\u00ba), graus de longitud (-180\u00ba a 180\u00ba) en longitud, per als minuts (0' a 59') , segons (0\u201d a 59\u201d). Centrem-nos en la latitud:</p> <p>CREATE DOMAIN hemi_lat AS char(1) </p> <p>CHECK (VALUE IN ('N','S'));</p> <p>CREATE DOMAIN graus_lat AS numeric(2) </p> <p>CHECK (VALUE BETWEEN 0 AND 90);</p> <p>CREATE DOMAIN min_seg AS numeric(2) </p> <p>CHECK (VALUE BETWEEN 0 AND 59);</p> <p>Ara podr\u00edem definir una alternativa a la taula de POBLACIONS:</p> <p>CREATE TABLE POBLACIONS2  ( nom VARCHAR(50) CONSTRAINT cp_pob2 PRIMARY KEY, lat_h hemi_lat, lat_g graus_lat, lat_m min_seg, lat_s min_seg);</p> <p>i comprovar\u00edem que les latituds s'han d'introduir correctament. Si posem per exemple els minuts malament, d\u00f3na error</p> <p>INSERT INTO POBLACIONS2 VALUES('Illes Columbretes','N',39,73,57);</p> <p></p> <p>Per\u00f2 no hi ha problema si les dades s\u00f3n correctes.</p> <p>INSERT INTO POBLACIONS2 VALUES('Illes Columbretes','N',39,53,57);</p> <p></p> <p>Per a esborrar un domini, utilitzarem DROP DOMAIN.</p> <p>DROP DOMAIN sou;</p> <p>Si algun camp est\u00e0 definit amb el domini que esborrem, donar\u00e0 error. Si esborr\u00e0rem amb l'opci\u00f3 CASCADE, s'esborrarien els camps de les taules amb aquest domini. Per a deixar que els companys/es puguen treballar tamb\u00e9, esborrem tot el que hem creat:</p> <p>DROP TABLE EMPLEAT5;</p> <p>DROP DOMAIN sou;</p> <p>Encara no esborrem els dominis hemi_lat, graus_lat i min_seg, perqu\u00e8 els utilitzarem en la seg\u00fcent pregunta.</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T06_SQL_III_PostgreSQL/3283_tipus_de_dades/","title":"3283 tipus de dades","text":"<p>Bases de Dades</p> <ul> <li>Tema 6: SQL - DDL i consultes d'actualitzaci\u00f3 (part III)</li> <li>3.1 Introducci\u00f3</li> <li>3.2 DDL </li> <li>3.2.1 Tipus de dades</li> <li>3.2.2 CREATE TABLE <ul> <li>Exercicis</li> </ul> </li> <li>3.2.3 Restriccions (Constraint) <ul> <li>Exercicis</li> </ul> </li> <li>3.2.4 ALTER TABLE <ul> <li>Exercicis</li> </ul> </li> <li>3.2.5 DROP TABLE</li> <li>3.2.6 \u00cdndex <ul> <li>Exercicis</li> </ul> </li> <li>3.2.7 Vistes <ul> <li>Exercicis</li> </ul> </li> <li>3.2.8. Creaci\u00f3 d'altres objectes: seq\u00fc\u00e8ncies, dominis i tipus. <ul> <li>3.2.8.1 Seq\u00fc\u00e8ncies</li> <li>3.2.8.2 Dominis</li> <li>3.2.8.3 Tipus de dades</li> </ul> </li> <li>3.3 Consultes d'actualitzaci\u00f3 </li> <li>3.3.1 INSERT <ul> <li>Exercicis</li> </ul> </li> <li>3.3.2 DELETE <ul> <li>Exercicis</li> </ul> </li> <li>3.3.3 UPDATE <ul> <li>Exercicis</li> </ul> </li> <li>Exercicis de tot el tema</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T06_SQL_III_PostgreSQL/3283_tipus_de_dades/#3283-tipus-de-dades","title":"3.2.8.3 Tipus de dades","text":"<p>Ja hav\u00edem comentat que PosgreSQL \u00e9s molt vers\u00e0til, i permet a l'usuari crear tipus de dades personals.</p> <p>Tres s\u00f3n les maneres de crear un tipus de dades: compost, enumerat i extern.</p> <ul> <li>El compost \u00e9s com un registre, on s'especifiquen els camps i els tipus.</li> <li>Enumenat: posarem els possibles valors entre par\u00e8ntesis.</li> <li>L'extern \u00e9s molt m\u00e9s complet i complex que permet crear un nou tipus base, amb una estructura interna i amb funcions, normalment creades en C, d'entrada (per a introduir la dada) i eixida (per a representar-la), d'an\u00e0lisi, ... Aquest tipus s'escapa dels objectius d'aquest curs</li> </ul> <p>Compost</p> <p>Posarem entre par\u00e8ntesi el nom dels camps i el tipus que formaran part d'aquest tipus compost. Per exemple, sobre la Base de Dades proves:</p> <p>CREATE TYPE num_complex AS (a float4, b float4);</p> <p>que ens serviria per a representar n\u00fameros complexes. Si us d\u00f3na error perqu\u00e8 ja existieix el tipus (perqu\u00e8 l'ha creat un company/a), senzillament esborreu-lo abans i ho torneu a provar</p> <p>Un altre exemple (no cal fer-lo, \u00e9s il\u00b7lustratiu nom\u00e9s):</p> <p>CREATE TYPE lat AS ( h char(1), g numeric(2,0), m numeric(2,0), s numeric(2,0));</p> <p>per a representar la latitud, encara que podr\u00edem aprofitar els dominis creats en el punt anterior, i ens eixir\u00e0 millor (aquest s\u00ed que el podeu fer):</p> <p>CREATE TYPE lat AS ( h hemi_lat, g graus_lat, m min_seg, s min_seg);</p> <p>i el tipus lat haur\u00e0 de respectar les restriccions de cada domini dels quatre camps.</p> <p>Ara podr\u00edem definir una taula</p> <p>CREATE TABLE POBLACIONS3 ( nom VARCHAR(50) CONSTRAINT cp_pob3 PRIMARY KEY, latitud lat, comarca varchar(50));</p> <p>D'aquesta manera queda molt compacte.</p> <p>Per exemple, aquesta introducci\u00f3 de dades donar\u00e0 un error, ja que l'hemisferi no \u00e9s correcte:</p> <p>INSERT INTO POBLACIONS3 VALUES ('Castell\u00f3','(K,39,59,10)','Plana Alta');</p> <p>En canvi aquesta funcionar\u00e0 perfectament:</p> <p>INSERT INTO POBLACIONS3 VALUES ('Castell\u00f3','(N,39,59,10)','Plana Alta');</p> <p>Per a accedir als camps dels tipus compostos, b\u00e9 ja definits, b\u00e9 definits per nosaltres, haurem de posar el nom de la columna seguida d'un punt i seguit del nom del camp. Per\u00f2 en les sent\u00e8ncies SQL se'ns presenta un problema: que aquesta sintaxi serveix per a posar tamb\u00e9 el nom de la taula seguit del nom de la columna. Aix\u00ed per exemple ens donar\u00e0 error la seg\u00fcent sent\u00e8ncia, en la que volem traure el nom de la poblaci\u00f3, la latitud i si est\u00e0 en l'hemisferi nord o sud:</p> <p>SELECT nom, latitud, latitud.h FROM POBLACIONS3;</p> <p>L'error el d\u00f3na perqu\u00e8 en latitud.h espera que latitud siga una taula i h una columna. La manera d'esquivar aquest error \u00e9s posar entre par\u00e8ntesis la columna:</p> <p>SELECT nom, latitud, (latitud).h FROM POBLACIONS3;</p> <p>En el tema seg\u00fcent, el de programaci\u00f3 en PL/pgSQL veurem que all\u00e0 no caldr\u00e0 posar els par\u00e8ntesis, perqu\u00e8 no hi haur\u00e0 la confusi\u00f3 de taula.columna</p> <p>Enumerat</p> <p>El tipus enumerat \u00e9s un conjunt de dades est\u00e0tiques definides en el moment de la creaci\u00f3 del tipus, amb un ordre tamb\u00e9 predefinit. Est\u00e0 disponible des de la versi\u00f3 8.3 de PostgreSQL.</p> <p>Ac\u00ed tenim un exemple:</p> <p>CREATE TYPE d_set AS ENUM ('dilluns','dimarts','dimecres','dijous','divendres','dissabte','diumenge');</p> <p>Posteriorment el podrem utilitzar, per exemple, en la definici\u00f3 d'una taula:</p> <p>CREATE TABLE HORARI ( cod_pr NUMERIC(5) PRIMARY KEY, d_tut d_set, h_tut NUMERIC(4,2));</p> <p>Ara el podem utilitzar. Haurem de tenir en compte que els valors s\u00f3n \u00fanicament els definits. I s'ha de respectar maj\u00fascules i minuscules.</p> <p>INSERT INTO HORARI VALUES (1,'dimarts',10);</p> <p>En canvi, aquesta donaria error:</p> <p>INSERT INTO HORARI VALUES (2,'Dimecres',12);</p> <p>ja que el nom de la setmana comen\u00e7a en maj\u00fascula.</p> <p>Introdu\u00efm algunes dades m\u00e9s</p> <p>INSERT INTO HORARI VALUES (2, 'dimecres',12) , (3,'dilluns',9) , (4,'divendres',11);</p> <p>Podem comprovar com l'ordre predefint \u00e9s el del moment de la creaci\u00f3 del tipus:</p> <p>SELECT * FROM HORARI ORDER BY d_tut;</p> <p>I com tamb\u00e9 es pot comprovar en aquesta sent\u00e8ncia:</p> <p>SELECT * FROM HORARI WHERE d_tut &gt; 'dimarts';</p> <p>on nom\u00e9s eixiran les files corresponents al dimecres i al divendres (files 2 i 4).</p> <p>Per \u00faltim, anem a esborrar els objectes que hem creat, per a no interferir amb els companys:</p> <p>DROP TABLE POBLACIONS2 , POBLACIONS3 , HORARI ;</p> <p>DROP TYPE num_complex , lat , d_set ;</p> <p>DROP DOMAIN hemi_lat , graus_lat , min_seg ;</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T06_SQL_III_PostgreSQL/328_creaci_daltres_objectes_seqncies_dominis_i_tipus/","title":"328 creaci daltres objectes seqncies dominis i tipus","text":"<p>Bases de Dades</p> <ul> <li>Tema 6: SQL - DDL i consultes d'actualitzaci\u00f3 (part III)</li> <li>3.1 Introducci\u00f3</li> <li>3.2 DDL </li> <li>3.2.1 Tipus de dades</li> <li>3.2.2 CREATE TABLE <ul> <li>Exercicis</li> </ul> </li> <li>3.2.3 Restriccions (Constraint) <ul> <li>Exercicis</li> </ul> </li> <li>3.2.4 ALTER TABLE <ul> <li>Exercicis</li> </ul> </li> <li>3.2.5 DROP TABLE</li> <li>3.2.6 \u00cdndex <ul> <li>Exercicis</li> </ul> </li> <li>3.2.7 Vistes <ul> <li>Exercicis</li> </ul> </li> <li>3.2.8. Creaci\u00f3 d'altres objectes: seq\u00fc\u00e8ncies, dominis i tipus. <ul> <li>3.2.8.1 Seq\u00fc\u00e8ncies</li> <li>3.2.8.2 Dominis</li> <li>3.2.8.3 Tipus de dades</li> </ul> </li> <li>3.3 Consultes d'actualitzaci\u00f3 </li> <li>3.3.1 INSERT <ul> <li>Exercicis</li> </ul> </li> <li>3.3.2 DELETE <ul> <li>Exercicis</li> </ul> </li> <li>3.3.3 UPDATE <ul> <li>Exercicis</li> </ul> </li> <li>Exercicis de tot el tema</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T06_SQL_III_PostgreSQL/328_creaci_daltres_objectes_seqncies_dominis_i_tipus/#328-creacio-daltres-objectes-sequencies-dominis-i-tipus","title":"3.2.8. Creaci\u00f3 d'altres objectes: seq\u00fc\u00e8ncies, dominis i tipus.","text":"<p>Una de les caracter\u00edstiques de PostgreSQL \u00e9s la seua gran versatilitat.</p> <p>En concret es poden crear molts objectes. A banda dels habituals, vistes, seq\u00fc\u00e8ncies, ... es poden xcrear m\u00e9s tipus d'objectes. En aquest curs donarem una ulladeta als dominis i la definici\u00f3 de nous tipus de dades.</p> <p>Hem de tenir en consideraci\u00f3 que tots ens connectarem com el mateix usuari per a fer proves. Per tant els objectes que creem poden fastidiar a altres companys si utilitzem tots els mateixos noms.</p> <p>En altres SGBD (com per exemple Oracle) existeix la possibilitat de crear els objectes posant CREATE OR REPLACE ..., que si no existeix el crea, i si existeix el substitueix. Lamentablement en PostgreSQL dep\u00e9n de la versi\u00f3: en les m\u00e9s modernes s\u00ed que es pot, per\u00f2 en versions anteriors (com la 8.4 que \u00e9s la que tenim ara en el servidor) no podrem, excepte en les vistes i les funcions.\u00a0</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T06_SQL_III_PostgreSQL/32_ddl/","title":"32 ddl","text":"<p>Bases de Dades</p> <ul> <li>Tema 6: SQL - DDL i consultes d'actualitzaci\u00f3 (part III)</li> <li>3.1 Introducci\u00f3</li> <li>3.2 DDL </li> <li>3.2.1 Tipus de dades</li> <li>3.2.2 CREATE TABLE <ul> <li>Exercicis</li> </ul> </li> <li>3.2.3 Restriccions (Constraint) <ul> <li>Exercicis</li> </ul> </li> <li>3.2.4 ALTER TABLE <ul> <li>Exercicis</li> </ul> </li> <li>3.2.5 DROP TABLE</li> <li>3.2.6 \u00cdndex <ul> <li>Exercicis</li> </ul> </li> <li>3.2.7 Vistes <ul> <li>Exercicis</li> </ul> </li> <li>3.2.8. Creaci\u00f3 d'altres objectes: seq\u00fc\u00e8ncies, dominis i tipus. <ul> <li>3.2.8.1 Seq\u00fc\u00e8ncies</li> <li>3.2.8.2 Dominis</li> <li>3.2.8.3 Tipus de dades</li> </ul> </li> <li>3.3 Consultes d'actualitzaci\u00f3 </li> <li>3.3.1 INSERT <ul> <li>Exercicis</li> </ul> </li> <li>3.3.2 DELETE <ul> <li>Exercicis</li> </ul> </li> <li>3.3.3 UPDATE <ul> <li>Exercicis</li> </ul> </li> <li>Exercicis de tot el tema</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T06_SQL_III_PostgreSQL/32_ddl/#32-ddl","title":"3.2 DDL","text":"<p>DDL (Data Definition Language) o Llenguatge de Definici\u00f3 de Dades \u00e9s el conjunt de sent\u00e8ncies que ens permeten definir, retocar o esborrar l'estructura de la Base de Dades. I com que l'estructura b\u00e0sica d'una Base de Dades Relacional \u00e9s la taula, ens dedicarem b\u00e0sicament a estudiar les sent\u00e8ncies que ens permeten definir les taules (o modificar-les o esborrar-les), amb totes les restriccions que hem vist en el Model Relacional: clau principal, claus externes, camps no nuls, ... Tamb\u00e9 veurem altres objectes que podrem definir, sobretot vistes, que es corresponen a l'esquema extern que vam veure en el Tema 1, \u00e9s a dir, la visi\u00f3 particular que pot tenir un usuari.</p> <p>Seran 3 sent\u00e8ncies les que veurem:</p> <ul> <li>CREATE, que permet crear un objecte nou.</li> <li>DROP, que permet esborrar un objecte ja existent.</li> <li>ALTER, que permet modificar un objecte ja existent.</li> </ul> <p>En el moment de crear una taula definirem tots els seus camps, amb les restriccions pertinents a cadascun d'ells. Cada camp haur\u00e0 de ser d'un tipus de dades. En cada SGBD hi ha uns tipus de dades particulars, encara que els m\u00e9s b\u00e0sics s\u00f3n similars, i en ells ser\u00e0 on incidirem m\u00e9s.</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T06_SQL_III_PostgreSQL/331_insert/","title":"331 insert","text":"<p>Bases de Dades</p> <ul> <li>Tema 6: SQL - DDL i consultes d'actualitzaci\u00f3 (part III)</li> <li>3.1 Introducci\u00f3</li> <li>3.2 DDL </li> <li>3.2.1 Tipus de dades</li> <li>3.2.2 CREATE TABLE <ul> <li>Exercicis</li> </ul> </li> <li>3.2.3 Restriccions (Constraint) <ul> <li>Exercicis</li> </ul> </li> <li>3.2.4 ALTER TABLE <ul> <li>Exercicis</li> </ul> </li> <li>3.2.5 DROP TABLE</li> <li>3.2.6 \u00cdndex <ul> <li>Exercicis</li> </ul> </li> <li>3.2.7 Vistes <ul> <li>Exercicis</li> </ul> </li> <li>3.2.8. Creaci\u00f3 d'altres objectes: seq\u00fc\u00e8ncies, dominis i tipus. <ul> <li>3.2.8.1 Seq\u00fc\u00e8ncies</li> <li>3.2.8.2 Dominis</li> <li>3.2.8.3 Tipus de dades</li> </ul> </li> <li>3.3 Consultes d'actualitzaci\u00f3 </li> <li>3.3.1 INSERT <ul> <li>Exercicis</li> </ul> </li> <li>3.3.2 DELETE <ul> <li>Exercicis</li> </ul> </li> <li>3.3.3 UPDATE <ul> <li>Exercicis</li> </ul> </li> <li>Exercicis de tot el tema</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T06_SQL_III_PostgreSQL/331_insert/#331-insert","title":"3.3.1 INSERT","text":"<p>Servir\u00e0 per a introduir noves files en una determinada taula. Hi ha dues variants d'aquesta sent\u00e8ncia. La primera servir\u00e0 per a introduir noves files proporcionant-li les dades, \u00e9s a dir, indicant expressament els nous valors dels camps. L'altra podria servir per a introduir noves files de forma m\u00e9s massiva, agafant les dades de les taules ja existents per mig d'una sent\u00e8ncia SELECT.</p> <p>Sintaxi per a inserci\u00f3 amb valors</p> <p>INSERT INTO taula [ (camp1 [,camp2 [,...]]) ]  VALUES (valor1 [,valor2 [,...]]) [,(...)]</p> <p>Com es pot comprovar d'aquesta manera s'introduir\u00e0 una fila nova, i es proporcionen les dades directament, com a constants. Opcionalment podem introduir els valors per a una segona fila o quantes es vulguen, sempre posant les dades de cada fila entre par\u00e8ntesis, i si hi ha m\u00e9s d'una fila, separats per comes.</p> <p>\u00c9s opcional posar la llista de camps de la taula. Si no es posen, s'haur\u00e0 de posar un valor per a cada camp de la taula, i en el mateix ordre com estan definits en la taula.</p> <p>Si posem expressament els camps de la taula, els podrem posar amb l'ordre que vulguem, i no caldr\u00e0 posar-los tots. Els camps no especificats quedaran amb el valor nul (a no ser que tinguen un valor predeterminat, un valor per defecte). Per tant, haurem de posar obligat\u00f2riament tots els camps definits com a no nuls (inclosa la clau principal).</p> <p>Per a posar el valor nul a un camp posarem expl\u00edcitament NULL.</p> <p>Si tenim definit un camp autonum\u00e8ric (SERIAL) i volem continuar amb el seg\u00fcent de la seq\u00fc\u00e8ncia, no li hem de posar cap valor. Per tant en la sent\u00e8ncia SQL no haur\u00e0 de constar el camp: haurem de posar la llista de camps, i en aquest no ha d'estar el camp autonum\u00e8ric. Veurem despr\u00e9s un exemple per veure-ho m\u00e9s clar.</p> <p>Per contra, podem trencar la seq\u00fc\u00e8ncia posant-li un valor al camp autonum\u00e8ric, per\u00f2 aix\u00f2 no haur\u00e0 modificat la seq\u00fc\u00e8ncia. Si volem modificar-la haur\u00edem de fer-ho amb la sent\u00e8ncia ALTER SEQUENCE.</p> <p>Exemples</p> <ol> <li>Introduir un departament nou amb les seg\u00fcents dades: N\u00famero: 6; Nom: Personal; Director: 18922222 i Data: 01/05/99. La taula DEPARTAMENT la vam crear en la pregunta 3.2.3 (Restriccions)</li> </ol> <p>INSERT INTO DEPARTAMENT  VALUES (6,'Personal','18922222','01/05/99');</p> <ol> <li>Introduir dos departaments nous, aquest vegada sense posar la data: N\u00famero: 7; Nom: Vendes; Director: 18876543.\u00a0 I N\u00famero: 8; Nom: Internacional; Director: 18999999. Podem posar a m\u00e9s l'ordre que vulguem:</li> </ol> <p>INSERT INTO DEPARTAMENT (num_d,director,nom_d)  VALUES (7,'18876543','Vendes') , (8,'18999999','Internacional');</p> <p>Tamb\u00e9 ho pod\u00edem haver fet aix\u00ed. Observeu que ara l'ordre ha de ser exactament el de la definici\u00f3 de la taula.</p> <p>INSERT INTO DEPARTAMENT  VALUES (7,'Vendes','18876543',NULL) , (8,'Internacional','18999999',NULL);</p> <ol> <li>Introduir 3 empleats en la taula EMPLEAT1, amb els valors seg\u00fcents (la taula EMPLEAT1 la vam crear en la primera sent\u00e8ncia d'exemple de la pregunta 3.2.2, CREATE TABLE):</li> <li>Dni: 11111111a; Nom: Albert</li> <li>Dni: 22222222b; Nom: Berta</li> <li>Dni: 33333333c; Nom: Cl\u00e0udia</li> </ol> <p>INSERT INTO EMPLEAT1  VALUES ('11111111a','Albert') , ('22222222b','Berta') , ('33333333c','Cl\u00e0udia')</p> <ol> <li>Introduir 3 empleats en la taula EMPLEAT2, amb els valors seg\u00fcents (la taula EMPLEAT2 la vam crear en la segona sent\u00e8ncia d'exemple de la pregunta 3.2.2, CREATE TABLE):</li> <li>Dni: 44444444d; Nom: David; Departament: 6; Sou: 1000</li> <li>Dni: 55555555e; Nom: Elena; Departament: 6; Sou: 1500</li> <li>Dni: 66666666f; Nom: Ferran; Departament: 7; Sou: 1750</li> </ol> <p>INSERT INTO EMPLEAT2 (dni,nom,departament,sou) VALUES ('44444444d','David',6,1000) , ('55555555e','Elena',6,1500) , ('66666666f','Ferran',7,1750)</p> <ol> <li>Suposem que tenim una taula de FACTURES en la BD proves, amb una clau principal que \u00e9s un autonum\u00e8ric (SERIAL). Com volem practicar \u00fanicament l'autonum\u00e8ric, la crearem senzilleta, amb la seg\u00fcent estructura:</li> </ol> <p>CREATE TABLE FACTURES ( num_f SERIAL PRIMARY KEY, descripcio VARCHAR, import NUMERIC );</p> <p>La manera d'anar introduint normalment ser\u00e0 sense especificar num_f, per a que vaja agafant valors consecutius.</p> <p>INSERT INTO FACTURES (descripcio,import) VALUES ('Factura 1',54.23);</p> <p>Per\u00f2 si volem trencar la seq\u00fc\u00e8ncia, s\u00ed que posarem num_f.</p> <p>INSERT INTO FACTURES VALUES (2016001,'Factura 1 del 2016',23.98);</p> <p>Aix\u00f2 s\u00ed, si introdu\u00efm un altra fila sense especificar el n\u00famero de factura, l'agafar\u00e0 de la seq\u00fc\u00e8ncia, que no s'hava modificat, i per tant el valor que ens donar\u00e0 ser\u00e0 2.</p> <p>INSERT INTO FACTURES (descripcio,import) VALUES ('Factura 2',36.27);</p> <p>Per a canviar definitivament el valor que ha d'anar autoincrementant-se, haur\u00edem de modificar la seq\u00fc\u00e8ncia (ALTER SEQUENCE).</p> <p>Despr\u00e9s de les 3 insercions anteriors, el contingut de la taula FACTURES ser\u00e0 aquest:</p> <p></p> <p>Sintaxi per a inserci\u00f3 amb subconsulta</p> <p>INSERT INTO taula [ (camp1 [,camp2 [,...]]) ]  SELECT ...</p> <p>\u00c9s a dir, les dades que van a inserir-se les traiem a partir d'una sent\u00e8ncia SELECT. La sent\u00e8ncia SELECT pot ser tan complicada com fa\u00e7a falta, i podem posar les cl\u00e0usules necess\u00e0ries: WHERE, GROUP BY, ... El requisit \u00e9s que haur\u00e0 de tornar tants camps com tinga la taula o com estiguen especificats en la sent\u00e8ncia INSERT, i que les dades que tornen siguen del mateix tipus (o tipus compatibles, encara que Access pot fer una conversi\u00f3 de tipus autom\u00e0tica). Igual que en l'anterior format, quan no s'especifique un camp se li assignar\u00e0 el valor nul, o el valor predeterminat si en t\u00e9 definit.</p> <p>Es podria especificar fins i tot una taula d'una base de dades externa. Consulteu la sent\u00e8ncia SELECT, l'apartat \"Especificaci\u00f3 d'una B.D. externa\".</p> <p>Exemples</p> <ol> <li>Inserir tots els registres de la taula EMPLEAT1 en EMPLEAT3 , suposant que existeixen aquestes taules i encara que tenen una estructura diferent, les dues tenen els camps dni i nom. Si no existeix la taula EMPLEAT3, pots tornar a crear-la, utilitzant l'\u00faltima sent\u00e8ncia de la pregunta 3.2.3 (Restriccions)</li> </ol> <p>INSERT INTO EMPLEAT3(dni,nom)  SELECT dni,nom FROM EMPLEAT1;</p> <ol> <li>Inserir en la taula EMPLEAT3 tots els empleats de la taula EMPLEAT2 dels departaments 6 i 7.</li> </ol> <p>INSERT INTO EMPLEAT3  SELECT * FROM EMPLEAT2  WHERE departament IN (6,7);</p> <ol> <li>Inserir en la taula EMPLEAT3 els empleats que tenen m\u00e9s d'un familiar. Aquesta sent\u00e8ncia no la podrem executar, ja que no tenim la taula FAMILIAR. Est\u00e0 \u00fanicament de manera il\u00b7lustrativa.</li> </ol> <p>INSERT INTO EMPLEAT3  SELECT * FROM EMPLEAT  WHERE dni IN (SELECT dni  FROM FAMILIAR  GROUP BY dni  HAVING COUNT(*) &gt; 1);</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T06_SQL_III_PostgreSQL/332_delete/","title":"332 delete","text":"<p>Bases de Dades</p> <ul> <li>Tema 6: SQL - DDL i consultes d'actualitzaci\u00f3 (part III)</li> <li>3.1 Introducci\u00f3</li> <li>3.2 DDL </li> <li>3.2.1 Tipus de dades</li> <li>3.2.2 CREATE TABLE <ul> <li>Exercicis</li> </ul> </li> <li>3.2.3 Restriccions (Constraint) <ul> <li>Exercicis</li> </ul> </li> <li>3.2.4 ALTER TABLE <ul> <li>Exercicis</li> </ul> </li> <li>3.2.5 DROP TABLE</li> <li>3.2.6 \u00cdndex <ul> <li>Exercicis</li> </ul> </li> <li>3.2.7 Vistes <ul> <li>Exercicis</li> </ul> </li> <li>3.2.8. Creaci\u00f3 d'altres objectes: seq\u00fc\u00e8ncies, dominis i tipus. <ul> <li>3.2.8.1 Seq\u00fc\u00e8ncies</li> <li>3.2.8.2 Dominis</li> <li>3.2.8.3 Tipus de dades</li> </ul> </li> <li>3.3 Consultes d'actualitzaci\u00f3 </li> <li>3.3.1 INSERT <ul> <li>Exercicis</li> </ul> </li> <li>3.3.2 DELETE <ul> <li>Exercicis</li> </ul> </li> <li>3.3.3 UPDATE <ul> <li>Exercicis</li> </ul> </li> <li>Exercicis de tot el tema</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T06_SQL_III_PostgreSQL/332_delete/#332-delete","title":"3.3.2 DELETE","text":"<p>Aquesta sent\u00e8ncia servir\u00e0 per esborrar files senceres d'una determinada taula.</p> <p>Si es volen esborrar nom\u00e9s alguns camps d'una o unes determinades files, no s'ha d'utilitzar aquesta sent\u00e8ncia, sin\u00f3 que s'haur\u00e0 d'utilitzar la sent\u00e8ncia UPDATE per a posar els camps a NULL.</p> <p>Sintaxi</p> <p>DELETE FROM taula  [WHERE condici\u00f3]</p> <p>S'esborraran les files que acomplesquen la condici\u00f3. Si no es posa el WHERE s'esborraran tetes les files de la taula (per\u00f2 no la mateixa taula, l'estructura; \u00e9s a dir, continuar\u00e0 existint la taula, per\u00f2 buida).</p> <p>Per la perillositat de la sent\u00e8ncia, \u00e9s convenient fer primer una sent\u00e8ncia SELECT, i quan estiguem segurs que se seleccionen nom\u00e9s les files que volem esborrar, canviar-la per DELETE. Tamb\u00e9 \u00e9s molt convenient fer c\u00f2pies de seguretat de les taules o de tota la Base de Dades.</p> <p>Exemples</p> <ol> <li>Esborrar totes les files de EMPLEAT2</li> </ol> <p>DELETE FROM EMPLEAT2;</p> <ol> <li>Esborrar d'EMPLEAT3 els empleats del departament 7</li> </ol> <p>DELETE FROM EMPLEAT3 WHERE departament=7;</p> <ol> <li>Esborrar d'EMPLEAT3 els empleats majors de 47 anys (en realitat no s'esborrar\u00e0 cap perqu\u00e8 no tenim introdu\u00efda la data de naixement)</li> </ol> <p>DELETE FROM EMPLEAT3 WHERE EXTRACT(year FROM AGE(CURRENT_DATE,data_naixement) )&gt;=47;</p> <ol> <li>Esborrar d'EMPLEAT aquells empleats que trebalen en projectes menys de 20 hores (no es molt convenient confirmar l'eliminaci\u00f3 dels registres ja que ens quedar\u00edem sense dades importants)</li> </ol> <p>DELETE FROM EMPLEAT WHERE dni IN (SELECT dni FROM TREBALLA GROUP BY dni HAVING SUM(hores)&lt;20);</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T06_SQL_III_PostgreSQL/333_update/","title":"333 update","text":"<p>Bases de Dades</p> <ul> <li>Tema 6: SQL - DDL i consultes d'actualitzaci\u00f3 (part III)</li> <li>3.1 Introducci\u00f3</li> <li>3.2 DDL </li> <li>3.2.1 Tipus de dades</li> <li>3.2.2 CREATE TABLE <ul> <li>Exercicis</li> </ul> </li> <li>3.2.3 Restriccions (Constraint) <ul> <li>Exercicis</li> </ul> </li> <li>3.2.4 ALTER TABLE <ul> <li>Exercicis</li> </ul> </li> <li>3.2.5 DROP TABLE</li> <li>3.2.6 \u00cdndex <ul> <li>Exercicis</li> </ul> </li> <li>3.2.7 Vistes <ul> <li>Exercicis</li> </ul> </li> <li>3.2.8. Creaci\u00f3 d'altres objectes: seq\u00fc\u00e8ncies, dominis i tipus. <ul> <li>3.2.8.1 Seq\u00fc\u00e8ncies</li> <li>3.2.8.2 Dominis</li> <li>3.2.8.3 Tipus de dades</li> </ul> </li> <li>3.3 Consultes d'actualitzaci\u00f3 </li> <li>3.3.1 INSERT <ul> <li>Exercicis</li> </ul> </li> <li>3.3.2 DELETE <ul> <li>Exercicis</li> </ul> </li> <li>3.3.3 UPDATE <ul> <li>Exercicis</li> </ul> </li> <li>Exercicis de tot el tema</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T06_SQL_III_PostgreSQL/333_update/#333-update","title":"3.3.3 UPDATE","text":"<p>Aquesta sent\u00e8ncia servir\u00e0 per a modificar algun o alguns camps de determinades files d'una taula. </p> <p>En concret tamb\u00e9 servir\u00e0 per \"esborrar\" el contingut d'algun camp d'alguna fila. El que farem ser\u00e0 posar a NULL aquest camp.\u00a0 </p> <p>Sintaxi </p> <p>UPDATE taula  SET camp1=valor1 [ ,camp2=valor2 [,...] ] [ WHERE condici\u00f3]; </p> <p>Posarem per tant, despr\u00e9s d'especificar la taula, el camp (o camps) que volem canviar seguit del nou valor. En cas de voler canviar m\u00e9s d'un camp, aniran separats per comes. </p> <p>Nom\u00e9s canviaran els valors de les files que acomplesquen la condici\u00f3. Si no es posa condici\u00f3 es modificaran totes les files. </p> <p>Farem la mateixa consideraci\u00f3 de perillositat que en el DELETE: \u00e9s convenient fer primer una sent\u00e8ncia SELECT, i quan estiguem segurs que se seleccionen nom\u00e9s les files que volem modificar, canviar-la per UPDATE amb la modificaci\u00f3 dels valors. Tamb\u00e9 \u00e9s molt convenient fer c\u00f2pies de seguretat de les taules o de tota la Base de Dades. </p> <p>Exemples</p> <ol> <li>Esborrar totes les dates d'incorporaci\u00f3 de la taula EMPLEAT3</li> </ol> <p>UPDATE EMPLEAT3  SET data_incorporacio=NULL;</p> <ol> <li>Augmentar el sou un 5% als empleats del departament 6 de la taula EMPLEAT3.</li> </ol> <p>UPDATE EMPLEAT3  SET sou = sou * 1.05 WHERE departament=6;</p> <ol> <li>Canviar la poblaci\u00f3 a Ares i el departament al 8, a tots els empleats de Castell\u00f3 de la taula EMPLEAT3</li> </ol> <p>UPDATE EMPLEAT3  SET departament=8, </p> <p>poblacio='Ares'</p> <p>WHERE poblacio='Castell\u00f3';</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T06_SQL_III_PostgreSQL/33_consultes_dactualitzaci/","title":"33 consultes dactualitzaci","text":"<p>Bases de Dades</p> <ul> <li>Tema 6: SQL - DDL i consultes d'actualitzaci\u00f3 (part III)</li> <li>3.1 Introducci\u00f3</li> <li>3.2 DDL </li> <li>3.2.1 Tipus de dades</li> <li>3.2.2 CREATE TABLE <ul> <li>Exercicis</li> </ul> </li> <li>3.2.3 Restriccions (Constraint) <ul> <li>Exercicis</li> </ul> </li> <li>3.2.4 ALTER TABLE <ul> <li>Exercicis</li> </ul> </li> <li>3.2.5 DROP TABLE</li> <li>3.2.6 \u00cdndex <ul> <li>Exercicis</li> </ul> </li> <li>3.2.7 Vistes <ul> <li>Exercicis</li> </ul> </li> <li>3.2.8. Creaci\u00f3 d'altres objectes: seq\u00fc\u00e8ncies, dominis i tipus. <ul> <li>3.2.8.1 Seq\u00fc\u00e8ncies</li> <li>3.2.8.2 Dominis</li> <li>3.2.8.3 Tipus de dades</li> </ul> </li> <li>3.3 Consultes d'actualitzaci\u00f3 </li> <li>3.3.1 INSERT <ul> <li>Exercicis</li> </ul> </li> <li>3.3.2 DELETE <ul> <li>Exercicis</li> </ul> </li> <li>3.3.3 UPDATE <ul> <li>Exercicis</li> </ul> </li> <li>Exercicis de tot el tema</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T06_SQL_III_PostgreSQL/33_consultes_dactualitzaci/#33-consultes-dactualitzacio","title":"3.3 Consultes d'actualitzaci\u00f3","text":"<p>La consulta SELECT ens permetia consultar la informaci\u00f3 ja introdu\u00efda. Les sent\u00e8ncies de DDL ens permeten crear (o modificar o esborrar) les estructures: taules, \u00edndex, o altres objectes. </p> <p>Ens falta, en SQL, aquelles sent\u00e8ncies que ens han de permetre alterar les dades. \u00danicament en s\u00f3n 3 sent\u00e8ncies, i cap d'elles modifica les estructures; \u00e9s a dir, l'estructura de les taules quedar\u00e0 intancta, i nom\u00e9s es modificar\u00e0 el seu contingut. </p> <ul> <li> <p>INSERT , per a introduir files noves a la taula.</p> </li> <li> <p>DELETE, per a esborrar files senceres de la taula.</p> </li> <li> <p>UPDATE, per a modificar el contigut d'una o m\u00e9s files ja existents.</p> </li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T06_SQL_III_PostgreSQL/exercicis/","title":"Exercicis","text":"<p>Bases de Dades</p> <ul> <li>Tema 6: SQL - DDL i consultes d'actualitzaci\u00f3 (part III)</li> <li>3.1 Introducci\u00f3</li> <li>3.2 DDL </li> <li>3.2.1 Tipus de dades</li> <li>3.2.2 CREATE TABLE <ul> <li>Exercicis</li> </ul> </li> <li>3.2.3 Restriccions (Constraint) <ul> <li>Exercicis</li> </ul> </li> <li>3.2.4 ALTER TABLE <ul> <li>Exercicis</li> </ul> </li> <li>3.2.5 DROP TABLE</li> <li>3.2.6 \u00cdndex <ul> <li>Exercicis</li> </ul> </li> <li>3.2.7 Vistes <ul> <li>Exercicis</li> </ul> </li> <li>3.2.8. Creaci\u00f3 d'altres objectes: seq\u00fc\u00e8ncies, dominis i tipus. <ul> <li>3.2.8.1 Seq\u00fc\u00e8ncies</li> <li>3.2.8.2 Dominis</li> <li>3.2.8.3 Tipus de dades</li> </ul> </li> <li>3.3 Consultes d'actualitzaci\u00f3 </li> <li>3.3.1 INSERT <ul> <li>Exercicis</li> </ul> </li> <li>3.3.2 DELETE <ul> <li>Exercicis</li> </ul> </li> <li>3.3.3 UPDATE <ul> <li>Exercicis</li> </ul> </li> <li>Exercicis de tot el tema</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T06_SQL_III_PostgreSQL/exercicis/#exercicis","title":"Exercicis","text":""},{"location":"BD-T06_SQL_III_PostgreSQL/exercicis/#exercicis-apartat-322","title":"Exercicis apartat 3.2.2","text":"<p>Al llarg d'aquesta tercera part, en el conjunt d'exercicis de DDL, crearem tota l'estructura de la Base de Dades FACTURA, per\u00f2 per a no interferir cadasc\u00fa amb els altres companys, cadasc\u00fa es connectar\u00e0 a la seua Base de Dades f_grup_9999x (on grup \u00e9s el vostre grup p.ex. 1cfsg, 1cfsh... ,\u00a0 9999 s\u00f3n les 4 \u00faltimes xifres del vostre DNI, i x la lletra del NIF).</p> <p>L'esquema Entitat-Relaci\u00f3 i l'esquema relacional que implementarem ser\u00e0 el seg\u00fcent:</p> <p></p> <p>En la Base de Dades\u00a0anomenada \u00a0f_grup_9999x (on grup \u00e9s el vostre grup,\u00a0 9999 s\u00f3n les 4 \u00faltimes xifres del vostre DNI, i x la lletra del NIF), connectant com un usuari amb el mateix nom i contrasenya:</p> <p>6.77 Creeu la taula CATEGORIA, amb els mateixos camps i del mateix tipus que en la taula CATEGORIA de FACTURA, per\u00f2 de moment sense clau principal ni cap altra restricci\u00f3. Guardeu la consulta de creaci\u00f3 com Ex_6_77.sql</p> <p>6.78 Creeu la taula ARTICLE, tamb\u00e9 sense restriccions. Guardar la consulta com Ex_6_78.sql</p> <p>Nota</p> <p>Durant tots aquestos exercicis de DDL pot ser molt convenient tenir obertes les dues connexions: la de FACTURA (per anar consultant) i la de f_grup_9999x (per anar creant i modificant), on grup \u00e9s el vostre grup, 9999 s\u00f3n les 4 \u00faltimes xifres del vostre DNI, i x la lletra del NIF.</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T06_SQL_III_PostgreSQL/exercicis0/","title":"Exercicis0","text":"<p>Bases de Dades</p> <ul> <li>Tema 6: SQL - DDL i consultes d'actualitzaci\u00f3 (part III)</li> <li>3.1 Introducci\u00f3</li> <li>3.2 DDL </li> <li>3.2.1 Tipus de dades</li> <li>3.2.2 CREATE TABLE <ul> <li>Exercicis</li> </ul> </li> <li>3.2.3 Restriccions (Constraint) <ul> <li>Exercicis</li> </ul> </li> <li>3.2.4 ALTER TABLE <ul> <li>Exercicis</li> </ul> </li> <li>3.2.5 DROP TABLE</li> <li>3.2.6 \u00cdndex <ul> <li>Exercicis</li> </ul> </li> <li>3.2.7 Vistes <ul> <li>Exercicis</li> </ul> </li> <li>3.2.8. Creaci\u00f3 d'altres objectes: seq\u00fc\u00e8ncies, dominis i tipus. <ul> <li>3.2.8.1 Seq\u00fc\u00e8ncies</li> <li>3.2.8.2 Dominis</li> <li>3.2.8.3 Tipus de dades</li> </ul> </li> <li>3.3 Consultes d'actualitzaci\u00f3 </li> <li>3.3.1 INSERT <ul> <li>Exercicis</li> </ul> </li> <li>3.3.2 DELETE <ul> <li>Exercicis</li> </ul> </li> <li>3.3.3 UPDATE <ul> <li>Exercicis</li> </ul> </li> <li>Exercicis de tot el tema</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T06_SQL_III_PostgreSQL/exercicis0/#exercicis","title":"Exercicis","text":""},{"location":"BD-T06_SQL_III_PostgreSQL/exercicis0/#exercicis-apartat-323","title":"Exercicis apartat 3.2.3","text":"<p>En f_grup_9999x (on grup \u00e9s el vostre grup,\u00a0 9999 s\u00f3n les 4 \u00faltimes xifres del vostre DNI, i x la lletra del NIF)</p> <p>6.79 Crear la taula PROVINCIA, amb la clau principal.</p> <p>6.80 Crear la taula POBLE, amb la clau principal i la restricci\u00f3 que el camp cod_pro \u00e9s clau externa que apunta a PROVINCIA.</p> <p>6.81 Crear la taula VENEDOR, amb la clau principal i la clau externa a POBLE (de moment no definim la clau externa a VENEDOR, que \u00e9s reflexiva).</p> <p>6.82 Crear la taula CLIENT,\u00a0amb la clau principal i la clau externa a POBLE</p> <p>6.83 Crear la taula FACTURA, amb la clau principal i les claus externes a CLIENT i VENEDOR. Tamb\u00e9 heu d'exigir que cod_cli siga no nul.</p> <p>6.84 Crear la taula LINIA_FAC, amb la clau principal (observa que est\u00e0 formada per 2 camps) per\u00f2 de moment sense la clau externa que apunta a ARTICLE. A m\u00e9s cod_a ha de ser no nul.</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T06_SQL_III_PostgreSQL/exercicis1/","title":"Exercicis1","text":"<p>Bases de Dades</p> <ul> <li>Tema 6: SQL - DDL i consultes d'actualitzaci\u00f3 (part III)</li> <li>3.1 Introducci\u00f3</li> <li>3.2 DDL </li> <li>3.2.1 Tipus de dades</li> <li>3.2.2 CREATE TABLE <ul> <li>Exercicis</li> </ul> </li> <li>3.2.3 Restriccions (Constraint) <ul> <li>Exercicis</li> </ul> </li> <li>3.2.4 ALTER TABLE <ul> <li>Exercicis</li> </ul> </li> <li>3.2.5 DROP TABLE</li> <li>3.2.6 \u00cdndex <ul> <li>Exercicis</li> </ul> </li> <li>3.2.7 Vistes <ul> <li>Exercicis</li> </ul> </li> <li>3.2.8. Creaci\u00f3 d'altres objectes: seq\u00fc\u00e8ncies, dominis i tipus. <ul> <li>3.2.8.1 Seq\u00fc\u00e8ncies</li> <li>3.2.8.2 Dominis</li> <li>3.2.8.3 Tipus de dades</li> </ul> </li> <li>3.3 Consultes d'actualitzaci\u00f3 </li> <li>3.3.1 INSERT <ul> <li>Exercicis</li> </ul> </li> <li>3.3.2 DELETE <ul> <li>Exercicis</li> </ul> </li> <li>3.3.3 UPDATE <ul> <li>Exercicis</li> </ul> </li> <li>Exercicis de tot el tema</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T06_SQL_III_PostgreSQL/exercicis1/#exercicis","title":"Exercicis","text":""},{"location":"BD-T06_SQL_III_PostgreSQL/exercicis1/#exercicis-apartat-324","title":"Exercicis apartat 3.2.4","text":"<p>En\u00a0f_grup_9999x (on grup \u00e9s el vostre grup,\u00a0 9999 s\u00f3n les 4 \u00faltimes xifres del vostre DNI, i x la lletra del NIF)</p> <p>6.85 Afegir un camp a la taula VENEDOR anomenat alies de tipus text, que ha de ser no nul i \u00fanic.</p> <p>6.86 Esborrar el camp anterior, alies, de la taula VENEDOR.</p> <p>6.87 Afegir la clau principal de CATEGORIA.</p> <p>6.88 En la taula ARTICLE afegir la clau principal i la clau externa a CATEGORIA.</p> <p>6.89 En la taula LINIA_FAC afegir la clau externa que apunta a FACTURA, exigint que s'esborre en cascada (si s'esborra una factura, s'esborraran autom\u00e0ticament les seues l\u00ednies de factura). I tamb\u00e9 la clau externa que apunta a ARTICLE (aquesta normal, \u00e9s a dir NO ACTION)</p> <p>Nota</p> <p>Per a no fer-lo massa llarg s'han deixat de definir alguna restricci\u00f3, concretament la reflexiva de VENEDOR a VENEDOR (que marca el cap)</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T06_SQL_III_PostgreSQL/exercicis2/","title":"Exercicis2","text":"<p>Bases de Dades</p> <ul> <li>Tema 6: SQL - DDL i consultes d'actualitzaci\u00f3 (part III)</li> <li>3.1 Introducci\u00f3</li> <li>3.2 DDL </li> <li>3.2.1 Tipus de dades</li> <li>3.2.2 CREATE TABLE <ul> <li>Exercicis</li> </ul> </li> <li>3.2.3 Restriccions (Constraint) <ul> <li>Exercicis</li> </ul> </li> <li>3.2.4 ALTER TABLE <ul> <li>Exercicis</li> </ul> </li> <li>3.2.5 DROP TABLE</li> <li>3.2.6 \u00cdndex <ul> <li>Exercicis</li> </ul> </li> <li>3.2.7 Vistes <ul> <li>Exercicis</li> </ul> </li> <li>3.2.8. Creaci\u00f3 d'altres objectes: seq\u00fc\u00e8ncies, dominis i tipus. <ul> <li>3.2.8.1 Seq\u00fc\u00e8ncies</li> <li>3.2.8.2 Dominis</li> <li>3.2.8.3 Tipus de dades</li> </ul> </li> <li>3.3 Consultes d'actualitzaci\u00f3 </li> <li>3.3.1 INSERT <ul> <li>Exercicis</li> </ul> </li> <li>3.3.2 DELETE <ul> <li>Exercicis</li> </ul> </li> <li>3.3.3 UPDATE <ul> <li>Exercicis</li> </ul> </li> <li>Exercicis de tot el tema</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T06_SQL_III_PostgreSQL/exercicis2/#exercicis","title":"Exercicis","text":""},{"location":"BD-T06_SQL_III_PostgreSQL/exercicis2/#exercicis-apartat-326","title":"Exercicis apartat 3.2.6","text":"<p>En\u00a0f_grup_9999x (on grup \u00e9s el vostre grup,\u00a0 9999 s\u00f3n les 4 \u00faltimes xifres del vostre DNI, i x la lletra del NIF)</p> <p>6.90 Afegir un \u00edndex anomenat i_nom_cli a la taula CLIENT pel camp nom.</p> <p>6.91 Afegir un \u00edndex anomenat i_adr_ven a\u00a0 la taula VENEDOR per a que estiga ordenat per cp (ascendent) i adreca (descendent).</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T06_SQL_III_PostgreSQL/exercicis3/","title":"Exercicis3","text":"<p>Bases de Dades</p> <ul> <li>Tema 6: SQL - DDL i consultes d'actualitzaci\u00f3 (part III)</li> <li>3.1 Introducci\u00f3</li> <li>3.2 DDL </li> <li>3.2.1 Tipus de dades</li> <li>3.2.2 CREATE TABLE <ul> <li>Exercicis</li> </ul> </li> <li>3.2.3 Restriccions (Constraint) <ul> <li>Exercicis</li> </ul> </li> <li>3.2.4 ALTER TABLE <ul> <li>Exercicis</li> </ul> </li> <li>3.2.5 DROP TABLE</li> <li>3.2.6 \u00cdndex <ul> <li>Exercicis</li> </ul> </li> <li>3.2.7 Vistes <ul> <li>Exercicis</li> </ul> </li> <li>3.2.8. Creaci\u00f3 d'altres objectes: seq\u00fc\u00e8ncies, dominis i tipus. <ul> <li>3.2.8.1 Seq\u00fc\u00e8ncies</li> <li>3.2.8.2 Dominis</li> <li>3.2.8.3 Tipus de dades</li> </ul> </li> <li>3.3 Consultes d'actualitzaci\u00f3 </li> <li>3.3.1 INSERT <ul> <li>Exercicis</li> </ul> </li> <li>3.3.2 DELETE <ul> <li>Exercicis</li> </ul> </li> <li>3.3.3 UPDATE <ul> <li>Exercicis</li> </ul> </li> <li>Exercicis de tot el tema</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T06_SQL_III_PostgreSQL/exercicis3/#exercicis","title":"Exercicis","text":""},{"location":"BD-T06_SQL_III_PostgreSQL/exercicis3/#exercicis-de-lapartat-327","title":"Exercicis de l'apartat 3.2.7","text":"<p>En\u00a0f_grup_9999x (on grup \u00e9s el vostre grup,\u00a0 9999 s\u00f3n les 4 \u00faltimes xifres del vostre DNI, i x la lletra del NIF)</p> <p>6.92 Crear la vista RESUM_FACTURA, que ens d\u00f3ne el total dels diners de la factura, el total despr\u00e9s del descompte d'articles, i el total despr\u00e9s del descompte de la factura, tal i com ten\u00edem en la consulta 6.56. A partir d'aquest moment podrem utilitzar la vista per a traure aquestos resultats</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T06_SQL_III_PostgreSQL/exercicis4/","title":"Exercicis4","text":"<p>Bases de Dades</p> <ul> <li>Tema 6: SQL - DDL i consultes d'actualitzaci\u00f3 (part III)</li> <li>3.1 Introducci\u00f3</li> <li>3.2 DDL </li> <li>3.2.1 Tipus de dades</li> <li>3.2.2 CREATE TABLE <ul> <li>Exercicis</li> </ul> </li> <li>3.2.3 Restriccions (Constraint) <ul> <li>Exercicis</li> </ul> </li> <li>3.2.4 ALTER TABLE <ul> <li>Exercicis</li> </ul> </li> <li>3.2.5 DROP TABLE</li> <li>3.2.6 \u00cdndex <ul> <li>Exercicis</li> </ul> </li> <li>3.2.7 Vistes <ul> <li>Exercicis</li> </ul> </li> <li>3.2.8. Creaci\u00f3 d'altres objectes: seq\u00fc\u00e8ncies, dominis i tipus. <ul> <li>3.2.8.1 Seq\u00fc\u00e8ncies</li> <li>3.2.8.2 Dominis</li> <li>3.2.8.3 Tipus de dades</li> </ul> </li> <li>3.3 Consultes d'actualitzaci\u00f3 </li> <li>3.3.1 INSERT <ul> <li>Exercicis</li> </ul> </li> <li>3.3.2 DELETE <ul> <li>Exercicis</li> </ul> </li> <li>3.3.3 UPDATE <ul> <li>Exercicis</li> </ul> </li> <li>Exercicis de tot el tema</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T06_SQL_III_PostgreSQL/exercicis4/#exercicis","title":"Exercicis","text":""},{"location":"BD-T06_SQL_III_PostgreSQL/exercicis4/#exercicis-apartat-331","title":"Exercicis apartat 3.3.1","text":"<p>En\u00a0f_grup_9999x (on grup \u00e9s el vostre grup,\u00a0 9999 s\u00f3n les 4 \u00faltimes xifres del vostre DNI, i x la lletra del NIF)</p> <p>6.93 Inserir en la taula CATEGORIA les seg\u00fcents files:</p> cod_cat descripcio BjcOlimpia Components Bjc Seria Olimpia Legrand Components marca Legrand IntMagn Interruptor Magnetot\u00e9rmico Niessen Components Niesen Serie Lisa <p>6.94 Inserir els seg\u00fcents articles.</p> cod_art descrip preu stock stock_min cod_cat B10028B Cruzamiento\u00a0 Bjc Serie Olimpia 4.38 2 1 BjcOlimpia B10200B Cruzamiento Bjc Olimpia Con Visor 0.88 29 BjcOlimpia L16550 Cartucho Fusible Legrand T2 250 A 5.89 1 1 Legrand L16555 Cartucho Fusible Legrand T2 315 A 5.89 3 3 Legrand IM2P10L Interruptor Magnetotermico\u00a0 2p, 4 14.84 2 1 IntMagn N8008BA Base Tt Lateral Niessen Trazo Bla 4.38 6 6 Niessen <p>6.95 Inserir en la taula CLIENT tres files amb les seg\u00fcents dades</p> cod_cli nom adreca cp cod_pob 303 MIRAVET SALA, MARIA MERCEDES URBANIZACION EL BALCO, 84-11 306 SAMPEDRO SIMO, MARIA MERCEDES FINELLO, 161 12217 387 TUR MARTIN, MANUEL FRANCISCO CALLE PEDRO VIRUELA, 108-8 12008 6.96 Inserir la seg\u00fcent factura: num_f data cod_cli cod_ven iva dte 6535 2015-01-01 306 21 10 num_f num_l cod_art quant preu dte 6535 1 L16555 2 5.89 25 <p>6.97 Inserir la seg\u00fcent factura (aquesta t\u00e9 m\u00e9s d'una l\u00ednia de factura).</p> num_f data cod_cli cod_ven iva dte 6559 2015-02-16 387 10 10 num_f num_l cod_art quant preu dte 6559 1 IM2P10L 3 14.84 6559 2 N8008BA 6 4.38 20 <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T06_SQL_III_PostgreSQL/exercicis5/","title":"Exercicis5","text":"<p>Bases de Dades</p> <ul> <li>Tema 6: SQL - DDL i consultes d'actualitzaci\u00f3 (part III)</li> <li>3.1 Introducci\u00f3</li> <li>3.2 DDL </li> <li>3.2.1 Tipus de dades</li> <li>3.2.2 CREATE TABLE <ul> <li>Exercicis</li> </ul> </li> <li>3.2.3 Restriccions (Constraint) <ul> <li>Exercicis</li> </ul> </li> <li>3.2.4 ALTER TABLE <ul> <li>Exercicis</li> </ul> </li> <li>3.2.5 DROP TABLE</li> <li>3.2.6 \u00cdndex <ul> <li>Exercicis</li> </ul> </li> <li>3.2.7 Vistes <ul> <li>Exercicis</li> </ul> </li> <li>3.2.8. Creaci\u00f3 d'altres objectes: seq\u00fc\u00e8ncies, dominis i tipus. <ul> <li>3.2.8.1 Seq\u00fc\u00e8ncies</li> <li>3.2.8.2 Dominis</li> <li>3.2.8.3 Tipus de dades</li> </ul> </li> <li>3.3 Consultes d'actualitzaci\u00f3 </li> <li>3.3.1 INSERT <ul> <li>Exercicis</li> </ul> </li> <li>3.3.2 DELETE <ul> <li>Exercicis</li> </ul> </li> <li>3.3.3 UPDATE <ul> <li>Exercicis</li> </ul> </li> <li>Exercicis de tot el tema</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T06_SQL_III_PostgreSQL/exercicis5/#exercicis","title":"Exercicis","text":""},{"location":"BD-T06_SQL_III_PostgreSQL/exercicis5/#exercicis-apartat-332","title":"Exercicis apartat 3.3.2","text":"<p>En\u00a0f_grup_9999x (on grup \u00e9s el vostre grup,\u00a0 9999 s\u00f3n les 4 \u00faltimes xifres del vostre DNI, i x la lletra del NIF)</p> <p>6.98 Esborrar la factura 6559. Comprovar que tamb\u00e9 s'han esborrat les seues l\u00ednies de factura</p> <p>6.99 Esborrar els articles dels quals no tenim stock m\u00ednim.</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T06_SQL_III_PostgreSQL/exercicis6/","title":"Exercicis6","text":"<p>Bases de Dades</p> <ul> <li>Tema 6: SQL - DDL i consultes d'actualitzaci\u00f3 (part III)</li> <li>3.1 Introducci\u00f3</li> <li>3.2 DDL </li> <li>3.2.1 Tipus de dades</li> <li>3.2.2 CREATE TABLE <ul> <li>Exercicis</li> </ul> </li> <li>3.2.3 Restriccions (Constraint) <ul> <li>Exercicis</li> </ul> </li> <li>3.2.4 ALTER TABLE <ul> <li>Exercicis</li> </ul> </li> <li>3.2.5 DROP TABLE</li> <li>3.2.6 \u00cdndex <ul> <li>Exercicis</li> </ul> </li> <li>3.2.7 Vistes <ul> <li>Exercicis</li> </ul> </li> <li>3.2.8. Creaci\u00f3 d'altres objectes: seq\u00fc\u00e8ncies, dominis i tipus. <ul> <li>3.2.8.1 Seq\u00fc\u00e8ncies</li> <li>3.2.8.2 Dominis</li> <li>3.2.8.3 Tipus de dades</li> </ul> </li> <li>3.3 Consultes d'actualitzaci\u00f3 </li> <li>3.3.1 INSERT <ul> <li>Exercicis</li> </ul> </li> <li>3.3.2 DELETE <ul> <li>Exercicis</li> </ul> </li> <li>3.3.3 UPDATE <ul> <li>Exercicis</li> </ul> </li> <li>Exercicis de tot el tema</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T06_SQL_III_PostgreSQL/exercicis6/#exercicis","title":"Exercicis","text":""},{"location":"BD-T06_SQL_III_PostgreSQL/exercicis6/#exercicis-apartat-333","title":"Exercicis apartat 3.3.3","text":"<p>En\u00a0f_grup_9999x (on grup \u00e9s el vostre grup,\u00a0 9999 s\u00f3n les 4 \u00faltimes xifres del vostre DNI, i x la lletra del NIF)</p> <p>6.100 Llevar tots els codis postals dels clients.</p> <p>6.101 Pujar el preu dels articles de la categoria\u00a0BjcOlimpia un 5% (el resultat ser\u00e0 que l'\u00fanic article d'aquesta categoria haur\u00e0 passat d'un preu de 4.38 a 4.60\u20ac)</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T06_SQL_III_PostgreSQL/exercicis_de_tot_el_tema/","title":"Exercicis de tot el tema","text":"<p>Bases de Dades</p> <ul> <li>Tema 6: SQL - DDL i consultes d'actualitzaci\u00f3 (part III)</li> <li>3.1 Introducci\u00f3</li> <li>3.2 DDL </li> <li>3.2.1 Tipus de dades</li> <li>3.2.2 CREATE TABLE <ul> <li>Exercicis</li> </ul> </li> <li>3.2.3 Restriccions (Constraint) <ul> <li>Exercicis</li> </ul> </li> <li>3.2.4 ALTER TABLE <ul> <li>Exercicis</li> </ul> </li> <li>3.2.5 DROP TABLE</li> <li>3.2.6 \u00cdndex <ul> <li>Exercicis</li> </ul> </li> <li>3.2.7 Vistes <ul> <li>Exercicis</li> </ul> </li> <li>3.2.8. Creaci\u00f3 d'altres objectes: seq\u00fc\u00e8ncies, dominis i tipus. <ul> <li>3.2.8.1 Seq\u00fc\u00e8ncies</li> <li>3.2.8.2 Dominis</li> <li>3.2.8.3 Tipus de dades</li> </ul> </li> <li>3.3 Consultes d'actualitzaci\u00f3 </li> <li>3.3.1 INSERT <ul> <li>Exercicis</li> </ul> </li> <li>3.3.2 DELETE <ul> <li>Exercicis</li> </ul> </li> <li>3.3.3 UPDATE <ul> <li>Exercicis</li> </ul> </li> <li>Exercicis de tot el tema</li> </ul> <p>\u00ab Anterior</p>"},{"location":"BD-T06_SQL_III_PostgreSQL/exercicis_de_tot_el_tema/#exercicis-de-tot-el-tema","title":"Exercicis de tot el tema","text":"<p>Al llarg d'aquesta tercera part, en el conjunt d'exercicis de DDL, crearem tota l'estructura de la Base de Dades FACTURA, per\u00f2 per a no interferir cadasc\u00fa amb els altres companys, cadasc\u00fa es connectar\u00e0 a la seua Base de Dades f_grup_9999x (on grup \u00e9s el vostre grup p.ex. 1cfsg, 1cfsh... ,\u00a0 9999 s\u00f3n les 4 \u00faltimes xifres del vostre DNI, i x la lletra del NIF).</p> <p>L'esquema Entitat-Relaci\u00f3 i l'esquema relacional que implementarem ser\u00e0 el seg\u00fcent:</p> <p></p> <p>En la Base de Dades\u00a0anomenada f_grup_9999x (on grup \u00e9s el vostre grup,\u00a0 9999 s\u00f3n les 4 \u00faltimes xifres del vostre DNI, i x la lletra del NIF), connectant com un usuari amb el mateix nom i contrasenya:</p> <p>Nota</p> <p>Durant tots aquestos exercicis de DDL pot ser molt convenient tenir obertes les dues connexions: la de FACTURA (per anar consultant) i la de f_grup_9999x (per anar creant i modificant), on grup \u00e9s el vostre grup,\u00a0 9999 s\u00f3n les 4 \u00faltimes xifres del vostre DNI, i x la lletra del NIF.</p> <p>6.77 Creeu la taula CATEGORIA, amb els mateixos camps i del mateix tipus que en la taula CATEGORIA de FACTURA, per\u00f2 de moment sense clau principal ni cap altra restricci\u00f3. Guardeu la consulta de creaci\u00f3 com Ex_6_77.sql</p> <p>6.78 Creeu la taula ARTICLE, tamb\u00e9 sense restriccions. Guardar la consulta com Ex_6_78.sql</p> <p>6.79 Crear la taula PROVINCIA, amb la clau principal.</p> <p>6.80 Crear la taula POBLE, amb la clau principal i la restricci\u00f3 que el camp cod_pro \u00e9s clau externa que apunta a PROVINCIA.</p> <p>6.81 Crear la taula VENEDOR, amb la clau principal i la clau externa a POBLE (de moment no definim la clau externa a VENEDOR, que \u00e9s reflexiva).</p> <p>6.82 Crear la taula CLIENT,\u00a0amb la clau principal i la clau externa a POBLE</p> <p>6.83 Crear la taula FACTURA, amb la clau principal i les claus externes a CLIENT i VENEDOR. Tamb\u00e9 heu d'exigir que cod_cli siga no nul.</p> <p>6.84 Crear la taula LINIA_FAC, amb la clau principal (observa que est\u00e0 formada per 2 camps) per\u00f2 de moment sense la clau externa que apunta a ARTICLE. A m\u00e9s cod_a ha de ser no nul.</p> <p>6.85 Afegir un camp a la taula VENEDOR anomenat alies de tipus text, que ha de ser no nul i \u00fanic.</p> <p>6.86 Esborrar el camp anterior, alies, de la taula VENEDOR.</p> <p>6.87 Afegir la clau principal de CATEGORIA.</p> <p>6.88 En la taula ARTICLE afegir la clau principal i la clau externa a CATEGORIA.</p> <p>6.89 En la taula LINIA_FAC afegir la clau externa que apunta a FACTURA, exigint que s'esborre en cascada (si s'esborra una factura, s'esborraran autom\u00e0ticament les seues l\u00ednies de factura). I tamb\u00e9 la clau externa que apunta a ARTICLE (aquesta normal, \u00e9s a dir NO ACTION)</p> <p>6.90 Afegir un \u00edndex anomenat i_nom_cli a la taula CLIENT pel camp nom.</p> <p>6.91 Afegir un \u00edndex anomenat i_adr_ven a\u00a0 la taula VENEDOR per a que estiga ordenat per cp (ascendent) i adreca (descendent).</p> <p>6.92 Crear la vista RESUM_FACTURA, que ens d\u00f3ne el total dels diners de la factura, el total despr\u00e9s del descompte d'articles, i el total despr\u00e9s del descompte de la factura, tal i com ten\u00edem en la consulta 6.56. A partir d'aquest moment podrem utilitzar la vista per a traure aquestos resultats</p> <p>6.93 Inserir en la taula CATEGORIA les seg\u00fcents files:</p> cod_cat descripcio BjcOlimpia Components Bjc Seria Olimpia Legrand Components marca Legrand IntMagn Interruptor Magnetot\u00e9rmico Niessen Components Niesen Serie Lisa <p>6.94 Inserir els seg\u00fcents articles.</p> cod_art descrip preu stock stock_min cod_cat B10028B Cruzamiento\u00a0 Bjc Serie Olimpia 4.38 2 1 BjcOlimpia B10200B Cruzamiento Bjc Olimpia Con Visor 0.88 29 BjcOlimpia L16550 Cartucho Fusible Legrand T2 250 A 5.89 1 1 Legrand L16555 Cartucho Fusible Legrand T2 315 A 5.89 3 3 Legrand IM2P10L Interruptor Magnetotermico\u00a0 2p, 4 14.84 2 1 IntMagn N8008BA Base Tt Lateral Niessen Trazo Bla 4.38 6 6 Niessen <p>6.95 Inserir en la taula CLIENT tres files amb les seg\u00fcents dades</p> cod_cli nom adreca cp cod_pob 303 MIRAVET SALA, MARIA MERCEDES URBANIZACION EL BALCO, 84-11 306 SAMPEDRO SIMO, MARIA MERCEDES FINELLO, 161 12217 387 TUR MARTIN, MANUEL FRANCISCO CALLE PEDRO VIRUELA, 108-8 12008 6.96 Inserir la seg\u00fcent factura: num_f data cod_cli cod_ven iva dte 6535 2015-01-01 306 21 10 num_f num_l cod_art quant preu dte 6535 1 L16555 2 5.89 25 <p>6.97 Inserir la seg\u00fcent factura (aquesta t\u00e9 m\u00e9s d'una l\u00ednia de factura).</p> num_f data cod_cli cod_ven iva dte 6559 2015-02-16 387 10 10 num_f num_l cod_art quant preu dte 6559 1 IM2P10L 3 14.84 6559 2 N8008BA 6 4.38 20 <p>6.98 Esborrar la factura 6559. Comprovar que tamb\u00e9 s'han esborrat les seues l\u00ednies de factura</p> <p>6.99 Esborrar els articles dels quals no tenim stock m\u00ednim.</p> <p>6.100 Llevar tots els codis postals dels clients.</p> <p>6.101 Pujar el preu dels articles de la categoria\u00a0BjcOlimpia un 5% (el resultat ser\u00e0 que l'\u00fanic article d'aquesta categoria haur\u00e0 passat d'un preu de 4.38 a 4.60\u20ac)</p> <p>\u00ab Anterior</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T06_SQL_II_PostgreSQL/","title":"Index","text":"<p>Bases de Dades</p> <ul> <li>Tema 6: SQL - Consultes avan\u00e7ades (part II)</li> <li>2.1 Introducci\u00f3</li> <li>2.2 Combinacions de taules </li> <li>2.2.1 Producte cartesi\u00e0</li> <li>2.2.2 Combinaci\u00f3 interna <ul> <li>Exercicis</li> </ul> </li> <li>2.2.3 Combinaci\u00f3 externa <ul> <li>Exercicis</li> </ul> </li> <li>2.3 Subconsultes </li> <li>Exercicis</li> <li>2.4 Consultes d'operacions de conjunts </li> <li>Exercicis</li> <li>Exercicis de tot el tema, amb els resultats</li> </ul> <p>Seg\u00fcent \u00bb</p>"},{"location":"BD-T06_SQL_II_PostgreSQL/#tema-6-sql-consultes-avancades-part-ii","title":"Tema 6: SQL - Consultes avan\u00e7ades (part II)","text":"<p>Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial SenseObraDerivada 2.5 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T06_SQL_II_PostgreSQL/21_introducci/","title":"21 introducci","text":"<p>Bases de Dades</p> <ul> <li>Tema 6: SQL - Consultes avan\u00e7ades (part II)</li> <li>2.1 Introducci\u00f3</li> <li>2.2 Combinacions de taules </li> <li>2.2.1 Producte cartesi\u00e0</li> <li>2.2.2 Combinaci\u00f3 interna <ul> <li>Exercicis</li> </ul> </li> <li>2.2.3 Combinaci\u00f3 externa <ul> <li>Exercicis</li> </ul> </li> <li>2.3 Subconsultes </li> <li>Exercicis</li> <li>2.4 Consultes d'operacions de conjunts </li> <li>Exercicis</li> <li>Exercicis de tot el tema, amb els resultats</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T06_SQL_II_PostgreSQL/21_introducci/#21-introduccio","title":"2.1 Introducci\u00f3","text":"<p>En la primera part del tema s'ha repassat tota la sintaxi de la sent\u00e8ncia SELECT. Una vegada conegudes totes les cl\u00e0usules, \u00e9s moment de traure tota la pot\u00e8ncia de SQL accedint a Bases de Dades Relacionals, fent unes sent\u00e8ncies \"avan\u00e7ades\", d'un nivell de complexitat major que fins ara.</p> <p>Els tipus de sent\u00e8ncies avan\u00e7ades que veurem seran:</p> <ul> <li>Combinacions de taules, en les quals entrar\u00e0 en joc m\u00e9s d'una taula. Veurem les distintes possibilitats que tindrem.</li> <li>Subconsultes, on tindrem una sent\u00e8ncia SQL dins d'una altra.</li> <li>Consultes d'uni\u00f3, on unirem m\u00e9s d'una sent\u00e8ncia SQL.</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial SenseObraDerivada 2.5 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T06_SQL_II_PostgreSQL/221_producte_cartesi/","title":"221 producte cartesi","text":"<p>Bases de Dades</p> <ul> <li>Tema 6: SQL - Consultes avan\u00e7ades (part II)</li> <li>2.1 Introducci\u00f3</li> <li>2.2 Combinacions de taules </li> <li>2.2.1 Producte cartesi\u00e0</li> <li>2.2.2 Combinaci\u00f3 interna <ul> <li>Exercicis</li> </ul> </li> <li>2.2.3 Combinaci\u00f3 externa <ul> <li>Exercicis</li> </ul> </li> <li>2.3 Subconsultes </li> <li>Exercicis</li> <li>2.4 Consultes d'operacions de conjunts </li> <li>Exercicis</li> <li>Exercicis de tot el tema, amb els resultats</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T06_SQL_II_PostgreSQL/221_producte_cartesi/#221-producte-cartesia","title":"2.2.1 Producte cartesi\u00e0","text":"<p>La manera m\u00e9s senzilla \u00e9s posar les taules separades per comes, per\u00f2 segurament el resultat no \u00e9s el que esper\u00e0vem.</p> <p>Per exemple podem fer la seg\u00fcent sent\u00e8ncia:</p> <p>SELECT COMARQUES.nom_c, nom  FROM COMARQUES,POBLACIONS;</p> <p>Nota</p> <p>Observeu que hem posat el nom de la taula davant del camp nom_c, perqu\u00e8 les dues taules tenen un camp amb aquest nom. Aquesta operaci\u00f3 s'anomena qualificaci\u00f3. Si no qualific\u00e0rem amb el nom de la taula davant, hi hauria ambig\u00fcitat, no sabria a quin camp es refereix, si el d'una taula o el de l'altra. Quan els noms dels camps s\u00f3n diferents i per tant no coincideixen en les dues taules, no cal qualificar el camp (com per exemple amb el camp nom)</p> <p>Si executem la sent\u00e8ncia, veurem que tindrem un nombre de files inesperadament alt, 18.428 files !!! I si analitzem les files veurem el perqu\u00e8: s'ha combinat cada comarca amb tots els pobles (siguen de la comarca o no).</p> <p></p> <p>Aquesta operaci\u00f3 s'anomena PRODUCTE CARTESI\u00c0 (cross join), i es caracteritza en qu\u00e8 cadascuna de les files d'una taula es combina amb totes les files de l'altra taula. El nombre de files resultant ser\u00e0, doncs, el resultat de multiplicar el nombre de files d'una taula pel nombre de files de l'altra taula (en el nostre cas 34 x 542 = 18428).</p> <p>Rarament voldrem fer un producte cartesi\u00e0. El m\u00e9s normal ser\u00e0 combinar una miqueta millor les taules. En el nostre exemple segurament ens interessar\u00e0 molt m\u00e9s combinar cada comarca amb les seues poblacions.</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial SenseObraDerivada 2.5 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T06_SQL_II_PostgreSQL/222_combinaci_interna/","title":"222 combinaci interna","text":"<p>Bases de Dades</p> <ul> <li>Tema 6: SQL - Consultes avan\u00e7ades (part II)</li> <li>2.1 Introducci\u00f3</li> <li>2.2 Combinacions de taules </li> <li>2.2.1 Producte cartesi\u00e0</li> <li>2.2.2 Combinaci\u00f3 interna <ul> <li>Exercicis</li> </ul> </li> <li>2.2.3 Combinaci\u00f3 externa <ul> <li>Exercicis</li> </ul> </li> <li>2.3 Subconsultes </li> <li>Exercicis</li> <li>2.4 Consultes d'operacions de conjunts </li> <li>Exercicis</li> <li>Exercicis de tot el tema, amb els resultats</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T06_SQL_II_PostgreSQL/222_combinaci_interna/#222-combinacio-interna","title":"2.2.2 Combinaci\u00f3 interna","text":"<p>Combinaci\u00f3 de dues taules: Sintaxi</p> <p>Normalment el producte cartesi\u00e0 no ens interessar\u00e0. M\u00e9s b\u00e9 voldrem combinar les taules de manera que dos camps, un camp de cada taula, coincidesquen. I el m\u00e9s habitual, si tenim la Base de Dades ben dissenyada, ser\u00e0 que els camps coincidents siguen una clau externa amb la clau principal a la qual apunta. Aix\u00ed, en l'exemple que utilitz\u00e0vem en el punt anterior, el que s\u00ed que ens ser\u00e0 \u00fatil \u00e9s combinar cada comarca amb les seues poblacions. I justament tenim un camp en la taula POBLACIONS, nom_c, que \u00e9s clau externa i apunta a la clau principal de COMARQUES.</p> <p>Aquesta operaci\u00f3 l'anomenarem COMBINACI\u00d3 INTERNA o senzillament COMBINACI\u00d3, i de vegades tamb\u00e9 es diu REUNI\u00d3. La seua sintaxi \u00e9s la seg\u00fcent:</p> <p>SELECT ...  FROM taula1 INNER JOIN taula2 ON condici\u00f3</p> <p>i on la condici\u00f3 de la reuni\u00f3 consistir\u00e0 en comparar un camp de cada taula. Els dos camps hauran de ser del mateix tipus, per\u00f2 no caldr\u00e0 que tinguen el mateix nom. Les files que eixiran al resultat seran les que acompliran la condici\u00f3.</p> <p>Encara que els operadors que es poden utilitzar s\u00f3n tots els de comparaci\u00f3, en la pr\u00e0ctica SEMPRE utilitzarem el d'igualar. Per tant podem refinar millor la combinaci\u00f3 de 2 taules</p> <p>SELECT ...  FROM taula1 INNER JOIN taula2 ON taula1.camp1 = taula2.camp2</p> <p>L'exemple de les comarques i les seues poblacions quedar\u00e0 aix\u00ed</p> <p>SELECT COMARQUES.nom_c, POBLACIONS.nom  FROM COMARQUES INNER JOIN POBLACIONS ON COMARQUES.nom_c = POBLACIONS.nom_c</p> <p>I aquest seria el resultat</p> <p></p> <p>que com veiem torna 542 files (tantes com pobles)</p> <p>Alternativament, podr\u00edem posar la mateixa reuni\u00f3 d'una altra forma:</p> <p>SELECT COMARQUES.nom_c, POBLACIONS.nom\u00a0 FROM COMARQUES,POBLACIONS WHERE COMARQUES.nom_c = POBLACIONS.nom_c</p> <p>on estrictament el que estem fent \u00e9s, del producte cartesi\u00e0 de les 2 taules, seleccionar \u00fanicament quan coincideix el nom_c (\u00e9s a dir la comarca amb les seues poblacions), i per tant el resultat seria el mateix. Potser f\u00f3ra m\u00e9s eficient utilitzar la primera manera, per\u00f2 de vegades la comoditat ens far\u00e0 utilitzar la segona (sobretot quan s'hagen de combinar moltes taules).</p> <p>Les dues maneres de posar la conbinaci\u00f3 de dues taules s\u00f3n les m\u00e9s habituals, i que funcionen en qualsevol Sistema Gestor de Bases de Dades.</p> <p>Tanmateix en PostgreSQL (i en altres SGBD com Oracle) hi ha m\u00e9s maneres de fer una combinaci\u00f3. No les veurem tan a fons perqu\u00e8 les anteriors ens basten i sobren:</p> <ul> <li>INNER JOIN amb USING: En el cas que els camps a reunir de les dues taules es diguen exactament igual, podem substituir la condici\u00f3 posada en ON per l'expressi\u00f3 USING, amb el camp de la reuni\u00f3 entre par\u00e8ntesis</li> </ul> <p>SELECT COMARQUES.nom_c, POBLACIONS.nom  FROM COMARQUES INNER JOIN POBLACIONS USING (nom_c)</p> <ul> <li>NATURAL JOIN: Tamb\u00e9 per al cas anterior, en qu\u00e8 el camp en les dues taules es diu igual, podem fer-lo de forma encara m\u00e9s abreviada. Far\u00e0 una reuni\u00f3, igualant tots els camps que es diguen igual de les dues taules. Hem d'anar en compte, per si de cas hi ha algun altre camp en les dues taules que es diga igual.</li> </ul> <p>SELECT COMARQUES.nom_c, POBLACIONS.nom  FROM COMARQUES NATURAL JOIN POBLACIONS</p> <p>Exemples</p> <ol> <li>Traure el noms de les Poblacions i els noms dels Instituts que hi ha en elles.</li> </ol> <p>Haurem de combinar les taules per la clau externa d'INSTITUTS a POBLACIONS (\u00e9s a dir la que apunta de cod_m en INSTITUTS fins a la clau principal de COMARQUES, que \u00e9s justament cod_m).</p> <p>SELECT POBLACIONS.nom,INSTITUTS.nom FROM POBLACIONS INNER JOIN INSTITUTS ON POBLACIONS.cod_m=INSTITUTS.cod_m;</p> <p>Utilitzant l'altra sintaxi, que posem la condici\u00f3 en el WHERE, ens quedaria:</p> <p>SELECT POBLACIONS.nom,INSTITUTS.nom FROM POBLACIONS , INSTITUTS  WHERE POBLACIONS.cod_m=INSTITUTS.cod_m;</p> <p>Com en aquest cas el camp que hem d'igualar t\u00e9 el mateix nom en les dues taules, utilitzant la sintaxi del USING ens quedari m\u00e9s f\u00e0cil:</p> <p>SELECT POBLACIONS.nom,INSTITUTS.nom FROM POBLACIONS INNER JOIN INSTITUTS USING(cod_m);</p> <p>En canvi, hem d'anar amb molt de compte amb la sintaxi del NATURAL JOIN, perqu\u00e8 itentar\u00e0 igualar tots els camps que es diuen igual, i en aquest cas tenim dos camps coincidents: cod_m i nom. cod_m \u00e9s el que volem, per\u00f2 nom ens fastidiar\u00e0, i evidentment no coincideix mai el nom de l'Institut i el de la poblaci\u00f3, i per tant no tornar\u00e0 cap fila.</p> <p>SELECT POBLACIONS.nom,INSTITUTS.nom FROM POBLACIONS NATURAL JOIN INSTITUTS;</p> <ol> <li>Traure els noms de les comarques i la prov\u00edncia, amb el nombre de poblacions que t\u00e9 cada comarca.</li> </ol> <p>Ens fan falta dues taules, COMARQUES per a poder traure el nom de la comarca i la prov\u00edncia, i POBLACIONS per a poder comptar els pobles de cada comarca. Les haurem de combinar, agrupar per comarca (i prov\u00edncia tamb\u00e9, perqu\u00e8 volem que aparega el nom de la prov\u00edncia) i comptar les poblacions. A l'hora de comptar podem comptar files (COUNT(*)), per\u00f2 potser siga millor comptar algun camp de la taula POBLACIONS, per exemple cod_m, que \u00e9s la clau principal (recordem que els valors nuls no es comptaran, i cod_m per ser clau principal no pot ser nul).</p> <p>SELECT COMARQUES.nom_c, provincia, COUNT(cod_m) AS Quants FROM COMARQUES INNER JOIN POBLACIONS ON COMARQUES.nom_c=POBLACIONS.nom_c GROUP BY COMARQUES.nom_c, provincia;</p> <p>Tres o m\u00e9s taules</p> <p>Si tenim m\u00e9s de 2 taules, haurem de procedir de la mateixa manera, ja que si deixem de combinar alguna taula, tindrem el producte cartesi\u00e0. Com en la immensa majoria de casos, la reuni\u00f3 la farem per les claus externes que tenim definides. \u00danicament haurem de cuidar els par\u00e8ntesis, per a marcar primer una condici\u00f3 de combinaci\u00f3 i despr\u00e9s l'altra. En un exemple ho veurem perfectament il\u00b7lustrat.</p> <p>Intentem traure el nom d'una comarca i la prov\u00edncia, el nom dels seus pobles i el nom dels instituts d'aquestos pobles. Ens fan falta les taules COMARQUES (pera poder traure el nom de la comarca i prov\u00edncia), POBLACIONS (per a traure el nom de la poblaci\u00f3) i INSTITUTS (per al nom d'aquestos). Ordenarem per nom de comarca, i dins d'aquest per poblaci\u00f3, per a una millor lectura del resultat</p> <p>SELECT COMARQUES.nom_c, provincia, POBLACIONS.nom, INSTITUTS.nom FROM (COMARQUES INNER JOIN POBLACIONS ON COMARQUES.nom_c=POBLACIONS.nom_c) INNER JOIN INSTITUTS ON POBLACIONS.cod_m=INSTITUTS.cod_m ORDER BY 1,3;</p> <p>Podr\u00edem posar la consulta de la forma alternativa, en qu\u00e8 les condicions de reuni\u00f3 van en el WHERE. \u00d2bviament aquestes condicions han d'anar unides per l'operador AND.</p> <p>SELECT COMARQUES.nom_c, provincia, POBLACIONS.nom, INSTITUTS.nom FROM COMARQUES , POBLACIONS , INSTITUTS  WHERE COMARQUES.nom_c=POBLACIONS.nom_c AND POBLACIONS.cod_m=INSTITUTS.cod_m ORDER BY 1,3;</p> <p>Anem a plantejar un altre exemple. Es tracta de traure el nom i la prov\u00edncia de les comarques, amb el n\u00famero d'Instituts que hi ha en elles. En principi podr\u00edem pensar que les \u00faniques taules que ens fan falta s\u00f3n COMARQUES (per a traure el nom i prov\u00edncia de la comarca) i INSTITUTS (per a poder comptar els INSTITUTS). Si intentem fer aquesta consulta, NO obtindrem el resultat desitjat.</p> <p>SELECT nom_c, provincia, COUNT(codi) FROM COMARQUES , INSTITUTS GROUP BY nom_c, provincia</p> <p>Evidentment hi haur\u00e0 un producte cartesi\u00e0, ja que no hem combinat les taules, i ens eixir\u00e0 per a cada comarca 375 instituts, que \u00e9s el n\u00famero total d'instituts, ja que s'ha combinat cada comarca amb tots els instituts.</p> <p>Per\u00f2 aleshores, per quin camp combinem? Si intentem unir les claus principals, nom_c amb codi (el codi d'Institut) no poden combinar b\u00e9 per raons evidents. Ens hem de fixar en el disseny de la Base de Dades. Observarem que el problema \u00e9s que no hi ha una clau externa entre INSTITUTS i COMARQUES. Per\u00f2 tamb\u00e9 ens d\u00f3na la soluci\u00f3: haurem de posar tamb\u00e9 la taula POBLACIONS encara que no vulguem visualitzar cap camp d'aquesta taula, ja que si estan relacionades les taules INSTITUTS i COMARQUES \u00e9s a trav\u00e9s d'aquesta taula. Per tant la consulta correcta ser\u00e0:</p> <p>SELECT COMARQUES.nom_c, provincia, COUNT(codi) FROM (COMARQUES INNER JOIN POBLACIONS ON COMARQUES.nom_c=POBLACIONS.nom_c) INNER JOIN INSTITUTS ON POBLACIONS.cod_m=INSTITUTS.cod_m GROUP BY COMARQUES.nom_c, provincia</p> <p>La forma alternativa sembla m\u00e9s curta. Est\u00e0 clar que si s\u00f3n 3 taules, hauran d'haver 2 condicions de combinaci\u00f3 unides per AND.</p> <p>SELECT COMARQUES.nom_c, provincia, COUNT(codi) FROM COMARQUES , POBLACIONS , INSTITUTS  WHERE COMARQUES.nom_c=POBLACIONS.nom_c AND POBLACIONS.cod_m=INSTITUTS.cod_m GROUP BY COMARQUES.nom_c, provincia;</p> <p>De forma general, si tenim n taules en una consulta, ens faran falta n-1 condicions de combinaci\u00f3 unides per AND. Per exemple, si en una consulta entren 5 taules, per a no tenir cap producte cartesi\u00e0 ens faran falta 4 condicions unides per AND.</p> <p>Una taula m\u00e9s d'una vegada.</p> <p>Anem a plantejar un altre exemple interessant: traure el nom de les poblacions, amb el nom de la capital de comarca. Lamentablement amb les dades que tenim en la Base de Dades d'exemple no podrem provar-lo, aix\u00ed que anem a fer una suposici\u00f3, una Base de Dades lleugerament modificada per a il\u00b7lustrar aquest exemple.</p> <p>Suposem que la nostra taula de POBLACIONS f\u00f3ra lleugerament diferent, i que incorporara un camp nou amb el codi del municipi que \u00e9s capital de comarca de la poblaci\u00f3:</p> <p>POBLACIONS ( cod_m numeric(5,0) CONSTRAINT cp_pobl PRIMARY KEY, nom character varying(50) NOT NULL, poblacio numeric(6,0), extensio numeric(6,2), altura numeric(4,0), longitud character varying(50), latitud character varying(50), llengua character(1), nom_c character varying(50), cod_capital numeric(5,0) CONSTRAINT ce_capital REFERENCES POBLACIONS(cod_m) )</p> <p>Per a poder traure al mateix temps el nom de les poblacions i el nom de la seua capital de comarca no tenim prou amb posar la taula POBLACIONS una vegada: nom\u00e9s traur\u00edem el nom de la poblaci\u00f3 i ens quedar\u00edem amb el codi de municipi de la capital. La soluci\u00f3 ser\u00e0 reunir-la amb la taula POBLACIONS, posant-la una segona vegada per a tenir dues inst\u00e0ncies de la taula, una inst\u00e0ncia per al poblaci\u00f3 normal i una altra per a la capital. Per\u00f2 com distingirem entre les dues inst\u00e0ncies? Doncs posant un nom a cadascuna. En general podem posar un nom en la sent\u00e8ncia a qualsevol taula que aparega, posant aquest nom a continuaci\u00f3 de la taula (opcionalment podr\u00edem posar AS enmig):</p> <p>SELECT ...  FROM taula T</p> <p>En la resta de la consulta haurem d'utilitzar aquest nom. L'exemple quedar\u00e0 de la seg\u00fcent manera:</p> <p>SELECT P1.nom AS \"Nom poblaci\u00f3\" , P2.nom as \"Nom capital\" FROM POBLACIONS P1 INNER JOIN POBLACIONS P2 ON P1.cod_capital=P2.cod_m</p> <p>o de la forma alternativa:</p> <p>SELECT P1.nom AS \"Nom poblaci\u00f3\" , P2.nom as \"Nom capital\" FROM POBLACIONS P1, POBLACIONS P2  WHERE P1.cod_capital=P2.cod_m</p> <p>Nota</p> <p>Recordeu que aquestes instruccions no les podem provar, perqu\u00e8 no tenim el camp cod_capital.</p> <p>Clau externa formada per m\u00e9s d'un camp</p> <p>Per \u00faltim anem a considerar el cas que la clau externa estiga formada per m\u00e9s d'un camp. Ho basarem en l'exemple dels Bancs, on la taula COMPTE CORRENT dep\u00e8n en identificaci\u00f3 de SUCURSAL. Com la clau principal de SUCURSAL est\u00e0 formada per 2 camps, la clau externa de COMPTE CORRENT, que apunta a la primera tamb\u00e9 estar\u00e0 formada per 2 camps. Si volem traure el n\u00famero de compte corrent, el nom de la sucursal d'on \u00e9s el compte, i el saldo, ens faran falta les dues taules. Aquesta seria la manera de combinar-les:</p> <p>SELECT C.n_ent , C.n_suc , n_cc , S.nom , C.saldo  FROM SUCURSAL S INNER JOIN COMPTE_CORRENT C ON S.n_ent=C.n_ent AND S.n_suc=C.n_suc</p> <p>o de la forma alternativa:</p> <p>SELECT C.n_ent , C.n_suc , n_cc , S.nom , C.saldo  FROM SUCURSAL S, COMPTE_CORRENT C  WHERE S.n_ent=C.n_ent AND S.n_suc=C.n_suc</p> <p>En ambd\u00f3s casos s'ha optat per posar nom a les taules (S i C respectivament) per comoditat, per a que no quedara tan llarga la consulta.</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial SenseObraDerivada 2.5 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T06_SQL_II_PostgreSQL/223_combinaci_externa/","title":"223 combinaci externa","text":"<p>Bases de Dades</p> <ul> <li>Tema 6: SQL - Consultes avan\u00e7ades (part II)</li> <li>2.1 Introducci\u00f3</li> <li>2.2 Combinacions de taules </li> <li>2.2.1 Producte cartesi\u00e0</li> <li>2.2.2 Combinaci\u00f3 interna <ul> <li>Exercicis</li> </ul> </li> <li>2.2.3 Combinaci\u00f3 externa <ul> <li>Exercicis</li> </ul> </li> <li>2.3 Subconsultes </li> <li>Exercicis</li> <li>2.4 Consultes d'operacions de conjunts </li> <li>Exercicis</li> <li>Exercicis de tot el tema, amb els resultats</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T06_SQL_II_PostgreSQL/223_combinaci_externa/#223-combinacio-externa","title":"2.2.3 Combinaci\u00f3 externa","text":"<p>En ocasions ens interessar\u00e0 fer una combinaci\u00f3 diferent. Com quasi sempre ens basarem en un exemple. Quan en un exemple del punt anterior tra\u00edem els nom de les poblacions amb el nom dels instituts, no podien eixir les poblacions que no tenen instituts. Ara ens plantejarem la possibilitat de traure totes les poblacions, fins i tot aquelles que no tenen instituts, per\u00f2 d'aquelles que s\u00ed que en tinguen traure tamb\u00e9 el nom dels instituts. Aquesta operaci\u00f3 s'anomena COMBINACI\u00d3 EXTERNA.</p> <p>Sintaxi</p> <p>Tindrem dues possibilitats: traure totes les de l'esquerra o traure totes les de la dreta.</p> <p>Per a traure TOTES les files de la taula de l'esquerra, i aquelles que estiguen relacionades de la de la dreta:</p> <p>SELECT ...  FROM taula1 LEFT [OUTER] JOIN taula2 ON condici\u00f3</p> <p>Aix\u00ed traurem TOTES les files de taula1, i aquelles que estiguen relacionades de taula2.</p> <p>Per a fer-ho al rev\u00e8s, \u00e9s a dir, totes les files de la taula de la dreta i aquelles files que estiguen relacionades de l'esquerra:\u00a0</p> <p>SELECT ...  FROM taula1 RIGHT [OUTER] JOIN taula2 ON condici\u00f3</p> <p>D'aquesta manera traurem TOTES les files de taula2, i aquelles que estiguen relacionades de taula1.</p> <p>En el nostre exemple:</p> <p>SELECT POBLACIONS.nom,INSTITUTS.nom FROM POBLACIONS LEFT JOIN INSTITUTS ON POBLACIONS.cod_m=INSTITUTS.cod_m ORDER BY 1</p> <p>on hem ordenat pel nom de la poblaci\u00f3 per a una millor lectura, i ens donar\u00e0 el seg\u00fcent resultat:</p> <p></p> <p>Podem observar que ens trau fins i tot els pobles que no tenen instituts, i que en el camp nom de l'institut tenen el valor NULL.</p> <p>Fem una variant interessant. Anem a traure els pobles amb el nombre d'instituts que t\u00e9 cadascun. Ens far\u00e0 falta la taula POBLACIONS per a poder traure el nom de la poblaci\u00f3 i la taula INSTITUTS per a traure el nombre d'instituts, i agruparem pel nom de la poblaci\u00f3. Les dues taules les hem de combinar (per evitar el producte cartesi\u00e0). Si fem una combinaci\u00f3 normal (interna), els que no tenen instituts no entren. Per\u00f2 si fem una combinaci\u00f3 externa s\u00ed que entraran.</p> <p>Nom\u00e9s ens queda comptar per un camp que en el cas dels que no tenen instituts tinga el valor nul, \u00e9s a dir, per un camp de la taula INSTITUTS, i el que millor se'ns acopla \u00e9s algun que forma part de la clau principal, ja que com no pot agafar un valor nul en la taula INSTITUTS, l'\u00fanica possibilitat que agafe el valor nul en la combinaci\u00f3 externa \u00e9s que la poblaci\u00f3 no tinga institut, i aleshores en el moment de comptar ens donar\u00e0 el valor 0.</p> <p>Aquesta ser\u00e0 la consulta, on hem tornat a ordenar pel nom de la poblaci\u00f3</p> <p>SELECT POBLACIONS.nom,COUNT(INSTITUTS.codi) FROM POBLACIONS LEFT JOIN INSTITUTS ON POBLACIONS.cod_m=INSTITUTS.cod_m GROUP BY POBLACIONS.nom ORDER BY 1</p> <p>I aquest ser\u00e0 el resultat</p> <p></p> <p>Una altra variant tamb\u00e9 interessant \u00e9s fer una consulta similar per a traure els pobles que no tenen institut. Haurem de fer una combinaci\u00f3 externa, i en la condici\u00f3 posar justament que un dels camps de la taula INSTITUTS siga nul (per exemple, la clau principal):</p> <p>Aquesta ser\u00e0 la consulta, on hem tornat a ordenar pel nom de la poblaci\u00f3:</p> <p>SELECT POBLACIONS.nom FROM POBLACIONS LEFT JOIN INSTITUTS ON POBLACIONS.cod_m=INSTITUTS.cod_m WHERE INSTITUTS.codi IS NULL ORDER BY 1</p> <p>I aquest ser\u00e0 el resultat:</p> <p></p> <p>Exemples</p> <ol> <li>Traure totes les comarques amb el n\u00famero de pobles que t\u00e9 cadascuna, fins i tot aquelles comarques que no tinguen cap poble.</li> </ol> <p>Aquest exemple \u00e9s poc il\u00b7lustratiu, perqu\u00e8 no tenim en principi cap camarca que no tinga pobles. De tota manera, la manera seria fent un LEFT JOIN entre COMARQUES i POBLACIONS, per a despr\u00e9s agrupar per comarca i comptar les poblacions. Observeu com tamb\u00e9 podem utilitzar la sintaxi del USING en el LEFT JOIN.</p> <p>SELECT COMARQUES.nom_c, COUNT(cod_m) FROM COMARQUES LEFT JOIN POBLACIONS USING(nom_c) GROUP BY COMARQUES.nom_c ORDER BY 1;</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial SenseObraDerivada 2.5 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T06_SQL_II_PostgreSQL/22_combinacions_de_taules/","title":"22 combinacions de taules","text":"<p>Bases de Dades</p> <ul> <li>Tema 6: SQL - Consultes avan\u00e7ades (part II)</li> <li>2.1 Introducci\u00f3</li> <li>2.2 Combinacions de taules </li> <li>2.2.1 Producte cartesi\u00e0</li> <li>2.2.2 Combinaci\u00f3 interna <ul> <li>Exercicis</li> </ul> </li> <li>2.2.3 Combinaci\u00f3 externa <ul> <li>Exercicis</li> </ul> </li> <li>2.3 Subconsultes </li> <li>Exercicis</li> <li>2.4 Consultes d'operacions de conjunts </li> <li>Exercicis</li> <li>Exercicis de tot el tema, amb els resultats</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T06_SQL_II_PostgreSQL/22_combinacions_de_taules/#22-combinacions-de-taules","title":"2.2 Combinacions de taules","text":"<p>Vam veure en la sent\u00e8ncia b\u00e0sica que en la cl\u00e0usula FROM pos\u00e0vem la taula o taules d'on s'agafarien les dades, per\u00f2 en tots els exemples posteriors nom\u00e9s entrava en joc una \u00fanica taula. </p> <p>\u00c9s el moment d'estudiar les diferents possibilitats que tindrem quan posem m\u00e9s d'una taula. </p> <ul> <li> <p>La primera \u00e9s el producte cartesi\u00e0, que no utilitzarem mai, per\u00f2 hem de saber en qu\u00e8 consisteix per poder evitar-lo.</p> </li> <li> <p>La segona ser\u00e0 la m\u00e9s utiilitzada, la combinaci\u00f3 (que de vegades anomenarem reuni\u00f3).</p> </li> <li> <p>La tercera \u00e9s una variant de l'anterior, la combinaci\u00f3 externa, molt \u00fatil en alguns casos.</p> </li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial SenseObraDerivada 2.5 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T06_SQL_II_PostgreSQL/23_subconsultes/","title":"23 subconsultes","text":"<p>Bases de Dades</p> <ul> <li>Tema 6: SQL - Consultes avan\u00e7ades (part II)</li> <li>2.1 Introducci\u00f3</li> <li>2.2 Combinacions de taules </li> <li>2.2.1 Producte cartesi\u00e0</li> <li>2.2.2 Combinaci\u00f3 interna <ul> <li>Exercicis</li> </ul> </li> <li>2.2.3 Combinaci\u00f3 externa <ul> <li>Exercicis</li> </ul> </li> <li>2.3 Subconsultes </li> <li>Exercicis</li> <li>2.4 Consultes d'operacions de conjunts </li> <li>Exercicis</li> <li>Exercicis de tot el tema, amb els resultats</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T06_SQL_II_PostgreSQL/23_subconsultes/#23-subconsultes","title":"2.3 Subconsultes","text":"<p>Una subconsulta \u00e9s una consulta dins d'una altra consulta. Aquesta subconsulta pot tenir tots els elements que hem vist fins ara.</p> <p>El lloc on posar una subconsulta dins de la consulta principal pot ser en la cl\u00e0usual WHERE o en la cl\u00e0usula HAVING (formant part d'una condici\u00f3) o en el FROM, i ha d'anar entre par\u00e8ntesis. Fins i tot es pot posar en el mateix SELECT, \u00e9s a dir, en les columnes que van despr\u00e9s del SELECT.</p> <ul> <li>Si va en el FROM, la subconsulta ser\u00e0 l'origen de les dades, i per tant s'executar\u00e0 abans i proporcionar\u00e0 les dades per a la consulta principal.</li> <li>Si va en el WHERE o el HAVING formar\u00e0 part d'una condici\u00f3, i aix\u00ed podrem comparar en la consulta principal un camp amb el que torne la subconsulta, per exemple. A banda de les comparacions normals que ja hem vist en el WHERE o el HAVING, podrem posar alguns operadors i predicats especials, com veurem m\u00e9s avant.</li> <li>Si va en el mateix SELECT normalment ser\u00e0 per a traure un resultat global que no afecta a la resta de la consulta</li> </ul> <p>Sintaxi en el FROM</p> <p>SELECT ...  FROM ( Subconsulta ) AS Nom_Subconsulta</p> <p>Anem a posar un exemple per entendre-ho. Volem traure la mitjana de pobles per comarca. Ho podem fer de la seg\u00fcent manera: primer comptem quants pobles hi ha en cada comarca, i una vegada calculat aix\u00f2 traem la mitjana.</p> <p>SELECT AVG(quants)  FROM (SELECT COUNT(*) AS quants  FROM POBLACIONS GROUP BY nom_c) AS S ;</p> <p>Observeu que \u00e9s necessari posar-li un \u00e0lias a la columna de la subconsulta (quants) per a poder fer refer\u00e8ncia a ella en la consulta principal. I per una altra banda, en PostgreSQL les subconsultes que van al FROM han de tenir obligat\u00f2riament un \u00e0lies. Si no pos\u00e0rem ... AS S (o qualsevol altre nom) ens donaria error.</p> <p>Com veieu, ja t\u00e9 un nivell de complexitat m\u00e9s que acceptable. Sempre s'executa primer la subconsulta i amb les dades que proporciona, s'executa la consulta principal. Pel grau de complexitat \u00e9s molt recomanable anar de dins cap a fora, \u00e9s a dir, pensar b\u00e9 la subconsulta, fins i tot executar-la per veure si trau el que necessitem (en l'exemple veure si trau el nombre de poblacions de cadascuna de les 34 comarques), i quan estiguem segurs que funciona b\u00e9 crear la consulta principal.</p> <p>Sintaxi en el WHERE o el HAVING</p> <p>SELECT ...  FROM Taula  WHERE camp operador ( Subconsulta )</p> <p>Podem observar que el que farem ser\u00e0 comparar algun camp de la taula (o una expressi\u00f3 amb alguna funci\u00f3) amb el resultat que ve de la subconsulta.</p> <p>Abans de veure qu\u00e8 podem posar com a operador o com a camp o fins i tot veure uns predicats que podrem utilitzar, posarem un exemple, per clarificar les coses. Intentarem traure les comarques amb una altura superior a la mitjana. Calcular la mitjana de les altures \u00e9s f\u00e0cil, i ser\u00e0 la subconsulta. El que farem ser\u00e0 comparar l'altura de cada poblaci\u00f3 amb aquesta mitjana.</p> <p>SELECT * FROM POBLACIONS WHERE altura &gt; (SELECT AVG(altura) </p> <p>FROM POBLACIONS)</p> <p>Si executeu la consulta, veureu que l'altura de tots els pobles \u00e9s superior a 300,44 que \u00e9s l'altura mitjana (aproximadament, perqu\u00e8 ho calcula amb molta precisi\u00f3)</p> <p>No hi ha cap problema en posar dues vegades la mateixa taula. Els camps es refereixen a la taula m\u00e9s propera. I funciona perfectament perqu\u00e8 la subconsulta ens torna un \u00fanic valor, la mitjana d'altures, i en la consulta principal es compara cada altura amb aquest valor. Posteriorment veurem com solucionar el problema de que la subconsulta torne m\u00e9s d'un valor.</p> <p>Els operadors de la condici\u00f3 poden ser de 3 tipus:</p> <ul> <li>De comparaci\u00f3. \u00c9s com l'exemple de dalt, per\u00f2 amb qualsevol operador de comparaci\u00f3. Es compara el camp (o l'expressi\u00f3) amb el resultat de la subconsulta. Si la subconsulta nom\u00e9s torna un valor, no hi ha m\u00e9s problema, per\u00f2 si torna m\u00e9s d'un valor (m\u00e9s d'una fila) de moment seria incorrecte (no es pot comparar un camp amb uns quants valors). Posem un altre exemple per il\u00b7lustrar. Traure la poblaci\u00f3 m\u00e9s alta es podria fer d'aquesta manera.</li> </ul> <p>SELECT * FROM POBLACIONS WHERE altura = (SELECT MAX(altura) </p> <p>FROM POBLACIONS)</p> <p>No hi ha problema perqu\u00e8 la subconsulta torna un valor. Per\u00f2 anem a complicar-la anem a veure les poblacions m\u00e9s altes de cada comarca. Podr\u00edem intentar-lo d'aquesta manera:</p> <p>SELECT *  FROM POBLACIONS WHERE altura = (SELECT MAX(altura) </p> <p>FROM POBLACIONS</p> <p>GROUP BY nom_c)</p> <p>Per\u00f2 ens donaria el seg\u00fcent error:</p> <p></p> <p>I \u00e9s que la subconsulta torna 34 valors (un per cada comarca), i d'aquesta manera no es pot comparar el valor de l'esquerra del igual amb els 34 valors de la dreta. Per a solucionar el problema de quan torna m\u00e9s d'un valor podem utilitzar els predicats ALL , ANY , SOME.</p> <ul> <li>Si utilitzem ALL el resultat ser\u00e0 cert si la comparaci\u00f3 \u00e9s certa amb TOTS els valors que torna la subconsulta.</li> <li>Si utilitzem ANY o SOME (que s\u00f3n sin\u00f2nims) el resultat ser\u00e0 cert si la comparaci\u00f3 \u00e9s certa amb ALGUN valor de la subconsulta.</li> </ul> <p>En el nostre exemple, segurament ens convindria ANY</p> <p>SELECT *  FROM POBLACIONS WHERE altura = ANY (SELECT MAX(altura) </p> <p>FROM POBLACIONS</p> <p>GROUP BY nom_c)</p> <p>Aquesta consulta no funcionar\u00e0 b\u00e9 del tot, ja que seleccionar\u00e0 totes les poblacions que coincideixen amb alguna de les altures m\u00e0ximes, siguen de la seua comarca o no. Aix\u00ed per exemple, l'altura m\u00e0xima de la comarca de la\u00a0Plana Alta\u00a0\u00e9s\u00a0la Serratella, amb 781 metres, que efectivament apareix al llistat. Per\u00f2 tamb\u00e9 apareix Castell\u00f3, que t\u00e9 una altura de 30 metres. I apareix perqu\u00e8 l'altura m\u00e0xima de la comarca Ribera Baixa d\u00f3na la casualitat que \u00e9s 30 metres (Almussafes). Ja dependrem a fer b\u00e9 aquesta consulta en els exemples posteriors, per\u00f2 per al fet de comparar amb molts valors ens va b\u00e9.</p> <ul> <li>L'operador IN. No ser\u00e0 problema que la subconsulta torne un valor o molts. La condici\u00f3 ser\u00e0 certa si el valor del camp (o de l'expressi\u00f3) est\u00e0 entre la llista de valors que torna la subconsulta. Tamb\u00e9 poden utilitzar NOT IN, i la condici\u00f3 ser\u00e0 certa quan el valor del camp no est\u00e0 entre la llista. Per exemple, una altra manera de traure les poblacions que no tenen institut, que la vista en les combinacions externes. En la subconsulta traem els codis de municipi de la taula INSTITUTS, i per tant s\u00f3n els pobles que tenen institut, i en la consulta principal volem els que no estan en aquesta llista</li> </ul> <p>SELECT * FROM POBLACIONS WHERE cod_m NOT IN (SELECT cod_m FROM INSTITUTS)</p> <ul> <li>L'operador EXISTS. \u00c9s segurament el m\u00e9s inc\u00f2mode. No es compara un camp (o expressi\u00f3) amb la subconsulta, sin\u00f3 \u00fanicament es posa [NOT] EXISTS (subconsulta) . La condici\u00f3 ser\u00e0 certa si la subconsulta torna alguna fila, i no ser\u00e0 certa si no torna cap fila. Intentem fer el mateix exemple d'abans, el dels pobles sense institut. Hem d'aconseguir que la subconsulta no tinga cap fila en el cas dels que no tenen institut. De paraula ho podem dir aix\u00ed: volem els pobles per als quals no existeix cap fila en INSTITUTS amb el mateix codi de municipi. Ara ja es pot intuir per on van els tirs:</li> </ul> <p>SELECT * FROM POBLACIONS WHERE NOT EXISTS (SELECT * FROM INSTITUTS WHERE cod_m= POBLACIONS.cod_m)</p> <p>mireu com si en la subconsulta posem un camp (en l'exemple cod_m), si el camp \u00e9s de la taula (o taules) de la subconsulta, es referir\u00e0 a ell, per aix\u00f2 si volem fer refer\u00e8ncia a un camp de la taula o taules de la consulta principal hem de posar el nom de la taula davant.</p> <p>Sintaxi en el SELECT</p> <p>SELECT ... ( Subconsulta ) FROM Taula</p> <p>Anem a posar tamb\u00e9 un exemple per entendre-ho. Anem a calcular la difer\u00e8ncia de l'altura de cada poblaci\u00f3 amb la mitjana. La mitjana \u00e9s un resultat global indepentent de la resta de la consulta, que en aquest cas \u00e9s molt senzilla perqu\u00e8 hem d'agafar informaci\u00f3 simple de les poblacions. La subconsulta tamb\u00e9 \u00e9s molt senzilla, perqu\u00e8 nom\u00e9s hem de calcular la mitjana d'altures).</p> <p>SELECT nom, altura, altura - (SELECT AVG(altura) FROM POBLACIONS) FROM POBLACIONS</p> <p>Exemples</p> <ol> <li>Traure l'altura mitjana de comarca m\u00e9s gran i la m\u00e9s menuda.</li> </ol> <p>Ens fa falta pr\u00e8viament l'altura mitjana de cada comarca, i aix\u00f2 ser\u00e0 la subconsulta. No oblidem posar un \u00e0lias al camp de la subconsulta, per poder fer refer\u00e8ncia en la consulta principal. I no oblidem tampoc que les subconsultes en el FROM han de tenir \u00e0lies.</p> <p>SELECT MAX(mitjana),MIN(mitjana) FROM (SELECT AVG(altura) AS mitjana FROM POBLACIONS GROUP BY nom_c) AS S;</p> <ol> <li>Traure tota la informaci\u00f3 de les poblacions que tenen m\u00e9s de 5 instituts.</li> </ol> <p>Podem pensar en una subconsulta on estiguen els codis de municipi de les poblacions que tenen m\u00e9s de 5 instituts (es consulta en la teula INSTITUTS agrupant per codi_m i comptant el n\u00famero de files per a que siga major que 5).</p> <p>SELECT * FROM POBLACIONS WHERE cod_m IN (SELECT cod_m FROM INSTITUTS GROUP BY cod_m HAVING count(*) &gt; 5)</p> <ol> <li>Traure tota la informaci\u00f3 de la poblaci\u00f3 m\u00e9s alta i de la m\u00e9s baixa.</li> </ol> <p>Ens plantegem 2 subconsultes, la que trau l'altura m\u00e0xima i la que trau l'altura m\u00ednima (en una \u00fanica sobconsulta ens tornaria valors en 2 columnes, i estaria m\u00e9s complicat). Senzillament ser\u00e0 traure tota la informaci\u00f3 de les poblacions que tenen una altura igual al que torna una subconsulta o al que torna l'altra.</p> <p>SELECT * FROM POBLACIONS WHERE altura = (SELECT MAX(altura) FROM POBLACIONS) OR altura = (SELECT MIN(altura) FROM POBLACIONS);</p> <ol> <li>Traure la poblaci\u00f3 m\u00e9s alta de cada comarca.</li> </ol> <p>La dificultat est\u00e0 en que ha de ser la m\u00e0xima de les altures de la seua comarca. Per tant, en la subconsulta hem de fer refer\u00e8ncia a la comarca en q\u00fcesti\u00f3. Com sempre estem tractant la taula POBLACIONS, tant en la consulta com en la subconsulta, haurem de posar un nom a la de la consulta principal, per poder fer refer\u00e8ncia a ella des de la subconsulta.</p> <p>SELECT * FROM POBLACIONS T1 WHERE altura = (SELECT MAX(altura) FROM POBLACIONS WHERE nom_c= T1.nom_c);</p> <p>En el resultat obtenim 35 poblacions, quan nom\u00e9s hi ha 34 comarques. La ra\u00f3 \u00e9s que a l'Alcoi\u00e0, hi ha 2 poblacions amb l'altura m\u00e0xima (816 metres), per tant el resultat \u00e9s correcte</p> <ol> <li>Obtenir el nom de la comarca i la prov\u00edncia de les comarques que tenen una altura mitjana m\u00e9s alta que la mitjana de totes les poblacions.</li> </ol> <p>La subconsulta ser\u00e0 prou senzilla: la mitjana d'altures de les poblacions. En la consulta principal haurem d'agrupar per cada comarca i calcular la mitjana d'altures de les poblacions, i comparar-la amb la mitjana que ens ve de la subconsulta. Com que demana tamb\u00e9 la prov\u00edncia, ens fa falta tamb\u00e9 la taula COMARQUES, i per tant l'haurem de reunir amb POBLACIONS; en aquesta ocasi\u00f3 ho hem fet posant la condic\u00f3 en el WHERE.</p> <p>SELECT COMARQUES.nom_c, provincia, AVG(altura) FROM COMARQUES , POBLACIONS WHERE COMARQUES.nom_c=POBLACIONS.nom_c GROUP BY COMARQUES.nom_c, provincia HAVING AVG(altura) &gt; (SELECT AVG(altura) FROM POBLACIONS)</p> <ol> <li>Traure el nom de la comarca amb la prov\u00edncia, n\u00famero de pobles de cadascuna i el percentatge que suposa respecta al total de pobles.</li> </ol> <p>Tota la informaci\u00f3 la podem traure d'una reuni\u00f3 entre les taules COMARQUES i POBLACIONS (per a comptar quants pobles hi ha en cada comarca), per\u00f2 per a poder calcular el percentatge necessitem el n\u00famero total de poblacions, que el podem calcular amb una senzilla subconsulta. El lloc m\u00e9s c\u00f2mode \u00e9s en el SELECT. La reuni\u00f3 l'hem feta en aquesta ocasi\u00f3 amb el USING.</p> <p>SELECT COMARQUES.nom_c, provincia, COUNT(cod_m), COUNT (cod_m)*100.0/(SELECT COUNT(*) FROM POBLACIONS) FROM COMARQUES INNER JOIN POBLACIONS USING(nom_c) GROUP BY 1,2;</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial SenseObraDerivada 2.5 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T06_SQL_II_PostgreSQL/24_consultes_doperacions_de_conjunts/","title":"24 consultes doperacions de conjunts","text":"<p>Bases de Dades</p> <ul> <li>Tema 6: SQL - Consultes avan\u00e7ades (part II)</li> <li>2.1 Introducci\u00f3</li> <li>2.2 Combinacions de taules </li> <li>2.2.1 Producte cartesi\u00e0</li> <li>2.2.2 Combinaci\u00f3 interna <ul> <li>Exercicis</li> </ul> </li> <li>2.2.3 Combinaci\u00f3 externa <ul> <li>Exercicis</li> </ul> </li> <li>2.3 Subconsultes </li> <li>Exercicis</li> <li>2.4 Consultes d'operacions de conjunts </li> <li>Exercicis</li> <li>Exercicis de tot el tema, amb els resultats</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T06_SQL_II_PostgreSQL/24_consultes_doperacions_de_conjunts/#24-consultes-doperacions-de-conjunts","title":"2.4 Consultes d'operacions de conjunts","text":"<p>Agruparem en aquest apartat les consultes que tracten conjunts de files per a fer operacions d'algebra de conjunts: uni\u00f3, intersecci\u00f3 i\u00a0 difer\u00e8ncia\u00a0de conjunts</p> <p>Toters aquestes consultes ajunten els resultats de dues o m\u00e9s consultes.</p> <p>Sintaxi de la UNI\u00d3</p> <p>[TABLE] consulta1  UNION [ALL]  [TABLE] consulta2 ...</p> <p>Cadascuna de les consultes pot ser una taula (posant la paraula TABLE davant) o el nom d'una consulta ja guardada, encara que el m\u00e9s habitual ser\u00e0 posar directament la sent\u00e8ncia SQL.</p> <p>Els requisits s\u00f3n que les dues (o m\u00e9s) consultes tornen el mateix nombre de camps, i que siguen sin\u00f3 del mateix tipus, s\u00ed de tipus compatibles</p> <p>Igual que en la uni\u00f3 de conjunts, el resultat seran totes les files de les dues (o m\u00e9s) consultes individuals, per\u00f2 sense repetir files, \u00e9s a dir, si de les dues consultes s'obtenen files iguals, aquestes nom\u00e9s eixiran una vegada. L'anterior es pot evitar si posem el predicat ALL, i aleshores s\u00ed que eixiran les files repetides.</p> <p>Els noms dels camps vindran donats per la primera consulta.</p> <p>Si volem ordenar per algun camp, ho haurem de posar al final de l'\u00faltima consulta, per\u00f2 referint-se en tot cas als camps de la primera consulta (ho podem evitar posant el n\u00famero d'ordre en el ORDER BY)</p> <p>Exemple</p> <ol> <li>Volem veure en un \u00fanic resultat tant el nom de les comarques com el nom de les poblacions, sempre amb el nom de la prov\u00edncia al costat</li> </ol> <p>SELECT nom_c, provincia  FROM COMARQUES UNION  SELECT nom, provincia  FROM COMARQUES INNER JOIN POBLACIONS USING (nom_c) ORDER BY nom_c;</p> <p>Com a curiositat, eixiran 575 files, per\u00f2 si pos\u00e0rem UNION ALL ens eixirien 576. Aix\u00f2 \u00e9s perqu\u00e8 la comarca de la ciutat de Val\u00e8ncia es diu Val\u00e8ncia i est\u00e0 a la prov\u00edncia de Val\u00e8ncia. Per tant \u00e9s una fila que apareixer\u00e0 tant en la primera com en la segona consulta. Si fem UNION no es repetir\u00e0, per\u00f2 si fem UNION ALL s\u00ed que es repetir\u00e0.</p> <p>Sintaxi de la INTERSECCI\u00d3</p> <p>\u00c9s identica a la uni\u00f3, per\u00f2 posant la paraula INTERSECT, i servir\u00e0 per a traure \u00fanicament les files que estan en les dues consultes.</p> <p>[TABLE] consulta1  INTERSECT [ALL]  [TABLE] consulta2 ...</p> <p>Igual que abans, cadascuna de les consultes pot ser una taula (posant la paraula TABLE davant), i tenim el requisit que les dues (o m\u00e9s) consultes tornen el mateix nombre de camps, i de tipus compatibles.</p> <p>En principi no eixiran files repetides, a no ser que posem ALL</p> <p>Exemple</p> <ol> <li>Com que en l'exemple de la uni\u00f3 hav\u00edem vist que la fila Val\u00e8ncia Val\u00e8ncia eixia en les 2 consultes, anem a comprovar que apareix en la intersecci\u00f3:</li> </ol> <p>SELECT nom_c, provincia  FROM COMARQUES INTERSECT SELECT nom, provincia  FROM COMARQUES INNER JOIN POBLACIONS USING (nom_c) ORDER BY nom_c;</p> <p>Sintaxi de la DIFER\u00c8NCIA</p> <p>\u00c9s identica a les anteriors, per\u00f2 posant la paraula EXCEPT, i servir\u00e0 per a traure les files que estan en la primera consulta per\u00f2 que no estan en la segona.</p> <p>[TABLE] consulta1  EXCEPT [ALL]  [TABLE] consulta2 ...</p> <p>Igual que abans, cadascuna de les consultes pot ser una taula (posant la paraula TABLE davant), i tenim el requisit que les dues (o m\u00e9s) consultes tornen el mateix nombre de camps, i de tipus compatibles.</p> <p>En principi no eixiran files repetides, a no ser que posem ALL</p> <p>Exemple</p> <ol> <li>Aprofitem el mateix exemple d'abans per a comprovar que amb EXCEPT no eixir\u00e0 la comarca Val\u00e8ncia, ja que hi ha una fila id\u00e8ntica en la segona consulta:</li> </ol> <p>SELECT nom_c, provincia  FROM COMARQUES EXCEPT SELECT nom, provincia  FROM COMARQUES INNER JOIN POBLACIONS USING (nom_c) ORDER BY nom_c;</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial SenseObraDerivada 2.5 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T06_SQL_II_PostgreSQL/exercicis/","title":"Exercicis","text":"<p>Bases de Dades</p> <ul> <li>Tema 6: SQL - Consultes avan\u00e7ades (part II)</li> <li>2.1 Introducci\u00f3</li> <li>2.2 Combinacions de taules </li> <li>2.2.1 Producte cartesi\u00e0</li> <li>2.2.2 Combinaci\u00f3 interna <ul> <li>Exercicis</li> </ul> </li> <li>2.2.3 Combinaci\u00f3 externa <ul> <li>Exercicis</li> </ul> </li> <li>2.3 Subconsultes </li> <li>Exercicis</li> <li>2.4 Consultes d'operacions de conjunts </li> <li>Exercicis</li> <li>Exercicis de tot el tema, amb els resultats</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T06_SQL_II_PostgreSQL/exercicis/#exercicis","title":"Exercicis","text":""},{"location":"BD-T06_SQL_II_PostgreSQL/exercicis/#exercicis-apartat-222","title":"Exercicis apartat 2.2.2","text":"<p>6.51\u00a0Traure el nom dels clients amb el n\u00famero de factura i la data (individuals, sense agrupar res) que t\u00e9 cada client. Trau el resultat ordenat per client, i dins d'aquest per data de la factura</p> <p>6.52\u00a0Traure el nom del soci, amb el codi i la descripci\u00f3 de cada article que ha demanat. Ordena per nom del soci i codi de l'article.</p> <p>6.53 Modificar l'anterior per a que no es repetesquen els resultats.</p> <p>6.54 Traure el nom dels clients amb la quantitat de factures que tenen, ordenades per aquest n\u00famero de major a menor</p> <p>6.55 Traure el n\u00famero de factura, data, codi de client, total de la factura (amb l'\u00e0lies IMPORT) i total de la factura aplicant descomptes d'article (amb \u00e0lies DESCOMPTE_1), com en la consulta 6.33, per\u00f2 sense el l\u00edmit de les 10 l\u00ednies de factura. Ordena per n\u00famero de factura.</p> <p>6.56\u00a0Modificar l'anterior per a aplicar tamb\u00e9 el descompte de la factura (amb l'\u00e0lies DESCOMPTE_2)</p> <p>6.57 Traure el codi i nom d'aquells venedors que supervisen alg\u00fa (consten com a cap). Traure tamb\u00e9 el n\u00famero de supervisats de cadascun d'aquestos supervisors.</p> <p>6.58 Traure el codi i descripci\u00f3 dels articles juntament amb el n\u00famero de vegades que s'ha venut, el total d'unitats venudes i la mitjana d'unitats venudes per factura.</p> <p>6.59 Traure el codi i la descripci\u00f3 de les categories, amb la quantitat d'articles venuts de cada categoria, d'aquelles categories de les quals se n'han venut m\u00e9s de 100 unitats. Ordenar per aquest n\u00famero de forma decendent.</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial SenseObraDerivada 2.5 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T06_SQL_II_PostgreSQL/exercicis0/","title":"Exercicis0","text":"<p>Bases de Dades</p> <ul> <li>Tema 6: SQL - Consultes avan\u00e7ades (part II)</li> <li>2.1 Introducci\u00f3</li> <li>2.2 Combinacions de taules </li> <li>2.2.1 Producte cartesi\u00e0</li> <li>2.2.2 Combinaci\u00f3 interna <ul> <li>Exercicis</li> </ul> </li> <li>2.2.3 Combinaci\u00f3 externa <ul> <li>Exercicis</li> </ul> </li> <li>2.3 Subconsultes </li> <li>Exercicis</li> <li>2.4 Consultes d'operacions de conjunts </li> <li>Exercicis</li> <li>Exercicis de tot el tema, amb els resultats</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T06_SQL_II_PostgreSQL/exercicis0/#exercicis","title":"Exercicis","text":""},{"location":"BD-T06_SQL_II_PostgreSQL/exercicis0/#exercicis-apartat-223","title":"Exercicis Apartat 2.2.3","text":"<p>6.60 Traure el codi i el nom dels clients que no tenen cap factura.</p> <p>6.61 Traure el codi, descripci\u00f3 i total d'unitats venudes de tots els articles, fins i tot d'aquells que no s'ha venut res.</p> <p>Nota</p> <p>Per a deixar-lo m\u00e9s bonic, com que la suma de valors nuls no \u00e9s 0 sin\u00f3 nul, per a que ens aparegue el valor 0 podem utilitzar la funci\u00f3 COALESCE(valor,0), que si el valor \u00e9s nul torna un 0.</p> <p>6.62 Traure el nom de tots els pobles i el n\u00famero de clients en cas de que en tinguen. Ordena per n\u00famero de clients de forma descendent.</p> <p>6.63 Traure el codi i la descripci\u00f3 de les categories, amb el n\u00famero d'articles de cada categoria i el n\u00famero total d'unitats venudes de cada categoria, d'aquelles categories de les quals tenim m\u00e9s de 15 articles, i ordenat per n\u00famero d'articles de forma descendent. Aquesta sent\u00e8ncia ja \u00e9s prou complicada. Concretament haureu de tenir en compte que:</p> <ul> <li>Voldrem traure el n\u00famero d'articles de cada categoria, per\u00f2 potser alguns articles no s'han venut, i per tant no apareixeran en la taula LINIA_FAC.</li> <li>I tamb\u00e9 tenim el problema que, com ens fa falta la taula LINIA_FAC, un article venut en m\u00e9s d'una factura apareixer\u00e0 m\u00e9s d'una vegada. Si comptem de forma normal, el comptar\u00edem m\u00e9s d'una vegada cada article. Per tant voldrem comptar els diferents articles de cada categoria.</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial SenseObraDerivada 2.5 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T06_SQL_II_PostgreSQL/exercicis1/","title":"Exercicis1","text":"<p>Bases de Dades</p> <ul> <li>Tema 6: SQL - Consultes avan\u00e7ades (part II)</li> <li>2.1 Introducci\u00f3</li> <li>2.2 Combinacions de taules </li> <li>2.2.1 Producte cartesi\u00e0</li> <li>2.2.2 Combinaci\u00f3 interna <ul> <li>Exercicis</li> </ul> </li> <li>2.2.3 Combinaci\u00f3 externa <ul> <li>Exercicis</li> </ul> </li> <li>2.3 Subconsultes </li> <li>Exercicis</li> <li>2.4 Consultes d'operacions de conjunts </li> <li>Exercicis</li> <li>Exercicis de tot el tema, amb els resultats</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T06_SQL_II_PostgreSQL/exercicis1/#exercicis","title":"Exercicis","text":""},{"location":"BD-T06_SQL_II_PostgreSQL/exercicis1/#exercicis-apartat-23","title":"Exercicis apartat 2.3","text":"<p>6.64 Traure el n\u00famero m\u00e0xim de factures fetes a un client</p> <p>6.65 Traure el l'import que suposa la factura m\u00e9s cara i l'import que suposa la m\u00e9s barata (sense considerar ni descomptes ni IVA)</p> <p>6.66 Traure el n\u00famero de factures m\u00e9s alt que s'ha venut per venedor en cada trimestre (no traurem qui \u00e9s el venedor, que seria encara m\u00e9s complicat). Per a poder agrupar per trimestre, ens far\u00e0 falta la funci\u00f3 TO_CHAR(data,'Q'), que trau el n\u00famero de trimestre. El pas previ \u00e9s calcular el n\u00famero de factures de cada venedor i en cada trimestre. Despr\u00e9s, amb la informaci\u00f3 anterior, voldrem calcular el m\u00e0xim de cada trimestre.</p> <p>6.67 Traure els articles m\u00e9s cars que la mitjana. Tragueu-los ordenats per la categoria, i despr\u00e9s per codi d'article.</p> <p>6.68 Modificar l'anterior per a traure els articles m\u00e9s cars que la mitjana de la seua categoria. Tragueu-los ordenats per la categoria</p> <p>6.69 Traure els pobles on tenim clients per\u00f2 no tenim venedors. Ha de ser per mig de subconsultes (en plural). Ordeneu per codi del poble.</p> <p>6.70 Traure els pobles on tenim m\u00e9s venedors que clients. Traure el codi del poble, el nom i el n\u00famero de venedors. Ordena per nom del poble.</p> <p>6.71 Traure l'import de la factura m\u00e9s cara de cada trimestre. La informaci\u00f3 pr\u00e8via \u00e9s la factura amb la data i l'import. A partir d'ah\u00ed haurem de calcular el m\u00e0xim de l'import per a cada trimestre (no caldr\u00e0 traure quina factura \u00e9s).</p> <p>6.72 Traure el nom del venedor, el n\u00famero de factures que ha venut i el percentatge que suposa sobre el total. Podria ser que en el moment de calcular el percentatge, el n\u00famero resultant s'haja de convertir a num\u00e8ric per a que d\u00f3ne b\u00e9 el resultat, ja que en fer una operaci\u00f3 amb enters, el resultat ser\u00e0 enter. Aleshores haur\u00edem d'obligar a que el n\u00famero tinga decimals (::NUMERIC). I la funci\u00f3 d'arrodonir \u00e9s ROUND. Ordeneu pel nom.</p> <p>6.73 Traure tota la informaci\u00f3 (amb l'import) de la factura m\u00e9s cara. Ha de ser per mig de subconsultes. Mireu que segurament hi haur\u00e0 2 subconsultes. En la m\u00e9s interna calculem l'import de les factures. En l'altra calculem el m\u00e0xim. I en la consulta principal, busquem la factura que coincideix amb aquest m\u00e0xim.</p> <p>6.74 (voluntari) Obtenir el venedor que ha venut m\u00e9s unitats de cada categoria, sense considerar en la categoria el valor nul. Aquesta consulta la podr\u00edem considerar ja com molt avan\u00e7ada.</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial SenseObraDerivada 2.5 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T06_SQL_II_PostgreSQL/exercicis2/","title":"Exercicis2","text":"<p>Bases de Dades</p> <ul> <li>Tema 6: SQL - Consultes avan\u00e7ades (part II)</li> <li>2.1 Introducci\u00f3</li> <li>2.2 Combinacions de taules </li> <li>2.2.1 Producte cartesi\u00e0</li> <li>2.2.2 Combinaci\u00f3 interna <ul> <li>Exercicis</li> </ul> </li> <li>2.2.3 Combinaci\u00f3 externa <ul> <li>Exercicis</li> </ul> </li> <li>2.3 Subconsultes </li> <li>Exercicis</li> <li>2.4 Consultes d'operacions de conjunts </li> <li>Exercicis</li> <li>Exercicis de tot el tema, amb els resultats</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T06_SQL_II_PostgreSQL/exercicis2/#exercicis","title":"Exercicis","text":""},{"location":"BD-T06_SQL_II_PostgreSQL/exercicis2/#exercicis-apartat-24","title":"Exercicis apartat 2.4","text":"<p>6.75 Traure el nom de tots els clients i venedors implicats en alguna venda del primer trimestre de 2015.</p> <p>6.76a Traure per mig de sent\u00e8ncies d'operacions de conjunts els pobles on tenim algun venedor o algun client. No volem resultats repetits, i ho volem ordenat pel nom del poble.</p> <p>6.76b Modificar l'anterior per a traure els pobles on tenim al mateix temps\u00a0venedors i clients</p> <p>6.76c Modificar l'anterior per a traure els pobles on tenim\u00a0venedors per\u00f2 no tenim clients</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial SenseObraDerivada 2.5 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T06_SQL_II_PostgreSQL/exercicis_de_tot_el_tema_amb_els_resultats/","title":"Exercicis de tot el tema amb els resultats","text":"<p>Bases de Dades</p> <ul> <li>Tema 6: SQL - Consultes avan\u00e7ades (part II)</li> <li>2.1 Introducci\u00f3</li> <li>2.2 Combinacions de taules </li> <li>2.2.1 Producte cartesi\u00e0</li> <li>2.2.2 Combinaci\u00f3 interna <ul> <li>Exercicis</li> </ul> </li> <li>2.2.3 Combinaci\u00f3 externa <ul> <li>Exercicis</li> </ul> </li> <li>2.3 Subconsultes </li> <li>Exercicis</li> <li>2.4 Consultes d'operacions de conjunts </li> <li>Exercicis</li> <li>Exercicis de tot el tema, amb els resultats</li> </ul> <p>\u00ab Anterior</p>"},{"location":"BD-T06_SQL_II_PostgreSQL/exercicis_de_tot_el_tema_amb_els_resultats/#exercicis-de-tot-el-tema-amb-els-resultats","title":"Exercicis de tot el tema, amb els resultats","text":"<p>6.51 Traure el nom dels clients amb el n\u00famero de factura i la data (individuals, sense agrupar res) que t\u00e9 cada client. Trau el resultat ordenat per client, i dins d'aquest per data de la factura</p> <p></p> <p>Un total de 105 files</p> <p>6.52 Traure el nom del soci, amb el codi i la descripci\u00f3 de cada article que ha demanat. Ordena per nom del soci i codi de l'article.</p> <p></p> <p>Un total de 541 files</p> <p>6.53 Modificar l'anterior per a que no es repetesquen els resultats.</p> <p></p> <p>Un total de 532 files</p> <p>Observa com ara no es repeteix la fila 10 i 11, i abans s\u00ed</p> <p>6.54 Traure el nom dels clients amb la quantitat de factures que tenen, ordenades per aquest n\u00famero de major a menor</p> <p></p> <p>Un total de 40 files</p> <p>6.55 Traure el n\u00famero de factura, data, codi de client, total de la factura (amb l'\u00e0lies IMPORT) i total de la factura aplicant descomptes d'article (amb \u00e0lies DESCOMPTE_1), com en la consulta 6.33, per\u00f2 sense el l\u00edmit de les 10 l\u00ednies de factura. Ordena per n\u00famero de factura.</p> <p></p> <p>Un total de 105 files</p> <p>6.56 Modificar l'anterior per a aplicar tamb\u00e9 el descompte de la factura (amb l'\u00e0lies DESCOMPTE_2)</p> <p></p> <p>Un total de 105 files</p> <p>6.57 Traure el codi i nom d'aquells venedors que supervisen alg\u00fa (consten com a cap). Traure tamb\u00e9 el n\u00famero de supervisats de cadascun d'aquestos supervisors.</p> <p> </p> <p>6.58 Traure el codi i descripci\u00f3 dels articles juntament amb el n\u00famero de vegades que s'ha venut, el total d'unitats venudes i la mitjana d'unitats venudes per factura. Ordenar pel n\u00famero total d'unitats venudes de forma descendent, i dins d'aquesta per codi d'article de forma ascendent.</p> <p></p> <p>Un total de 399 files</p> <p>6.59 Traure el codi i la descripci\u00f3 de les categories, amb la quantitat d'articles venuts de cada categoria, d'aquelles categories de les quals se n'han venut m\u00e9s de 100 unitats. Ordenar per aquest n\u00famero de forma descendent.</p> <p></p> <p>6.60 Traure el codi i el nom dels clients que no tenen cap factura.</p> <p></p> <p>6.61 Traure el codi, descripci\u00f3 i total d'unitats venudes de tots els articles, fins i tot d'aquells que no s'ha venut res.</p> <p>Nota</p> <p>Per a deixar-lo m\u00e9s bonic, com que la suma de valors nuls no \u00e9s 0 sin\u00f3 nul, per a que ens aparegue el valor 0 podem utilitzar la funci\u00f3 COALESCE(valor,0), que si el valor \u00e9s nul torna un 0.</p> <p></p> <p>Un total de 812 files</p> <p>6.62 Traure el nom de tots els pobles i el n\u00famero de clients en cas que en tinguen. Ordena per n\u00famero de clients de forma descendent.</p> <p></p> <p>Un total de 1663 files</p> <p>6.63 Traure el codi i la descripci\u00f3 de les categories, amb el n\u00famero d'articles de cada categoria i el n\u00famero total d'unitats venudes de cada categoria, d'aquelles categories de les quals tenim m\u00e9s de 15 articles, i ordenat per n\u00famero d'articles de forma descendent. Aquesta sent\u00e8ncia ja \u00e9s prou complicada. Concretament haureu de tenir en compte que:</p> <ul> <li>Voldrem traure el n\u00famero d'articles de cada categoria, per\u00f2 potser alguns articles no s'han venut, i per tant no apareixeran en la taula LINIA_FAC.</li> <li>I tamb\u00e9 tenim el problema que, com ens fa falta la taula LINIA_FAC, un article venut en m\u00e9s d'una factura apareixer\u00e0 m\u00e9s d'una vegada. Si comptem de forma normal, el comptar\u00edem m\u00e9s d'una vegada cada article. Per tant voldrem comptar els diferents articles de cada categoria.</li> </ul> <p></p> <p>6.64 Traure el n\u00famero m\u00e0xim de factures fetes a un client</p> <p></p> <p>6.65 Traure el l'import que suposa la factura m\u00e9s cara i l'import que suposa la m\u00e9s barata (sense considerar ni descomptes ni IVA)</p> <p></p> <p>6.66 Traure el n\u00famero de factures m\u00e9s alt que s'ha venut per venedor en cada trimestre (no traurem qui \u00e9s el venedor, que seria encara m\u00e9s complicat). Per a poder agrupar per trimestre, ens far\u00e0 falta la funci\u00f3 TO_CHAR(data,'Q'), que trau el n\u00famero de trimestre. El pas previ \u00e9s calcular el n\u00famero de factures de cada venedor i en cada trimestre. Despr\u00e9s, amb la informaci\u00f3 anterior, voldrem calcular el m\u00e0xim de cada trimestre.</p> <p></p> <p>6.67 Traure els articles m\u00e9s cars que la mitjana. Tragueu-los ordenats per la categoria, i despr\u00e9s per codi d'article.</p> <p></p> <p>Un total de 164 files</p> <p>6.68 Modificar l'anterior per a traure els articles m\u00e9s cars que la mitjana de la seua categoria. Tragueu-los ordenats per la categoria</p> <p></p> <p>Un total de 75 files</p> <p>\u00c9s un resultat molt similar a l'anterior, per\u00f2 observeu que ara no estan els productes de les files 5, 14, 15, ...</p> <p>6.69 Traure els pobles on tenim clients per\u00f2 no tenim venedors. Ha de ser per mig de subconsultes (en plural). Ordeneu per codi del poble.</p> <p></p> <p>6.70 Traure els pobles on tenim m\u00e9s venedors que clients. Traure el codi del poble, el nom i el n\u00famero de venedors. Ordena per nom del poble.</p> <p></p> <p>6.71 Traure l'import de la factura m\u00e9s cara de cada trimestre. La informaci\u00f3 pr\u00e8via \u00e9s la factura amb la data i l'import. A partir d'ah\u00ed haurem de calcular el m\u00e0xim de l'import per a cada trimestre (no caldr\u00e0 traure quina factura \u00e9s).</p> <p></p> <p>6.72 Traure el nom del venedor, el n\u00famero de factures que ha venut i el percentatge que suposa sobre el total. Podria ser que en el moment de calcular el percentatge, el n\u00famero resultant s'haja de convertir a num\u00e8ric per a que d\u00f3ne b\u00e9 el resultat, ja que en fer una operaci\u00f3 amb enters, el resultat ser\u00e0 enter. Aleshores haur\u00edem d'obligar a que el n\u00famero tinga decimals (::NUMERIC). I la funci\u00f3 d'arrodonir \u00e9s ROUND. Ordeneu pel nom.</p> <p></p> <p>6.73 Traure tota la informaci\u00f3 (amb l'import) de la factura m\u00e9s cara. Ha de ser per mig de subconsultes. Mireu que segurament hi haur\u00e0 2 subconsultes. En la m\u00e9s interna calculem l'import de les factures. En l'altra calculem el m\u00e0xim. I en la consulta principal, busquem la factura que coincideix amb aquest m\u00e0xim.</p> <p></p> <p>6.74 (voluntari) Obtenir el venedor que ha venut m\u00e9s unitats de cada categoria, sense considerar en la categoria el valor nul. Aquesta consulta la podr\u00edem considerar ja com molt avan\u00e7ada.</p> <p></p> <p>6.75 Traure el nom de tots els clients i venedors implicats en alguna venda del primer trimestre de 2015. Intentar traure en una segona columna el text Venedor per als venedors, i Client per als clients. Ordenat pel nom.</p> <p></p> <p>6.76a Traure per mig de sent\u00e8ncies d'operacions de conjunts els pobles on tenim algun venedor o algun client. No volem resultats repetits, i ho volem ordenat pel nom del poble.</p> <p></p> <p>Un total de 31 files</p> <p>6.76b Modificar l'anterior per a traure els pobles on tenim al mateix temps\u00a0venedors i clients</p> <p></p> <p>6.76c Modificar l'anterior per a traure els pobles on tenim\u00a0venedors per\u00f2 no tenim clients</p> <p></p> <p>\u00ab Anterior</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial SenseObraDerivada 2.5 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T06_SQL_I_PostgreSQL/","title":"Index","text":"<p>Bases de Dades</p> <ul> <li>Tema 6: SQL - Consulta b\u00e0sica (part I)</li> <li>Objectius i Coneixements previs</li> <li>1. Introducci\u00f3</li> <li>2. DDL i DML</li> <li>3. Client DBeaver: instal\u00b7laci\u00f3 i confiuraci\u00f3</li> <li>4. Client DBeaver: utilitzaci\u00f3</li> <li>5. Dades dels exemples i els exercicis</li> <li>6. Operadors</li> <li>7. Funcions </li> <li>7.1 Formats de les dates</li> <li>7.2 Formats dels n\u00fameros</li> <li>8. La consulta SELECT</li> <li>9. Consulta b\u00e0sica </li> <li>Exercicis</li> <li>10. \u00c0lies en les columnes </li> <li>Exercicis</li> <li>11. La cl\u00e0usula WHERE </li> <li>Exercicis</li> <li>12. Funcions d'agregat </li> <li>Exercicis</li> <li>13. La cl\u00e0usula GROUP BY </li> <li>Exercicis</li> <li>14. La cl\u00e0usula HAVING </li> <li>Exercicis</li> <li>15. La cl\u00e0usula ORDER BY </li> <li>Exercicis</li> <li>16. El predicat DISTINCT </li> <li>Exercicis</li> <li>17. La cl\u00e0usula LIMIT .. OFFSET </li> <li>Exercicis</li> <li>18. Consulta de creaci\u00f3 de taules </li> <li>Exercicis</li> <li>19. Ordre amb qu\u00e8 s'executa una sent\u00e8ncia SQL</li> <li>Exercicis de tot el tema, amb els resultats</li> </ul> <p>Seg\u00fcent \u00bb</p>"},{"location":"BD-T06_SQL_I_PostgreSQL/#tema-6-sql-consulta-basica-part-i","title":"Tema 6: SQL - Consulta b\u00e0sica (part I)","text":"<p>Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T06_SQL_I_PostgreSQL/10_lies_en_les_columnes/","title":"10 lies en les columnes","text":"<p>Bases de Dades</p> <ul> <li>Tema 6: SQL - Consulta b\u00e0sica (part I)</li> <li>Objectius i Coneixements previs</li> <li>1. Introducci\u00f3</li> <li>2. DDL i DML</li> <li>3. Client DBeaver: instal\u00b7laci\u00f3 i confiuraci\u00f3</li> <li>4. Client DBeaver: utilitzaci\u00f3</li> <li>5. Dades dels exemples i els exercicis</li> <li>6. Operadors</li> <li>7. Funcions </li> <li>7.1 Formats de les dates</li> <li>7.2 Formats dels n\u00fameros</li> <li>8. La consulta SELECT</li> <li>9. Consulta b\u00e0sica </li> <li>Exercicis</li> <li>10. \u00c0lies en les columnes </li> <li>Exercicis</li> <li>11. La cl\u00e0usula WHERE </li> <li>Exercicis</li> <li>12. Funcions d'agregat </li> <li>Exercicis</li> <li>13. La cl\u00e0usula GROUP BY </li> <li>Exercicis</li> <li>14. La cl\u00e0usula HAVING </li> <li>Exercicis</li> <li>15. La cl\u00e0usula ORDER BY </li> <li>Exercicis</li> <li>16. El predicat DISTINCT </li> <li>Exercicis</li> <li>17. La cl\u00e0usula LIMIT .. OFFSET </li> <li>Exercicis</li> <li>18. Consulta de creaci\u00f3 de taules </li> <li>Exercicis</li> <li>19. Ordre amb qu\u00e8 s'executa una sent\u00e8ncia SQL</li> <li>Exercicis de tot el tema, amb els resultats</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T06_SQL_I_PostgreSQL/10_lies_en_les_columnes/#10-alies-en-les-columnes","title":"10. \u00c0lies en les columnes","text":"<p>Tenim tamb\u00e9 la possibilitat de donar noms (\u00e0lies) a les columnes que apareixeran en la cap\u00e7alera de les columnes corresponents en el resultat.</p> <p>Sintaxi</p> <p>SELECT columna1 [AS \u00e0lias1] [ , columna2 [AS \u00e0lias2] ] </p> <p>FROM TAULA;</p> <p>Si volem que en la cap\u00e7alera apareguen m\u00e9s d'una paraula, les haurem de tancar amb cometes dobles ( \" ).</p> <p>Per exemple:</p> <p>SELECT cod_m AS \"Codi Municipi\" , nom  FROM POBLACIONS;</p> <p>\u00c9s especialment \u00fatil la utilitzaci\u00f3 d'\u00e0lies quan posem una expressi\u00f3, en compte d'una \u00fanica columna. Si no posem \u00e0lies, apareix en la cap\u00e7alera una cosa semblant a ?column?.</p> <p>SELECT nom_c || ' (' || provincia || ')' AS \" Comarca (provincia)\" FROM COMARQUES;</p> <p>I a banda del seu valor est\u00e8tic, m\u00e9s avant veurem sent\u00e8ncies SQL en les quals obligat\u00f2riament haurem de posar \u00e0lies a les columnes que siguen el resultat d'una expressi\u00f3.</p> <p>Exemples</p> <ol> <li>Traure de les poblacions, el nom i el n\u00famero d'habitants (camp poblacio), aquest \u00faltim el nom habitants.</li> </ol> <p>SELECT nom, poblacio AS habitants FROM POBLACIONS;</p> <ol> <li>Traure tots els camps de la taula INSTITUTS de forma elegant.</li> </ol> <p>SELECT codi AS \"Codi Institut\", nom as Nom, adreca AS Adre\u00e7a, numero AS N\u00famero, codpostal AS \"Codi Postal\", cod_m AS \"Codi Municipi\" FROM INSTITUTS;</p> <p>Si volem que totes les cap\u00e7aleres comencen per maj\u00fascula, haurem de posar tots els \u00e0lies entre cometes dobles, encara que nom\u00e9s consten d'una paruala</p> <p>SELECT codi AS \"Codi Institut\", nom as \"Nom\", adreca AS \"Adre\u00e7a\", numero AS \"N\u00famero\", codpostal AS \"Codi Postal\", cod_m AS \"Codi Municipi\" FROM INSTITUTS;</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T06_SQL_I_PostgreSQL/11_la_clusula_where/","title":"11 la clusula where","text":"<p>Bases de Dades</p> <ul> <li>Tema 6: SQL - Consulta b\u00e0sica (part I)</li> <li>Objectius i Coneixements previs</li> <li>1. Introducci\u00f3</li> <li>2. DDL i DML</li> <li>3. Client DBeaver: instal\u00b7laci\u00f3 i confiuraci\u00f3</li> <li>4. Client DBeaver: utilitzaci\u00f3</li> <li>5. Dades dels exemples i els exercicis</li> <li>6. Operadors</li> <li>7. Funcions </li> <li>7.1 Formats de les dates</li> <li>7.2 Formats dels n\u00fameros</li> <li>8. La consulta SELECT</li> <li>9. Consulta b\u00e0sica </li> <li>Exercicis</li> <li>10. \u00c0lies en les columnes </li> <li>Exercicis</li> <li>11. La cl\u00e0usula WHERE </li> <li>Exercicis</li> <li>12. Funcions d'agregat </li> <li>Exercicis</li> <li>13. La cl\u00e0usula GROUP BY </li> <li>Exercicis</li> <li>14. La cl\u00e0usula HAVING </li> <li>Exercicis</li> <li>15. La cl\u00e0usula ORDER BY </li> <li>Exercicis</li> <li>16. El predicat DISTINCT </li> <li>Exercicis</li> <li>17. La cl\u00e0usula LIMIT .. OFFSET </li> <li>Exercicis</li> <li>18. Consulta de creaci\u00f3 de taules </li> <li>Exercicis</li> <li>19. Ordre amb qu\u00e8 s'executa una sent\u00e8ncia SQL</li> <li>Exercicis de tot el tema, amb els resultats</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T06_SQL_I_PostgreSQL/11_la_clusula_where/#11-la-clausula-where","title":"11. La cl\u00e0usula WHERE","text":"<p>Ens servir\u00e0 per establir filtres. Nom\u00e9s eixiran les files que satisfacen la condici\u00f3 del filtre.</p> <p>Sintaxi</p> <p>SELECT   FROM   WHERE  ; <p>La condici\u00f3 podr\u00e0 ser una o m\u00e9s d'una, unides en aquest cas pels operadors l\u00f2gics AND, OR i NOT. Cada condici\u00f3 ser\u00e0 una comparaci\u00f3 entre expressions, on poden entrar columnes, constants, par\u00e0metres, funcions v\u00e0lides de PostgreSQL, ... unides per operadors aritm\u00e8tics. Els operadors que es poden utilitzar per a fer les comparacions s\u00f3n:</p> <ul> <li>&lt; \u00a0 \u00a0 &lt;=\u00a0\u00a0\u00a0\u00a0 =\u00a0\u00a0\u00a0\u00a0 &gt;=\u00a0\u00a0\u00a0\u00a0 &gt;\u00a0\u00a0\u00a0 \u00a0 \u00a0 \u00a0\u00a0 &lt;&gt;\u00a0 (!=)\u00a0\u00a0 (distint)</li> <li>BETWEEN valor1 AND valor2 (els valors compresos entre valor1 i valor2)</li> <li>IN (llista_de_valors) si el valor amb qu\u00e8 es compara est\u00e0 en la llista de valors (entre par\u00e8ntesis i valors separats per comes)</li> <li>Tamb\u00e9 podem utilitzar LIKE en la condici\u00f3.\u00a0En els exemples 6, 7 i 8 es veu la seua utilitzaci\u00f3. L'operador LIKE s'utilitza junt amb els car\u00e0cters \"comod\u00ed\": </li> <li>% (equival a 0 o m\u00e9s car\u00e0cters, els que siga)</li> <li>_ (1 i nom\u00e9s un car\u00e0cter, aix\u00f2 s\u00ed, el que siga).</li> <li>IS [NOT] \u00e9s un operador especial per a comparar amb el valor nul (NULL).</li> </ul> <p>Recordem per una altra banda com s'escriuen les constants:</p> <ul> <li>les constants num\u00e8riques van tal qual, sense cometes ni res (amb el punt decimal, i no coma decimal)</li> <li>les constants alfanum\u00e8riques (de text) van entre cometes simples</li> <li>les constants de data van entre cometes simples, i PostgreSQL ja far\u00e0 la conversi\u00f3</li> <li>per \u00faltim el valur nul s'escriu NULL</li> </ul> <p>Exemples</p> <ol> <li>Traure les comarques de la prov\u00edncia de Castell\u00f3</li> </ol> <p>SELECT * FROM COMARQUES WHERE provincia = 'Castell\u00f3';</p> <ol> <li>Traure totes les poblacions que tenen de llengua el valenci\u00e0.</li> </ol> <p>SELECT * FROM POBLACIONS WHERE llengua = 'V';</p> <ol> <li>Traure les poblacions de la comarca de la Plana Alta de m\u00e9s de 300 metres d'altura</li> </ol> <p>SELECT * FROM POBLACIONS WHERE nom_c = 'Plana Alta' AND altura &gt; 300;</p> <ol> <li>Traure els instituts dels codis postals 12001, 12002 o 12003.</li> </ol> <p>SELECT * FROM INSTITUTS WHERE codpostal=12001 OR codpostal=12002 OR codpostal=12003;</p> <p>SELECT * FROM INSTITUTS WHERE codpostal &gt;= 12001 AND codpostal &lt;= 12003;</p> <p>SELECT * FROM INSTITUTS WHERE codpostal BETWEEN 12001 AND 12003;</p> <p>SELECT * FROM INSTITUTS WHERE codpostal IN (12001,12002,12003);</p> <ol> <li>Traure els pobles de la comarca Plana d'Utiel. Tenim la dificultat de la cometa simple, que ens serveix sempre per a delimitar una constant alfanum\u00e8rica. La manera de solucionar-ho \u00e9s posar-la dues vegades</li> </ol> <p>SELECT * FROM POBLACIONS WHERE nom_c = 'Plana d''Utiel';</p> <ol> <li>Traure nom i prov\u00edncia dels pobles que comencen per G (el primer cognom).</li> </ol> <p>SELECT nom, nom_c FROM POBLACIONS WHERE nom LIKE 'G%';</p> <ol> <li>Traure les poblacions que estan a 40\u00ba 1' (i els segons que siguen) de latitud nord</li> </ol> <p>SELECT * FROM POBLACIONS WHERE latitud LIKE '40\u00ba01____N';</p> <p>Hem posat els 40\u00ba i 1 minut. A continuaci\u00f3 hem posat exactament 4 car\u00e0cters, els que siga. Hem posat 4, que serien la cometa que assenyala els minuts, les 2 xifres dels segons i la doble cometa que assenyala els segons. Observeu com la cometa simple \u00e9s problem\u00e0tica, ja que \u00e9s la que serveix per a delimitar la constant alfanum\u00e8rica. Si volem posar-la, en la constant l'haurem de doblar (l'haurem de posar 2 vegades seguides)</p> <p>SELECT * FROM POBLACIONS WHERE latitud LIKE '40\u00ba01''__\"N';</p> <ol> <li>Traure totes les poblacions, el nom de les quals nom\u00e9s consta d'una paraula (no tindran espais en blanc).</li> </ol> <p>SELECT * FROM POBLACIONS WHERE nom NOT LIKE '% %';</p> <ol> <li>Traure els instituts que no tenen introdu\u00eft el numero del carrer.</li> </ol> <p>SELECT * FROM INSTITUTS WHERE numero IS NULL;</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T06_SQL_I_PostgreSQL/12_funcions_dagregat/","title":"12 funcions dagregat","text":"<p>Bases de Dades</p> <ul> <li>Tema 6: SQL - Consulta b\u00e0sica (part I)</li> <li>Objectius i Coneixements previs</li> <li>1. Introducci\u00f3</li> <li>2. DDL i DML</li> <li>3. Client DBeaver: instal\u00b7laci\u00f3 i confiuraci\u00f3</li> <li>4. Client DBeaver: utilitzaci\u00f3</li> <li>5. Dades dels exemples i els exercicis</li> <li>6. Operadors</li> <li>7. Funcions </li> <li>7.1 Formats de les dates</li> <li>7.2 Formats dels n\u00fameros</li> <li>8. La consulta SELECT</li> <li>9. Consulta b\u00e0sica </li> <li>Exercicis</li> <li>10. \u00c0lies en les columnes </li> <li>Exercicis</li> <li>11. La cl\u00e0usula WHERE </li> <li>Exercicis</li> <li>12. Funcions d'agregat </li> <li>Exercicis</li> <li>13. La cl\u00e0usula GROUP BY </li> <li>Exercicis</li> <li>14. La cl\u00e0usula HAVING </li> <li>Exercicis</li> <li>15. La cl\u00e0usula ORDER BY </li> <li>Exercicis</li> <li>16. El predicat DISTINCT </li> <li>Exercicis</li> <li>17. La cl\u00e0usula LIMIT .. OFFSET </li> <li>Exercicis</li> <li>18. Consulta de creaci\u00f3 de taules </li> <li>Exercicis</li> <li>19. Ordre amb qu\u00e8 s'executa una sent\u00e8ncia SQL</li> <li>Exercicis de tot el tema, amb els resultats</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T06_SQL_I_PostgreSQL/12_funcions_dagregat/#12-funcions-dagregat","title":"12. Funcions d'agregat","text":"<p>Les funcions d'agregat, o funcions de domini agregat, s\u00f3n aquelles que trauen un resultat a partir dels valors d'un determinat camp en un conjunt de files. Aix\u00ed tindrem una funci\u00f3 per a sumar els valors d'una columna, o comptar-los, o traure la mitjana, o el m\u00e0xim, ...</p> <p>Actuaran sobre un conjunt de files determinat, que en principi suposarem que \u00e9s tota la taula (totes les files de la taula). En la seg\u00fcent pregunta, veurem que el conjunt de files sobre el qual es calcula una funci\u00f3 d'agregat, el podrem canviar amb la cl\u00e0usula GROUP BY.</p> <p>Sintaxi</p> <ul> <li>COUNT (* |  ) : compta el n\u00famero de files; si es posa una columna o expressi\u00f3, no es comptaran els valors nuls. <li>SUM (  ) : torna la suma de la columna o expressi\u00f3 especificada. Ignora els valors nuls. <li>AVG (  ) : calcula la mitjana aritm\u00e8tica de la columna o expressi\u00f3 especificada. Ignora els valors nuls. <li>VAR_SAMP (  ) : calcula la vari\u00e0ncia d'una mostra a partir de la columna o expressi\u00f3 especificada. <li>STDDEV (  ) : desviaci\u00f3 t\u00edpica d'una mostra. <li>MAX (  ) : calcula el m\u00e0xim. <li>MIN (  ) : calcula el m\u00ednim. <p>Per exemple, si volem saber el nombre d'Instituts:</p> <p>SELECT COUNT(*) AS \"Nombre d'Instituts\" </p> <p>FROM INSTITUTS;</p> <p>Nota</p> <p>\u00c9s interessant la utilitzaci\u00f3 d'\u00e0lias, per a que no apareguen cap\u00e7aleres com count</p> <p>Exemples</p> <ol> <li>Comptar el nombre total de pobles.</li> </ol> <p>SELECT Count(*) FROM POBLACIONS;</p> <ol> <li>Comptar el nombre de poblacions de la Plana Alta.</li> </ol> <p>SELECT Count(*) FROM POBLACIONS WHERE nom_c = 'Plana Alta';</p> <ol> <li>Calcular la mitjana d'habitants dels pobles de la Plana Alta i Plana Baixa.</li> </ol> <p>SELECT AVG(poblacio) FROM POBLACIONS WHERE nom_c = 'Plana Alta' OR nom_c = 'Plana Baixa'</p> <ol> <li>Calcular la mitjana de densitat de les poblacions. La densitat es calcula com el n\u00famero d'habitants dividit per l'extensi\u00f3.</li> </ol> <p>SELECT AVG(poblacio/extensio) FROM POBLACIONS;</p> <ol> <li>Calcular l'altura m\u00e0xima i m\u00ednima de tots els pobles.</li> </ol> <p>SELECT MAX(altura), MIN(altura) FROM POBLACIONS</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T06_SQL_I_PostgreSQL/13_la_clusula_group_by/","title":"13 la clusula group by","text":"<p>Bases de Dades</p> <ul> <li>Tema 6: SQL - Consulta b\u00e0sica (part I)</li> <li>Objectius i Coneixements previs</li> <li>1. Introducci\u00f3</li> <li>2. DDL i DML</li> <li>3. Client DBeaver: instal\u00b7laci\u00f3 i confiuraci\u00f3</li> <li>4. Client DBeaver: utilitzaci\u00f3</li> <li>5. Dades dels exemples i els exercicis</li> <li>6. Operadors</li> <li>7. Funcions </li> <li>7.1 Formats de les dates</li> <li>7.2 Formats dels n\u00fameros</li> <li>8. La consulta SELECT</li> <li>9. Consulta b\u00e0sica </li> <li>Exercicis</li> <li>10. \u00c0lies en les columnes </li> <li>Exercicis</li> <li>11. La cl\u00e0usula WHERE </li> <li>Exercicis</li> <li>12. Funcions d'agregat </li> <li>Exercicis</li> <li>13. La cl\u00e0usula GROUP BY </li> <li>Exercicis</li> <li>14. La cl\u00e0usula HAVING </li> <li>Exercicis</li> <li>15. La cl\u00e0usula ORDER BY </li> <li>Exercicis</li> <li>16. El predicat DISTINCT </li> <li>Exercicis</li> <li>17. La cl\u00e0usula LIMIT .. OFFSET </li> <li>Exercicis</li> <li>18. Consulta de creaci\u00f3 de taules </li> <li>Exercicis</li> <li>19. Ordre amb qu\u00e8 s'executa una sent\u00e8ncia SQL</li> <li>Exercicis de tot el tema, amb els resultats</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T06_SQL_I_PostgreSQL/13_la_clusula_group_by/#13-la-clausula-group-by","title":"13. La cl\u00e0usula GROUP BY","text":"<p>Agrupa totes les files amb valors iguals d'una o d'unes columnes</p> <p>Sintaxi</p> <p>SELECT  FROM  <p>GROUP BY  <p>Per cada fila amb valors iguals de les columnes de la cl\u00e0usula GROUP BY, en trau nom\u00e9s una, \u00e9s a dir, les agrupa.</p> <p>Les funcions d'agregat agafen tot el seu sentit i pot\u00e8ncia combinades amb el GROUP BY: tornaran un valor per cada grup. Aix\u00ed, per exemple, aquesta sent\u00e8ncia traur\u00e0 quantes poblacions hi ha en cada comarca:</p> <p>SELECT COUNT(*) FROM POBLACIONS GROUP BY nom_c</p> <p>Si volem excloure files per a que no entren en les agrupacions, ho farem per mig de la cl\u00e0usula WHERE. En aquest exemple ens aprofitem del codi de municipi, que en el cas dels municipis de la prov\u00edncia de Castell\u00f3 \u00e9s 12000 i pico.</p> <p>SELECT COUNT(*) FROM POBLACIONS WHERE cod_m &gt;= 12000 and cod_m &lt; 13000 GROUP BY nom_c</p> <p>Quan tenim agrupacions de files, b\u00e9 perqu\u00e8 utilitzem la cl\u00e0usula GROUP BY, b\u00e9 perqu\u00e8 entre les columnes que es trien en el SELECT hi ha alguna funci\u00f3 d'agregat, o les dues coses a l'hora, es poden cometre errors amb una relativa facilitat. Quan hi ha una agrupaci\u00f3 totes les columnes que seleccionem amb el SELECT hauran d'estar en el GROUP BY, o b\u00e9 estar dins d'una funci\u00f3 d'agregat. En cas contrari ens donar\u00e0 error. Per exemple, aquesta consulta funciona b\u00e9, i de fet \u00e9s millor consulta que les d'abans, ja que ens diu la comarca i el numero de pobles que t\u00e9 cadascuna:</p> <p>SELECT nom_c, COUNT(*) FROM POBLACIONS GROUP BY nom_c</p> <p>Per\u00f2 aquesta no:</p> <p>SELECT nom_c, COUNT(*), cod_m FROM POBLACIONS GROUP BY nom_c</p> <p>\u00c9s sint\u00e0cticament incorrecta, i a banda no t\u00e9 sentit: si agrupem tots els pobles de la mateixa comarca \u00bfcom hem de poder traure despr\u00e9s el codi del municipi de cada poble?.</p> <p>Com \u00e9s relativament f\u00e0cil cometre aquest error, haurem d'identificar aquest error, per a poder solucionar-lo.</p> <p>Per exemple, aquesta consulta ens d\u00f3na la poblaci\u00f3 m\u00e9s alta de cada comarca:</p> <p>SELECT nom_c, MAX(altura) FROM POBLACIONS GROUP BY nom_c</p> <p>Per\u00f2 si intent\u00e0rem traure tamb\u00e9 el nom de la poblaci\u00f3 m\u00e9s alta de cada comarca:</p> <p>SELECT nom_c, MAX(altura), nom FROM POBLACIONS GROUP BY nom_c</p> <p>ens donaria el seg\u00fcent error:</p> <p></p> <p>Hem d'aprendre a identificar aquest error, i solucionar-lo. En aquest cas el solucionarem llevant el camp Nom. La sent\u00e8ncia per a poder traure el nom de la poblaci\u00f3 m\u00e9s alta de cada comarca \u00e9s complicada, i encara no podem fer-la.</p> <p>Exemples</p> <ol> <li>Comptar el nombre d'instituts de cada poblaci\u00f3.</li> </ol> <p>SELECT cod_m, COUNT(*) FROM INSTITUTS GROUP BY cod_m</p> <ol> <li>Comptar el nombre de comarques de cada prov\u00edncia.</li> </ol> <p>SELECT provincia, COUNT(*) FROM COMARQUES GROUP BY provincia</p> <ol> <li>Calcular l'altura m\u00e0xima, m\u00ednima i l'altura mitjana de cada comarca.</li> </ol> <p>SELECT nom_c, MAX(altura), MIN(altura), AVG(altura) FROM POBLACIONS GROUP BY nom_c</p> <ol> <li>Comptar el nombre d'instituts de cada poblaci\u00f3 i cada codi postal.</li> </ol> <p>SELECT cod_m, codpostal, COUNT(*) FROM INSTITUTS GROUP BY cod_m, codpostal</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T06_SQL_I_PostgreSQL/14_la_clusula_having/","title":"14 la clusula having","text":"<p>Bases de Dades</p> <ul> <li>Tema 6: SQL - Consulta b\u00e0sica (part I)</li> <li>Objectius i Coneixements previs</li> <li>1. Introducci\u00f3</li> <li>2. DDL i DML</li> <li>3. Client DBeaver: instal\u00b7laci\u00f3 i confiuraci\u00f3</li> <li>4. Client DBeaver: utilitzaci\u00f3</li> <li>5. Dades dels exemples i els exercicis</li> <li>6. Operadors</li> <li>7. Funcions </li> <li>7.1 Formats de les dates</li> <li>7.2 Formats dels n\u00fameros</li> <li>8. La consulta SELECT</li> <li>9. Consulta b\u00e0sica </li> <li>Exercicis</li> <li>10. \u00c0lies en les columnes </li> <li>Exercicis</li> <li>11. La cl\u00e0usula WHERE </li> <li>Exercicis</li> <li>12. Funcions d'agregat </li> <li>Exercicis</li> <li>13. La cl\u00e0usula GROUP BY </li> <li>Exercicis</li> <li>14. La cl\u00e0usula HAVING </li> <li>Exercicis</li> <li>15. La cl\u00e0usula ORDER BY </li> <li>Exercicis</li> <li>16. El predicat DISTINCT </li> <li>Exercicis</li> <li>17. La cl\u00e0usula LIMIT .. OFFSET </li> <li>Exercicis</li> <li>18. Consulta de creaci\u00f3 de taules </li> <li>Exercicis</li> <li>19. Ordre amb qu\u00e8 s'executa una sent\u00e8ncia SQL</li> <li>Exercicis de tot el tema, amb els resultats</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T06_SQL_I_PostgreSQL/14_la_clusula_having/#14-la-clausula-having","title":"14. La cl\u00e0usula HAVING","text":"<p>Aquesta cl\u00e0usula acompanya normalment a la de GROUP BY, i servir\u00e0 pera poder triar alguns grups que acomplesquen una determinada condici\u00f3.</p> <p>Pot anar sense el GROUP BY, per\u00f2 aleshores el seu funcionament \u00e9s com el WHERE, i per tant no val la pena. \u00c9s a dir, en la pr\u00e0ctica sempre que trobem un HAVING hi haur\u00e0 tamb\u00e9 el GROUP BY i servir\u00e0 per seleccionar alguns grups, els que acomplesquen la condici\u00f3 del HAVING.</p> <p>Tamb\u00e9 podr\u00edem dir que el HAVING \u00e9s al GROUP BY, el que el WHERE \u00e9s al SELECT</p> <p>Sintaxi</p> <p>SELECT   FROM   [GROUP BY ]  HAVING  <p>\u00danicament comentarem el cas en qu\u00e8 acompanya al GROUP BY. I com hem dit, el que fa \u00e9s filtrar els grups: dels grups resultants del GROUP BY, nom\u00e9s eixiran els que acomplesquen la condici\u00f3.</p> <p>Aquesta condici\u00f3 contindr\u00e0 alguna funci\u00f3 d'agregat o contindr\u00e0 columnes incloses en el GROUP BY. Fixeu-vos que \u00e9s l\u00f2gic, ja que serveix per a triar grups una vegada fets, i aleshores ja no es podr\u00e0 anar a un element del grup.</p> <p>Per exemple, aquesta sent\u00e8ncia servir\u00e0 per traure les comarques on hi ha m\u00e9s de 20 pobles, i el n\u00famero que hi ha:</p> <p>SELECT nom_c, COUNT(*)  FROM POBLACIONS GROUP BY nom_c HAVING COUNT(*) &gt; 20;</p> <p>Exemples</p> <ol> <li>Traure aquelles poblacions que tenen m\u00e9s d'un de Centres Integrats de Formaci\u00f3 Professional. La manera de saber que \u00e9s un Centre Integrat \u00e9s perqu\u00e8 el seu nom comen\u00e7a per CIPFP. De moment nom\u00e9s traurem el codi de la poblaci\u00f3, i aix\u00ed nom\u00e9s ens fa falta la taula INSTITUTS. M\u00e9s avant aprendrem a agafar les dades de m\u00e9s d'una taula, i aleshores traurem tamb\u00e9 el nom de la poblaci\u00f3</li> </ol> <p>SELECT cod_m, COUNT(*) FROM INSTITUTS WHERE nom LIKE 'CIPFP%' GROUP BY cod_m HAVING COUNT(*) &gt; 1</p> <p>El que fem en aquesta sent\u00e8ncia \u00e9s, de la taula INSTITUTS seleccionar \u00fanicament els Centres Integrats (utilitzant l'operador LIKE per a que comencen per CIPFP)i i despr\u00e9s agrupar pel codi de municipi. Una vegada fets els grups, eliminarem els grups que no acompleixen la condici\u00f3 de HAVING, \u00e9s a dir, els que tenen 0 o 1 Centre Integrat. I d'aquestos grups seleccionats traurem el codi del municipi i el n\u00famero de Centres Integrats (que sempre ser\u00e0 igual o major que 2).</p> <ol> <li>Calcular el n\u00famero d'habitants m\u00e0xim, el m\u00ednim i el n\u00famero d'habitants mitj\u00e0 de les poblacions de les comarques amb m\u00e9s de 20 pobles.</li> </ol> <p>SELECT nom_c , COUNT(cod_m) AS \"N\u00famero de pobles\" , Max(poblacio) AS M\u00e0xim , Min(poblacio) AS M\u00ednim , Avg(poblacio) AS Mitjana FROM POBLACIONS GROUP BY nom_c HAVING COUNT(cod_m) &gt; 20;</p> <ol> <li>Traure l'altura mitjana, total de poblaci\u00f3 i poblaci\u00f3 mitjana, d'aquelles comarques que tenen una altura mitjana superior a 800 metres.</li> </ol> <p>SELECT nom_c , AVG(altura) AS \"Altura mitjana\" , SUM(poblacio) AS \"Total poblaci\u00f3\" , Avg(poblacio) AS \"Poblaci\u00f3 mitjana\" FROM POBLACIONS GROUP BY nom_c HAVING AVG(altura) &gt; 800;</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T06_SQL_I_PostgreSQL/15_la_clusula_order_by/","title":"15 la clusula order by","text":"<p>Bases de Dades</p> <ul> <li>Tema 6: SQL - Consulta b\u00e0sica (part I)</li> <li>Objectius i Coneixements previs</li> <li>1. Introducci\u00f3</li> <li>2. DDL i DML</li> <li>3. Client DBeaver: instal\u00b7laci\u00f3 i confiuraci\u00f3</li> <li>4. Client DBeaver: utilitzaci\u00f3</li> <li>5. Dades dels exemples i els exercicis</li> <li>6. Operadors</li> <li>7. Funcions </li> <li>7.1 Formats de les dates</li> <li>7.2 Formats dels n\u00fameros</li> <li>8. La consulta SELECT</li> <li>9. Consulta b\u00e0sica </li> <li>Exercicis</li> <li>10. \u00c0lies en les columnes </li> <li>Exercicis</li> <li>11. La cl\u00e0usula WHERE </li> <li>Exercicis</li> <li>12. Funcions d'agregat </li> <li>Exercicis</li> <li>13. La cl\u00e0usula GROUP BY </li> <li>Exercicis</li> <li>14. La cl\u00e0usula HAVING </li> <li>Exercicis</li> <li>15. La cl\u00e0usula ORDER BY </li> <li>Exercicis</li> <li>16. El predicat DISTINCT </li> <li>Exercicis</li> <li>17. La cl\u00e0usula LIMIT .. OFFSET </li> <li>Exercicis</li> <li>18. Consulta de creaci\u00f3 de taules </li> <li>Exercicis</li> <li>19. Ordre amb qu\u00e8 s'executa una sent\u00e8ncia SQL</li> <li>Exercicis de tot el tema, amb els resultats</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T06_SQL_I_PostgreSQL/15_la_clusula_order_by/#15-la-clausula-order-by","title":"15. La cl\u00e0usula ORDER BY","text":"<p>Ordena les files del resultat respecte l'ordre especificat</p> <p>Sintaxi</p> <p>SELECT   FROM   ORDER BY camp1 [ASC | DESC] { , camp2 [ASC | DESC] } <p>Ac\u00ed tenim un exemple:</p> <p>SELECT nom_c, provincia  FROM COMARQUES ORDER BY nom_c</p> <p>S'ordenaran les files pel camp, en l'ordre marcat: ascendent o descendent (per defecte, ascendent). Si hi haguera un segon camp d'ordenaci\u00f3, aquest entraria en joc en cas de valors iguals del primer. Aquest segon podr\u00e0 ser en ordre ascendent o descendent, independentment de l'ordre del primer camp.</p> <p>SELECT nom_c, provincia FROM COMARQUES ORDER BY provincia DESC, nom_c</p> <p>Es podr\u00e0 ordenar per qualsevol camp de la taula, estiga indexada per aquest camp o no. L'avantatge d'estar indexada respecte a un camp \u00e9s la rapidesa en l'ordenaci\u00f3. Aix\u00ed, si tenim una taula gran i ordenem per un determinat camp, es perdr\u00e0 temps en aquesta ordenaci\u00f3. Si cont\u00ednuament estem ordenant per aquest camp, perdrem aquest temps moltes vegades. Aleshores seria convenient crear un \u00edndex. Per\u00f2 hem de recordar que la creaci\u00f3 d'un \u00edndex ocupa espai. Per tant no \u00e9s bona soluci\u00f3 indexar per tots els camps. \u00danicament, en tot cas, per aquells que m\u00e9s s'ordene. Veurem la creaci\u00f3 d'\u00edndex en la tercera part d'aquest tema.</p> <p>I es pot especificar en l'ordenaci\u00f3, una expressi\u00f3 que agafe un o m\u00e9s d'un camp amb operadors i funcions. Es pot posar un camp o una expressi\u00f3 que no estiga en la llista de camps o expressions que es volen visualitzar (al costat del SELECT), encara que normalment s\u00ed que ho visualitzarem, per a poder comprovar que realment est\u00e0 ordenat pel que s'ha especificat. Per exemple, si volem ordenar per la densitat d'habitants de les poblacions, que es calcula dividint el n\u00famero d'habitants per l'extensi\u00f3:</p> <p>SELECT nom, poblacio, extensio FROM POBLACIONS ORDER BY poblacio/extensio DESC</p> <p>Observeu que estem ordenant per un camp (poblacio / extensio) que no estem visualitzant, encara que seria molt m\u00e9s il\u00b7lustratiu mostrar-lo</p> <p>Opcionalment, en el moment d'especificar el camp o l'expressi\u00f3 per la qual volem ordenar, si aquesta apareix en la llista de columnes a visualitzar, podrem posar senzillament el n\u00famero d'ordre de la columna. Aix\u00ed, per exemple, podem fer el seg\u00fcent:</p> <p>SELECT nom, poblacio, extensio, poblacio/extensio FROM POBLACIONS ORDER BY 4 DESC</p> <p>On estem indicant que s'ordene de forma descendent per la quarta columna que va a visualitzar-se, \u00e9s a dir, per oblacio / extensio</p> <p>Hem d'observar que la cl\u00e0usula ORDER BY \u00e9s l'\u00faltima, i que en cas d'haver cl\u00e0usula GROUP BY, s'intentar\u00e0 ordenar despr\u00e9s d'haver agrupat. Per tant en cas de que la sent\u00e8ncia continga un GROUP BY o s'haja utilitzat alguna funci\u00f3 d'agregat (que implica fer grups), nom\u00e9s podrem posar en el ORDER BY camps que estiguen en el GROUP BY o que formen part d'una funci\u00f3 d'agregat. El raonament \u00e9s el mateix que el fet en la cl\u00e0usula GROUP BY o HAVING i l'error en cas de no respectar a\u00e7\u00f2 seria el matiex que el vist en aquell apartat.</p> <p>Exemples</p> <ol> <li>Traure tota la informaci\u00f3 de les poblacions ordenades pel nom de la poblaci\u00f3.</li> </ol> <p>SELECT * FROM POBLACIONS ORDER BY nom</p> <ol> <li>Traure tota la informaci\u00f3 de les poblacions, ordenades pel nom de la comarca, i dins d'aquesta per l'altura (de forma descendent).</li> </ol> <p>SELECT * FROM POBLACIONS ORDER BY nom_c, altura DESC</p> <ol> <li>Traure les comarques amb el n\u00famero de pobles i total d'habitants, d'aquelles que tenen m\u00e9s de 10 pobles, ordenades pel n\u00famero de pobles, i dins d'aquest pel total de poblaci\u00f3 de forma descendent.</li> </ol> <p>SELECT nom_c, COUNT(*), SUM(poblacio) FROM POBLACIONS GROUP BY nom_c HAVING COUNT(*) &gt; 10 order by COUNT(*) , SUM(poblacio) DESC</p> <p>SELECT nom_c, COUNT(*), SUM(poblacio) FROM POBLACIONS GROUP BY nom_c HAVING COUNT(*) &gt; 10 order by 2 , 3 DESC</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T06_SQL_I_PostgreSQL/16_el_predicat_distinct/","title":"16 el predicat distinct","text":"<p>Bases de Dades</p> <ul> <li>Tema 6: SQL - Consulta b\u00e0sica (part I)</li> <li>Objectius i Coneixements previs</li> <li>1. Introducci\u00f3</li> <li>2. DDL i DML</li> <li>3. Client DBeaver: instal\u00b7laci\u00f3 i confiuraci\u00f3</li> <li>4. Client DBeaver: utilitzaci\u00f3</li> <li>5. Dades dels exemples i els exercicis</li> <li>6. Operadors</li> <li>7. Funcions </li> <li>7.1 Formats de les dates</li> <li>7.2 Formats dels n\u00fameros</li> <li>8. La consulta SELECT</li> <li>9. Consulta b\u00e0sica </li> <li>Exercicis</li> <li>10. \u00c0lies en les columnes </li> <li>Exercicis</li> <li>11. La cl\u00e0usula WHERE </li> <li>Exercicis</li> <li>12. Funcions d'agregat </li> <li>Exercicis</li> <li>13. La cl\u00e0usula GROUP BY </li> <li>Exercicis</li> <li>14. La cl\u00e0usula HAVING </li> <li>Exercicis</li> <li>15. La cl\u00e0usula ORDER BY </li> <li>Exercicis</li> <li>16. El predicat DISTINCT </li> <li>Exercicis</li> <li>17. La cl\u00e0usula LIMIT .. OFFSET </li> <li>Exercicis</li> <li>18. Consulta de creaci\u00f3 de taules </li> <li>Exercicis</li> <li>19. Ordre amb qu\u00e8 s'executa una sent\u00e8ncia SQL</li> <li>Exercicis de tot el tema, amb els resultats</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T06_SQL_I_PostgreSQL/16_el_predicat_distinct/#16-el-predicat-distinct","title":"16. El predicat DISTINCT","text":"<p>Per defecte, si no especifiquem el contrari, eixiran totes les files de la taula o taules que acomplesquen les condicions. Aix\u00ed, per exemple, si de la taula d'instituts volgu\u00e9rem treure \u00fanicament el codi de la poblaci\u00f3, ens eixiria per exemple 12040 (el codi de Castell\u00f3) en tantes files com instituts de Castell\u00f3 tinguem (concretament 14). \u00c9s el mateix resultat que si hagu\u00e9rem posat el predicat ALL davant de les columnes, ja que aquest \u00e9s el predicat per defecte:</p> <p>SELECT ALL cod_m FROM INSTITUTS</p> <p>Aquest resultat no \u00e9s el correcte, si volem consultes com \"Poblacions on hi ha instituts\". Seria millor si isquera 12040 nom\u00e9s una vegada. A\u00e7\u00f2 ho aconseguirem amb el predicat DISTINCT.</p> <p>En definitiva el que far\u00e0 el predicat DISTINCT ser\u00e0 traure les files diferents del resultat que demanem. Si nom\u00e9s demanem un camp, traur\u00e0 els valors diferents d'aquest camp. Si demanem m\u00e9s d'un camp, traur\u00e0 els valors diferents per al conjunt dels camps (\u00e9s a dir les files diferents, que en un camp poden coincidir, per\u00f2 no en el conjunt de tots els camps)</p> <p>Sintaxi</p> <p>SELECT DISTINCT  <p>FROM  <p>Aix\u00ed, en l'exemple anterior:</p> <p>SELECT DISTINCT cod_m FROM INSTITUTS</p> <p>Hi ha una variant del DISTINCT que suporta PostgreSQL, per\u00f2 que no suporten altres SGBD m\u00e9s senzills, com Access o LibreOffice Base. \u00c9s posar el DISTINCT dins d'una funci\u00f3 d'agregat, com per exemple COUNT. El resultat \u00e9s que comptar\u00e0 (o la funci\u00f3 implicada: sumar\u00e0 calcular\u00e0 la mitjana, ...) els valors diferents del camp que vaja a continuaci\u00f3.</p> <p>Aix\u00ed per exemple, si volem comptar en quantes poblacions diferents tenim instituts, la consulta \u00e9s tan senzilla com aquesta:</p> <p>SELECT COUNT(DISTINCT cod_m) FROM INSTITUTS</p> <p>Exemples</p> <ol> <li>Traure les diferents provincies.</li> </ol> <p>SELECT DISTINCT provincia FROM COMARQUES</p> <ol> <li>Traure els distints districtes (codis postals) de Castell\u00f3 (codi de municipi 12040) on hi ha instituts</li> </ol> <p>SELECT DISTINCT codpostal FROM INSTITUTS WHERE cod_m=12040</p> <ol> <li>Traure les distintes comarques i lleng\u00fces que es parlen en elles</li> </ol> <p>SELECT DISTINCT nom_c , llengua FROM POBLACIONS ORDER BY 1</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T06_SQL_I_PostgreSQL/17_la_clusula_limit__offset/","title":"17 la clusula limit  offset","text":"<p>Bases de Dades</p> <ul> <li>Tema 6: SQL - Consulta b\u00e0sica (part I)</li> <li>Objectius i Coneixements previs</li> <li>1. Introducci\u00f3</li> <li>2. DDL i DML</li> <li>3. Client DBeaver: instal\u00b7laci\u00f3 i confiuraci\u00f3</li> <li>4. Client DBeaver: utilitzaci\u00f3</li> <li>5. Dades dels exemples i els exercicis</li> <li>6. Operadors</li> <li>7. Funcions </li> <li>7.1 Formats de les dates</li> <li>7.2 Formats dels n\u00fameros</li> <li>8. La consulta SELECT</li> <li>9. Consulta b\u00e0sica </li> <li>Exercicis</li> <li>10. \u00c0lies en les columnes </li> <li>Exercicis</li> <li>11. La cl\u00e0usula WHERE </li> <li>Exercicis</li> <li>12. Funcions d'agregat </li> <li>Exercicis</li> <li>13. La cl\u00e0usula GROUP BY </li> <li>Exercicis</li> <li>14. La cl\u00e0usula HAVING </li> <li>Exercicis</li> <li>15. La cl\u00e0usula ORDER BY </li> <li>Exercicis</li> <li>16. El predicat DISTINCT </li> <li>Exercicis</li> <li>17. La cl\u00e0usula LIMIT .. OFFSET </li> <li>Exercicis</li> <li>18. Consulta de creaci\u00f3 de taules </li> <li>Exercicis</li> <li>19. Ordre amb qu\u00e8 s'executa una sent\u00e8ncia SQL</li> <li>Exercicis de tot el tema, amb els resultats</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T06_SQL_I_PostgreSQL/17_la_clusula_limit__offset/#17-la-clausula-limit-offset","title":"17. La cl\u00e0usula LIMIT .. OFFSET","text":"<p>Per mig de la cl\u00e0usula LIMIT - OFFSET podrem fer que no apareguen totes les files que torna la sent\u00e8ncia, sin\u00f3 unes quantes.</p> <ul> <li>LIMIT n\u00famero: especificarem quantes files volem que es tornen</li> <li>OFFSET n\u00famero: especificarem a partir de quina posici\u00f3 volem que es tornen les files</li> </ul> <p>Si no posem la part del OFFSET, apareixeran les primeres, i si especifiquem OFFSET, se saltaran les primeres, tantes com s'indica en OFFSET. Per a que realment tinga sentit aquesta cl\u00e0usula, \u00e9s conveninet ordenar la informaci\u00f3, ja que al dir les primeres ja s'est\u00e0 assumint que seran les primeres respecte algun ordre. Aix\u00ed, per exemple ens podrem plantejar traure coses com les 10 poblacions m\u00e9s altes, o les m\u00e9s habitades.</p> <p>L'ordre impl\u00edcit que acabem de comentar s'haur\u00e0 de fer per mig de la cl\u00e0usula ORDER BY. Aix\u00ed, si volem traure els clients m\u00e9s joves haurem d'ordenar per la data de naixement en ordre descendent, per a despr\u00e9s traure els primenrs. Per tant \u00e9s molt dif\u00edcil veure una cl\u00e0usula LIMIT si no tenim una cl\u00e0usula ORDER BY.</p> <p>Nota</p> <p>En el SQL d'Access no existeix la cl\u00e0usula LIMIT. Per a fer coses similar disposa del predicat TOP, que es posa immediatament despr\u00e9s del SELECT, per\u00f2 sempre traur\u00e0 les primeres, no t\u00e9 possibilitat d'OFFSET.</p> <p>Sintaxi</p> <p>SELECT  FROM  [LIMIT n] [OFFSET m] <p>El n\u00famero n ha de ser un enter, i se seleccionaran \u00fanicament les n primeres files (les de dalt). En cas de posat OFFSET se saltaran\u00a0m files. En cas de no posar LIMIT, se saltaran m files i es trauran totes les altres fins el final.</p> <p>Per exemple, si volem traure les 10 poblacions m\u00e9s altes, haurem d'agafar les 10 primeres, ordenant per altura en forma descendent:</p> <p>SELECT nom , altura FROM POBLACIONS ORDER BY altura DESC LIMIT 10</p> <p>L'exemple anterior sembla correcte, per\u00f2 no funciona del tot b\u00e9 perqu\u00e8 amb les dades que tenim, hi ha 3 poblacions que no tenen altura, i el valor nul el posa al final de tots els altres valors, en ordre ascendent, i per tant al principi en ordre descendent.</p> <p>Ho podem arreglar senzillament saltant les 3 primeres (que s\u00f3n les del nul)</p> <p>SELECT nom , altura FROM POBLACIONS ORDER BY altura DESC LIMIT 10 OFFSET 3</p> <p>Encara que sembla millor llevar les d'altura nula, aix\u00ed no estem obligats a saber quantes poblacions amb altura nula hi ha</p> <p>SELECT nom , altura FROM POBLACIONS WHERE altura IS NOT NULL ORDER BY altura DESC LIMIT 10\u00a0</p> <p>Si vulgu\u00e9rem traure totes les poblacions i altures, excepte les que tenen nul, i sabem que aquestes en s\u00f3n 3, podem posar OFFSET sense LIMIT, per a saltar les 3 primeres, i traure-les totes fins el final</p> <p>SELECT nom , altura FROM POBLACIONS ORDER BY altura DESC OFFSET 3</p> <p>Exemples</p> <ol> <li>Traure les 5 poblacions m\u00e9s poblades</li> </ol> <p>SELECT nom , poblacio FROM POBLACIONS ORDER BY poblacio DESC LIMIT 5</p> <ol> <li>Traure les 4 comarques amb m\u00e9s pobles.</li> </ol> <p>SELECT nom_c , COUNT(*) FROM POBLACIONS GROUP BY nom_c ORDER BY 2 DESC LIMIT 4</p> <ol> <li>Traure les 10 poblacions amb m\u00e9s instituts, saltant-nos les 3 primeres.</li> </ol> <p>SELECT cod_m , COUNT(*) FROM INSTITUTS GROUP BY cod_m ORDER BY 2 DESC LIMIT 10 OFFSET 3</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T06_SQL_I_PostgreSQL/18_consulta_de_creaci_de_taules/","title":"18 consulta de creaci de taules","text":"<p>Bases de Dades</p> <ul> <li>Tema 6: SQL - Consulta b\u00e0sica (part I)</li> <li>Objectius i Coneixements previs</li> <li>1. Introducci\u00f3</li> <li>2. DDL i DML</li> <li>3. Client DBeaver: instal\u00b7laci\u00f3 i confiuraci\u00f3</li> <li>4. Client DBeaver: utilitzaci\u00f3</li> <li>5. Dades dels exemples i els exercicis</li> <li>6. Operadors</li> <li>7. Funcions </li> <li>7.1 Formats de les dates</li> <li>7.2 Formats dels n\u00fameros</li> <li>8. La consulta SELECT</li> <li>9. Consulta b\u00e0sica </li> <li>Exercicis</li> <li>10. \u00c0lies en les columnes </li> <li>Exercicis</li> <li>11. La cl\u00e0usula WHERE </li> <li>Exercicis</li> <li>12. Funcions d'agregat </li> <li>Exercicis</li> <li>13. La cl\u00e0usula GROUP BY </li> <li>Exercicis</li> <li>14. La cl\u00e0usula HAVING </li> <li>Exercicis</li> <li>15. La cl\u00e0usula ORDER BY </li> <li>Exercicis</li> <li>16. El predicat DISTINCT </li> <li>Exercicis</li> <li>17. La cl\u00e0usula LIMIT .. OFFSET </li> <li>Exercicis</li> <li>18. Consulta de creaci\u00f3 de taules </li> <li>Exercicis</li> <li>19. Ordre amb qu\u00e8 s'executa una sent\u00e8ncia SQL</li> <li>Exercicis de tot el tema, amb els resultats</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T06_SQL_I_PostgreSQL/18_consulta_de_creaci_de_taules/#18-consulta-de-creacio-de-taules","title":"18. Consulta de creaci\u00f3 de taules","text":"<p>A banda de poder consultar informaci\u00f3 de una o m\u00e9s d'una taula, la sent\u00e8ncia SELECT pot servir per a crear una nova taula, amb estructura i dades (les que venen de la pr\u00f2pia sent\u00e8ncia SELECT). Aix\u00f2 s\u00ed, no podrem definir d'aquesta manera ni clau principal, ni claus externes, ni cap altra restricci\u00f3 de les conegudes.</p> <p>A m\u00e9s, aquesta caracter\u00edstica escapa del est\u00e0ndard ANSI SQL, per la qual cosa no li donarem excessiva import\u00e0ncia.</p> <p>Sintaxi</p> <p>SELECT  INTO nova_taula  <p>FROM  <p>La sent\u00e8ncia pot dur qualsevol cl\u00e0usula o predicat dels vistos fins ara, i el resultat que done aquesta sent\u00e8ncia, es guardar\u00e0 en una nova taula, amb el nom especificat.</p> <p>El nom dels camps de la nova taula seran els especificats en l'apartat . Per tant \u00e9s especialment recomanable la utilitzaci\u00f3 d'\u00e0lies, ja que si en posem seran el noms dels camps de la nova taula. <p>Els tipus de dades dels camps seran els heretats de la consulta SELECT.</p> <p>En cas d'existir ja una taula amb el nom especificat ens avisar\u00e0 d'aquest fet, donant-nos la possibilitat d'esborrar la taula anterior i crear la nova o cancelar.</p> <p>Nota</p> <p>\u00c9s molt recomanable, com d'altres sent\u00e8ncies de manipulaci\u00f3 de dades que veurem m\u00e9s endavant, executar primer la sent\u00e8ncia sense el INTO, per a no crear la taula encara. Quan estiguem segurs que el resultat \u00e9s el que desitgem, afegim el INTO, i la taula es crear\u00e0 a m\u00e9s garanties.</p> <p>Exemples</p> <ol> <li>Crear una c\u00f2pia de la taula comarques anomenada COMARQUES_COPIA.</li> </ol> <p>SELECT * INTO COMARQUES_COPIA FROM COMARQUES</p> <p>Per a no \"embrutar\" la Base de Dades, podem esborrar-la despr\u00e9s d'haver vist la seua creaci\u00f3 amb la sent\u00e8ncia</p> <p>DROP TABLE COMARQUES_COPIA</p> <ol> <li>Crear una taula anomenada RESUM_COMARQUES que continga el nom de la comarca, el n\u00famero de pobles, el total de poblaci\u00f3 i l'altura mitjana</li> </ol> <p>SELECT nom_c, COUNT(*) AS num_pobles, SUM(poblacio) AS poblacio , SUM(extensio) AS extensio , AVG(altura) AS altura_mitjana INTO RESUM_COMARQUES FROM POBLACIONS GROUP BY nom_c</p> <p>Igual que en l'anterior, despr\u00e9s d'haver vist la seua creaci\u00f3 i contingut, podem esborrar-la amb la sent\u00e8ncia</p> <p>DROP TABLE RESUM_COMARQUES</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T06_SQL_I_PostgreSQL/19_ordre_amb_qu_sexecuta_una_sentncia_sql/","title":"19 ordre amb qu sexecuta una sentncia sql","text":"<p>Bases de Dades</p> <ul> <li>Tema 6: SQL - Consulta b\u00e0sica (part I)</li> <li>Objectius i Coneixements previs</li> <li>1. Introducci\u00f3</li> <li>2. DDL i DML</li> <li>3. Client DBeaver: instal\u00b7laci\u00f3 i confiuraci\u00f3</li> <li>4. Client DBeaver: utilitzaci\u00f3</li> <li>5. Dades dels exemples i els exercicis</li> <li>6. Operadors</li> <li>7. Funcions </li> <li>7.1 Formats de les dates</li> <li>7.2 Formats dels n\u00fameros</li> <li>8. La consulta SELECT</li> <li>9. Consulta b\u00e0sica </li> <li>Exercicis</li> <li>10. \u00c0lies en les columnes </li> <li>Exercicis</li> <li>11. La cl\u00e0usula WHERE </li> <li>Exercicis</li> <li>12. Funcions d'agregat </li> <li>Exercicis</li> <li>13. La cl\u00e0usula GROUP BY </li> <li>Exercicis</li> <li>14. La cl\u00e0usula HAVING </li> <li>Exercicis</li> <li>15. La cl\u00e0usula ORDER BY </li> <li>Exercicis</li> <li>16. El predicat DISTINCT </li> <li>Exercicis</li> <li>17. La cl\u00e0usula LIMIT .. OFFSET </li> <li>Exercicis</li> <li>18. Consulta de creaci\u00f3 de taules </li> <li>Exercicis</li> <li>19. Ordre amb qu\u00e8 s'executa una sent\u00e8ncia SQL</li> <li>Exercicis de tot el tema, amb els resultats</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T06_SQL_I_PostgreSQL/19_ordre_amb_qu_sexecuta_una_sentncia_sql/#19-ordre-amb-que-sexecuta-una-sentencia-sql","title":"19. Ordre amb qu\u00e8 s'executa una sent\u00e8ncia SQL","text":"<p>Com hem vist, i com veurem en la Part II d'aquest tema, la sent\u00e8ncia SELECT \u00e9s molt completa i molt potent. Pot fer moltes coses.</p> <p>Potser ens convinga saber en quin ordre s'executen les cl\u00e0usules de qu\u00e8 es compon, perqu\u00e8 aix\u00f2 ens pot prevenir de possibles errors en el moment de construir una sent\u00e8ncia d'una certa envergadura. L'ordre d'execuci\u00f3 \u00e9s el seg\u00fcent:</p> <ul> <li>Primer s'agafen les dades des de la taula o les taules especificades en el FROM. No podrem tractar informaci\u00f3 que no tinguem en aquest origen de dades.</li> <li>Despr\u00e9s s'eliminen les files que no acompleixen la condici\u00f3 del WHERE, en cas que tinguem aquesta cl\u00e0usula.</li> <li>Despr\u00e9s les files resultants s'agrupen pel o pels camps especificats en el GROUP BY, en cas que tinguem aquesta cl\u00e0usula.</li> <li>Una vegada fets els grups, s'eliminen els que no acomplesquen la condici\u00f3 del HAVING, en cas que tinguem aquesta cl\u00e0usula.</li> <li>Despr\u00e9s se selecciona la informaci\u00f3 especificada en les columnes, que en cas d'haver alguna funci\u00f3 d'agregat actuar\u00e0 sobre els grups que resten (si ten\u00edem cl\u00e0usula GROUP BY) o sobre el total de l'origen de dades.</li> <li>Posteriorment s'ordena pels camps especificats en el ORDER BY, en cas que tinguem aquesta cl\u00e0usula.</li> <li>Despr\u00e9s s'aplica els predicat DISTINCT en cas de tenir-lo especificat.</li> <li>Per \u00faltim s'agafen tantes files com indica la cl\u00e0usula LIMIT, despla\u00e7ades tantes com indique OFFSET, si \u00e9s que tenim aquesta cl\u00e0usula especificada..</li> <li>Si tenim cl\u00e0usula INTO es procedir\u00e0 a crear una taula nova amb el resultat anterior.</li> </ul> <p>Tenir clar aquest ordre ens pot clarificar alguna cosa, i poder evitar alguns errors. L'error de la seg\u00fcent sent\u00e8ncia ja s'havia explicat en la pregunta 13.</p> <p>SELECT nom_c, COUNT(*), cod_m FROM POBLACIONS GROUP BY nom_c</p> <p>ens donar\u00e0 el seg\u00fcent error:</p> <p></p> <p>Per\u00f2 si analitzem l'ordre en qu\u00e8 s'executen \u00e9s l\u00f2gic: quan arribem a mostrar els camps (entre ells cod_m) els grups ja s'han fet, i per a valors iguals de nom_c. En aquest moment no puc traure una cosa individual de cada grup com \u00e9s el codi de municipi, perqu\u00e8 ja s'ha agrupat. En aquest moment nom\u00e9s es pot intentar traure el nom de la comarca (ja que t\u00e9 el mateix valor per a tot el grup, \u00e9s el camp pel qual hem agrupat), o alguna funci\u00f3 d'agregat, que calcula sobre el grup. I d'aix\u00f2 ens intenta avisar PostgreSQL.</p> <p>Per a solucionar-lo podem incloure el cod_m en el GROUP BY, i aleshores farem un grup per cada comarca i poblaci\u00f3 diferent, per\u00f2 segurament aix\u00f2 no ens valdr\u00e0 de res en aquest exemple, perqu\u00e8 cada grup nom\u00e9s contindr\u00e0 un element (un municipi), encara que en altres exemples s\u00ed que pot tenir sentit. O si no era aix\u00f2 el que preten\u00edem, senzillament llevem el camp cod_m de la sent\u00e8ncia, i ens funcionar\u00e0 b\u00e9.</p> <p>Un altre exemple il\u00b7lustratiu (que ja el vam posar molt paregut en la pregunta 13) pot ser el seg\u00fcent: podr\u00edem intentar traure l'altura m\u00e0xima de tots els pobles, i la poblaci\u00f3 que t\u00e9 aquesta altura. Podr\u00edem estar temptats de fer-lo d'aquesta manera:</p> <p>SELECT MAX(altura), nom FROM POBLACIONS;</p> <p>Ens donar\u00e0 el mateix error que abans, ja que com tenim una funci\u00f3 d'agregat intentar\u00e0 fer grups, i com no tenim cl\u00e0usula GROUP BY tota la taula ser\u00e0 un grup. I podr\u00e0 calcular el m\u00e0xim sense problemes, per\u00f2 no podr\u00e0 traure una cosa individual del grup, com \u00e9s el nom. I en aquest cas no es pot solucionar incloent el nom en el GROUP BY, perqu\u00e8 aleshores farem un grup per cada poblaci\u00f3. De moment, abans de veure les subconsultes, nom\u00e9s podem resoldre aquest exemple ordenant per l'altura de forma descendent, i fer LIMIT 1.</p> <p>Podem observar que si tenim cl\u00e0usula GROUP BY, a partir d'aquest moment tots els camps que posem han d'estar en el GROUP BY o en una funci\u00f3 d'agregat, tant en la condici\u00f3 del HAVING, com en les columnes com en el ORDER BY. En canvi no caldr\u00e0 per a la cl\u00e0usula WHERE, ja que aquesta es realitza abans que el GROUP BY</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T06_SQL_I_PostgreSQL/1_introducci/","title":"1 introducci","text":"<p>Bases de Dades</p> <ul> <li>Tema 6: SQL - Consulta b\u00e0sica (part I)</li> <li>Objectius i Coneixements previs</li> <li>1. Introducci\u00f3</li> <li>2. DDL i DML</li> <li>3. Client DBeaver: instal\u00b7laci\u00f3 i confiuraci\u00f3</li> <li>4. Client DBeaver: utilitzaci\u00f3</li> <li>5. Dades dels exemples i els exercicis</li> <li>6. Operadors</li> <li>7. Funcions </li> <li>7.1 Formats de les dates</li> <li>7.2 Formats dels n\u00fameros</li> <li>8. La consulta SELECT</li> <li>9. Consulta b\u00e0sica </li> <li>Exercicis</li> <li>10. \u00c0lies en les columnes </li> <li>Exercicis</li> <li>11. La cl\u00e0usula WHERE </li> <li>Exercicis</li> <li>12. Funcions d'agregat </li> <li>Exercicis</li> <li>13. La cl\u00e0usula GROUP BY </li> <li>Exercicis</li> <li>14. La cl\u00e0usula HAVING </li> <li>Exercicis</li> <li>15. La cl\u00e0usula ORDER BY </li> <li>Exercicis</li> <li>16. El predicat DISTINCT </li> <li>Exercicis</li> <li>17. La cl\u00e0usula LIMIT .. OFFSET </li> <li>Exercicis</li> <li>18. Consulta de creaci\u00f3 de taules </li> <li>Exercicis</li> <li>19. Ordre amb qu\u00e8 s'executa una sent\u00e8ncia SQL</li> <li>Exercicis de tot el tema, amb els resultats</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T06_SQL_I_PostgreSQL/1_introducci/#1-introduccio","title":"1. Introducci\u00f3","text":"<p>SQL \u00e9s un llenguatge per a organitzar, gestionar i recuperar dades emmagatzemades en una Base de Dades. El nom \"SQL\" \u00e9s una abreviatura de Structured Query Language (Llenguatge Estructurat de Consultes), i com el seu nom indica, \u00e9s un llenguatge inform\u00e0tic que es pot utilitzar per a interaccions amb una Base de Dades de tipus relacional.</p> <p>SQL s'utilitza per a controlar totes les funcions que un SGBD proporciona als seus usuaris, incloent:</p> <ul> <li>Definici\u00f3 de dades. SQL permet a un usuari definir l'estructura i organitzaci\u00f3 de les dades emmagatzemades i les relacions existents entre elles (claus externes).</li> <li>Recuperaci\u00f3 de dades. SQL permet a un usuari o a un programa d'aplicaci\u00f3 recuperar les dades emmagatzemades de la base de dades i utilitzar-les.</li> <li>Manipulaci\u00f3 de dades. SQL permet a un usuari o a un programa d'aplicaci\u00f3 actualitzar la base de dades afegint noves dades, suprimint dades antigues i modificant dades pr\u00e8viament emmagatzemades.</li> <li>Control d'acc\u00e9s. SQL pot ser utilitzat per a restringir la capacitat d'un usuari per a recuperar, afegir i modificar dades, protegint aix\u00ed les dades guardades davant d'accessos no autoritzats.</li> <li>Compartici\u00f3 de dades. SQL s'utilitza per a coordinar la compartici\u00f3 de dades per part d'usuaris concurrents, assegurant que no interfereixen entre ells.</li> <li>Integritat de dades. SQL defineix restriccions d'integritat en la base de dades, protegint-la contra corrupcions causades per actualitzacions inconsistents o per fallades del sistema.</li> </ul> <p>SQL no \u00e9s realment un llenguatge inform\u00e0tic complet tal com JAVA, C o Python. SQL no disposa de la sent\u00e8ncia IF per a examinar condicions, ni de les sent\u00e8ncies WHILE o FOR per a fer bucles, per exemple. En compte d'aix\u00f2, SQL \u00e9s un subllenguatge de base de dades, que consta d'unes trenta sent\u00e8ncies especialitzades per a tasques de gesti\u00f3 de bases de dades, per\u00f2 nom\u00e9s 7 s\u00f3n les sent\u00e8ncies principals.</p> <p>Tamb\u00e9 es diu que \u00e9s un llenguatge de quarta generaci\u00f3 perqu\u00e8 en ell es diu quina informaci\u00f3 es vol, sense especificar exactament com s'aconsegueix aquesta informaci\u00f3.</p> <p>Tamb\u00e9 es diu que \u00e9s un llenguatge orientat a conjunt de registres, ja que una sent\u00e8ncia pot tornar un conjunt de registres. A\u00e7\u00f2 \u00e9s un gran avantatge amb els llenguatges de tercera generaci\u00f3, que nom\u00e9s podien treballar registre a registre.</p> <p>Dues s\u00f3n les maneres d'executar sent\u00e8ncies SQL.</p> <ul> <li>De forma interactiva: s'escriu una sent\u00e8ncia SQL, i s'executa, tornant normalment un conjunt de registres que es presentaran en forma tabular. En Access el lloc on procedir d'aquesta manera \u00e9s en les consultes, triant Vista SQL. Tindrem lloc per escriure la sent\u00e8ncia tal i com es mostra en la primera imatge. En la segona imatge, es mostra una consulta ja feta en el tema anterior, per\u00f2 veient-la en SQL. En la tercera hem executat la consulta:</li> </ul> <ul> <li>Dins d'un programa escrit en un altre llenguatge, que actuar\u00e0 com llenguatge amfitri\u00f3 (i el SQL seria el llenguatge host, \"huesped\"). En el cas de Access podr\u00edem incloure sent\u00e8ncies SQL en Visual Basic. D'aquesta manera s'est\u00e9n el llenguatge amfitri\u00f3 i li permet accedir a la Base de Dades.</li> </ul> <p>SQL \u00e9s el llenguatge est\u00e0ndard d'acc\u00e9s i manipulaci\u00f3 de Bases de Dades dels Sistemes Gestors de Bases de Dades Relacionals. A tots, absolutament a tots els SGBD Relacionales comercials es pot accedir per SQL.</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T06_SQL_I_PostgreSQL/2_ddl_i_dml/","title":"2 ddl i dml","text":"<p>Bases de Dades</p> <ul> <li>Tema 6: SQL - Consulta b\u00e0sica (part I)</li> <li>Objectius i Coneixements previs</li> <li>1. Introducci\u00f3</li> <li>2. DDL i DML</li> <li>3. Client DBeaver: instal\u00b7laci\u00f3 i confiuraci\u00f3</li> <li>4. Client DBeaver: utilitzaci\u00f3</li> <li>5. Dades dels exemples i els exercicis</li> <li>6. Operadors</li> <li>7. Funcions </li> <li>7.1 Formats de les dates</li> <li>7.2 Formats dels n\u00fameros</li> <li>8. La consulta SELECT</li> <li>9. Consulta b\u00e0sica </li> <li>Exercicis</li> <li>10. \u00c0lies en les columnes </li> <li>Exercicis</li> <li>11. La cl\u00e0usula WHERE </li> <li>Exercicis</li> <li>12. Funcions d'agregat </li> <li>Exercicis</li> <li>13. La cl\u00e0usula GROUP BY </li> <li>Exercicis</li> <li>14. La cl\u00e0usula HAVING </li> <li>Exercicis</li> <li>15. La cl\u00e0usula ORDER BY </li> <li>Exercicis</li> <li>16. El predicat DISTINCT </li> <li>Exercicis</li> <li>17. La cl\u00e0usula LIMIT .. OFFSET </li> <li>Exercicis</li> <li>18. Consulta de creaci\u00f3 de taules </li> <li>Exercicis</li> <li>19. Ordre amb qu\u00e8 s'executa una sent\u00e8ncia SQL</li> <li>Exercicis de tot el tema, amb els resultats</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T06_SQL_I_PostgreSQL/2_ddl_i_dml/#2-ddl-i-dml","title":"2. DDL i DML","text":"<p>Com s'ha comentat en la pregunta anterior, SQL ens permet definir, controlar i accedir a una Base de Dades.</p> <p>Farem una distinci\u00f3 principal entre aquestes funcions, separant el que s\u00f3n les estructures de les taules i el contingut de les taules. En aquest sentit tindrem 2 subtipus de llenguatges:</p> <ul> <li>DDL (Data Definition Language o Llenguatge de Definici\u00f3 de Dades): permet definir, modificar o esborrar les estructures, com poden ser taules, vistes, \u00edndex, ... i fins i tot Bases de Dades. B\u00e0sicament les sent\u00e8ncies s\u00f3n 3: </li> </ul> CREATE per a crear l'estructura ALTER per a modificar-la DROP per a esborrar-la <ul> <li>DML (Data Manipulation Language o Llenguatge de Manipulaci\u00f3 de Dades): permet accedir al contingut de les estructures, a les dades. Aquest acc\u00e9s pot ser de dos tipus: per a consultar o per a modificar les dades </li> </ul> <p>Per a consultar:   SELECT </p> <p>Per a modificar </p> INSERT insereix noves files UPDATE modifica el contingut de files ja existents DELETE esborra files <p>El llenguatge SQL \u00e9s m\u00e9s extens que les sent\u00e8ncies anteriors, incorporant tamb\u00e9 el que s'anomena DCL (Data Control Language o Llenguatge de Control de Dades), que permet controlar les dades per a donar permisos o llevar-los sobre les dades, o controlar les transaccions, ..., per\u00f2 de moment ens aconformarem amb les sent\u00e8ncies de DML i DDL, i aquestes \u00faltimes, sobretot, per a definir taules.</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T06_SQL_I_PostgreSQL/3_client_dbeaver_installaci_i_confiuraci/","title":"3 client dbeaver installaci i confiuraci","text":"<p>Bases de Dades</p> <ul> <li>Tema 6: SQL - Consulta b\u00e0sica (part I)</li> <li>Objectius i Coneixements previs</li> <li>1. Introducci\u00f3</li> <li>2. DDL i DML</li> <li>3. Client DBeaver: instal\u00b7laci\u00f3 i confiuraci\u00f3</li> <li>4. Client DBeaver: utilitzaci\u00f3</li> <li>5. Dades dels exemples i els exercicis</li> <li>6. Operadors</li> <li>7. Funcions </li> <li>7.1 Formats de les dates</li> <li>7.2 Formats dels n\u00fameros</li> <li>8. La consulta SELECT</li> <li>9. Consulta b\u00e0sica </li> <li>Exercicis</li> <li>10. \u00c0lies en les columnes </li> <li>Exercicis</li> <li>11. La cl\u00e0usula WHERE </li> <li>Exercicis</li> <li>12. Funcions d'agregat </li> <li>Exercicis</li> <li>13. La cl\u00e0usula GROUP BY </li> <li>Exercicis</li> <li>14. La cl\u00e0usula HAVING </li> <li>Exercicis</li> <li>15. La cl\u00e0usula ORDER BY </li> <li>Exercicis</li> <li>16. El predicat DISTINCT </li> <li>Exercicis</li> <li>17. La cl\u00e0usula LIMIT .. OFFSET </li> <li>Exercicis</li> <li>18. Consulta de creaci\u00f3 de taules </li> <li>Exercicis</li> <li>19. Ordre amb qu\u00e8 s'executa una sent\u00e8ncia SQL</li> <li>Exercicis de tot el tema, amb els resultats</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T06_SQL_I_PostgreSQL/3_client_dbeaver_installaci_i_confiuraci/#3-client-dbeaver-installacio-i-confiuracio","title":"3. Client DBeaver: instal\u00b7laci\u00f3 i confiuraci\u00f3","text":"<p>Com ja s'ha comentat, en aquest tema utilitzarem el Sistema Gestor de Bases de Dades\u00a0PostgreSQL. Aquest SGBD utilitza l'arquitectura\u00a0client-servidor. Aix\u00f2 significa que hi ha un servidor central amb el PostgreSQL instal\u00b7lat, i hi haur\u00e0 molts clients que es connectaran a aquest servidor. Es pot fer des de la mateixa m\u00e0quina on est\u00e0 instal\u00b7lat el servidor, o des d'una altra.</p> <p>En el nostre cas, el servidor ja est\u00e0 en marxa i funcionant. Podrem accedir a ell tant des de dins de l'Institut com des de fora.</p> <p>A nosaltres, per a poder connectar amb el servidor PostgreSQL ens fa falta el client de PostgreSQL.</p> <p>Instal\u00b7larem\u00a0DBeaver, un programa que est\u00e0 pegant molt fort i ens permet accedir a qualsevol Sistema Gestor de Bases de Dades molt c\u00f2modament.</p> <p>En els ordinadors de l'Institut ja el tenim instal\u00b7lat. En casa us l'haureu d'instal\u00b7lar per\u00f2 la seua instal\u00b7laci\u00f3 no ofereix cap problema.</p> <p>Haureu d'anar a la p\u00e0gina de DBeaver, concretament a la de Downloads: https://dbeaver.io/download/</p> <p>Triarem la versi\u00f3\u00a0Comunity Edition, amb ella tindrem de sobres i \u00e9s totalment lliure. Com veieu es pot instal\u00b7lar sense problemes en Windows, Mac i/o Linux</p> <p></p> <p>La versi\u00f3 Enterprise Edition tamb\u00e9 ens permetria accedir a molt\u00edssimes Bases de Dades NoSQL. Com veieu molt interessant.</p> <p>Com hem dit amb la versi\u00f3 Comunity Edition tindrem m\u00e9s que suficient.</p> <p>Tant en Linux com en Windows tenim la possibilitat de baixar-nos un fitxer comprimit (zip o tar.gz respectivament) que nom\u00e9s haurem de descomprimir i buscar l'executable. Tamb\u00e9 tenim la possibilitat de baixar-nos l'instal\u00b7lador, que en Windows seria un executable i en Linux un paquet. Per\u00f2 la primera opci\u00f3 del fitxer comprimit ens anir\u00e0 b\u00e9.</p> <p>La versi\u00f3 en el moment de fer aquestos apunts \u00e9s la 21.2.4</p> <p>Una vegada feta la instal\u00b7laci\u00f3 haurem de fer la connexi\u00f3 amb el SGBD que en el nostre cas ser\u00e0 PostgreSQL. Per\u00f2 connectar a qualsevol altre SGBD seria exactament igual.</p> <p>La primera vegada que arranquem el programa, segurament ens demanar\u00e0 per fer la primera connexi\u00f3. Arribarem a la mateixa finestra cada vegada que anem a fer una nova connexi\u00f3.</p> <p>Primera connexi\u00f3 a PostgreSQL: geo</p> <p>Especificarem que volem connectar a PostgreSQL i a continuaci\u00f3 donarem les dades de connexi\u00f3, que s\u00f3n aquestes:</p> <ul> <li>Servidor (Host):\u00a089.36.214.106</li> <li>Base de Dades (Database):\u00a0geo</li> <li>Usuari (Username):\u00a0geo</li> <li>Contrasenya (Password):\u00a0geo</li> </ul> <p>En aquesta Base de Dades tindrem unes taules que ens serviran per a fer els exercicis de SQL. Comentarem la seua estructura m\u00e9s endavant.</p> <p>Aquestes s\u00f3n les finestres on especificar\u00edem l'anterior:</p> <p>Segona connexi\u00f3 a PostgreSQL: factura</p> <p>Per als exercicis treballarem sobre una altra Base de Dades m\u00e9s completa que ens done m\u00e9s joc a l'hora de fer les sent\u00e8ncies SQL. La Base de Dades s'anomena\u00a0factura, i s'ha de connectar amb l'usuari\u00a0factura\u00a0amb contrasenya\u00a0factura. Comentarem la seua estructura m\u00e9s endavant. Aquestes s\u00f3n les dades de connexi\u00f3:</p> <ul> <li>Servidor (Host):\u00a089.36.214.106</li> <li>Base de Dades (Database):\u00a0factura</li> <li>Usuari (Username): factura</li> <li>Contrasenya (Password): factura </li> </ul> <p>Aquestes s\u00f3n les pantalles on far\u00edem la connexi\u00f3:</p> <p>Exemple de connexi\u00f3 a Access: Empresa.accdb</p> <p>\u00danicament a mode il\u00b7lustratiu anem a mostrar una altra connexi\u00f3 diferent a les de PostgreSQL. Com que de moment nom\u00e9s hav\u00edem treballat amb Access, anem a intentar connectar amb la Base de Dades\u00a0Empresa.accdb feta en el tema anterior.\u00a0</p> <p>La connexi\u00f3 l'haurem de fer a MS Access (UCanAccess). Despr\u00e9s nom\u00e9s haurem de navegar per trobar la Base de Dades\u00a0Empresa.accdb</p> <p>Ac\u00ed presentem les pantalles per a fer la connexi\u00f3:</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T06_SQL_I_PostgreSQL/4_client_dbeaver_utilitzaci/","title":"4 client dbeaver utilitzaci","text":"<p>Bases de Dades</p> <ul> <li>Tema 6: SQL - Consulta b\u00e0sica (part I)</li> <li>Objectius i Coneixements previs</li> <li>1. Introducci\u00f3</li> <li>2. DDL i DML</li> <li>3. Client DBeaver: instal\u00b7laci\u00f3 i confiuraci\u00f3</li> <li>4. Client DBeaver: utilitzaci\u00f3</li> <li>5. Dades dels exemples i els exercicis</li> <li>6. Operadors</li> <li>7. Funcions </li> <li>7.1 Formats de les dates</li> <li>7.2 Formats dels n\u00fameros</li> <li>8. La consulta SELECT</li> <li>9. Consulta b\u00e0sica </li> <li>Exercicis</li> <li>10. \u00c0lies en les columnes </li> <li>Exercicis</li> <li>11. La cl\u00e0usula WHERE </li> <li>Exercicis</li> <li>12. Funcions d'agregat </li> <li>Exercicis</li> <li>13. La cl\u00e0usula GROUP BY </li> <li>Exercicis</li> <li>14. La cl\u00e0usula HAVING </li> <li>Exercicis</li> <li>15. La cl\u00e0usula ORDER BY </li> <li>Exercicis</li> <li>16. El predicat DISTINCT </li> <li>Exercicis</li> <li>17. La cl\u00e0usula LIMIT .. OFFSET </li> <li>Exercicis</li> <li>18. Consulta de creaci\u00f3 de taules </li> <li>Exercicis</li> <li>19. Ordre amb qu\u00e8 s'executa una sent\u00e8ncia SQL</li> <li>Exercicis de tot el tema, amb els resultats</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T06_SQL_I_PostgreSQL/4_client_dbeaver_utilitzaci/#4-client-dbeaver-utilitzacio","title":"4. Client DBeaver: utilitzaci\u00f3","text":"<p>Una vegada feta la connexi\u00f3,\u00a0DBeaver ens permetr\u00e0 navegar per les taules i altres objectes de la Base de Dades, inspeccionar les taules, i el m\u00e9s important per a nosaltres, executar sent\u00e8ncies SQL de forma c\u00f2moda.</p> <p>En la seg\u00fcent imatge es presenten algunes de les seues parts i caracteristiques. En ella s'ha fet doble clic sobre una taula, COMARQUES, per veure les seues caracter\u00edstiques:</p> <p></p> <p>Tamb\u00e9 podem veure les dades, i fins i tot afegir noves files, esborrar o modificar les existents. Es pot ordenar les files i fer filtres:</p> <p></p> <p>I tamb\u00e9 tindrem la possibilitat d'executar consultes SQL (en la primera imatge es mostra com arribar). En la finestra de sent\u00e8ncies SQL podrem editar la consulta de forma c\u00f2moda (ens d\u00f3na molta ajuda per a no cometre errors sint\u00e0ctics) i tamb\u00e9 ens mostra el resultat. Podem modificar quantes vegades vulguem. i des del menu\u00a0File podrem guardar la consulta, cosa que farem per a tots els exercicis del tema:</p> <p></p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T06_SQL_I_PostgreSQL/5_dades_dels_exemples_i_els_exercicis/","title":"5 dades dels exemples i els exercicis","text":"<p>Bases de Dades</p> <ul> <li>Tema 6: SQL - Consulta b\u00e0sica (part I)</li> <li>Objectius i Coneixements previs</li> <li>1. Introducci\u00f3</li> <li>2. DDL i DML</li> <li>3. Client DBeaver: instal\u00b7laci\u00f3 i confiuraci\u00f3</li> <li>4. Client DBeaver: utilitzaci\u00f3</li> <li>5. Dades dels exemples i els exercicis</li> <li>6. Operadors</li> <li>7. Funcions </li> <li>7.1 Formats de les dates</li> <li>7.2 Formats dels n\u00fameros</li> <li>8. La consulta SELECT</li> <li>9. Consulta b\u00e0sica </li> <li>Exercicis</li> <li>10. \u00c0lies en les columnes </li> <li>Exercicis</li> <li>11. La cl\u00e0usula WHERE </li> <li>Exercicis</li> <li>12. Funcions d'agregat </li> <li>Exercicis</li> <li>13. La cl\u00e0usula GROUP BY </li> <li>Exercicis</li> <li>14. La cl\u00e0usula HAVING </li> <li>Exercicis</li> <li>15. La cl\u00e0usula ORDER BY </li> <li>Exercicis</li> <li>16. El predicat DISTINCT </li> <li>Exercicis</li> <li>17. La cl\u00e0usula LIMIT .. OFFSET </li> <li>Exercicis</li> <li>18. Consulta de creaci\u00f3 de taules </li> <li>Exercicis</li> <li>19. Ordre amb qu\u00e8 s'executa una sent\u00e8ncia SQL</li> <li>Exercicis de tot el tema, amb els resultats</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T06_SQL_I_PostgreSQL/5_dades_dels_exemples_i_els_exercicis/#5-dades-dels-exemples-i-els-exercicis","title":"5. Dades dels exemples i els exercicis","text":"<p>Tots els exemples que es mostraran en aquest tema s'intentaran fer sobre la connexi\u00f3 que ja tenim feta, \u00e9s a dir, al servidor de l'Institut, connectant com a usuari geo (contresenya geo) a la Base de Dades geo. \u00c9s una Base de Dades molt senzilleta, amb nom\u00e9s 3 taules, cosa que ajudar\u00e0 a una f\u00e0cil comprensi\u00f3 de la seua estructura. Aquest \u00e9s l'esquema en el Model Entitat-Relaci\u00f3 i en el Model Relacional:</p> <p></p> <p>Per als exercicis treballarem sobre una altra Base de Dades m\u00e9s completa que ens done m\u00e9s joc a l'hora de fer les sent\u00e8ncies SQL. La Base de Dades s'anomena factura, i s'ha de connectar amb l'usuari factura amb contrasenya factura. Aquesta seria la seua estructura, tamb\u00e9 en Model Entitat-Relaci\u00f3 i Model Relacional.</p> <p></p> <p>Recordeu que en el punt 3 hav\u00edem fet les connexions a cadascuna de les 2 Bases de Dades anteriors.</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T06_SQL_I_PostgreSQL/6_operadors/","title":"6 operadors","text":"<p>Bases de Dades</p> <ul> <li>Tema 6: SQL - Consulta b\u00e0sica (part I)</li> <li>Objectius i Coneixements previs</li> <li>1. Introducci\u00f3</li> <li>2. DDL i DML</li> <li>3. Client DBeaver: instal\u00b7laci\u00f3 i confiuraci\u00f3</li> <li>4. Client DBeaver: utilitzaci\u00f3</li> <li>5. Dades dels exemples i els exercicis</li> <li>6. Operadors</li> <li>7. Funcions </li> <li>7.1 Formats de les dates</li> <li>7.2 Formats dels n\u00fameros</li> <li>8. La consulta SELECT</li> <li>9. Consulta b\u00e0sica </li> <li>Exercicis</li> <li>10. \u00c0lies en les columnes </li> <li>Exercicis</li> <li>11. La cl\u00e0usula WHERE </li> <li>Exercicis</li> <li>12. Funcions d'agregat </li> <li>Exercicis</li> <li>13. La cl\u00e0usula GROUP BY </li> <li>Exercicis</li> <li>14. La cl\u00e0usula HAVING </li> <li>Exercicis</li> <li>15. La cl\u00e0usula ORDER BY </li> <li>Exercicis</li> <li>16. El predicat DISTINCT </li> <li>Exercicis</li> <li>17. La cl\u00e0usula LIMIT .. OFFSET </li> <li>Exercicis</li> <li>18. Consulta de creaci\u00f3 de taules </li> <li>Exercicis</li> <li>19. Ordre amb qu\u00e8 s'executa una sent\u00e8ncia SQL</li> <li>Exercicis de tot el tema, amb els resultats</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T06_SQL_I_PostgreSQL/6_operadors/#6-operadors","title":"6. Operadors","text":"<p>Els operadors que es gasten en el SQL de PostgreSQL s\u00f3n molt\u00edssims. Cada tipus de dades t\u00e9 una s\u00e8rie d'operadors, i el mateix operador, aplicat a tipus distints pot fer coses diferents.</p> <p>Es poden veure tots els operadors en la taula PG_OPERATOR, on tindrem el nom de l'operador, els tipus de dades dels operands i del resultat i el procediment que implementa l'operador. Ac\u00ed tenim una vista d'aquesta taula, encara que hi ha tant\u00edssims operadors que mareja i tot (els que estan repetits \u00e9s per a especificar l'actuaci\u00f3 sobre operands de diferents tipus).</p> <p></p> <p>Podr\u00edem fins i tot definir els nostres operadors, amb la sent\u00e8ncia CREATE OPERATOR, on definir\u00edem el tipus de l'operador de l'esquerra, el de la dreta, la funci\u00f3 que implementa l'operador, ... Ho intentarem en el tema seg\u00fcent, quan ja sapiguem crear funcions.</p> <p>No farem un rep\u00e0s extens de tots els operadors. Nom\u00e9s els m\u00e9s habituals, i algun d'un tipus de dades especial. Els tipus de dades els veurem en la tercera part d'aquest tema, quan les sent\u00e8ncies de creaci\u00f3 de taules.</p> <p>Per tant, fixeu-vos sobretot en els opradors aritm\u00e8tics, de cadena i de comparaci\u00f3.</p> <p>Operadors aritm\u00e8tics</p> + Suma - Resta * Multiplicaci\u00f3 / Divisi\u00f3 ^ Exponenciaci\u00f3 ** /** Arrel quadrada ! Factorial % <p>Exemples</p> <p>SELECT |/16;</p> <p>SELECT 5 ^ 3;</p> <p>SELECT 5!;</p> <p>Operadors de cadena</p> <p>||||Concatenaci\u00f3| | :-: | :- |</p> <p>Exemples</p> <p>SELECT 'Data i hora actual: ' || Now();</p> <p>Operadors de comparaci\u00f3</p> = Igual &lt;&gt; Distint != Distint &gt; Major &gt;= Major o igual &lt; Menor &lt;= Menor o igual <p>S'utilitzen principalment en les condicions. Tornen sempre un valor boole\u00e0 (true o false)</p> <p>Operador conversor de tipus</p> <p>:: tipus</p> <p>Servir\u00e0 per a convertir alguna dada a algun tipus de dades.</p> <p>Aix\u00ed, per exemple,</p> <ul> <li>'25-4-2012'::date estem convertint una cadena de text en una dada de tipus date.</li> <li>'(0,0)'::point estem convertint el text a un punt.</li> </ul> <p>La forma utilitzada en els exemples anteriors \u00e9s una forma molt habitual de posar les constants d'un determinat tipus: la posem com a cadena de car\u00e0cters (entre cometes) i despr\u00e9s la convertim. L'\u00fanica restricci\u00f3 ser\u00e0 que PostgreSQL \"entenga\" el que hi ha entre cometes per fer la conversi\u00f3.</p> <p>Per veure que realment hi ha un canvi ens aprofitem de DBeaver que diu de quin tipus \u00e9s un camp, si pot. Observeu que en el primer camp no hem posat m\u00e9s que una tira de car\u00e0cters, per\u00f2 en el segon intentem reconvertir aquesta mateixa tira de car\u00e0cters al tipus POINT. En el resultat s'observa com ha ent\u00e9s que el tipus de la dada \u00e9s POINT.</p> <p></p> <p>Tamb\u00e9 ens serviria la funci\u00f3 point ('(0,0)')</p> <p>Operadors Geom\u00e8trics</p> Operador Descripci\u00f3 Utilitzaci\u00f3 &lt;-&gt; Dist\u00e0ncia (han de ser del mateix tipus) point '(1,0)' &lt;-&gt; point '(3,0)' &lt;@ Est\u00e0 contingut en? '(1,1)'::point @ '((0,0),(2,2))'::box @&gt; Cont\u00e9? box '((0,0),(2,2))' @&gt; point '(1,1)' <p>La llista d'operadors \u00e9s molt m\u00e9s llarga, per\u00f2 ac\u00ed nom\u00e9s volem mostrar-ne algun a mode il\u00b7lustratiu.</p> <p>Podem fer comprovacions d'aquest tipus:</p> <p>SELECT '(0,0)'::point &lt;-&gt; '(3,4)'::point;</p> <p>que ens donar\u00e0 la dist\u00e0ncia entre el punt (0,0) i el punt (3,4). Aquesta dist\u00e0ncia ha de ser 5.</p> <p>SELECT '(1,1)'::point &lt;@ '((0,0),2)'::circle;</p> <p>que ens dir\u00e0 si el punt (1,1) est\u00e0 dins del cercle amb origen (0,0) i radi 2. Com que s\u00ed que est\u00e0 tornar\u00e0 el valor true (vertader).</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T06_SQL_I_PostgreSQL/71_formats_de_les_dates/","title":"71 formats de les dates","text":"<p>Bases de Dades</p> <ul> <li>Tema 6: SQL - Consulta b\u00e0sica (part I)</li> <li>Objectius i Coneixements previs</li> <li>1. Introducci\u00f3</li> <li>2. DDL i DML</li> <li>3. Client DBeaver: instal\u00b7laci\u00f3 i confiuraci\u00f3</li> <li>4. Client DBeaver: utilitzaci\u00f3</li> <li>5. Dades dels exemples i els exercicis</li> <li>6. Operadors</li> <li>7. Funcions </li> <li>7.1 Formats de les dates</li> <li>7.2 Formats dels n\u00fameros</li> <li>8. La consulta SELECT</li> <li>9. Consulta b\u00e0sica </li> <li>Exercicis</li> <li>10. \u00c0lies en les columnes </li> <li>Exercicis</li> <li>11. La cl\u00e0usula WHERE </li> <li>Exercicis</li> <li>12. Funcions d'agregat </li> <li>Exercicis</li> <li>13. La cl\u00e0usula GROUP BY </li> <li>Exercicis</li> <li>14. La cl\u00e0usula HAVING </li> <li>Exercicis</li> <li>15. La cl\u00e0usula ORDER BY </li> <li>Exercicis</li> <li>16. El predicat DISTINCT </li> <li>Exercicis</li> <li>17. La cl\u00e0usula LIMIT .. OFFSET </li> <li>Exercicis</li> <li>18. Consulta de creaci\u00f3 de taules </li> <li>Exercicis</li> <li>19. Ordre amb qu\u00e8 s'executa una sent\u00e8ncia SQL</li> <li>Exercicis de tot el tema, amb els resultats</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T06_SQL_I_PostgreSQL/71_formats_de_les_dates/#71-formats-de-les-dates","title":"7.1 Formats de les dates","text":"<p>Aquest tipus \u00e9s molt vers\u00e0til en quant al format, b\u00e9 siga per a la introducci\u00f3 de les dades, o el que \u00e9s m\u00e9s habitual, per a la seua presentaci\u00f3. S'haur\u00e0 d'utilitzar una funci\u00f3, TO_CHAR, que acceptar\u00e0 2 par\u00e0metres: el primer la data que es vol presentar, i el segon el format que volem. En el format indicarem per mig de determinats car\u00e0cters l'aspecte que volem. Per exemple, per a traure la data d'avui amb el format dia-mes-any, posar\u00edem:</p> <p>SELECT TO_CHAR( NOW(), 'DD-MM-YYYY');</p> <p>El seg\u00fcent quadre resumeix aquestos car\u00e0cters, agrupat per categories:</p> DIESMESOSANYS DDia de la setmana (1-7)MMMes (1-12)Y\u00daltim d\u00edgit de l'any DDDia del mes (1-31)MONTH Mes en lletres, utilitzant 9 car\u00e0ctersYY \u00daltims 2 d\u00edgits de l'any DDD Dia de l'any (1-366)MON Mes abreviat, utilitzant 3 car\u00e0ctersYYY \u00daltims 3 d\u00edgits de l'any DAY Dia de la setmana en lletres, utilitzant 9 car\u00e0ctersRM El mes amb n\u00fameros romans (juliol= VII)YYYY Any amb 4 d\u00edgits DY Dia de la setmana abreviat, utilitzant 3 car\u00e0cters <p>En principi els formats que tornen lletres ho estaran en angl\u00e8s, per\u00f2 despr\u00e9s veurem com canviar d'idioma.</p> HORESMINUTSSEGONS HH , HH12 Hora (1-12)MI MinutsSS Segons HH24 Hora (0-23) SSSS Segons des de la mitjanit (0-86399) PM , AMAbans o despr\u00e9s del migdia (AM i PM respectivament) ALTRES W , WW Setmana del mes (1-5) ; Setmana de l'any (1-53)CC Segle, amb 2 xifresQ Quart d'any, trimestre (1-4) / , . ; : -  \"text\" Car\u00e0cters que poden apar\u00e8ixer acompanyant.En els formats que tornen lletres, poden eixir en maj\u00fascules, min\u00fascules o la primera en maj\u00fascula, si aix\u00ed ho posem en les lletres del format. Si immediatament davant d'un format que torna lletres posem FM, eixiran els car\u00e0cters justos que ocupen (per exemple el dia de la setmana o el mes), i en els num\u00e8rics no eixiran els 0 no significatius. Si immediatament davant d'un format que torna lletres posem TM, ho traduir\u00e0 a l'idioma que estiga configurat el servidor, per\u00f2 com el tenim configurat en angl\u00e8s el resultat ser\u00e0 el mateix <p>Exemples:</p> <p>Si ara f\u00f3ra 9/1/16 13:39 (en el servidor, no en la vostra m\u00e0quina), i f\u00e9rem SELECT TO_CHAR(NOW(),'format');</p> Format Eixida dd-mm-yy hh:mi 09-01-23 01:39 dd-mm-yy hh24:mi 09-01-16 13:39 dd-MON-yyy 09-JAN-023 dd-TMMON-yyy 09-ENE-023\u00a0 (si el tingu\u00e9rem configurat en espanyol) Day, dd \"de\" month \"de\" yyyy Monday , 09 de january de 2023\u00a0\u00a0 de 2016 FMDay, dd \"de\" FMmonth \"de\" yyyy. Monday, 09 de january de 2023. TMDay, dd \"de\" TMmonth \"de\" yyyy. Lunes, 09 de enero de 2023. (si el tingu\u00e9rem configurat en espanyol) FMDy PM FMhh-FMmi-FMss Mon PM 1-39-00 TMDy PM TMhh-TMmi-TMss Lun PM 01-39-00 (si el tingu\u00e9rem configurat en espanyol) <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T06_SQL_I_PostgreSQL/72_formats_dels_nmeros/","title":"72 formats dels nmeros","text":"<p>Bases de Dades</p> <ul> <li>Tema 6: SQL - Consulta b\u00e0sica (part I)</li> <li>Objectius i Coneixements previs</li> <li>1. Introducci\u00f3</li> <li>2. DDL i DML</li> <li>3. Client DBeaver: instal\u00b7laci\u00f3 i confiuraci\u00f3</li> <li>4. Client DBeaver: utilitzaci\u00f3</li> <li>5. Dades dels exemples i els exercicis</li> <li>6. Operadors</li> <li>7. Funcions </li> <li>7.1 Formats de les dates</li> <li>7.2 Formats dels n\u00fameros</li> <li>8. La consulta SELECT</li> <li>9. Consulta b\u00e0sica </li> <li>Exercicis</li> <li>10. \u00c0lies en les columnes </li> <li>Exercicis</li> <li>11. La cl\u00e0usula WHERE </li> <li>Exercicis</li> <li>12. Funcions d'agregat </li> <li>Exercicis</li> <li>13. La cl\u00e0usula GROUP BY </li> <li>Exercicis</li> <li>14. La cl\u00e0usula HAVING </li> <li>Exercicis</li> <li>15. La cl\u00e0usula ORDER BY </li> <li>Exercicis</li> <li>16. El predicat DISTINCT </li> <li>Exercicis</li> <li>17. La cl\u00e0usula LIMIT .. OFFSET </li> <li>Exercicis</li> <li>18. Consulta de creaci\u00f3 de taules </li> <li>Exercicis</li> <li>19. Ordre amb qu\u00e8 s'executa una sent\u00e8ncia SQL</li> <li>Exercicis de tot el tema, amb els resultats</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T06_SQL_I_PostgreSQL/72_formats_dels_nmeros/#72-formats-dels-numeros","title":"7.2 Formats dels n\u00fameros","text":"<p>Tamb\u00e9 podrem utilitzar la funci\u00f3 TO_CHAR per a donar l'aspecte que vulguem als n\u00fameros. En la seg\u00fcent taula tenim un resum amb els diferents s\u00edmbols, un comentari descriptiu de cada s\u00edmbol, i un exemple de format amb el resultat que donaria per a un determinat valor. La sent\u00e8ncia seria SELECT TO_CHAR(valor,'format');: </p> S\u00edmbol Comentari Format Valor Resultat 9 Equival a una xifra decimal. Torna el valor amb el n\u00famero de xifres especificades, substituint els zeros no significatius per espais en blanc. \u00danicament no substitueix per espais en blanc quan el valor \u00e9s 0. Els negatius els treu amb el signe, i els positius sense. 9999 34-34 34-34 0 Igual a l'anterior, per\u00f2 sense substituir els zeros no significatius per espais en blanc. 0000 34-34 0034-0034 S Treu el signe: - per als negatius, + per als positius. S9990 34-34 +34-34 $ Treu aquest s\u00edmbol. $9990 34 $ 34 . Treu el punt decimal en la posici\u00f3 indicada 9990.999999.99 340.50.5 34.000.50.50 , Treu la coma separadora de milers 9,999,990.99 341234.51234567 34.001,234.501,234,567.00 \u20ac Treu el s\u00edmbol monetari de l'euro 9990\u20ac 34 34\u20ac D Treu el s\u00edmbol separador de la part decimal del pa\u00eds 9990D99 340.5 34,000,50 G Treu el s\u00edmbol separador dels milers del pa\u00eds en la posici\u00f3 indicada 9G999G990D999G990D99 123412345671234.5 1.234,001.234.567,001.234,50 RN Treu el valor en n\u00fameros romans (fins el 3999). RN rn 1967 MCMLXVIImcmlxvii <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T06_SQL_I_PostgreSQL/7_funcions/","title":"7 funcions","text":"<p>Bases de Dades</p> <ul> <li>Tema 6: SQL - Consulta b\u00e0sica (part I)</li> <li>Objectius i Coneixements previs</li> <li>1. Introducci\u00f3</li> <li>2. DDL i DML</li> <li>3. Client DBeaver: instal\u00b7laci\u00f3 i confiuraci\u00f3</li> <li>4. Client DBeaver: utilitzaci\u00f3</li> <li>5. Dades dels exemples i els exercicis</li> <li>6. Operadors</li> <li>7. Funcions </li> <li>7.1 Formats de les dates</li> <li>7.2 Formats dels n\u00fameros</li> <li>8. La consulta SELECT</li> <li>9. Consulta b\u00e0sica </li> <li>Exercicis</li> <li>10. \u00c0lies en les columnes </li> <li>Exercicis</li> <li>11. La cl\u00e0usula WHERE </li> <li>Exercicis</li> <li>12. Funcions d'agregat </li> <li>Exercicis</li> <li>13. La cl\u00e0usula GROUP BY </li> <li>Exercicis</li> <li>14. La cl\u00e0usula HAVING </li> <li>Exercicis</li> <li>15. La cl\u00e0usula ORDER BY </li> <li>Exercicis</li> <li>16. El predicat DISTINCT </li> <li>Exercicis</li> <li>17. La cl\u00e0usula LIMIT .. OFFSET </li> <li>Exercicis</li> <li>18. Consulta de creaci\u00f3 de taules </li> <li>Exercicis</li> <li>19. Ordre amb qu\u00e8 s'executa una sent\u00e8ncia SQL</li> <li>Exercicis de tot el tema, amb els resultats</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T06_SQL_I_PostgreSQL/7_funcions/#7-funcions","title":"7. Funcions","text":"<p>Com veurem un poc m\u00e9s avant, en les sent\u00e8ncies SQL, a banda de columnes i valors constants, podrem utilitzar funcions.</p> <p>PostgreSQL t\u00e9 moltes funcions ja creades. </p> <p>Farem un recull de les funcions m\u00e9s importants de PostgreSQL, d'entre la multitud de funcions que existeixen. Les agruparem per categories.</p> <p>Evidentment aquest recull no \u00e9s per aprendre'l de mem\u00f2ria, sin\u00f3 que servir\u00e0 de consulta.</p> <p>Funcions num\u00e8riques</p> Funci\u00f3 Explicaci\u00f3 Funci\u00f3 Explicaci\u00f3 ABS(n) Valor absolut de n. LOG(m,n) Logaritme, base m, de n ACOS(n) Arccosinus de n (invers del cosinus) MOD(m,n) La resta de la divisi\u00f3 entre m i n ASIN(n) Arcsinus de n (invers de sinus) POWER(m,n) m elevat a n ATAN(n) Arctangent de n (invers de la tangent) RANDOM() n\u00famero aleatori entre 0 i 1 CEIL(n) Enter immediatament superior o igual a n Round(n,[m]) n arrodonit a m xifres decimals(per defecte 0) COS(n) Cosinus de n. SIN(n) Sinus de n EXP(n) Exponencial de n (en) SQRT(n) Arrel quadrada de n FLOOR(n) Enter immediatament inferior o igual a n TAN(n) Tangent de n LN(n) Logaritme neperi\u00e0 de n Trunc(n,[m]) n truncat a m xifres decimals(per defecte 0) <p>Per exemple, podr\u00edem simular el llan\u00e7ament d'un dau d'aquesta manera:</p> <p>SELECT TRUNC(RANDOM()*6+1);</p> <p>Funcions de car\u00e0cters</p> Funci\u00f3 Explicaci\u00f3 Funci\u00f3 Explicaci\u00f3  ASCII(c)Torna el codi ASCII corresponent al car\u00e0cter cREPLACE(c1,c2,c3)Reempla\u00e7a en c1 cada ocurr\u00e8ncia de c2 per c3 CHR(n)Torna el car\u00e0cter amb codi ASCII n.RPAD(c1,n[c2])Torna c1 reomplida per la dreta fins n car\u00e0cters amb la cadena c2 CONCAT(c1,c2)Concatena les dues cadenes (equivalent a l'operador ||)RTRIM(c1[,set])Retalla per la dreta mentre troba la cadena set (per defecte blancs) INITCAP(c1)Torna la cadena amb la primera lletra de cada paraula en maj\u00fascules, i les altres en min\u00fasculesSTRPOS(s,s1)Busca la primera ocurr\u00e8ncia de la subcadena s1 dins de la cadena s LENGTH(c1)Llarg\u00e0ria de la cadena. Si c1 \u00e9s de tipus CHAR, inclour\u00e0 tots els espais en blanc del final.SUBSTR(c1,m[,n])Torna una subcadena de c1 que comen\u00e7a en el car\u00e0cter m i consta de n car\u00e0cters (per defecte fins el final) LPAD(c1,n[c2])Torna c1 reomplida per l\u2019esquerra fins n car\u00e0cters amb la cadena c2TRANSLATE(c1,c2,c3)Torna c1 amb cada car\u00e0cter de c2 substitu\u00eft pel corresponent (en ordre) de c3. LTRIM(c1[,set])Retalla per l\u2019esquerra mentre troba la cadena set (per defecte blancs)LOWER(c1)Torna la cadena en min\u00fascules UPPER(c1)Torna la cadena en maj\u00fascules <p>Per exemple, traurem els graus de la latitud de les poblacions. Haurem d'agafar els 2 primers car\u00e0cters (els de l'esquerra).</p> <p>SELECT nom , latitud , SUBSTR(latitud,1,2) FROM POBLACIONS;</p> <p>A\u00e7\u00f2 ho podr\u00edem millorar, ja que d'aquesta manera obliguem a que siguen sempre dos car\u00e0cters, els graus. De forma m\u00e9s gen\u00e8rica, els graus \u00e9s el que va davant del s\u00edmbol \u00ba. Per tant el que podem fer \u00e9s buscar aquest s\u00edmbol i traure els de davant (des del primer fins a l'anterior a ell)</p> <p>SELECT nom , latitud , SUBSTR(latitud,1,STRPOS(latitud,'\u00ba')-1) FROM POBLACIONS;</p> <p>Per agafar els minuts de forma senzilla seria traure els car\u00e0cters 4t i 5\u00e8, \u00e9s a dir, 2 car\u00e0cters a partir del 4.</p> <p>SELECT nom ,\u00a0latitud , SUBSTR(latitud,4,2) FROM POBLACIONS;</p> <p>Per\u00f2 de forma m\u00e9s gen\u00e8rica (per si no s'han posat 0 no significatius), haurem de traure des de despr\u00e9s del s\u00edmbol \u00ba fins al car\u00e0ctar anterior a ' (la cometa) que assenyala els minuts. Tenim a m\u00e9s la dificultat afegida que la cometa justament \u00e9s la manera d'especificar un text en SQL. Haurem de posar dos cometes per a escapar, i com que \u00e9s un text va entre cometes. Resultat: 4 cometes.</p> <p>SELECT nom , latitud , SUBSTR(latitud,STRPOS(latitud,'\u00ba')+1,STRPOS(latitud,'''')-STRPOS(latitud,'\u00ba')-1) FROM POBLACIONS;</p> <p>I el mateix far\u00edem per als segons, (entre la cometa simple i la doble).</p> <p>Aquesta sent\u00e8ncia resumeix l'anterior, separant graus, minuts i segons.</p> <p>SELECT nom, latitud, SUBSTR(latitud,1,STRPOS(latitud,'\u00ba')-1), SUBSTR(latitud,STRPOS(latitud,'\u00ba')+1,STRPOS(latitud,'''')-STRPOS(latitud,'\u00ba')-1), SUBSTR(latitud,STRPOS(latitud,'''')+1,STRPOS(latitud,'\"')-STRPOS(latitud,'''')-1) FROM POBLACIONS;</p> <p>Funcions de data</p> Funci\u00f3Explicaci\u00f3 NOW() (CURRENT_TIMESTAMP)Torna la data-hora actual, amb la difer\u00e8ncia d'hores respecte la GMTTotes les funcions que tornen hores (amb data o sense), ho faran fins la micra de segon, a no ser que entre par\u00e8ntesi indiquem les xifres decimals (de segon) que volem LOCALTIMESTAMPIgual que l'anterior, per\u00f2 sense la difer\u00e8ncia de la GMT CURRENT_DATETorna la data actual CURRENT_TIMETorna l'hora actual (amb difer\u00e8ncia GMT) LOCALTIMETorna l'hora actual (sense difer\u00e8ncia GMT) AGE(t)Torna la difer\u00e8ncia de la data actual i t AGE(t1,t2)Torna la difer\u00e8ncia entre t1 (posterior) i t2 (anterior) EXTRACT(camp FROM t)Trau el n\u00famero corresponent al camp (que pot ser year, month, day, hour, minute, second, millisecond, microsecond, dow (day of week), ... <p>Per exemple, \u00bfquan de temps ha passat des de l'intent de cop d'estat?</p> <p>SELECT AGE('1981/02/23'::DATE);</p> <p>O un altre, \u00bfen quin any estem?</p> <p>SELECT EXTRACT(year FROM CURRENT_DATE);</p> <p>Funcions geom\u00e8triques</p> Funci\u00f3 Explicaci\u00f3 Funci\u00f3 Explicaci\u00f3 AREA(o) \u00c0rea de l'objecte HEIGTH(r) Altura del rect\u00e0ngle CENTER(o) Centre de l'objecte RADIUS(c) Radi del cercle DIAMETER(c) Di\u00e0metre del cercle WIDTH(r) Ampl\u00e0ria del rect\u00e0ngle <p>Per exemple, l'\u00e0rea d'un cercle:</p> <p>SELECT AREA('((5,5),2)'::CIRCLE);</p> <p>Funcions IP</p> Funci\u00f3 Explicaci\u00f3 Exemple Resultat HOST(ip) Trau en format text l'adre\u00e7a IP HOST('192.168.2.15/24') 192.168.2.15 MASKLEN(ip) Trau el n\u00famero de bits de la m\u00e0scara <p>This document was truncated here because it was created in the Evaluation Mode. Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T06_SQL_I_PostgreSQL/8_la_consulta_select/","title":"8 la consulta select","text":"<p>Bases de Dades</p> <ul> <li>Tema 6: SQL - Consulta b\u00e0sica (part I)</li> <li>Objectius i Coneixements previs</li> <li>1. Introducci\u00f3</li> <li>2. DDL i DML</li> <li>3. Client DBeaver: instal\u00b7laci\u00f3 i confiuraci\u00f3</li> <li>4. Client DBeaver: utilitzaci\u00f3</li> <li>5. Dades dels exemples i els exercicis</li> <li>6. Operadors</li> <li>7. Funcions </li> <li>7.1 Formats de les dates</li> <li>7.2 Formats dels n\u00fameros</li> <li>8. La consulta SELECT</li> <li>9. Consulta b\u00e0sica </li> <li>Exercicis</li> <li>10. \u00c0lies en les columnes </li> <li>Exercicis</li> <li>11. La cl\u00e0usula WHERE </li> <li>Exercicis</li> <li>12. Funcions d'agregat </li> <li>Exercicis</li> <li>13. La cl\u00e0usula GROUP BY </li> <li>Exercicis</li> <li>14. La cl\u00e0usula HAVING </li> <li>Exercicis</li> <li>15. La cl\u00e0usula ORDER BY </li> <li>Exercicis</li> <li>16. El predicat DISTINCT </li> <li>Exercicis</li> <li>17. La cl\u00e0usula LIMIT .. OFFSET </li> <li>Exercicis</li> <li>18. Consulta de creaci\u00f3 de taules </li> <li>Exercicis</li> <li>19. Ordre amb qu\u00e8 s'executa una sent\u00e8ncia SQL</li> <li>Exercicis de tot el tema, amb els resultats</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T06_SQL_I_PostgreSQL/8_la_consulta_select/#8-la-consulta-select","title":"8. La consulta SELECT","text":"<p>Com el mateix nom indica SQL (Structured Query Language), la consulta o interrogaci\u00f3 de la Base de Dades \u00e9s l'\u00e0nima del SQL. I la instrucci\u00f3 que ens ho permet \u00e9s SELECT.</p> <p>\u00c9s una instrucci\u00f3 molt flexible i de molta pot\u00e8ncia, que permet consultar dades d'una o m\u00e9s taules, filtrar per files i/o columnes, ordenar el resultat, agrupar les dades (comptant o sumant alguna columna), ... Fins i tot permet crear taules noves que serien el resultat d'una consulta d'altres taules.</p> <p>Veurem a continuaci\u00f3 la sintaxi general de la instrucci\u00f3, i posteriorment cadascuna de les cl\u00e0usules:</p> <p>Sintaxi</p> <p>SELECT [DISTINCT]  [ INTO  ]  FROM  [ WHERE  ]  [ GROUP BY  ]  [ HAVING  ]  [ ORDER BY  ]  [ LIMIT num1 OFFSET num2 ] <p>Com veieu, les \u00faniques cl\u00e0usules obligat\u00f2ries s\u00f3n les columnes que volem que isquen com a resultat i la del FROM (on es diu d'on venen les dades).</p> <p>Nota</p> <p>En PostgreSQL no es distingeix entre maj\u00fascules i min\u00fascules. Millor dit, PostgreSQL passa de maj\u00fascules a min\u00fascules tots els noms de taula o de camp o del que siga, excepte si van entre cometes dobles, que aleshores es respecten ma\u00fascules i min\u00fascules.Com a q\u00fcesti\u00f3 d'estil, jo no pose mai entre cometes els noms de taules\u00a0 i camps. I per a una millor lectura, intentar\u00e9 posar sempre els noms de taula en maj\u00fascules, i els noms de camp en min\u00fascules. Tamb\u00e9 posar\u00e9 en maj\u00fascules les cl\u00e0usules de sent\u00e8ncies SQL (SELECT , FROM , WHERE , ...). Per\u00f2 recordeu que \u00e9s per a una millor lectura. Podria anar tot en min\u00fascules perfectament.</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T06_SQL_I_PostgreSQL/9_consulta_bsica/","title":"9 consulta bsica","text":"<p>Bases de Dades</p> <ul> <li>Tema 6: SQL - Consulta b\u00e0sica (part I)</li> <li>Objectius i Coneixements previs</li> <li>1. Introducci\u00f3</li> <li>2. DDL i DML</li> <li>3. Client DBeaver: instal\u00b7laci\u00f3 i confiuraci\u00f3</li> <li>4. Client DBeaver: utilitzaci\u00f3</li> <li>5. Dades dels exemples i els exercicis</li> <li>6. Operadors</li> <li>7. Funcions </li> <li>7.1 Formats de les dates</li> <li>7.2 Formats dels n\u00fameros</li> <li>8. La consulta SELECT</li> <li>9. Consulta b\u00e0sica </li> <li>Exercicis</li> <li>10. \u00c0lies en les columnes </li> <li>Exercicis</li> <li>11. La cl\u00e0usula WHERE </li> <li>Exercicis</li> <li>12. Funcions d'agregat </li> <li>Exercicis</li> <li>13. La cl\u00e0usula GROUP BY </li> <li>Exercicis</li> <li>14. La cl\u00e0usula HAVING </li> <li>Exercicis</li> <li>15. La cl\u00e0usula ORDER BY </li> <li>Exercicis</li> <li>16. El predicat DISTINCT </li> <li>Exercicis</li> <li>17. La cl\u00e0usula LIMIT .. OFFSET </li> <li>Exercicis</li> <li>18. Consulta de creaci\u00f3 de taules </li> <li>Exercicis</li> <li>19. Ordre amb qu\u00e8 s'executa una sent\u00e8ncia SQL</li> <li>Exercicis de tot el tema, amb els resultats</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T06_SQL_I_PostgreSQL/9_consulta_bsica/#9-consulta-basica","title":"9. Consulta b\u00e0sica","text":"<p>El m\u00ednim que s'ha d'indicar en una instrucci\u00f3 SELECT \u00e9s les columnes que volem i la seua proced\u00e8ncia, que pot ser una o m\u00e9s d'una taula.</p> <p>Sintaxi</p> <p>SELECT  <p>FROM  <p>Opcionalment la sent\u00e8ncia pot acabar en punt i coma. En psql \u00e9s obligatori acabar en punt i coma, ja que \u00e9s la manera que t\u00e9 de saber que acaba la instrucci\u00f3 (una instrucci\u00f3 pot ocupar m\u00e9s d'una l\u00ednia)</p> <p>I una altra consideraci\u00f3 important \u00e9s que en PostgreSQL els noms dels objectes (taules, columnes, ...) poden constar de m\u00e9s d'una paraula. Si el nom nom\u00e9s consta d'una paraula es pot posar sense m\u00e9s problemes, per\u00f2 si consta de m\u00e9s d'una paraula (amb espis en blanc pel mig) o t\u00e9 algun car\u00e0cter especial, o coincideix amb alguna paraula reservada (per exemple any), haur\u00e0 d'anar entre cometes dobles. Per a estalviar problemes, \u00e9s una bona pr\u00e0ctica fer els noms sempre d'una paraula (si es volen posar dues, unides pel gui\u00f3 baix).</p> <p>En  podrem posar (separades per comes): <ul> <li>noms de les columnes que volem; si hi ha confusi\u00f3 entre noms de camps de distintes taules, haurem de posar Taula.columna.</li> <li>* : indica totes les columnes.</li> <li>Taula.* : indica totes les columnes de la taula.</li> <li>Funcions (veure pregunta 6)</li> <li>Constants: son valors que posem directament. Els tipus de constants s\u00f3n:</li> <li>Num\u00e8riques: es posen tal qual, amb punt decimal (no pot anar coma decimal, perqu\u00e8 serveix per a separar les columnes)</li> <li>Alfaum\u00e8riques: es posen entre cometes simples</li> <li>Per a altres tipus (com per exemple data-hora), posem la constant entre cometes simples, i PostgreSQL far\u00e0 la conversi\u00f3</li> <li>Expressions que utilitzen operadors per a combinar columnes, funcions, constants num\u00e8riques o alfanum\u00e8riques, ...</li> </ul> <p>En la  del FROM posarem la taula o les taules (separades per comes) d'on venen les dades. <p>Aix\u00ed el seg\u00fcent exemple trau tota la informaci\u00f3 de la taula COMARQUES, \u00e9s a dir totes les files i totes les columnes:</p> <p>SELECT * FROM COMARQUES;</p> <p>Mentre que la seg\u00fcent nom\u00e9s trau el nom:</p> <p>SELECT nom_c FROM COMARQUES;</p> <p>En el seg\u00fcent exemple es trau el nom de cada poblaci\u00f3, els habitants, l'extensi\u00f3 i la densitat de poblaci\u00f3 (habitants partit per extensi\u00f3):</p> <p>SELECT nom , poblacio , extensio , poblacio/extensio FROM POBLACIONS;</p> <p>I en aquest traem el nom de cada poble, l'altura i la mitat de la seua altura (cosa un poc absurda per\u00f2 que serveix per a remarcar que si posem una constant num\u00e8rica, hem de posar el\u00a0punt decimal, no la coma decimal, ja que la coma serveix per a separar els camps) :</p> <p>SELECT nom , altura , altura * 0.5 FROM POBLACIONS;</p> <p>Exemples</p> <ol> <li>Traure tota la informaci\u00f3 de la taula POBLACIONS.</li> </ol> <p>SELECT * FROM POBLACIONS;</p> <ol> <li>Traure el nom i l'altura de totes les poblacions.</li> </ol> <p>SELECT nom, altura FROM POBLACIONS;</p> <ol> <li>Traure el nom de les poblacions, el n\u00famero d'habitants, i aquest n\u00famero incrementat en un 5%.</li> </ol> <p>SELECT nom, poblacio, poblacio * 1.05  FROM POBLACIONS;</p> <p>Observa com hem d'utilitzar el punt decimal i no la coma decimal, ja que la coma serveix per a separar els camps de la consulta SQL</p> <ol> <li>Traure nom, latitud i els graus de la latitud de totes les poblacions. Per a traure els graus de la latitud traurem els car\u00e0cters de l'esquerra, fins el primer el car\u00e0cter \u00ba.</li> </ol> <p>SELECT nom, latitud, SUBSTR(latitud,1,STRPOS(latitud,'\u00ba')-1) FROM POBLACIONS;</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T06_SQL_I_PostgreSQL/exercicis/","title":"Exercicis","text":"<p>Bases de Dades</p> <ul> <li>Tema 6: SQL - Consulta b\u00e0sica (part I)</li> <li>Objectius i Coneixements previs</li> <li>1. Introducci\u00f3</li> <li>2. DDL i DML</li> <li>3. Client DBeaver: instal\u00b7laci\u00f3 i confiuraci\u00f3</li> <li>4. Client DBeaver: utilitzaci\u00f3</li> <li>5. Dades dels exemples i els exercicis</li> <li>6. Operadors</li> <li>7. Funcions </li> <li>7.1 Formats de les dates</li> <li>7.2 Formats dels n\u00fameros</li> <li>8. La consulta SELECT</li> <li>9. Consulta b\u00e0sica </li> <li>Exercicis</li> <li>10. \u00c0lies en les columnes </li> <li>Exercicis</li> <li>11. La cl\u00e0usula WHERE </li> <li>Exercicis</li> <li>12. Funcions d'agregat </li> <li>Exercicis</li> <li>13. La cl\u00e0usula GROUP BY </li> <li>Exercicis</li> <li>14. La cl\u00e0usula HAVING </li> <li>Exercicis</li> <li>15. La cl\u00e0usula ORDER BY </li> <li>Exercicis</li> <li>16. El predicat DISTINCT </li> <li>Exercicis</li> <li>17. La cl\u00e0usula LIMIT .. OFFSET </li> <li>Exercicis</li> <li>18. Consulta de creaci\u00f3 de taules </li> <li>Exercicis</li> <li>19. Ordre amb qu\u00e8 s'executa una sent\u00e8ncia SQL</li> <li>Exercicis de tot el tema, amb els resultats</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T06_SQL_I_PostgreSQL/exercicis/#exercicis","title":"Exercicis","text":""},{"location":"BD-T06_SQL_I_PostgreSQL/exercicis/#exercicis-apartat-9","title":"Exercicis apartat 9","text":"<p>En la BD factura, connectant com a usuari factura:</p> <p>6.1 Traure tota la informaci\u00f3 dels pobles (anomeneu-la Ex_6_1.sql).</p> <p>6.2 Traure el codi postal, el nom i l'adre\u00e7a, per aquest ordre, de tots els venedors (anomeneu-la Ex_6_2.sql).</p> <p>6.3 Traure el codi d'article, la descripci\u00f3, preu i preu incrementat en un 5%, de tots els articles.</p> <p>6.4 Traure la informaci\u00f3 dels clients amb el seg\u00fcent format (ha d'anar tot en una columna):</p> <p>Damborenea Corbato, Alicia. CALLE MADRID, 83 (12425)</p> <p>Fixeu-vos que est\u00e0 tot en una columna, i per tant haureu de concatenar de la forma adequada. Fixeu-vos tamb\u00e9 que en en el nom nom\u00e9s les inicials estan en maj\u00fascules</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T06_SQL_I_PostgreSQL/exercicis0/","title":"Exercicis0","text":"<p>Bases de Dades</p> <ul> <li>Tema 6: SQL - Consulta b\u00e0sica (part I)</li> <li>Objectius i Coneixements previs</li> <li>1. Introducci\u00f3</li> <li>2. DDL i DML</li> <li>3. Client DBeaver: instal\u00b7laci\u00f3 i confiuraci\u00f3</li> <li>4. Client DBeaver: utilitzaci\u00f3</li> <li>5. Dades dels exemples i els exercicis</li> <li>6. Operadors</li> <li>7. Funcions </li> <li>7.1 Formats de les dates</li> <li>7.2 Formats dels n\u00fameros</li> <li>8. La consulta SELECT</li> <li>9. Consulta b\u00e0sica </li> <li>Exercicis</li> <li>10. \u00c0lies en les columnes </li> <li>Exercicis</li> <li>11. La cl\u00e0usula WHERE </li> <li>Exercicis</li> <li>12. Funcions d'agregat </li> <li>Exercicis</li> <li>13. La cl\u00e0usula GROUP BY </li> <li>Exercicis</li> <li>14. La cl\u00e0usula HAVING </li> <li>Exercicis</li> <li>15. La cl\u00e0usula ORDER BY </li> <li>Exercicis</li> <li>16. El predicat DISTINCT </li> <li>Exercicis</li> <li>17. La cl\u00e0usula LIMIT .. OFFSET </li> <li>Exercicis</li> <li>18. Consulta de creaci\u00f3 de taules </li> <li>Exercicis</li> <li>19. Ordre amb qu\u00e8 s'executa una sent\u00e8ncia SQL</li> <li>Exercicis de tot el tema, amb els resultats</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T06_SQL_I_PostgreSQL/exercicis0/#exercicis","title":"Exercicis","text":""},{"location":"BD-T06_SQL_I_PostgreSQL/exercicis0/#exercicis-apartat-10","title":"Exercicis apartat 10","text":"<p>6.5 Traure el num_f, data i cod_ven de les factures amb les seg\u00fcents cap\u00e7aleres respectivament: N\u00famero Factura, data i Codi Venedor (anomeneu-lo Ex_6_5)</p> <p>6.6 Donar \u00e0lias als camps que ho necessiten de la taula ARTICLE (anomeneu-lo Ex_6_6)</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T06_SQL_I_PostgreSQL/exercicis1/","title":"Exercicis1","text":"<p>Bases de Dades</p> <ul> <li>Tema 6: SQL - Consulta b\u00e0sica (part I)</li> <li>Objectius i Coneixements previs</li> <li>1. Introducci\u00f3</li> <li>2. DDL i DML</li> <li>3. Client DBeaver: instal\u00b7laci\u00f3 i confiuraci\u00f3</li> <li>4. Client DBeaver: utilitzaci\u00f3</li> <li>5. Dades dels exemples i els exercicis</li> <li>6. Operadors</li> <li>7. Funcions </li> <li>7.1 Formats de les dates</li> <li>7.2 Formats dels n\u00fameros</li> <li>8. La consulta SELECT</li> <li>9. Consulta b\u00e0sica </li> <li>Exercicis</li> <li>10. \u00c0lies en les columnes </li> <li>Exercicis</li> <li>11. La cl\u00e0usula WHERE </li> <li>Exercicis</li> <li>12. Funcions d'agregat </li> <li>Exercicis</li> <li>13. La cl\u00e0usula GROUP BY </li> <li>Exercicis</li> <li>14. La cl\u00e0usula HAVING </li> <li>Exercicis</li> <li>15. La cl\u00e0usula ORDER BY </li> <li>Exercicis</li> <li>16. El predicat DISTINCT </li> <li>Exercicis</li> <li>17. La cl\u00e0usula LIMIT .. OFFSET </li> <li>Exercicis</li> <li>18. Consulta de creaci\u00f3 de taules </li> <li>Exercicis</li> <li>19. Ordre amb qu\u00e8 s'executa una sent\u00e8ncia SQL</li> <li>Exercicis de tot el tema, amb els resultats</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T06_SQL_I_PostgreSQL/exercicis1/#exercicis","title":"Exercicis","text":""},{"location":"BD-T06_SQL_I_PostgreSQL/exercicis1/#exercicis-apartat-11","title":"Exercicis apartat 11","text":"<p>6.7 Traure els clients de la ciutat amb codi 12309.</p> <p>6.8 Traure totes les factures del mes de mar\u00e7 de 2015.</p> <p>6.9 Traure tots els articles de la categoria BjcOlimpia amb un stock entre 2 i 7 unitats.</p> <p>6.10 Traure tots els clients que no tenen introdu\u00eft el codi postal.</p> <p>6.11\u00a0Traure tots els articles amb el stock introdu\u00eft per\u00f2 que no tenen introdu\u00eft el stock m\u00ednim.</p> <p>6.12 Traure tots els clients, el primer cognom dels quals \u00e9s VILLALONGA.</p> <p>6.13.a Modificar l'anterior per a traure tots els que s\u00f3n VILLALONGA de primer o de segon cognom. 6.13.b Modificar l'anterior per a traure tots els que no s\u00f3n VILLALONGA ni de primer ni de segon cognom.</p> <p>6.14 Traure els articles \"Pulsador\" (la descripci\u00f3 cont\u00e9 aquesta paraula), el preu dels quals oscila entre 2 i 4 \u20ac i dels quals tenim un stock estrictament major que el stock m\u00ednim.</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T06_SQL_I_PostgreSQL/exercicis2/","title":"Exercicis2","text":"<p>Bases de Dades</p> <ul> <li>Tema 6: SQL - Consulta b\u00e0sica (part I)</li> <li>Objectius i Coneixements previs</li> <li>1. Introducci\u00f3</li> <li>2. DDL i DML</li> <li>3. Client DBeaver: instal\u00b7laci\u00f3 i confiuraci\u00f3</li> <li>4. Client DBeaver: utilitzaci\u00f3</li> <li>5. Dades dels exemples i els exercicis</li> <li>6. Operadors</li> <li>7. Funcions </li> <li>7.1 Formats de les dates</li> <li>7.2 Formats dels n\u00fameros</li> <li>8. La consulta SELECT</li> <li>9. Consulta b\u00e0sica </li> <li>Exercicis</li> <li>10. \u00c0lies en les columnes </li> <li>Exercicis</li> <li>11. La cl\u00e0usula WHERE </li> <li>Exercicis</li> <li>12. Funcions d'agregat </li> <li>Exercicis</li> <li>13. La cl\u00e0usula GROUP BY </li> <li>Exercicis</li> <li>14. La cl\u00e0usula HAVING </li> <li>Exercicis</li> <li>15. La cl\u00e0usula ORDER BY </li> <li>Exercicis</li> <li>16. El predicat DISTINCT </li> <li>Exercicis</li> <li>17. La cl\u00e0usula LIMIT .. OFFSET </li> <li>Exercicis</li> <li>18. Consulta de creaci\u00f3 de taules </li> <li>Exercicis</li> <li>19. Ordre amb qu\u00e8 s'executa una sent\u00e8ncia SQL</li> <li>Exercicis de tot el tema, amb els resultats</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T06_SQL_I_PostgreSQL/exercicis2/#exercicis","title":"Exercicis","text":""},{"location":"BD-T06_SQL_I_PostgreSQL/exercicis2/#exercicis-apartat-12","title":"Exercicis apartat 12","text":"<p>6.15 Comptar el nombre de clients que tenen el codi postal nul.</p> <p>6.16 Comptar el n\u00famero de vegades que l'article\u00a0L76104 entra en les l\u00ednies de factura, i el n\u00famero total d'unitats venudes d'aquest article. Nom\u00e9s us fa falta la taula LINIA_FAC.</p> <p>6.17 Traure la mitjana del stock dels articles.</p> <p>6.18 Modificar l'anterior per a tenir en compte els valors nuls, com si foren 0. Us vindr\u00e0 b\u00e9 la funci\u00f3 COALESCE que converteix els nuls del primer par\u00e0metre al valor donat com a segon par\u00e0metre (si \u00e9s diferent de nul, deixa igual el valor). Per tant l'heu d'utilitzar d'aquesta manera: COALESCE(stock,0)</p> <p>6.19 Comptar quantes factures t\u00e9 el client 375</p> <p>6.20 Calcular el descompte m\u00e0xim, el m\u00ednim i el descompte mitj\u00e0 de les factures.</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T06_SQL_I_PostgreSQL/exercicis3/","title":"Exercicis3","text":"<p>Bases de Dades</p> <ul> <li>Tema 6: SQL - Consulta b\u00e0sica (part I)</li> <li>Objectius i Coneixements previs</li> <li>1. Introducci\u00f3</li> <li>2. DDL i DML</li> <li>3. Client DBeaver: instal\u00b7laci\u00f3 i confiuraci\u00f3</li> <li>4. Client DBeaver: utilitzaci\u00f3</li> <li>5. Dades dels exemples i els exercicis</li> <li>6. Operadors</li> <li>7. Funcions </li> <li>7.1 Formats de les dates</li> <li>7.2 Formats dels n\u00fameros</li> <li>8. La consulta SELECT</li> <li>9. Consulta b\u00e0sica </li> <li>Exercicis</li> <li>10. \u00c0lies en les columnes </li> <li>Exercicis</li> <li>11. La cl\u00e0usula WHERE </li> <li>Exercicis</li> <li>12. Funcions d'agregat </li> <li>Exercicis</li> <li>13. La cl\u00e0usula GROUP BY </li> <li>Exercicis</li> <li>14. La cl\u00e0usula HAVING </li> <li>Exercicis</li> <li>15. La cl\u00e0usula ORDER BY </li> <li>Exercicis</li> <li>16. El predicat DISTINCT </li> <li>Exercicis</li> <li>17. La cl\u00e0usula LIMIT .. OFFSET </li> <li>Exercicis</li> <li>18. Consulta de creaci\u00f3 de taules </li> <li>Exercicis</li> <li>19. Ordre amb qu\u00e8 s'executa una sent\u00e8ncia SQL</li> <li>Exercicis de tot el tema, amb els resultats</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T06_SQL_I_PostgreSQL/exercicis3/#exercicis","title":"Exercicis","text":""},{"location":"BD-T06_SQL_I_PostgreSQL/exercicis3/#exercicis-apartat-13","title":"Exercicis apartat 13","text":"<p>6.21 Comptar el n\u00famero de pobles de cada prov\u00edncia (\u00e9s suficient traure el codi de la prov\u00edncia i el n\u00famero de pobles).</p> <p>6.22 Comptar el nombre de clients en cada poble i codi postal.</p> <p>6.23 Comptar el n\u00famero de factures de cada venedor a cada client.</p> <p>6.24 Comptar el n\u00famero de factures de cada trimestre. Per a poder traure el trimestre i agrupar per ell (ens val el n\u00famero de trimestre, que va del 1 al 4), podem utilitzar la funci\u00f3 TO_CHAR(data,'Q').</p> <p>6.25 Calcular quantes vegades s'ha venut un article, la suma d'unitats venudes, la quantitat m\u00e0xima i la quantitat m\u00ednima.</p> <p>6.26 Comptar el n\u00famero d'articles de cada categoria i el preu mitj\u00e0.</p> <p>6.27 Calcular el total de cada factura, sense aplicar descomptes ni IVA. Nom\u00e9s ens far\u00e0 falta la taula LINIES_FAC, i consistir\u00e0 en agrupar per cada num_f per a calcular la suma del preu multiplicat per la quantitat.</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T06_SQL_I_PostgreSQL/exercicis4/","title":"Exercicis4","text":"<p>Bases de Dades</p> <ul> <li>Tema 6: SQL - Consulta b\u00e0sica (part I)</li> <li>Objectius i Coneixements previs</li> <li>1. Introducci\u00f3</li> <li>2. DDL i DML</li> <li>3. Client DBeaver: instal\u00b7laci\u00f3 i confiuraci\u00f3</li> <li>4. Client DBeaver: utilitzaci\u00f3</li> <li>5. Dades dels exemples i els exercicis</li> <li>6. Operadors</li> <li>7. Funcions </li> <li>7.1 Formats de les dates</li> <li>7.2 Formats dels n\u00fameros</li> <li>8. La consulta SELECT</li> <li>9. Consulta b\u00e0sica </li> <li>Exercicis</li> <li>10. \u00c0lies en les columnes </li> <li>Exercicis</li> <li>11. La cl\u00e0usula WHERE </li> <li>Exercicis</li> <li>12. Funcions d'agregat </li> <li>Exercicis</li> <li>13. La cl\u00e0usula GROUP BY </li> <li>Exercicis</li> <li>14. La cl\u00e0usula HAVING </li> <li>Exercicis</li> <li>15. La cl\u00e0usula ORDER BY </li> <li>Exercicis</li> <li>16. El predicat DISTINCT </li> <li>Exercicis</li> <li>17. La cl\u00e0usula LIMIT .. OFFSET </li> <li>Exercicis</li> <li>18. Consulta de creaci\u00f3 de taules </li> <li>Exercicis</li> <li>19. Ordre amb qu\u00e8 s'executa una sent\u00e8ncia SQL</li> <li>Exercicis de tot el tema, amb els resultats</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T06_SQL_I_PostgreSQL/exercicis4/#exercicis","title":"Exercicis","text":""},{"location":"BD-T06_SQL_I_PostgreSQL/exercicis4/#exercicis-apartat-14","title":"Exercicis apartat 14","text":"<p>6.28 Calcular la mitjana de quantitats demanades d'aquells articles que s'han demanat m\u00e9s de dues vegades. Observeu que la taula que ens fa falta \u00e9s LINIA_FAC, i que la condici\u00f3 (en el HAVING) \u00e9s sobre el n\u00famero de vegades que entra l'article en una linia de factura, per\u00f2 el resultat que s'ha de mostrar \u00e9s la mitjana de la quantitat.</p> <p>6.29 Traure els pobles que tenen entre 3 i 7 clients. Traure nom\u00e9s el codi del poble i aquest n\u00famero</p> <p>6.30 Traure les categories que tenen m\u00e9s d'un article \"car\" (de m\u00e9s de 100 \u20ac). Observeu que tamb\u00e9 ens eixir\u00e0 la categoria NULL, \u00e9s a dir, apareixer\u00e0 com una categoria aquells articles que no estan catalogats.</p> <p>6.31 Traure els clients que tenen m\u00e9s d'una factura, amb el n\u00famero de factures.</p> <p>6.32 Modificar l'anterior per a traure els clients que tenen m\u00e9s d'una factura en el primer trimestre.</p> <p>6.33 Calcular el total de cada factura d'aquelles factures que tenen 10 o m\u00e9s l\u00ednies de factura, sense aplicar descomptes ni IVA (com la consulta 6.26), i tamb\u00e9 aplicant el descompte que consta en la l\u00ednia de factura (no el descompte de tota la factura). Tindrem el problema que el valor NULL \u00e9s especial, i en operar amb qualsevol altre valor donar\u00e0 NULL. En aquest cas clarament l'hem de considerar com un descompte 0. Podeu utilitzar una funci\u00f3 que substitueix els valors nuls trobats en el primer par\u00e0metre, pel segon par\u00e0metre d'aquesta manera:\u00a0COALESCE(dte,0)</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T06_SQL_I_PostgreSQL/exercicis5/","title":"Exercicis5","text":"<p>Bases de Dades</p> <ul> <li>Tema 6: SQL - Consulta b\u00e0sica (part I)</li> <li>Objectius i Coneixements previs</li> <li>1. Introducci\u00f3</li> <li>2. DDL i DML</li> <li>3. Client DBeaver: instal\u00b7laci\u00f3 i confiuraci\u00f3</li> <li>4. Client DBeaver: utilitzaci\u00f3</li> <li>5. Dades dels exemples i els exercicis</li> <li>6. Operadors</li> <li>7. Funcions </li> <li>7.1 Formats de les dates</li> <li>7.2 Formats dels n\u00fameros</li> <li>8. La consulta SELECT</li> <li>9. Consulta b\u00e0sica </li> <li>Exercicis</li> <li>10. \u00c0lies en les columnes </li> <li>Exercicis</li> <li>11. La cl\u00e0usula WHERE </li> <li>Exercicis</li> <li>12. Funcions d'agregat </li> <li>Exercicis</li> <li>13. La cl\u00e0usula GROUP BY </li> <li>Exercicis</li> <li>14. La cl\u00e0usula HAVING </li> <li>Exercicis</li> <li>15. La cl\u00e0usula ORDER BY </li> <li>Exercicis</li> <li>16. El predicat DISTINCT </li> <li>Exercicis</li> <li>17. La cl\u00e0usula LIMIT .. OFFSET </li> <li>Exercicis</li> <li>18. Consulta de creaci\u00f3 de taules </li> <li>Exercicis</li> <li>19. Ordre amb qu\u00e8 s'executa una sent\u00e8ncia SQL</li> <li>Exercicis de tot el tema, amb els resultats</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T06_SQL_I_PostgreSQL/exercicis5/#exercicis","title":"Exercicis","text":""},{"location":"BD-T06_SQL_I_PostgreSQL/exercicis5/#exercicis-apartat-15","title":"Exercicis apartat 15","text":"<p>6.34 Traure tots els clients ordenats per codi de poblaci\u00f3, i dins d'aquestos per codi postal.</p> <p>6.35 Traure tots els articles ordenats per la categoria, dins d'aquest pel stock, i dins d'aquest per preu (de forma descendent)</p> <p>6.36 Traure els resultats de la consulta 6.33 ordenats pel total de la factura quan ja s'ha aplicat el descompte, de forma descendent.</p> <p>6.37 Traure tots els articles ordenats per la difer\u00e8ncia entre el stock i el stock m\u00ednim de forma descendent. Com que en moltes ocasions el stock o el stock m\u00ednim \u00e9s nul, hem de considerar en aquestos casos com 0. Per tant hem de tornar a utilitzar la funci\u00f3 COALESCE(stock,0) (i tamb\u00e9 per al stock m\u00ednim).</p> <p>6.38 Traure els codis de venedor amb el n\u00famero de factures venudes en el segon semestre de 2015, ordenades per aquest n\u00famero de forma descendent</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T06_SQL_I_PostgreSQL/exercicis6/","title":"Exercicis6","text":"<p>Bases de Dades</p> <ul> <li>Tema 6: SQL - Consulta b\u00e0sica (part I)</li> <li>Objectius i Coneixements previs</li> <li>1. Introducci\u00f3</li> <li>2. DDL i DML</li> <li>3. Client DBeaver: instal\u00b7laci\u00f3 i confiuraci\u00f3</li> <li>4. Client DBeaver: utilitzaci\u00f3</li> <li>5. Dades dels exemples i els exercicis</li> <li>6. Operadors</li> <li>7. Funcions </li> <li>7.1 Formats de les dates</li> <li>7.2 Formats dels n\u00fameros</li> <li>8. La consulta SELECT</li> <li>9. Consulta b\u00e0sica </li> <li>Exercicis</li> <li>10. \u00c0lies en les columnes </li> <li>Exercicis</li> <li>11. La cl\u00e0usula WHERE </li> <li>Exercicis</li> <li>12. Funcions d'agregat </li> <li>Exercicis</li> <li>13. La cl\u00e0usula GROUP BY </li> <li>Exercicis</li> <li>14. La cl\u00e0usula HAVING </li> <li>Exercicis</li> <li>15. La cl\u00e0usula ORDER BY </li> <li>Exercicis</li> <li>16. El predicat DISTINCT </li> <li>Exercicis</li> <li>17. La cl\u00e0usula LIMIT .. OFFSET </li> <li>Exercicis</li> <li>18. Consulta de creaci\u00f3 de taules </li> <li>Exercicis</li> <li>19. Ordre amb qu\u00e8 s'executa una sent\u00e8ncia SQL</li> <li>Exercicis de tot el tema, amb els resultats</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T06_SQL_I_PostgreSQL/exercicis6/#exercicis","title":"Exercicis","text":""},{"location":"BD-T06_SQL_I_PostgreSQL/exercicis6/#exercicis-apartat-16","title":"Exercicis apartat 16","text":"<p>6.39 Traure els venedors que han venut alguna cosa el mes de gener de 2015.</p> <p>6.40 Traure els diferents tipus d'IVA que s'han aplicat a les factures de cada venedor, tamb\u00e9 durant el mes de gener de 2015</p> <p>6.41 Traure els diferents caps de venedors (eviteu que aparega el valor nul)</p> <p>6.42 Traure els diferents descomptes que s'han aplicat als articles, el codi dels quals comen\u00e7a per SAT. Traure tant el codi d'article com el descompte.</p> <p>6.43 Comptar en quantes poblacions tenim clients</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T06_SQL_I_PostgreSQL/exercicis7/","title":"Exercicis7","text":"<p>Bases de Dades</p> <ul> <li>Tema 6: SQL - Consulta b\u00e0sica (part I)</li> <li>Objectius i Coneixements previs</li> <li>1. Introducci\u00f3</li> <li>2. DDL i DML</li> <li>3. Client DBeaver: instal\u00b7laci\u00f3 i confiuraci\u00f3</li> <li>4. Client DBeaver: utilitzaci\u00f3</li> <li>5. Dades dels exemples i els exercicis</li> <li>6. Operadors</li> <li>7. Funcions </li> <li>7.1 Formats de les dates</li> <li>7.2 Formats dels n\u00fameros</li> <li>8. La consulta SELECT</li> <li>9. Consulta b\u00e0sica </li> <li>Exercicis</li> <li>10. \u00c0lies en les columnes </li> <li>Exercicis</li> <li>11. La cl\u00e0usula WHERE </li> <li>Exercicis</li> <li>12. Funcions d'agregat </li> <li>Exercicis</li> <li>13. La cl\u00e0usula GROUP BY </li> <li>Exercicis</li> <li>14. La cl\u00e0usula HAVING </li> <li>Exercicis</li> <li>15. La cl\u00e0usula ORDER BY </li> <li>Exercicis</li> <li>16. El predicat DISTINCT </li> <li>Exercicis</li> <li>17. La cl\u00e0usula LIMIT .. OFFSET </li> <li>Exercicis</li> <li>18. Consulta de creaci\u00f3 de taules </li> <li>Exercicis</li> <li>19. Ordre amb qu\u00e8 s'executa una sent\u00e8ncia SQL</li> <li>Exercicis de tot el tema, amb els resultats</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T06_SQL_I_PostgreSQL/exercicis7/#exercicis","title":"Exercicis","text":""},{"location":"BD-T06_SQL_I_PostgreSQL/exercicis7/#exercicis-apartat-17","title":"Exercicis apartat 17","text":"<p>6.44 Traure tota la informaci\u00f3 dels dos articles m\u00e9s cars.</p> <p>6.45 Traure el codi de les tres ciutats amb m\u00e9s clients</p> <p>6.46 Traure el venedor que ha venut menys factures</p> <p>6.47 Traure les tres factures m\u00e9s cares (sense comptar els descomptes)</p> <p>6.48 Modificar l'anterior per a traure totes les factures, excepte les 3 m\u00e9s cares.</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T06_SQL_I_PostgreSQL/exercicis8/","title":"Exercicis8","text":"<p>Bases de Dades</p> <ul> <li>Tema 6: SQL - Consulta b\u00e0sica (part I)</li> <li>Objectius i Coneixements previs</li> <li>1. Introducci\u00f3</li> <li>2. DDL i DML</li> <li>3. Client DBeaver: instal\u00b7laci\u00f3 i confiuraci\u00f3</li> <li>4. Client DBeaver: utilitzaci\u00f3</li> <li>5. Dades dels exemples i els exercicis</li> <li>6. Operadors</li> <li>7. Funcions </li> <li>7.1 Formats de les dates</li> <li>7.2 Formats dels n\u00fameros</li> <li>8. La consulta SELECT</li> <li>9. Consulta b\u00e0sica </li> <li>Exercicis</li> <li>10. \u00c0lies en les columnes </li> <li>Exercicis</li> <li>11. La cl\u00e0usula WHERE </li> <li>Exercicis</li> <li>12. Funcions d'agregat </li> <li>Exercicis</li> <li>13. La cl\u00e0usula GROUP BY </li> <li>Exercicis</li> <li>14. La cl\u00e0usula HAVING </li> <li>Exercicis</li> <li>15. La cl\u00e0usula ORDER BY </li> <li>Exercicis</li> <li>16. El predicat DISTINCT </li> <li>Exercicis</li> <li>17. La cl\u00e0usula LIMIT .. OFFSET </li> <li>Exercicis</li> <li>18. Consulta de creaci\u00f3 de taules </li> <li>Exercicis</li> <li>19. Ordre amb qu\u00e8 s'executa una sent\u00e8ncia SQL</li> <li>Exercicis de tot el tema, amb els resultats</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T06_SQL_I_PostgreSQL/exercicis8/#exercicis","title":"Exercicis","text":""},{"location":"BD-T06_SQL_I_PostgreSQL/exercicis8/#exercicis-apartat-18","title":"Exercicis apartat 18","text":"<p>6.49 Crear una taula anomenada ARTICLE_999x, on 999 han de ser les 3 \u00faltimes xifres del DNI, i x la lletra del teu NIF, que siga una c\u00f2pia de la taula ARTICLE, per\u00f2 substituint els valors nuls de stock i stock_min per zeros.</p> <p>6.50 Utilitzar la taula anterior per a traure el stock m\u00e0xim, el m\u00ednim i la mitjana de stocks. Observeu que si utilitz\u00e0rem la taula ARTICLE, els resultats no serien els mateixos (excepte el m\u00e0xim), sobretot la mitjana, ja que els valors nuls no entrarien en els c\u00e0lculs d'aquesta mitjana.</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T06_SQL_I_PostgreSQL/exercicis_de_tot_el_tema_amb_els_resultats/","title":"Exercicis de tot el tema amb els resultats","text":"<p>Bases de Dades</p> <ul> <li>Tema 6: SQL - Consulta b\u00e0sica (part I)</li> <li>Objectius i Coneixements previs</li> <li>1. Introducci\u00f3</li> <li>2. DDL i DML</li> <li>3. Client DBeaver: instal\u00b7laci\u00f3 i confiuraci\u00f3</li> <li>4. Client DBeaver: utilitzaci\u00f3</li> <li>5. Dades dels exemples i els exercicis</li> <li>6. Operadors</li> <li>7. Funcions </li> <li>7.1 Formats de les dates</li> <li>7.2 Formats dels n\u00fameros</li> <li>8. La consulta SELECT</li> <li>9. Consulta b\u00e0sica </li> <li>Exercicis</li> <li>10. \u00c0lies en les columnes </li> <li>Exercicis</li> <li>11. La cl\u00e0usula WHERE </li> <li>Exercicis</li> <li>12. Funcions d'agregat </li> <li>Exercicis</li> <li>13. La cl\u00e0usula GROUP BY </li> <li>Exercicis</li> <li>14. La cl\u00e0usula HAVING </li> <li>Exercicis</li> <li>15. La cl\u00e0usula ORDER BY </li> <li>Exercicis</li> <li>16. El predicat DISTINCT </li> <li>Exercicis</li> <li>17. La cl\u00e0usula LIMIT .. OFFSET </li> <li>Exercicis</li> <li>18. Consulta de creaci\u00f3 de taules </li> <li>Exercicis</li> <li>19. Ordre amb qu\u00e8 s'executa una sent\u00e8ncia SQL</li> <li>Exercicis de tot el tema, amb els resultats</li> </ul> <p>\u00ab Anterior</p>"},{"location":"BD-T06_SQL_I_PostgreSQL/exercicis_de_tot_el_tema_amb_els_resultats/#exercicis-de-tot-el-tema-amb-els-resultats","title":"Exercicis de tot el tema, amb els resultats","text":"<p>En la BD factura, connectant com a usuari factura:</p> <p>6.1 Traure tota la informaci\u00f3 dels pobles (anomeneu-la Ex_6_1.sql).</p> <p></p> <p>Un total de 1663 files</p> <p>6.2 Traure el codi postal, el nom i l'adre\u00e7a, per aquest ordre, de tots els venedors (anomeneu-la Ex_6_2.sql).</p> <p></p> <p>6.3 Traure el codi d'article, la descripci\u00f3, preu i preu incrementat en un 5%, de tots els articles.</p> <p></p> <p>Un total de 812 files</p> <p>6.4 Traure la informaci\u00f3 dels clients amb el seg\u00fcent format (ha d'anar tot en una columna):</p> <p>Damborenea Corbato, Alicia. CALLE MADRID, 83 (12425)</p> <p>Fixeu-vos que est\u00e0 tot en una columna, i per tant haureu de concatenar de la forma adequada. Fixeu-vos tamb\u00e9 que en en el nom nom\u00e9s les inicials estan en maj\u00fascules</p> <p></p> <p>Un total de 49 files</p> <p>6.5 Traure el num_f, data i cod_ven de les factures amb les seg\u00fcents cap\u00e7aleres respectivament: N\u00famero Factura, data i Codi Venedor (anomeneu-lo Ex_6_5)</p> <p></p> <p>Un total de 105 files</p> <p>6.6 Donar \u00e0lias als camps que ho necessiten de la taula ARTICLE (anomeneu-lo Ex_6_6)</p> <p></p> <p>Un total de 812 files</p> <p>6.7 Traure els clients de la ciutat amb codi 12309.</p> <p></p> <p>6.8 Traure totes les factures del mes de mar\u00e7 de 2015.</p> <p></p> <p>6.9 Traure tots els articles de la categoria BjcOlimpia amb un stock entre 2 i 7 unitats.</p> <p></p> <p>6.10 Traure tots els clients que no tenen introdu\u00eft el codi postal.</p> <p></p> <p>6.11\u00a0Traure tots els articles amb el stock introdu\u00eft per\u00f2 que no tenen introdu\u00eft el stock m\u00ednim.</p> <p></p> <p>6.12 Traure tots els clients, el primer cognom dels quals \u00e9s VILLALONGA.</p> <p></p> <p>6.13.a Modificar l'anterior per a traure tots els que s\u00f3n VILLALONGA de primer o de segon cognom.</p> <p></p> <p>6.13.b Modificar l'anterior per a traure tots els que no s\u00f3n VILLALONGA ni de primer ni de segon cognom.</p> <p></p> <p>Un total de 46 files</p> <p>6.14 Traure els articles \"Pulsador\" (la descripci\u00f3 cont\u00e9 aquesta paraula), el preu dels quals oscila entre 2 i 4 \u20ac i dels quals tenim un stock estrictament major que el stock m\u00ednim.</p> <p></p> <p>6.15 Comptar el nombre de clients que tenen el codi postal nul.</p> <p></p> <p>6.16 Comptar el n\u00famero de vegades que l'article\u00a0L76104 entra en les l\u00ednies de factura, i el n\u00famero total d'unitats venudes d'aquest article. Nom\u00e9s us fa falta la taula LINIA_FAC.</p> <p></p> <p>6.17 Traure la mitjana del stock dels articles.</p> <p></p> <p>6.18 Modificar l'anterior per a tenir en compte els valors nuls, com si foren 0. Us vindr\u00e0 b\u00e9 la funci\u00f3 COALESCE que converteix els nuls del primer par\u00e0metre al valor donat com a segon par\u00e0metre (si \u00e9s diferent de nul, deixa igual el valor). Per tant l'heu d'utilitzar d'aquesta manera: COALESCE(stock,0)</p> <p></p> <p>6.19 Comptar quantes factures t\u00e9 el client 375</p> <p></p> <p>6.20 Calcular el descompte m\u00e0xim, el m\u00ednim i el descompte mitj\u00e0 de les factures.</p> <p></p> <p>6.21 Comptar el n\u00famero de pobles de cada prov\u00edncia (\u00e9s suficient traure el codi de la prov\u00edncia i el n\u00famero de pobles).</p> <p></p> <p>6.22 Comptar el nombre de clients en cada poble i codi postal.</p> <p></p> <p>Un total de 45 files</p> <p>6.23 Comptar el n\u00famero de factures de cada venedor a cada client.</p> <p></p> <p>Un total de 96 files</p> <p>D'aquestes 96 files, relativament poque tenen un valor diferent de 1 en el n\u00famero de factures: la fila 29 (455, 30, 2) o la fila 34 (5, 342, 3)</p> <p>6.24 Comptar el n\u00famero de factures de cada trimestre. Per a poder traure el trimestre i agrupar per ell (ens val el n\u00famero de trimestre, que va del 1 al 4), podem utilitzar la funci\u00f3 TO_CHAR(data,'Q').</p> <p></p> <p>No apareix ordenat, i vol dir que en el trimestre 2 hi ha 25 factures, en el trimestre 4 hi ha 25, en el trimestre 3 hi ha 33 i en el trimestre 1 hi ha 22</p> <p>6.25 Calcular quantes vegades s'ha venut un article, la suma d'unitats venudes, la quantitat m\u00e0xima i la quantitat m\u00ednima.</p> <p></p> <p>Un total de 399 files</p> <p>6.26 Comptar el n\u00famero d'articles de cada categoria i el preu mitj\u00e0.</p> <p></p> <p>6.27 Calcular el total de cada factura, sense aplicar descomptes ni IVA. Nom\u00e9s ens far\u00e0 falta la taula LINIES_FAC, i consistir\u00e0 en agrupar per cada num_f per a calcular la suma del preu multiplicat per la quantitat.</p> <p></p> <p>Un total de 105 files</p> <p>6.28 Calcular la mitjana de quantitats demanades d'aquells articles que s'han demanat m\u00e9s de dues vegades. Observeu que la taula que ens fa falta \u00e9s LINIA_FAC, i que la condici\u00f3 (en el HAVING) \u00e9s sobre el n\u00famero de vegades que entra l'article en una linia de factura, per\u00f2 el resultat que s'ha de mostrar \u00e9s la mitjana de la quantitat.</p> <p></p> <p>6.29 Traure els pobles que tenen entre 3 i 7 clients. Traure nom\u00e9s el codi del poble i aquest n\u00famero</p> <p></p> <p>6.30 Traure les categories que tenen m\u00e9s d'un article \"car\" (de m\u00e9s de 100 \u20ac). Observeu que tamb\u00e9 ens eixir\u00e0 la categoria NULL, \u00e9s a dir, apareixer\u00e0 com una categoria aquells articles que no estan catalogats.</p> <p></p> <p>6.31 Traure els clients que tenen m\u00e9s d'una factura, amb el n\u00famero de factures.</p> <p></p> <p>Un total de 33 files</p> <p>6.32 Modificar l'anterior per a traure els clients que tenen m\u00e9s d'una factura en el primer trimestre.</p> <p></p> <p>6.33 Calcular el total de cada factura d'aquelles factures que tenen 10 o m\u00e9s l\u00ednies de factura, sense aplicar descomptes ni IVA (com la consulta 6.26), i tamb\u00e9 aplicant el descompte que consta en la l\u00ednia de factura (no el descompte de tota la factura). Tindrem el problema que el valor NULL \u00e9s especial, i en operar amb qualsevol altre valor donar\u00e0 NULL. En aquest cas clarament l'hem de considerar com un descompte 0. Podeu utilitzar una funci\u00f3 que substitueix els valors nuls trobats en el primer par\u00e0metre, pel segon par\u00e0metre d'aquesta manera:\u00a0COALESCE(dte,0)</p> <p></p> <p>6.34 Traure tots els clients ordenats per codi de poblaci\u00f3, i dins d'aquestos per codi postal.</p> <p></p> <p>Un total de 49 files</p> <p>6.35 Traure tots els articles ordenats per la categoria, dins d'aquest pel stock, i dins d'aquest per preu (de forma descendent)</p> <p></p> <p>Un total de 812 files</p> <p>6.36 Traure els resultats de la consulta 6.33 ordenats pel total de la factura quan ja s'ha aplicat el descompte, de forma descendent.</p> <p></p> <p>6.37 Traure tots els articles ordenats per la difer\u00e8ncia entre el stock i el stock m\u00ednim de forma descendent. Com que en moltes ocasions el stock o el stock m\u00ednim \u00e9s nul, hem de considerar en aquestos casos com 0. Per tant hem de tornar a utilitzar la funci\u00f3 COALESCE(stock,0) (i tamb\u00e9 per al stock m\u00ednim).</p> <p></p> <p>Un total de 812 files</p> <p>6.38 Traure els codis de venedor amb el n\u00famero de factures venudes en el segon semestre de 2015, ordenades per aquest n\u00famero de forma descendent</p> <p></p> <p>6.39 Traure els venedors que han venut alguna cosa el mes de gener de 2015.</p> <p></p> <p>6.40 Traure els diferents tipus d'IVA que s'han aplicat a les factures de cada venedor, tamb\u00e9 durant el mes de gener de 2015</p> <p></p> <p>6.41 Traure els diferents caps de venedors (eviteu que aparega el valor nul)</p> <p></p> <p>6.42 Traure els diferents descomptes que s'han aplicat als articles, el codi dels quals comen\u00e7a per SAT. Traure tant el codi d'article com el descompte.</p> <p></p> <p>6.43 Comptar en quantes poblacions tenim clients</p> <p></p> <p>6.44 Traure tota la informaci\u00f3 dels dos articles m\u00e9s cars.</p> <p></p> <p>6.45 Traure el codi de les tres ciutats amb m\u00e9s clients</p> <p></p> <p>6.46 Traure el venedor que ha venut menys factures</p> <p></p> <p>6.47 Traure les tres factures m\u00e9s cares (sense comptar els descomptes)</p> <p></p> <p>6.48 Modificar l'anterior per a traure totes les factures, excepte les 3 m\u00e9s cares.</p> <p></p> <p>Un total de 102 files</p> <p>6.49 Crear una taula anomenada ARTICLE_999x, on 999 han de ser les 3 \u00faltimes xifres del DNI, i x la lletra del teu NIF, que siga una c\u00f2pia de la taula ARTICLE, per\u00f2 substituint els valors nuls de stock i stock_min per zeros.</p> <p>El resultat ha de ser la creaci\u00f3 de la taula. Si consulteu el seu contingut ha de ser el seg\u00fcent:</p> <p></p> <p>Untotal de 812 files</p> <p>6.50 Utilitzar la taula anterior per a traure el stock m\u00e0xim, el m\u00ednim i la mitjana de stocks. Observeu que si utilitz\u00e0rem la taula ARTICLE, els resultats no serien els mateixos (excepte el m\u00e0xim), sobretot la mitjana, ja que els valors nuls no entrarien en els c\u00e0lculs d'aquesta mitjana.</p> <p></p> <p>\u00ab Anterior</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T06_SQL_I_PostgreSQL/objectius_i_coneixements_previs/","title":"Objectius i coneixements previs","text":"<p>Bases de Dades</p> <ul> <li>Tema 6: SQL - Consulta b\u00e0sica (part I)</li> <li>Objectius i Coneixements previs</li> <li>1. Introducci\u00f3</li> <li>2. DDL i DML</li> <li>3. Client DBeaver: instal\u00b7laci\u00f3 i confiuraci\u00f3</li> <li>4. Client DBeaver: utilitzaci\u00f3</li> <li>5. Dades dels exemples i els exercicis</li> <li>6. Operadors</li> <li>7. Funcions </li> <li>7.1 Formats de les dates</li> <li>7.2 Formats dels n\u00fameros</li> <li>8. La consulta SELECT</li> <li>9. Consulta b\u00e0sica </li> <li>Exercicis</li> <li>10. \u00c0lies en les columnes </li> <li>Exercicis</li> <li>11. La cl\u00e0usula WHERE </li> <li>Exercicis</li> <li>12. Funcions d'agregat </li> <li>Exercicis</li> <li>13. La cl\u00e0usula GROUP BY </li> <li>Exercicis</li> <li>14. La cl\u00e0usula HAVING </li> <li>Exercicis</li> <li>15. La cl\u00e0usula ORDER BY </li> <li>Exercicis</li> <li>16. El predicat DISTINCT </li> <li>Exercicis</li> <li>17. La cl\u00e0usula LIMIT .. OFFSET </li> <li>Exercicis</li> <li>18. Consulta de creaci\u00f3 de taules </li> <li>Exercicis</li> <li>19. Ordre amb qu\u00e8 s'executa una sent\u00e8ncia SQL</li> <li>Exercicis de tot el tema, amb els resultats</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T06_SQL_I_PostgreSQL/objectius_i_coneixements_previs/#objectius-i-coneixements-previs","title":"Objectius i Coneixements previs","text":""},{"location":"BD-T06_SQL_I_PostgreSQL/objectius_i_coneixements_previs/#objectius","title":"Objectius","text":"<p>L'objectiu primordial \u00e9s dominar el llenguatge SQL, per a poder fer sent\u00e8ncies de dificultat mitjana-alta. En particular s'hauran de saber fer:</p> <ul> <li>Consultes DDL per a crear, modificar i esborrar taules i vistes.</li> <li>Consultes DML per a inserir, modificar o esborrar files d'una taula.</li> <li>Consultes SELECT, per a traure informaci\u00f3 de les taules. Concretament s'haur\u00e0 de con\u00e9ixer a la perfecci\u00f3 totes les seues cl\u00e0usules.</li> <li>Consultes SELECT amb combinacions o reunions de taules, incloent les combinacions externes (LEFT JOIN).</li> <li>Consultes d'uni\u00f3</li> <li>Subconsultes</li> </ul> <p>Un altre objectiu \u00e9s el de con\u00e8ixer l'arquitectura client-servidor, i per a aconseguir a\u00e7\u00f2 treballarem en PostgreSQL. Mentre que en Access cadasc\u00fa tenia la seua pr\u00f2pia Base de Dades, ara en PostgreSQL la Base de Dades est\u00e0 en un \u00fanic lloc remot, en el servidor. I tots ens connectem com a usuaris al servidor (com a clients). Per ser m\u00e9s conscients, ens connectarem com el mateix usuari a la mateixa Base de Dades, compartint per tant les dades, excepte quan ens toque crear objectes, que cadasc\u00fa es connectar\u00e0 com un usuari diferent a una Base de Dades diferent, per a no interferir els uns amb els altres.</p> <p>Per l'extensi\u00f3 del tema, el dividirem en 3 parts.</p> <ul> <li>Per motius did\u00e0ctics comen\u00e7arem per la sent\u00e8ncia SELECT, en la seua forma m\u00e9s senzilla.</li> <li>Continuarem amb les consultes m\u00e9s complicades del SELECT.</li> <li>Per \u00faltim veurem les sent\u00e8ncies DDL i les de manipulaci\u00f3 de dades.</li> </ul> <p></p>"},{"location":"BD-T06_SQL_I_PostgreSQL/objectius_i_coneixements_previs/#coneixements-previs","title":"Coneixements previs","text":"<p>Els coneixements previs estrictes del tema \u00e9s el Model Relacional, encara que no el podrem deslligar de tot l'entorn que ens estem construint a l'hora de dissenyar una Base de Dades, i aix\u00ed el tema del Model Entitat-Relaci\u00f3 tamb\u00e9 ens vindr\u00e0 molt b\u00e9. I\u00a0 per a poder practicar ens fa falta un SGBD. S'ha optat per un SGBD nou no vist encara, PostgreSQL, pel comentat en el punt anterior. Com \u00e9s la primera vegada que es veu, no hi ha coneixements previs de cap entorn d'aquest SGBD.</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T07_PLpgSQL/","title":"Index","text":"<p>Bases de Dades</p> <ul> <li>Tema 7: Programaci\u00f3 en PostgreSQL</li> <li>Objectius i Coneixements previs</li> <li>0. Nota inicial</li> <li>1. Introducci\u00f3</li> <li>2. PL/pgSQL</li> <li>3. Declaraci\u00f3 de variables</li> <li>4. Instruccions</li> <li>5. Funcions </li> <li>Exercicis</li> <li>6. Utilitzaci\u00f3 de cursors </li> <li>Exercicis</li> <li>7. Missatges i excepcions</li> <li>8. Triggers </li> <li>Exercicis</li> <li>9. Creaci\u00f3 d'altres objectes basats en funcions </li> <li>9.1 Operadors <ul> <li>Exercicis</li> </ul> </li> <li>9.2 Operadors de classe</li> <li>9.3 Funcions d'agregat <ul> <li>Exercicis</li> </ul> </li> <li>Exercicis de tot el tema</li> </ul> <p>Seg\u00fcent \u00bb</p>"},{"location":"BD-T07_PLpgSQL/#tema-7-programacio-en-postgresql","title":"Tema 7: Programaci\u00f3 en PostgreSQL","text":"<p>Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T07_PLpgSQL/0_nota_inicial/","title":"0 nota inicial","text":"<p>Bases de Dades</p> <ul> <li>Tema 7: Programaci\u00f3 en PostgreSQL</li> <li>Objectius i Coneixements previs</li> <li>0. Nota inicial</li> <li>1. Introducci\u00f3</li> <li>2. PL/pgSQL</li> <li>3. Declaraci\u00f3 de variables</li> <li>4. Instruccions</li> <li>5. Funcions </li> <li>Exercicis</li> <li>6. Utilitzaci\u00f3 de cursors </li> <li>Exercicis</li> <li>7. Missatges i excepcions</li> <li>8. Triggers </li> <li>Exercicis</li> <li>9. Creaci\u00f3 d'altres objectes basats en funcions </li> <li>9.1 Operadors <ul> <li>Exercicis</li> </ul> </li> <li>9.2 Operadors de classe</li> <li>9.3 Funcions d'agregat <ul> <li>Exercicis</li> </ul> </li> <li>Exercicis de tot el tema</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T07_PLpgSQL/0_nota_inicial/#0-nota-inicial","title":"0. Nota inicial","text":"<p>En aquest tema tamb\u00e9 construirem molts objectes, per tant podem \"boicotejar-nos\" entre nosaltres si utilitzem tots el mateix usuari.</p> <p>\u00c9s per aix\u00f2 que en aquest tema tots els exemples i tots els exercicis els farem sobre un usuari (i contrasenya) i una Base de Dades anomenada geo_grup_9999x, on heu de substituir\u00a0grup pel codi del vostre grup, 9999 per les 4 \u00faltimes xifres del vostre DNI, i la x per la lletra del vostre NIF. La connexi\u00f3 ser\u00e0 per tant:</p> <p>Servidor: 89.36.214.106</p> <p>Usuari:\u00a0geo_grup_9999x (on\u00a0grup \u00e9s el codi del vostre grup, 9999 s\u00f3n les 4 \u00faltimes xifres del vostre DNI, i x la vostra lletra del NIF)</p> <p>Contrasenya:\u00a0geo_grup_9999x (el mateix d'abans)</p> <p>Base de Dades:\u00a0geo_grup_9999x (el mateix d'abans)</p> <p>En la Base de Dades\u00a0geo_grup_9999x ja teniu les taules de prova que estem utilitzant: COMARQUES, POBLACIONS i INSTITUTS.</p> <p>Per a poder desenvolupar correctament el tema, us faran falta alguns altres objectes creats en el tema anterior, per\u00f2 observeu com ara no interferireu entre vosaltres.</p> <p>Ac\u00ed teniu les sent\u00e8ncies de creaci\u00f3 dels objectes que us faran falta:</p> <ul> <li>Creaci\u00f3 de la taula PROVINCIES :</li> </ul> <p>CREATE TABLE PROVINCIES AS SELECT provincia, SUM(poblacio) AS habitants, SUM(Q) AS instituts FROM (COMARQUES INNER JOIN POBLACIONS ON COMARQUES.nom_c=POBLACIONS.nom_c) LEFT JOIN (SELECT cod_m, count(*) AS Q FROM INSTITUTS GROUP BY cod_m) I ON POBLACIONS.cod_m=I.cod_m GROUP BY provincia;</p> <ul> <li>Creaci\u00f3 dels dominis hemi_lat, graus_lat, i min_seg :</li> </ul> <p>CREATE DOMAIN hemi_lat AS char(1) CHECK (VALUE IN ('N','S'));</p> <p>CREATE DOMAIN graus_lat AS numeric(2) CHECK (VALUE BETWEEN 0 AND 90);</p> <p>CREATE DOMAIN min_seg AS numeric(2) CHECK (VALUE BETWEEN 0 AND 59);</p> <ul> <li>Creaci\u00f3 del tipus lat :</li> </ul> <p>CREATE TYPE lat AS ( h hemi_lat, g graus_lat, m min_seg, s min_seg );</p> <ul> <li>Creaci\u00f3 de la taula POBLACIONS3 :</li> </ul> <p>CREATE TABLE POBLACIONS3 ( nom VARCHAR(50) CONSTRAINT cp_pob3 PRIMARY KEY, latitud lat, comarca varchar(50) );</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T07_PLpgSQL/1_introducci/","title":"1 introducci","text":"<p>Bases de Dades</p> <ul> <li>Tema 7: Programaci\u00f3 en PostgreSQL</li> <li>Objectius i Coneixements previs</li> <li>0. Nota inicial</li> <li>1. Introducci\u00f3</li> <li>2. PL/pgSQL</li> <li>3. Declaraci\u00f3 de variables</li> <li>4. Instruccions</li> <li>5. Funcions </li> <li>Exercicis</li> <li>6. Utilitzaci\u00f3 de cursors </li> <li>Exercicis</li> <li>7. Missatges i excepcions</li> <li>8. Triggers </li> <li>Exercicis</li> <li>9. Creaci\u00f3 d'altres objectes basats en funcions </li> <li>9.1 Operadors <ul> <li>Exercicis</li> </ul> </li> <li>9.2 Operadors de classe</li> <li>9.3 Funcions d'agregat <ul> <li>Exercicis</li> </ul> </li> <li>Exercicis de tot el tema</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T07_PLpgSQL/1_introducci/#1-introduccio","title":"1. Introducci\u00f3","text":"<p>Una vegada vist amb suficient profunditat el SQL, anem a enfocar l'atac a una base de dades des d'un altre punt de vista. No com un comando que l'executem i ens d\u00f3na la resposta, sin\u00f3 des d'un llenguatge procedimental, amb les estructures de control pr\u00f2pies d'aquestos (condicionals, bucles, funcions, ...), per\u00f2 accedint \u00f2bviament a les dades. Ara, quan fem una consulta obtindrem un conjunt de dades al qual anomenarem cursor, i que segurament l'haurem de rec\u00f3rrer des del principi fins al final per a fer el tractament que siga.</p> <p>La part b\u00e0sica de tot a\u00e7\u00f2 ser\u00e0 la construcci\u00f3 de funcions. Aquestes es poden construir utilitzant molts llenguatges, comen\u00e7ant per SQL, on agruparem en una funci\u00f3 unes quantes sent\u00e8ncies SQL o una sent\u00e8ncia complicada. Anem a veure algun exemple, sobre l'usuari geo_grup_9999x, b\u00e9 des de psql o b\u00e9 des d'una finestra de SQL de DBeaver, que el que fa \u00e9s sumar la poblaci\u00f3 dels pobles de la comarca passada com a par\u00e0metre. Hem utilitzat l'opci\u00f3 CREATE OR REPLACE, aix\u00ed en cas que estiga ja creada, dons la substituirem.</p> <p>CREATE OR REPLACE FUNCTION gent_com(text) RETURNS numeric AS '</p> <p>SELECT SUM(poblacio)</p> <p>FROM POBLACIONS</p> <p>WHERE nom_c=$1;</p> <p>' LANGUAGE SQL;</p> <p>I ara, aix\u00ed ens dir\u00e0 quina \u00e9s la poblaci\u00f3 de Baix Maestrat:</p> <p>SELECT gent_com('Baix Maestrat');</p> <p>O una altra tamb\u00e9 interessant, on traurem totes les comarques amb la seua poblaci\u00f3, utilitzant la funci\u00f3 anterior:</p> <p>SELECT nom_c,gent_com(nom_c)</p> <p>FROM COMARQUES;</p> <p>Per\u00f2 on realment traurem profit \u00e9s amb els llenguatges procedimentals. Podr\u00edem triar entre molts: C, Tcl, Perl, Python, ... En aquest curs optarem per PL/pgSQL (ProceduraL PostGreSQL).</p> <p>En versions anteriors podia passar que s'haguera de preparar la Base de Dades per a utilitzar el llenguatge. \u00c9s a dir, podia passar que no estiguera disponible el llenguatge de programaci\u00f3 en la Base de Dades. Aleshores s'havia d'instal\u00b7lar amb la sent\u00e8ncia:</p> <p>CREATE PROCEDURAL LANGUAGE plpgsql;</p> <p>Per\u00f2 no ser\u00e0 el nostre cas. Podem utilitzar sense problemes tant el llenguatge SQL com el PL/pgSQL, que \u00e9s el que realment ens interessa.</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T07_PLpgSQL/2_plpgsql/","title":"2 plpgsql","text":"<p>Bases de Dades</p> <ul> <li>Tema 7: Programaci\u00f3 en PostgreSQL</li> <li>Objectius i Coneixements previs</li> <li>0. Nota inicial</li> <li>1. Introducci\u00f3</li> <li>2. PL/pgSQL</li> <li>3. Declaraci\u00f3 de variables</li> <li>4. Instruccions</li> <li>5. Funcions </li> <li>Exercicis</li> <li>6. Utilitzaci\u00f3 de cursors </li> <li>Exercicis</li> <li>7. Missatges i excepcions</li> <li>8. Triggers </li> <li>Exercicis</li> <li>9. Creaci\u00f3 d'altres objectes basats en funcions </li> <li>9.1 Operadors <ul> <li>Exercicis</li> </ul> </li> <li>9.2 Operadors de classe</li> <li>9.3 Funcions d'agregat <ul> <li>Exercicis</li> </ul> </li> <li>Exercicis de tot el tema</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T07_PLpgSQL/2_plpgsql/#2-plpgsql","title":"2. PL/pgSQL","text":"<p>PL/pgSQL vol dir llenguatge procedural de PostgreSQL. Canvia respecte el que hem vist, que sempre ha estat interactiu. El PL/pgSQL ens permetr\u00e0 construir funcions utilitzant un llenguatge procedimental, prou semblant al PASCAL i un poc paregut al Java. Podrem definir variables, crear bucles, ... per\u00f2 tamb\u00e9 incorporar sent\u00e8ncies de SQL; podrem definir cursors, que seran variables que ens permetran agafar l\u00ednia a l\u00ednia el resultat d\u2019un SELECT.</p> <p>Una de les aplicacions \u00e9s la creaci\u00f3 de TRIGGERS, que s\u00f3n m\u00f2duls de programa que s\u2019activen quan s\u2019acompleix una determinada condici\u00f3 de la Base de Dades, despr\u00e9s de la inserci\u00f3, modificaci\u00f3 o esborrat en una determinada taula.</p> <p>Qualsevol cosa que ens definim (funci\u00f3, Trigger,...), fins i tot un bloc de codi dins d'un bloc m\u00e9s gran, tindr\u00e0 la seg\u00fcent estructura:</p> <p>[DECLARE</p> <p>declaraci\u00f3 de variables]</p> <p>BEGIN</p> <p>Instruccions</p> <p>END;</p> <p>Tot anir\u00e0 per blocs: bloc de declaracions de variables, bloc del cos de la funci\u00f3 o procediment. I les sent\u00e8ncies de control tamb\u00e9 seran blocs, amb un principi (BEGIN) i un END al final. Totes les instruccions acaben en punt i coma.</p> <p>Observeu que ac\u00ed BEGIN i END no tenen el significat de SQL, \u00e9s a dir no serviran per a comen\u00e7ar o acabar una transacci\u00f3.</p> <p>Vejam un exemple (sobre l'usuari geo_grup_9999x):</p> <p>CREATE OR REPLACE FUNCTION comentari() RETURNS void AS '</p> <p>DECLARE</p> <p>i text := ''Joanet'';</p> <p>BEGIN</p> <p>i:=''Hola, '' || i;</p> <p>RAISE NOTICE ''%'',i;</p> <p>END; ' LANGUAGE PLPGSQL;</p> <p>RAISE NOTICE serveix per traure un comentari per pantalla. En l'entorn de DBeaver veurem el resultat en la pestanya Output.</p> <p>Hem de ser conscients que aquesta consulta \u00e9s de creaci\u00f3 d'una funci\u00f3. El resultat d'aquesta sent\u00e8ncia \u00e9s la creaci\u00f3 de la funci\u00f3, i per tant com a resultat \u00fanicament ens dir\u00e0 que l'ha creada, si tot ha anat b\u00e9</p> <p>NOTA</p> <p>Hem posat dues cometes simples en compte d'una en les constants alfanum\u00e8riques perqu\u00e8 tota la funci\u00f3 va declarada entre cometes simples.</p> <p>Per\u00f2 es pot modificar aquest delimitador de tota la funci\u00f3, i en compte de que siga la cometa, que siga una cadena amb \\(** davant i darrere, per exemple **\\)cos$. Aleshores no caldria posar dues cometes simples</p> <p>CREATE OR REPLACE FUNCTION comentari() RETURNS void AS \\(cos\\)</p> <p>DECLARE</p> <p>i text := 'Joanet';</p> <p>BEGIN</p> <p>i:='Hola, ' || i;</p> <p>RAISE NOTICE '%',i;</p> <p>END; \\(cos\\)</p> <p>LANGUAGE plpgsql ;</p> <p>Si han hagut errors, els haurem de corregir (si l'error \u00e9s l\u00f2gic, s'haur\u00e0 creat igual la funci\u00f3; i si en modificar-la nom\u00e9s fem CREATE FUNCTION ... ens dir\u00e0 que ja est\u00e0 creada; per aix\u00f2 \u00e9s convenient posar CREATE OR REPLACE FUNCTION ...).</p> <p>Quan ja no hi hagen errors, la podrem executar amb la sent\u00e8ncia:</p> <p>SELECT comentari();</p> <p>Recordem que en l'entorn de DBeaver veurem el resultat en la pestanya Output</p> <p></p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T07_PLpgSQL/3_declaraci_de_variables/","title":"3 declaraci de variables","text":"<p>Bases de Dades</p> <ul> <li>Tema 7: Programaci\u00f3 en PostgreSQL</li> <li>Objectius i Coneixements previs</li> <li>0. Nota inicial</li> <li>1. Introducci\u00f3</li> <li>2. PL/pgSQL</li> <li>3. Declaraci\u00f3 de variables</li> <li>4. Instruccions</li> <li>5. Funcions </li> <li>Exercicis</li> <li>6. Utilitzaci\u00f3 de cursors </li> <li>Exercicis</li> <li>7. Missatges i excepcions</li> <li>8. Triggers </li> <li>Exercicis</li> <li>9. Creaci\u00f3 d'altres objectes basats en funcions </li> <li>9.1 Operadors <ul> <li>Exercicis</li> </ul> </li> <li>9.2 Operadors de classe</li> <li>9.3 Funcions d'agregat <ul> <li>Exercicis</li> </ul> </li> <li>Exercicis de tot el tema</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T07_PLpgSQL/3_declaraci_de_variables/#3-declaracio-de-variables","title":"3. Declaraci\u00f3 de variables","text":"<p>S'han de declarar totes (excepte les variables comptador dels bucles FOR, com ja veurem en el seu moment) en el bloc DECLARE i els tipus v\u00e0lids s\u00f3n els de SQL (NUMERIC, CHAR, DATE, ...). Tamb\u00e9 es poden declarar de subtipus definits per l\u2019usuari, com per exemple lat.</p> <p>Aquesta \u00e9s la sintaxi de declaraci\u00f3 de variables:</p> <p>nom [CONSTANT] tipus [NOT NULL] [{DEFAULT | :=}expressi\u00f3];</p> <p>Com veiem, i de forma opcional podem definir les variables com a:</p> <ul> <li>Constants, i aleshores el seu contingut no podr\u00e0 variar (haur\u00e0 de tenir valor inicial).</li> <li>No nul\u00b7les, i aleshores una assignaci\u00f3 del valor nul donar\u00e0 un error (haur\u00e0 de tenir valor inicial).</li> <li>Amb un valor inicial (a les variables declarades com a constants nom\u00e9s se'ls podran donar valors amb aquesta cl\u00e0usula).</li> </ul> <p>Per exemple:</p> <p>DECLARE</p> <p>v1 VARCHAR;</p> <p>v2 CONSTANT TEXT := 'Hola';</p> <p>v3 NUMERIC(5) := 0;</p> <p>v4 DATE NOT NULL DEFAULT '7-7-77';</p> <p>v5 lat;</p> <p>vec6 NUMERIC(5)[];</p> <p>Si tenim, com en l'\u00faltim exemple, una variable que \u00e9s d'un tipus compost, la manera d'accedir a un camp ser\u00e0 separant la variable i el camp per un punt: v5.h. Ara no far\u00e0 falta posar la variable entre par\u00e8ntesis, com ens tocava fer en les sent\u00e8ncies SQL.</p> <p>L'\u00e0mbit de les variables \u00e9s el bloc on es declaren i els blocs \"fills\", \u00e9s a dir aquells blocs definits dins del bloc on est\u00e0 definida la variable. Si se'ls d\u00f3na un valor inicial, aquest valor s'assigna cada vegada que s'entra dins del bloc (no al principi de l'execuci\u00f3 de la funci\u00f3). Aix\u00f2 pot ser important, ja que en la mateixa execuci\u00f3 de la funci\u00f3 si s'entra m\u00e9s d'una vegada en el bloc, pot tenir resultats diferents.</p> <p>Per exemple: Utilitzem la funci\u00f3 que ja tenim creada gent_com (poblaci\u00f3 de la comarca especificada). La utilitzem per a inicialitzar una variable en el DECLARE, i executem aquest bloc dues vegades. Nom\u00e9s ens queda canviar la comarca entre les dues passades.</p> <p>CREATE OR REPLACE FUNCTION moltes_pobl() RETURNS void AS \\(cos\\)</p> <p>DECLARE aux text := 'Marina Alta';</p> <p>BEGIN</p> <p>FOR i IN 1..2 LOOP</p> <p>DECLARE</p> <p>n numeric := gent_com(aux);</p> <p>BEGIN</p> <p>RAISE NOTICE 'Comarca %: % habitants',aux,n;</p> <p>END;</p> <p>IF i=1 THEN</p> <p>aux:='Marina Baixa';</p> <p>END IF;</p> <p>END LOOP;</p> <p>END; \\(cos\\)</p> <p>LANGUAGE 'plpgsql';</p> <p>I per a veure el resultat:</p> <p>SELECT moltes_pobl();</p> <p>Recordeu que el resultat que traiem amb RAISE NOTICE es veu en la pestanya de Messages.</p> <p>Com veurem un poc m\u00e9s avant, a les funcions se'ls poden passar par\u00e0metres, per\u00f2 en el moment de definir-los tenim l'opci\u00f3 de posar nom\u00e9s de quin tipus s\u00f3n. La manera de nomenar-los dins de la funci\u00f3, d'aquesta manera, \u00e9s \\(1**, **\\)2, ... Per a no haver d'utilitzar uns noms tan impersonals, podem posar \u00e0lies en la zona de declaraci\u00f3:</p> <p>CREATE OR REPLACE FUNCTION iva(numeric) RETURNS numeric AS '</p> <p>BEGIN</p> <p>RETURN $1 * 0.16;</p> <p>END; ' LANGUAGE plpgsql;</p> <p>SELECT iva(200);</p> <p>Ja que estem en la zona de declaraci\u00f3 de variables, anem a acabar de comentar la manera de definir variables.</p> <ul> <li>%TYPE permet definir variables del tipus equivalent a una altra variable (v1 v2%TYPE;).</li> </ul> <p>La utilitat real \u00e9s que jo puc definir una variable del mateix tipus que un camp d'una determinada taula, i no cal que recorde de quin tipus era aquell. Per exemple:</p> <p>v_lat poblacions.lat%TYPE;</p> <ul> <li>%ROWTYPE : la variable ser\u00e0 de tipus fila de la taula esmentada.</li> </ul> <p>Podrem utilitzar la variable amb camps, ja que equival a tota la fila.</p> <p>CREATE OR REPLACE FUNCTION loc_pobl(text) RETURNS void AS \\(cos\\)</p> <p>DECLARE f poblacions%ROWTYPE;</p> <p>BEGIN</p> <p>SELECT * INTO f FROM POBLACIONS WHERE nom=$1;</p> <p>RAISE NOTICE 'Poblaci\u00f3: %',f.nom;</p> <p>RAISE NOTICE 'Latitud: %',f.latitud;</p> <p>RAISE NOTICE 'Longitud: %',f.longitud;</p> <p>END; \\(cos\\)</p> <p>LANGUAGE 'plpgsql';</p> <p>SELECT loc_pobl('Llucena');</p> <ul> <li>RECORD \u00e9s tamb\u00e9 de tipus fila, per\u00f2 agafa la seua estructura en el moment d'efectuar-se la sent\u00e8ncia select. \u00c9s per tant molt m\u00e9s vers\u00e0til.</li> </ul> <p>CREATE OR REPLACE FUNCTION loc_pobl_2(text) RETURNS void AS \\(cos\\)</p> <p>DECLARE f RECORD;</p> <p>BEGIN</p> <p>SELECT * INTO f FROM POBLACIONS WHERE nom=$1;</p> <p>RAISE NOTICE 'Poblaci\u00f3: %',f.nom;</p> <p>RAISE NOTICE 'Latitud: %',f.latitud;</p> <p>RAISE NOTICE 'Longitud: %',f.longitud;</p> <p>END; \\(cos\\)</p> <p>LANGUAGE 'plpgsql';</p> <p>SELECT loc_pobl_2('Llucena');</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T07_PLpgSQL/4_instruccions/","title":"4 instruccions","text":"<p>Bases de Dades</p> <ul> <li>Tema 7: Programaci\u00f3 en PostgreSQL</li> <li>Objectius i Coneixements previs</li> <li>0. Nota inicial</li> <li>1. Introducci\u00f3</li> <li>2. PL/pgSQL</li> <li>3. Declaraci\u00f3 de variables</li> <li>4. Instruccions</li> <li>5. Funcions </li> <li>Exercicis</li> <li>6. Utilitzaci\u00f3 de cursors </li> <li>Exercicis</li> <li>7. Missatges i excepcions</li> <li>8. Triggers </li> <li>Exercicis</li> <li>9. Creaci\u00f3 d'altres objectes basats en funcions </li> <li>9.1 Operadors <ul> <li>Exercicis</li> </ul> </li> <li>9.2 Operadors de classe</li> <li>9.3 Funcions d'agregat <ul> <li>Exercicis</li> </ul> </li> <li>Exercicis de tot el tema</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T07_PLpgSQL/4_instruccions/#4-instruccions","title":"4. Instruccions","text":"<p>Nota</p> <p>Les instruccions que van a continuaci\u00f3 encara no les podrem practicar, perqu\u00e8 han de formar part d'alguna funci\u00f3. Les podrem practicar a partir de la pregunta seg\u00fcent</p> <ul> <li>Assignaci\u00f3: es pot fer de dues maneres</li> <li>Directa, amb l\u2019operador := (a := 10; b := a * 0.5; )</li> <li>Assignar el resultat d\u2019una consulta (una \u00fanica fila) a una variable o variables amb INTO. INTO pot anar abans o despr\u00e9s de les columnes seleccionades:</li> </ul> <p>SELECT Max(altura) INTO a FROM POBLACIONS;</p> <p>SELECT INTO a Max(altura) FROM POBLACIONS;</p> <p>SELECT Max(altura),Min(altura),Avg(altura) INTO a,b,c</p> <p>FROM POBLACIONS;</p> <ul> <li>Condicional </li> </ul> <p>IF condici\u00f3</p> <p>THEN</p> <p>Sent\u00e8ncies;</p> <p>[ELSE</p> <p>sent\u00e8ncies;]</p> <p>END IF;</p> <p>Tamb\u00e9 es pot utilitzar ELSIF que equival a un ELSE seguit de IF. D'aquesta manera nom\u00e9s hi haur\u00e0 un END IF al final. \u00c9s la cosa m\u00e9s pareguda al CASE.</p> <p>IF condici\u00f31</p> <p>THEN Sent\u00e8ncies1;</p> <p>ELSIF condici\u00f32</p> <p>THEN Sent\u00e8ncies2;</p> <p>ELSE</p> <p>Sent\u00e8ncies3;</p> <p>END IF;</p> <ul> <li>Bucles: s\u2019aconsegueixen per mig de LOOP ...... END LOOP;</li> <li>Bucle incondicional</li> </ul> <p>LOOP</p> <p>Sent\u00e8ncies</p> <p>END LOOP;</p> <p>tal i com est\u00e0, el bucle \u00e9s infinit; per eixir EXIT o EXIT WHEN cond</p> <ul> <li>Bucle FOR</li> </ul> <p>FOR variable IN [REVERSE] valor_m\u00edn .. valor_m\u00e0x LOOP</p> <p>Sent\u00e8ncies</p> <p>END LOOP;</p> <p>La variable comptador no s'ha de declarar i nom\u00e9s t\u00e9 validesa dins del bucle.</p> <ul> <li>Bucle WHILE</li> </ul> <p>WHILE condici\u00f3 LOOP</p> <p>Sent\u00e8ncies</p> <p>END LOOP;</p> <ul> <li>Sent\u00e8ncies SQL: es poden executar sense problema totes aquelles sent\u00e8ncies que no tornen cap resultat (INSERT, UPDATE, DELETE, CREATE TABLE, ...). La sent\u00e8ncia SELECT, que s\u00ed que torna un valor s'ha d'utilitzar amb la cl\u00e0usula INTO (com ja hem vist), o dins de PERFORM (com ara veurem).</li> <li>Execuci\u00f3 d'altres funcions. En moltes ocasions ens far\u00e0 falta executar una altra funci\u00f3. Si aquesta torna un valor la posarem dins d'una sent\u00e8ncia (assignaci\u00f3, en una condici\u00f3, ...). Per\u00f2 i si no torna cap valor? El mateix podr\u00edem dir d'una sent\u00e8ncia SELECT (encara que la utilitat d'a\u00e7\u00f2 \u00e9s m\u00e9s dubtosa). Ho farem per mig de PERFORM, que executa una sent\u00e8ncia, ignorant el possible valor tornat per aquesta.</li> </ul> <p>Per exemple (recordeu que loc_pobl, la funci\u00f3 creada en la pregunta anterior, no torna cap valor, sin\u00f3 que ho trau per pantalla):</p> <p>PERFORM loc_pobl('A\u00edn');</p> <p>PERFORM (SELECT * FROM POBLACIONS);</p> <ul> <li>Execuci\u00f3 en forma din\u00e0mica. Hi haur\u00e0 ocasions en que la sent\u00e8ncia SQL la voldrem construir en temps d'execuci\u00f3, \u00e9s a dir de forma din\u00e0mica. Aix\u00f2 ens ho permet EXECUTE, que el que fa es passar la cadena de car\u00e0cters que va a continuaci\u00f3 al motor SQL.</li> </ul> <p>Per exemple:</p> <p>EXECUTE 'SELECT ' || $2 || ' FROM ' || $1;</p> <p>De moment no fa res, perqu\u00e8 el resultat de la sent\u00e8ncia es perd, per\u00f2 ja veurem m\u00e9s avant la seua aplicaci\u00f3. Un altre exemple, on esborrar\u00edem les files d'una taula on un camp coincideix amb un valor (tot passat com a par\u00e0metres):</p> <p>EXECUTE 'DELETE FROM ' || $1 || ' WHERE ' || $2 || ' = ' || $3;</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T07_PLpgSQL/5_funcions/","title":"5 funcions","text":"<p>Bases de Dades</p> <ul> <li>Tema 7: Programaci\u00f3 en PostgreSQL</li> <li>Objectius i Coneixements previs</li> <li>0. Nota inicial</li> <li>1. Introducci\u00f3</li> <li>2. PL/pgSQL</li> <li>3. Declaraci\u00f3 de variables</li> <li>4. Instruccions</li> <li>5. Funcions </li> <li>Exercicis</li> <li>6. Utilitzaci\u00f3 de cursors </li> <li>Exercicis</li> <li>7. Missatges i excepcions</li> <li>8. Triggers </li> <li>Exercicis</li> <li>9. Creaci\u00f3 d'altres objectes basats en funcions </li> <li>9.1 Operadors <ul> <li>Exercicis</li> </ul> </li> <li>9.2 Operadors de classe</li> <li>9.3 Funcions d'agregat <ul> <li>Exercicis</li> </ul> </li> <li>Exercicis de tot el tema</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T07_PLpgSQL/5_funcions/#5-funcions","title":"5. Funcions","text":"<p>En PL/pgSQL no hi ha procediments. Nom\u00e9s hi ha funcions, encara que puguem declarar-les per a que no tornen cap valor (void).</p> <p>Nota</p> <p>La difer\u00e8ncia per tant entre un procediment i una funci\u00f3 \u00e9s que la segona torna un valor, mentre que el primer no. Per\u00f2 en PL/pgSQL nom\u00e9s hi ha funcions.</p> <p>La sintaxi general (i en principi per a qualsevol llenguatge) de la instrucci\u00f3 de creaci\u00f3 de funcions \u00e9s la seg\u00fcent:</p> <p>CREATE [OR REPLACE] FUNCTION nom_funci\u00f3 [(llista_par\u00e0metres)] RETURNS tipus_del_valor_tornat AS ' </p> <p>instruccions</p> <p>' LANGUAGE llenguatge;</p> <p>on el llenguatge potser un dels definits (SQL, PL/pgSQL, ...).</p> <p>El cos de la funci\u00f3 pot anar entre cometes simples, o entre un separador que comence i acabe per \\(** (per exemple **\\)cos$) i que ha de ser igual al principi i al final, com veurem en un exemple m\u00e9s avant.</p> <p>Concretament, en el cas de PL/pgSQL, podem refinar un poc m\u00e9s la sintaxi</p> <p>CREATE [OR REPLACE] FUNCTION nom_funci\u00f3 [(llista_par\u00e0metres)] </p> <p>RETURNS tipus_del_valor_tornat AS '</p> <p>[DECLARE </p> <p>declaraci\u00f3 de variables]</p> <p>BEGIN </p> <p>instruccions RETURN expressi\u00f3</p> <p>END; ' LANGUAGE plpgsql;</p> <p>Si la funci\u00f3 torna un valor (i per tant l'hem declarada com a que retorna un valor), la instrucci\u00f3 que ens permet retornar el valor \u00e9s RETURN </p> <p>Per exemple, anem a crear una funci\u00f3 que passe de pessetes a euros. Ho podem fer sobre la Base de Dades geo_999x:</p> <p>CREATE FUNCTION EUROS(n int4) RETURNS numeric AS '</p> <p>BEGIN</p> <p>RETURN ROUND(n/166.386,2);</p> <p>END; ' LANGUAGE plpgsql;</p> <p>SELECT euros(1000);</p> <p>Els tipus de dades de tornada pot ser qualsevol, fins i tot un creat per l'usuari. I si volem que torne m\u00e9s d'un valor, podr\u00edem crear un tipus compost que abarque els valors que volem que torne.</p> <p>Tenim la possibilitat de posar noms als par\u00e0metres (en el cas anterior n), o no, i aleshores la manera de fer-los refer\u00e8ncia \u00e9s per mig de \\(1** per al primer par\u00e0metre, **\\)2 per al segon, ... Aix\u00ed la mateixa funci\u00f3, sense gastar nom de par\u00e0metre quedaria:</p> <p>CREATE OR REPLACE FUNCTION EUROS2(int4) RETURNS numeric AS '</p> <p>BEGIN</p> <p>RETURN ROUND($1/166.386,2);</p> <p>END; ' LANGUAGE plpgsql;</p> <p>Anem a veure un altre exemple: una funci\u00f3 que puga convertir una latitud en format text al tipus de dades que ens vam crear en el tema 6, part 3, el tipus lat. Les instruccions estan en el punt 0 (Nota inicial)</p> <p>I ara anem a fer la funci\u00f3 que passa de tipus Text a tipus lat:</p> <p>CREATE OR REPLACE FUNCTION text_a_lat(text) RETURNS lat as \\(COS\\)</p> <p>DECLARE</p> <p>aux lat;</p> <p>BEGIN</p> <p>IF $1 IS NOT NULL THEN</p> <p>aux.g := SUBSTR(\\(1,1,STRPOS(\\)1,'\u00ba')-1);</p> <p>aux.m := SUBSTR(\\(1, STRPOS(\\)1,'\u00ba')+1, STRPOS(\\(1,'''') - STRPOS(\\)1,'\u00ba')-1);</p> <p>aux.s := SUBSTR(\\(1, STRPOS(\\)1,'''')+1, STRPOS(\\(1,'\"') - STRPOS(\\)1,'''')-1);</p> <p>aux.h := SUBSTR(\\(1,STRPOS(\\)1,'\"')+1);</p> <p>ELSE aux := (NULL,NULL,NULL,NULL);</p> <p>END IF;</p> <p>RETURN aux;</p> <p>END; \\(COS\\)</p> <p>LANGUAGE plpgsql;</p> <p>Hem posat \\(COS\\) per a delimitar el cos de la funci\u00f3, per evitar problemes amb les moltes cometes que hi ha. I quan busquem la cometa, doncs en posem 4: la primera i l'\u00faltima s\u00f3n obligat\u00f2ries i delimiten la constant alfanum\u00e8rica. I al mig en posem 2 m\u00e9s per a marcar la cometa.</p> <p>Podem provar a veure si va b\u00e9:</p> <p>SELECT nom,latitud,text_a_lat(latitud),nom_c FROM POBLACIONS;</p> <p>Si la funci\u00f3 va b\u00e9, fins i tot la podr\u00edem utilitzar per omplir la taula POBLACIONS3 (est\u00e0 creada en el punt 0. Nota inicial), que l'hav\u00edem creada amb el tipus lat (ens convindria eliminar primer les possibles files que hi hagen creades).</p> <p>DELETE FROM POBLACIONS3;</p> <p>INSERT INTO POBLACIONS3</p> <p>SELECT nom,text_a_lat(latitud),nom_c FROM POBLACIONS;</p> <p>La funci\u00f3 inversa sembla m\u00e9s f\u00e0cil. L'\u00fanic problema, en tot cas, \u00e9s controlar que minuts i segons sempre siguen de dues xifres. I en tot cas llevar espais en blanc que queden pel mig. I haurem d'anar amb compte amb la cometa.</p> <p>Nota</p> <p>En les pr\u00e0ctiques seg\u00fcents en moltes ocasions es diu \"traure per pantalla\". I s\u00f3n funcions que no tenen par\u00e0metre ni tornen cap valor. Encara que a\u00e7\u00f2 no ser\u00e0 el normal en PostgreSQL, per a practicar pot anar b\u00e9. La manera de crear aquestes funcions \u00e9s com en el seg\u00fcent exemple, en el qual creem una funci\u00f3 que trau per pantalla el n\u00famero PI:</p> <p>CREATE OR REPLACE FUNCTION traure_pi() RETURNS void as \\(COS\\)</p> <p>begin</p> <p>raise notice 'El n\u00famero PI \u00e9s: %',PI();</p> <p>end; \\(COS\\)</p> <p>LANGUAGE 'plpgsql';</p> <p>En aquesta ocasi\u00f3 hem posat moltes paraules en min\u00fascules, per a demostrar que no importen maj\u00fascules i min\u00fascules.</p> <p>El resultat, si \u00e9s que ho fem des de DBeaver, el veurem fent una altra consulta SQL posant</p> <p>SELECT traure_pi();</p> <p>i el resultat el veur\u00edem en la pestanya Output, ja que hem provocat traure un missatge.</p> <p>Com veieu estem utilitzant la sent\u00e8ncia RAISE NOTICE, que la veurem millor en la pregunta 7 d'aquest tema, per\u00f2 que ja podem avan\u00e7ar que el que fa \u00e9s traure una l\u00ednia en la pestanya de missatges amb el comen\u00e7ament NOTICE:. Posarem entre cometes simples el text que volem mostrar, i per a traure el contingut d'una variable, posarem entre les cometes un %, i al final, separat per coma la variable de la qual volem mostrar el contingut. Podem posar m\u00e9s d'un %, i al final haurem de posar (separades per comes) tantes variables o expressions com % hem posat entre cometes. Ho veurem millor en els seg\u00fcents exemples.</p> <p>Un altre exemple, tamb\u00e9 d'una funci\u00f3 que no torna res, sin\u00f3 que \"trau per pantalla\" els n\u00fameros del 1 al 10:</p> <p>CREATE OR REPLACE FUNCTION deu() RETURNS VOID as \\(COS\\)</p> <p>BEGIN</p> <p>FOR i IN 1..10 LOOP</p> <p>RAISE NOTICE '%',i;</p> <p>END LOOP;</p> <p>END; \\(COS\\)</p> <p>LANGUAGE 'plpgsql';</p> <p>Quan l'executem:</p> <p>SELECT deu();</p> <p>Ens eixir\u00e0 aquest resultat en la pestanya de Output:</p> <p></p> <p>Una variant seria traure els n\u00fameros del1 al 10 i el seu doble. Observeu com posem 2 vegades %, i despr\u00e9s posem 2 coses a mostrar, separades per comes: i , i*2</p> <p>CREATE OR REPLACE FUNCTION deu_doble() RETURNS VOID as \\(COS\\)</p> <p>BEGIN</p> <p>FOR i IN 1..10 LOOP</p> <p>RAISE NOTICE 'N\u00famero: %. Doble: %',i,i*2;</p> <p>END LOOP;</p> <p>END; \\(COS\\)</p> <p>LANGUAGE 'plpgsql';</p> <p>SELECT deu_doble();</p> <p></p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T07_PLpgSQL/6_utilitzaci_de_cursors/","title":"6 utilitzaci de cursors","text":"<p>Bases de Dades</p> <ul> <li>Tema 7: Programaci\u00f3 en PostgreSQL</li> <li>Objectius i Coneixements previs</li> <li>0. Nota inicial</li> <li>1. Introducci\u00f3</li> <li>2. PL/pgSQL</li> <li>3. Declaraci\u00f3 de variables</li> <li>4. Instruccions</li> <li>5. Funcions </li> <li>Exercicis</li> <li>6. Utilitzaci\u00f3 de cursors </li> <li>Exercicis</li> <li>7. Missatges i excepcions</li> <li>8. Triggers </li> <li>Exercicis</li> <li>9. Creaci\u00f3 d'altres objectes basats en funcions </li> <li>9.1 Operadors <ul> <li>Exercicis</li> </ul> </li> <li>9.2 Operadors de classe</li> <li>9.3 Funcions d'agregat <ul> <li>Exercicis</li> </ul> </li> <li>Exercicis de tot el tema</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T07_PLpgSQL/6_utilitzaci_de_cursors/#6-utilitzacio-de-cursors","title":"6. Utilitzaci\u00f3 de cursors","text":"<p>Un cursor \u00e9s una variable que ens permet despla\u00e7ar-nos per les files d\u2019una consulta de SQL.</p> <p>Hi ha dos tipus de cursors, els expl\u00edcits i els impl\u00edcits.</p> <p>Els expl\u00edcits s'han de declarar expressament en la zona de declaracions. Els impl\u00edcits no, seran \u00fanicament una sent\u00e8ncia SQL que guarda el resultat en una variable. Porten impl\u00edcita tota la mec\u00e0nica dels cursors (declarar, obrir, utilitzar, tancar) que haurem de fer en els expl\u00edcits.</p> <p>CURSORS IMPL\u00cdCITS</p> <p>Consistiran en una sent\u00e8ncia SQL dins d'un procediment o funci\u00f3 PL/pgSQL. Han de tornar nom\u00e9s un valor (nom\u00e9s una fila), i es guardaran en una variable per mig del INTO de la sent\u00e8ncia SQL. Per exemple, la seg\u00fcent funci\u00f3 tornar\u00e0 el n\u00famero de poblacions.</p> <p>CREATE FUNCTION quantes() RETURNS INTEGER AS '</p> <p>DECLARE</p> <p>N INTEGER;</p> <p>BEGIN</p> <p>SELECT COUNT(*) INTO N FROM POBLACIONS;</p> <p>RETURN N;</p> <p>END;</p> <p>' LANGUAGE plpgsql;</p> <p>SELECT quantes();</p> <p>Per\u00f2 ara ho fa per l'eixida normal</p> <p>CURSORS EXPL\u00cdCITS</p> <p>Aquestos cursors s'han de declarar, b\u00e9 en la zona de declaracions, b\u00e9 en el moment d'obrir-los, com veurem m\u00e9s avant. I en la zona d\u2019instruccions, primer haurem d\u2019obrir (OPEN) el cursor (que \u00e9s quan es far\u00e0 la consulta SQL, guardant-se en una zona de mem\u00f2ria i quedant-se situat el cursor en la primera fila). Despr\u00e9s ens anirem despla\u00e7ant fila a fila per fer un determinat tractament (FETCH: torna el valor i se situa a la seg\u00fcent fila). Per \u00faltim l\u2019haurem de tancar (CLOSE).</p> <p>En la declaraci\u00f3 del cursor seguirem la seg\u00fcent sintaxi:</p> <p>nom CURSOR [par\u00e0metres] {FOR | IS} sent\u00e8ncia_select</p> <p>Encara que tamb\u00e9 tenim la possibilitat de definir-lo \u00fanicament com a refcursor (refer\u00e8ncia a cursor), sense dir quina \u00e9s la sent\u00e8ncia select. Aleshores l'haurem de definir en el moment d'obrir-lo. Tamb\u00e9 tenim la possibilitat de passar-li un par\u00e0metre. Ac\u00ed tenim alguns exemples de definici\u00f3 de cursors:</p> <p>DECLARE </p> <p>cur1 refcursor; cur2 CURSOR FOR SELECT nom,altura FROM POBLACIONS; cur3 CURSOR(p1 varchar) FOR </p> <p>SELECT nom,altura FROM POBLACIONS WHERE nom=p1;</p> <p>La manera d'obrir-lo dep\u00e8n de la manera com s'havia declarat. Si nom\u00e9s s'havia posat refcursor s'haur\u00e0 de col\u00b7locar la consulta. Si tenia par\u00e0metres s'hauran de posar entre par\u00e8ntesi. Aquesta seria una manera d'obrir els 3 cursors definits anteriorment:</p> <p>BEGIN </p> <p>OPEN cur1 FOR SELECT * FROM POBLACIONS; OPEN cur2; OPEN cur3('Vistabella'); ....</p> <p>END;</p> <p>Hi ha una altra manera d'obrir els cursors definits com a refcursor, que permet especificar la consulta totalment en temps d'execuci\u00f3. Ac\u00ed en tenim un exemple:</p> <p>s := 'SELECT nom FROM ' || $1; OPEN cur1 FOR EXECUTE s;</p> <p>on la taula consultada ve donada com a par\u00e0metre de la funci\u00f3.</p> <p>Per accedir als distints camps de les successives files del cursor ho farem per mig de la sent\u00e8ncia FETCH cur INTO var1 [, var2, ...] i aleshores tindrem els valors disponibles en les variables var1 (, var2, ...) que estaran pr\u00e8viament declarades del mateix tipus. Aix\u00ed en l'exemple de dalt, tenim que el cursor cur2 est\u00e0 definit en base a una sent\u00e8ncia SQL que torna dues columnes (nom i altura). La sent\u00e8ncia hauria de ser</p> <p>FETCH cur2 INTO v_nom, v_altura</p> <p>on v_nom i v_altura serien respectivament de tipus varchar i numeric </p> <p>Tamb\u00e9 podr\u00edem haver definir una variable de tipus RECORD. En aquest exemple suposem que la variable f \u00e9s de tipus RECORD </p> <p>FETCH cur2 INTO f</p> <p>Despr\u00e9s, per a accedir a un camp, posarem f.nom_camp.</p> <p>Per a tancar el cursor utilitzarem la sent\u00e8ncia CLOSE.</p> <p>L'habitual ser\u00e0 rec\u00f3rrer tot el cursor. El seg\u00fcent exemple trau tots els noms de les poblacions d'una comarca introdu\u00efda com a par\u00e0metre de la funci\u00f3, utilitzant un cursor:</p> <p>CREATE FUNCTION pobl_com(text) RETURNS void AS \\(cos\\)</p> <p>DECLARE</p> <p>v_nom VARCHAR;</p> <p>cur CURSOR FOR SELECT nom FROM POBLACIONS</p> <p>WHERE nom_c = $1</p> <p>ORDER BY nom;</p> <p>BEGIN</p> <p>OPEN cur;</p> <p>FETCH cur INTO v_nom;</p> <p>WHILE v_nom IS NOT NULL LOOP</p> <p>RAISE NOTICE '%',v_nom;</p> <p>FETCH cur INTO v_nom;</p> <p>END LOOP;</p> <p>CLOSE cur;</p> <p>END; \\(cos\\) </p> <p>LANGUAGE plpgsql;</p> <p>La manera d'utilitzar aquesta funci\u00f3 ser\u00e0:</p> <p>SELECT pobl_com('Plana Alta');</p> <p>Per a aquestes ocasions en les quals hem de rec\u00f3rrer totalment un cursor, tenim una variant del FOR que ens ser\u00e0 molt \u00fatil.</p> <p>FOR var_fila IN sent\u00e8ncia_select LOOP</p> <p>on var_fila \u00e9s una variable de tipus RECORD, i que anir\u00e0 agafant els valors de les diferents files (fixeu-vos que s'ha de declarar, en contra de les variables comptador d'un bucle FOR normal). Hem d'observar que en el cas del bucle FOR hem de declarar la sent\u00e8ncia SELECT en el mateix moment de crear el FOR, \u00e9s a dir, no podem utilitzar un cursor definit en la zona de declaracions.</p> <p>Quan utilitzem el bucle FOR per a rec\u00f3rrer un cursor no caldr\u00e0 fer l'acci\u00f3 d'obrir, ni de situar-nos al seg\u00fcent, ni de tancar, ja que es fan de forma impl\u00edcita en el bucle. Reconstru\u00efm l'exemple anterior:</p> <p>CREATE FUNCTION pobl_com_2(text) RETURNS void AS \\(cos\\)</p> <p>DECLARE</p> <p>f RECORD;</p> <p>BEGIN</p> <p>FOR f IN SELECT nom FROM POBLACIONS</p> <p>WHERE nom_c = $1</p> <p>ORDER BY nom</p> <p>LOOP</p> <p>RAISE NOTICE '%',f.nom;</p> <p>END LOOP;</p> <p>END;</p> <p>\\(cos\\) LANGUAGE plpgsql;</p> <p>Si volgu\u00e9rem construir la sent\u00e8ncia SELECT en temps d'execuci\u00f3, posar\u00edem EXECUTE, encara que a\u00e7\u00f2 potser siga massa avan\u00e7at per a aquest curs:</p> <p>FOR f IN EXECUTE 'SELECT nom FROM ' || $1 LOOP</p> <p>Anem a veure un exemple. Volem calcular la MEDIANA de l'altura de les poblacions. La mediana es defineix com el valor que est\u00e0 al mig de tots si el n\u00famero d\u2019elements \u00e9s imparell (1, 2, 3, 4, 10), i com la mitjana entre els dos valors centrals si el n\u00famero \u00e9s parell (1, 2, 3, 4, 10, 20) -&gt; 3\u20195 , tenint en compte sempre que han d'estar ordenats. \u00c9s suficient amb que entengueu el seu funcionament.</p> <p>CREATE OR REPLACE FUNCTION MEDIANA() RETURNS NUMERIC AS \\(cos\\)</p> <p>DECLARE</p> <p>cur CURSOR FOR SELECT altura FROM POBLACIONS</p> <p>ORDER BY altura;</p> <p>aux INT2;</p> <p>aux1 INT2;</p> <p>i INT2;</p> <p>n INT2;</p> <p>n1 INT2;</p> <p>BEGIN</p> <p>OPEN cur;</p> <p>SELECT COUNT(altura) INTO n FROM POBLACIONS;</p> <p>IF MOD(n,2) = 0</p> <p>THEN n1 := n;</p> <p>ELSE n1 := n+1;</p> <p>END IF;</p> <p>FOR i IN 1..n1/2 LOOP</p> <p>FETCH cur INTO aux;</p> <p>END LOOP;</p> <p>IF MOD(n,2) = 0 THEN</p> <p>FETCH cur INTO aux1;</p> <p>aux := (aux + aux1) / 2;</p> <p>END IF;</p> <p>RETURN aux;</p> <p>END;</p> <p>\\(cos\\) LANGUAGE plpgsql;</p> <p>SELECT MEDIANA();</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T07_PLpgSQL/7_missatges_i_excepcions/","title":"7 missatges i excepcions","text":"<p>Bases de Dades</p> <ul> <li>Tema 7: Programaci\u00f3 en PostgreSQL</li> <li>Objectius i Coneixements previs</li> <li>0. Nota inicial</li> <li>1. Introducci\u00f3</li> <li>2. PL/pgSQL</li> <li>3. Declaraci\u00f3 de variables</li> <li>4. Instruccions</li> <li>5. Funcions </li> <li>Exercicis</li> <li>6. Utilitzaci\u00f3 de cursors </li> <li>Exercicis</li> <li>7. Missatges i excepcions</li> <li>8. Triggers </li> <li>Exercicis</li> <li>9. Creaci\u00f3 d'altres objectes basats en funcions </li> <li>9.1 Operadors <ul> <li>Exercicis</li> </ul> </li> <li>9.2 Operadors de classe</li> <li>9.3 Funcions d'agregat <ul> <li>Exercicis</li> </ul> </li> <li>Exercicis de tot el tema</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T07_PLpgSQL/7_missatges_i_excepcions/#7-missatges-i-excepcions","title":"7. Missatges i excepcions","text":"<p>Al llarg dels exemples i exercicis que hem fet fins ara, ens ha vingut molt b\u00e9 traure algun missatge, per veure com anava l'execuci\u00f3 de les funcions. El que feem era provocar un aconteixement, en aquest cas una not\u00edcia, un av\u00eds. Podem utilitzar la mateixa sent\u00e8ncia per a provocar tamb\u00e9 un error, amb el conseq\u00fcent avortament de l'execuci\u00f3 de la funci\u00f3. Anem a veure-ho amb m\u00e9s detall.</p> <p>RAISE nivell 'format' [,variable1[,...]];</p> <p>En nivell posarem un dels seg\u00fcents: DEBUG, LOG, INFO, NOTICE, WARNING o EXCEPTION, on la major part nom\u00e9s donen un av\u00eds (amb l'encap\u00e7alament corresponent). Per\u00f2 EXCEPTION a m\u00e9s de traure l'av\u00eds avorta l'execuci\u00f3.</p> <p>En format posarem una cadena amb el comentari que vulguem. Podrem posar % les vegades que vulguem, i se substituiran pel contingut de les variables que tinguem a continuaci\u00f3.</p> <p>Aix\u00ed, per exemple, creem una funci\u00f3 de salutaci\u00f3:</p> <p>CREATE OR REPLACE FUNCTION SALUTACIO() RETURNS VOID as \\(COS\\)</p> <p>DECLARE</p> <p>s1 text := 'Joanet';</p> <p>s2 date := CURRENT_DATE;</p> <p>BEGIN</p> <p>RAISE NOTICE 'Hola';</p> <p>RAISE NOTICE 'Hola, %. Avui \u00e9s %',s1,s2;</p> <p>RAISE NOTICE 'Qu\u00e8 tal?';</p> <p>END; \\(COS\\)</p> <p>LANGUAGE 'plpgsql';</p> <p>Si ara fem:</p> <p>SELECT SALUTACIO();</p> <p>Provocar\u00e0 la seg\u00fcent eixida (en la pestanya Output):</p> <p>Hola, Joanet. Avui es 2022-02-14 Qu\u00e8 tal?</p> <p>En canvi si la canviem el primer RAISE NOTICE per un RAISE EXCEPTION, i posem un altre RAISE NOTICE davant:</p> <p>CREATE OR REPLACE FUNCTION SALUTACIO() RETURNS VOID as \\(COS\\)</p> <p>DECLARE</p> <p>s1 text := 'Joanet';</p> <p>s2 date := CURRENT_DATE;</p> <p>BEGIN</p> <p>RAISE NOTICE 'Hola';</p> <p>RAISE EXCEPTION 'Hola, %. Avui \u00e9s %',s1,s2;</p> <p>RAISE NOTICE 'Qu\u00e8 tal?';</p> <p>END;</p> <p>\\(COS\\) LANGUAGE 'plpgsql';</p> <p>Nom\u00e9s trauria el primer Hola, i despr\u00e9s donaria un error amb el missatge que li hem posat:</p> <p></p> <p>I no trauria aix\u00f2 de Qu\u00e8 tal?, perqu\u00e8 ja s'ha avortat la funci\u00f3. \u00c9s a dir, hem provocat nosaltres l'error</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T07_PLpgSQL/8_triggers/","title":"8 triggers","text":"<p>Bases de Dades</p> <ul> <li>Tema 7: Programaci\u00f3 en PostgreSQL</li> <li>Objectius i Coneixements previs</li> <li>0. Nota inicial</li> <li>1. Introducci\u00f3</li> <li>2. PL/pgSQL</li> <li>3. Declaraci\u00f3 de variables</li> <li>4. Instruccions</li> <li>5. Funcions </li> <li>Exercicis</li> <li>6. Utilitzaci\u00f3 de cursors </li> <li>Exercicis</li> <li>7. Missatges i excepcions</li> <li>8. Triggers </li> <li>Exercicis</li> <li>9. Creaci\u00f3 d'altres objectes basats en funcions </li> <li>9.1 Operadors <ul> <li>Exercicis</li> </ul> </li> <li>9.2 Operadors de classe</li> <li>9.3 Funcions d'agregat <ul> <li>Exercicis</li> </ul> </li> <li>Exercicis de tot el tema</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T07_PLpgSQL/8_triggers/#8-triggers","title":"8. Triggers","text":"<p>Un TRIGGER o disparador \u00e9s un procediment que se dispara quan s\u2019acompleix una determinada condici\u00f3 que afecta a la Base de Dades: quan s\u2019actualitza una o m\u00e9s d\u2019una fila d\u2019una determinada taula. En el moment de crear el trigger especificarem una funci\u00f3 que s'executar\u00e0 quan es produesca l'event. Aquesta funci\u00f3 pot estar escrita en qualsevol llenguatge de programaci\u00f3 instal\u00b7lat, i ha de tornar un valor especial: trigger. Juguem per tant a dues bandes. Primer amb la funci\u00f3 que s'executar\u00e0, i quan aquesta estiga creada, el trigger pr\u00f2piament dit.</p> <p>La sintaxi de creaci\u00f3 del trigger \u00e9s:</p> <p>CREATE TRIGGER nom_trig </p> <p>{BEFORE | AFTER} {INSERT | DELETE | UPDATE} [OR {INSERT | DELETE |UPDATE} ...] ON nom_taula [FOR EACH {ROW | STATEMENT}] EXECUTE PROCEDURE nom_funci\u00f3 ([par\u00e0metres]);</p> <p>Lamentablement no tenim l\u2019opci\u00f3 OR REPLACE, que ens permetria no haver d\u2019esborrar el trigger en cas de voler refer-lo (cosa prou normal). Per tant, en el cas tan habitual de voler refer un trigger, primer l'haurem d'esborrar (DROP TRIGGER) i despr\u00e9s tornar a fer-lo, encara que si \u00e9s una modificaci\u00f3 en la funci\u00f3 no cal tocar el trigger.</p> <p>BEFORE o AFTER indiquen quan s\u2019ha d\u2019activar el trigger: abans de produir-se l\u2019acci\u00f3 d\u2019inserir, esborrar o modificar, o despr\u00e9s.</p> <p>INSERT, DELETE o UPDATE indiquen quina acci\u00f3 d\u2019actualitzaci\u00f3 de la taula provoca (o pot provocar) el trigger.</p> <p>Una actualitzaci\u00f3 pot afectar m\u00e9s d\u2019una fila. Aleshores ens plantegem si s\u2019ha de disparar el trigger per a cada actualitzaci\u00f3 de cada fila, o si nom\u00e9s una vegada (abans o despr\u00e9s d\u2019actualitzar). Ho podrem especificar per mig de FOR EACH ROW o FOR EACH STATEMENT. L'opci\u00f3 per defecte \u00e9s la segona.</p> <p>Suposem que volem activar un disparador sempre abans d\u2019inserir sobre la taula T1, per a cada fila, per si la introducci\u00f3 no f\u00f3ra correcta:</p> <p>CREATE TRIGGER trigger1 BEFORE INSERT ON T1 FOR EACH ROW </p> <p>EXECUTE PROCEDURE ...;</p> <p>I ara que volem activar un altre despr\u00e9s d\u2019esborrar un conjunt de files (per exemple per a actualitzar una altra taula):</p> <p>CREATE TRIGGER trigger2 AFTER DELETE ON T1 FOR EACH STATEMENT </p> <p>EXECUTE PROCEDURE ...;</p> <p>Anem a parlar ara de la funci\u00f3 que es crida quan es dispara el trigger. \u00c9s una funci\u00f3 especial, escrita en qualsevol llenguatge definit, que com hem comentat abans ha de tornar obligat\u00f2riament un valor TRIGGER. De fet, amb la utilitat PgAdmin existeix l'objecte TRIGGER FUNCTION diferenciat de les funcions normals. Aquesta funci\u00f3 pot tenir par\u00e0metres, i \u00f2bviament hauran de coincidir aquestos en la definici\u00f3 de la funci\u00f3 i en la definici\u00f3 del trigger.</p> <p>Quan s'arriba a la funci\u00f3, que nosaltres sempre la definirem en PL/pgSQL, s'han definit unes quantes variables especials. Anem a comentar-les:</p> <ul> <li>NEW: de tipus RECORD. Cont\u00e9 la fila que va a inserir-se o la nova informaci\u00f3, si va a actualitzar-se</li> <li>OLD: de tipus RECORD. Cont\u00e9 la fila que va a esborrar-se o la informaci\u00f3 vella, si va a actualitzar-se.</li> <li>TG_NAME: de tipus NAME. Cont\u00e9 el nom del trigger que s'ha disparat i ha cridat aquesta funci\u00f3 (podria ser que m\u00e9s d'un trigger apunte a una funci\u00f3, per\u00f2 nosaltres no ho contemplarem)</li> <li>TG_WHEN: de tipus TEXT. Indica quan actua el trigger, BEFORE o AFTER.</li> <li>TG_LEVEL: de tipus TEXT. Indica de quina manera actua, ROW o STATEMENT.</li> <li>TG_OP: de tipus TEXT. Indica quin event ha provocat el trigger: INSERT, UPDATE o DELETE</li> <li>TG_RELID: de tipus OID. Cont\u00e9 l'identificador de la taula que ha provocat el trigger (podria ser m\u00e9s d'una).</li> <li>TG_RELNAME: de tipus TEXT. Cont\u00e9 el nom de la taula que ha provocat el trigger</li> <li>TG_NARGS: de tipus INTEGER. Indica el nombre de par\u00e0metres que se li passen.</li> <li>TG_ARGV[ ]: de tipus VECTOR de TEXT. Vector que cont\u00e9 els par\u00e0metres.</li> </ul> <p>Aquesta \u00e9s una relaci\u00f3 de variables prou extensiva. En la pr\u00e0ctica nosaltres nom\u00e9s utilitzarem NEW, OLD i en tot cas TG_OP.</p> <p>Una funci\u00f3 de trigger ha de tornar o b\u00e9 null, o b\u00e9 un RECORD amb la mateixa estructura que la fila de la taula.</p> <p>Si un trigger de nivell de fila (for each row) torna un valor nul, no s'efectuaran m\u00e9s operacions (si \u00e9s un delete, que esborra m\u00e9s d'una fila, si la funci\u00f3 torna nul ja no s'intentaran esborrar m\u00e9s files). En canvi si torna una cosa distinta de nul, aleshores es procedir\u00e0 a l'actualitzaci\u00f3 amb aquest valor. Aix\u00ed, per curar en salut, podem fer que l'\u00faltima l\u00ednia de la funci\u00f3 de trigger siga RETURN NEW; A\u00e7\u00f2 pot ser molt \u00fatil, ja que si \u00e9s una inserci\u00f3 o actualitzaci\u00f3 podr\u00edem fins i tot modificar la fila NEW per a que agafe els valors que nosaltres volem (per exemple: NEW.sou := NEW.sou + 500 si estigu\u00e9rem actualitzant el sou d'un empleat).</p> <p>Els valors tornats per una funci\u00f3 trigger de nivell de statement s\u00f3n sempre ignorats, igual que un AFTER de nivell de fila (ja \u00e9s massa tard per actuar), i per tant millor posar que tornen nul.</p> <p>Anem a veure un exemple, per impedir que es modifique el nombre d'habitants d'una localitat en m\u00e9s de 50000 persones (augmentant o disminuint). Nom\u00e9s t\u00e9 sentit el control quan es modifique la columna poblacio. No t\u00e9 sentit ni en inserir ni en esborrar una fila. I ens conv\u00e9 abans d\u2019actualitzar, per poder impedir-ho.</p> <p>CREATE FUNCTION val_50000() RETURNS TRIGGER AS \\(cos\\)</p> <p>BEGIN</p> <p>IF abs(NEW.poblacio - OLD.poblacio) &gt; 50000 THEN</p> <p>RAISE EXCEPTION 'Massa difer\u00e8ncia. No pot ser!!';</p> <p>END IF;</p> <p>RETURN NEW;</p> <p>END; \\(cos\\) </p> <p>LANGUAGE plpgsql;</p> <p>CREATE TRIGGER tr_val_50000 BEFORE UPDATE ON POBLACIONS</p> <p>FOR EACH ROW</p> <p>EXECUTE PROCEDURE val_50000();</p> <p>Podr\u00edem comprovar el funcionament del trigger actualitzant alguna fila de la taula POBLACIONS:</p> <p>UPDATE POBLACIONS</p> <p>SET poblacio = 1000</p> <p>WHERE nom='Castell\u00f3 de la Plana';</p> <p>Com veieu estem intentant actualitzar la poblaci\u00f3 de Castell\u00f3 de la Plana a 1.000 habitants. Com que la poblaci\u00f3 actual \u00e9s de 173.841, hi haur\u00e0 una difer\u00e8ncia de m\u00e9s de 50.000 habitants, i per tant el trigger impedir\u00e0 l'actualitzaci\u00f3:</p> <p></p> <p>Nota</p> <p>En DBeaver veurem els triggers en la taula a la qual afecten.</p> <p></p> <p>Mirem un altre exemple: un trigger que actualitza autom\u00e0ticament el nombre d'instituts de la taula PROVINCIES (teniu la sent\u00e8ncia de creaci\u00f3 en la pregunta 0 d'aquest tema) quan s'insereix o s'esborra un institut. Primer s'haur\u00e0 de mirar la prov\u00edncia de l'institut que s'est\u00e0 introduint o esborrant, i despr\u00e9s s'incrementa o decrementa el nombre d'instituts de la prov\u00edncia:</p> <p>CREATE OR REPLACE FUNCTION act_inst() RETURNS TRIGGER AS \\(cos\\)</p> <p>DECLARE aux text;</p> <p>BEGIN</p> <p>IF TG_OP='INSERT'</p> <p>THEN</p> <p>SELECT provincia INTO aux FROM POBLACIONS,COMARQUES</p> <p>WHERE POBLACIONS.nom_c=COMARQUES.nom_c AND</p> <p>POBLACIONS.cod_m = NEW.cod_m;</p> <p>UPDATE PROVINCIES</p> <p>SET instituts = instituts + 1</p> <p>WHERE provincia = aux;</p> <p>ELSE</p> <p>SELECT provincia INTO aux FROM POBLACIONS,COMARQUES</p> <p>WHERE POBLACIONS.nom_c=COMARQUES.nom_c AND</p> <p>POBLACIONS.cod_m = OLD.cod_m;</p> <p>UPDATE PROVINCIES</p> <p>SET instituts = instituts - 1</p> <p>WHERE provincia = aux;</p> <p>END IF;</p> <p>RETURN NEW;</p> <p>END; \\(cos\\) </p> <p>LANGUAGE plpgsql;</p> <p>CREATE TRIGGER tr_act_inst AFTER INSERT OR DELETE ON INSTITUTS</p> <p>FOR EACH ROW</p> <p>EXECUTE PROCEDURE act_inst();</p> <p>Podrem comprovar-ho, per exemple, introduint un nou registre. Abans de l'actualitzaci\u00f3, el contingut de la taula PROVINCIES \u00e9s:</p> <p></p> <p>Inserim ara el nou institut, corresponent a Castell\u00f3 (el codi del municipi \u00e9s 12040)</p> <p>INSERT INTO INSTITUTS VALUES</p> <p>('12004299','IES MARJALERIA','CAM\u00cd LA PLANA','S/N',12003,12040);</p> <p>El contingut de la taula PROVINCIES \u00e9s ara:</p> <p></p> <p>Un \u00faltim exemple per a veure el de FOR EACH STATEMENT. Intentarem fer un trigger per a que actualitze la poblaci\u00f3 de les prov\u00edncies. Ara anem a plantejar-lo de manera que calcule una altra vegada el total de les poblacions. Per tant, segurament \u00e9s millor calcular-ho quantes menys vegades millor; \u00e9s a dir, si es fan unes quantes actualitzacions de les poblacions, doncs calcular al final de totes elles (i no despr\u00e9s de cadascuna).</p> <p>CREATE OR REPLACE FUNCTION act_pobl() RETURNS TRIGGER AS \\(cos\\)</p> <p>BEGIN</p> <p>UPDATE PROVINCIES</p> <p>SET habitants = (SELECT SUM(poblacio)</p> <p>FROM COMARQUES,POBLACIONS</p> <p>WHERE COMARQUES.nom_c=POBLACIONS.nom_c and</p> <p>provincia=PROVINCIES.provincia);</p> <p>RETURN NEW;</p> <p>END; \\(cos\\)</p> <p>LANGUAGE plpgsql;</p> <p>CREATE TRIGGER tr_act_pobl AFTER INSERT OR DELETE OR UPDATE</p> <p>ON POBLACIONS FOR EACH STATEMENT</p> <p>EXECUTE PROCEDURE act_pobl();</p> <p>Per a poder comprovar el resultat del trigger anem a fer una operaci\u00f3 d'actualitzaci\u00f3. Per exemple anem a incrementar cada poblaci\u00f3 de la comarca de l'Alcalat\u00e9n en 10.000 habitants (recordeu que ja tenim un trigger que impedeix augmentar en m\u00e9s de 50.000).</p> <p>UPDATE POBLACIONS</p> <p>SET poblacio = poblacio + 10000</p> <p>WHERE nom_c = 'Alcalat\u00e9n';</p> <p>Com que la comarca t\u00e9 9 pobles, la poblaci\u00f3 de la prov\u00edncia de Castell\u00f3 haur\u00e0 augmentat en 90.000 habitants:</p> <p></p> <p>No oblidem executar l'operaci\u00f3 de restar 10.000 habitants als pobles de la comarca de l'Alcalat\u00e9n, i llevar l'institut de la Marjaleria, per deixar les coses com estaven (encara que nom\u00e9s s\u00f3n dades de prova molt desactualitzades).</p> <p>UPDATE POBLACIONS</p> <p>SET poblacio = poblacio - 10000</p> <p>WHERE nom_c = 'Alcalat\u00e9n';</p> <p>DELETE FROM INSTITUTS</p> <p>WHERE codi = '12004299';</p> <p>Per esborrar un trigger, utilitzarem la instrucci\u00f3 DROP TRIGGER:</p> <p>DROP TRIGGER nom_trigger ON nom_taula;</p> <p>La modificaci\u00f3 d'un trigger (ALTER TRIGGER) nom\u00e9s permet canviar el nom d'aquest trigger.</p> <p>Pot ser molt \u00fatil en ocasions desactivar un trigger, de manera que no tinga efecte durant una temporada, i tornar a activar-lo m\u00e9s avant. Est\u00e0 clar que sempre podr\u00edem esborrar-lo i tornar a crear-lo quan fa\u00e7a falta, per\u00f2 ser\u00e0 m\u00e9s c\u00f2moda la desactivaci\u00f3. Aquesta operaci\u00f3 es fa en l'ALTER TABLE de la taula a la qual implica el trigger.</p> <p>ALTER TABLE nom_taula [ENABLE | DISABLE] TRIGGER [nom_trigger | ALL | USER ];</p> <p>Com es pot comprovar, la sent\u00e8ncia permet activar o desactivar un trigger en concret, o tots els triggers (caldr\u00e0 tenir privilegis de superusuari, ja que a\u00e7\u00f2 inclouria els triggers implicits que fan acomplir les restriccions d'integritat, i aix\u00f2 nom\u00e9s ho podria fer un superusuari), o els triggers d'usuari, que s\u00f3n els que no s\u00f3n per implementar les claus externes.</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T07_PLpgSQL/91_operadors/","title":"91 operadors","text":"<p>Bases de Dades</p> <ul> <li>Tema 7: Programaci\u00f3 en PostgreSQL</li> <li>Objectius i Coneixements previs</li> <li>0. Nota inicial</li> <li>1. Introducci\u00f3</li> <li>2. PL/pgSQL</li> <li>3. Declaraci\u00f3 de variables</li> <li>4. Instruccions</li> <li>5. Funcions </li> <li>Exercicis</li> <li>6. Utilitzaci\u00f3 de cursors </li> <li>Exercicis</li> <li>7. Missatges i excepcions</li> <li>8. Triggers </li> <li>Exercicis</li> <li>9. Creaci\u00f3 d'altres objectes basats en funcions </li> <li>9.1 Operadors <ul> <li>Exercicis</li> </ul> </li> <li>9.2 Operadors de classe</li> <li>9.3 Funcions d'agregat <ul> <li>Exercicis</li> </ul> </li> <li>Exercicis de tot el tema</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T07_PLpgSQL/91_operadors/#91-operadors","title":"9.1 Operadors","text":"<p>Per a definir un nou operador especificarem el s\u00edmbol que utilitzarem, el o els operands i la funci\u00f3 que l'implementa.</p> <p>La sintaxi \u00e9s:</p> <p>CREATE OPERATOR name ( </p> <p>PROCEDURE = funcname [, LEFTARG = lefttype ] [, RIGHTARG = righttype ] [, COMMUTATOR = com_op ] [, NEGATOR = neg_op ] ...</p> <p>)</p> <p>Hi ha m\u00e9s opcions, que per a la utilitat d'aquest curs obviarem.</p> <ul> <li>En el nom de l'operador posarem un o m\u00e9s d'un car\u00e0cters de la seg\u00fcent llista:</li> </ul> <p>+ - * / &lt; &gt; = ~ ! @ # % ^ &amp; | ` ?</p> <p>Hi ha algunes limitacions, que podem veure en la documentaci\u00f3.</p> <ul> <li>Sempre hem de posar la funci\u00f3 que implementa l'operador.</li> <li>Si l'operador \u00e9s d'un \u00fanic operand, l'haurem d'especificar (el de la dreta o de l'esquerra, el que preferim). Si \u00e9s de dos operands s'hauren d'especificar els dos.</li> <li>COMMUTATOR indica un altre operador que funciona igual canviant l'ordre dels par\u00e0metres (en num\u00e8rics el commutador de &lt; \u00e9s &gt;)</li> <li>NEGATOR indica un altre operador equivalent a negar aquest (en num\u00e8rics el negador de &lt; \u00e9s &gt;=)</li> </ul> <p>Per exemple anem a crear l'operador M\u00c0XIM (/|) que calcula el m\u00e0xim entre dos n\u00fameros. Utilitzarem la funci\u00f3 MAX2 que ja tenim creada (\u00e9s l'exercici 7.4)</p> <p>CREATE OPERATOR /| (</p> <p>PROCEDURE = MAX2, LEFTARG = numeric, RIGHTARG = numeric);</p> <p>Podem comprovar el seu funcionament amb la sent\u00e8ncia:</p> <p>SELECT 23 /| 15;</p> <p>Recordem que els operadors estan definits per a determinats operands. Aix\u00ed, per exemple, la seg\u00fcent sent\u00e8ncia no funcionar\u00e0 perqu\u00e8 no tenim definit l'operador per a operands de text:</p> <p>SELECT 'Alfa' /| 'Beta';</p> <p>Per a esborrar un operador utilitzarem la sent\u00e8ncia DROP OPERATOR, al qual \u00fanicament li haurem d'especificar l'operador a esborrar i entre par\u00e8ntesis els tipus implicats</p> <p>DROP OPERATOR /| (numeric, numeric);</p> <p>Tampoc tenim definits els operands de comparaci\u00f3 per al tipus lat, que hav\u00edem creat. I per tant coses com aquesta no funcionen:</p> <p>SELECT * FROM POBLACIONS3  WHERE latitud &gt; '(N,40,0,0)';</p> <p>I si li posem el tipus del qual es tracta:</p> <p>SELECT * FROM POBLACIONS3</p> <p>WHERE latitud &gt; '(N,40,0,0)'::lat</p> <p>ORDER BY nom;</p> <p>potser no funcionen b\u00e9. Encara que sembla que va b\u00e9 la cosa:</p> <p></p> <p>el que ha fet en realitat \u00e9s una comparaci\u00f3 car\u00e0cter a car\u00e0cter</p> <p>Per a demostrar que no funciona b\u00e9 inserim una ciutat que estiga a l'hemisferi sud: Rio de Janeiro (ja hav\u00edem quedat que no importava si es deteriorava la Base de Dades).</p> <p>INSERT INTO POBLACIONS3</p> <p>VALUES('Rio de Janeiro','(S,22,56,58)'::lat, NULL);</p> <p>I si tornem a executar la sent\u00e8ncia d'abans:</p> <p>SELECT * FROM POBLACIONS3</p> <p>WHERE latitud &gt; '(N,40,0,0)'::lat</p> <p>ORDER BY nom;</p> <p>ara ja es veu que va malament:</p> <p></p> <p>Anem a intentar crear tots els operadors de comparaci\u00f3 del tipus lat </p> <p>Comen\u00e7arem per les funcions. No considerem quan un operand \u00e9s nul, per fer-los m\u00e9s senzills. La d'igualtat \u00e9s f\u00e0cil, ja que dos latituds s\u00f3n iguals si ho s\u00f3n tots els membres. Observeu que no hi ha problema per fer la comparaci\u00f3 \\(1.h=\\)2.h, ja que s\u00f3n del domini hemi_lat basat en el tipus car\u00e0cter:</p> <p>CREATE FUNCTION igual (lat,lat) RETURNS bool AS '</p> <p>BEGIN</p> <p>RETURN \\(1.h=\\)2.h AND \\(1.g=\\)2.g AND \\(1.m=\\)2.m AND \\(1.s=\\)2.s;</p> <p>END; '</p> <p>LANGUAGE plpgsql;</p> <p>I ara l'operador:</p> <p>CREATE OPERATOR =</p> <p>(LEFTARG = lat,</p> <p>RIGHTARG = lat,</p> <p>PROCEDURE = igual,</p> <p>COMMUTATOR = = ,</p> <p>NEGATOR = &lt;&gt;);</p> <p>Observeu que hem posat el commutador igual a ell mateix i el negador a l'operador distint, encara que no el tenim definit.</p> <p>Ara aquesta instrucci\u00f3 ja funciona:</p> <p>SELECT * FROM POBLACIONS3 </p> <p>WHERE latitud = '(N,39,59,10)';</p> <p>i fins i tot sap que ha de convertir a lat la cadena de car\u00e0cters (ja que nom\u00e9s t\u00e9 un operador = amb un operand tipus lat).</p> <p>La funci\u00f3 distint nom\u00e9s ha de negar l'igual. I ja podem gastar l'operador:</p> <p>CREATE FUNCTION distint (lat,lat) RETURNS bool AS '</p> <p>BEGIN</p> <p>RETURN NOT ($1 = $2);</p> <p>END; ' </p> <p>LANGUAGE plpgsql;</p> <p>CREATE OPERATOR &lt;&gt;</p> <p>(LEFTARG = lat,</p> <p>RIGHTARG = lat,</p> <p>PROCEDURE = distint,</p> <p>COMMUTATOR = &lt;&gt; ,</p> <p>NEGATOR = = );</p> <p>Nota important</p> <p>Enguany tenim creades moltes Bases de Dades perqu\u00e8 l'alumnat \u00e9s molt extens, i potser tenim un poc saturat el servidor.</p> <p>Siga per l'anterior o per alguna altra causa, estem detectant una sobrec\u00e0rrega entre les crides als operadors nous que estem creant.</p> <p>Per aquesta ra\u00f3, encara que queda molt clara la funci\u00f3 distint (quan no s\u00f3n iguals), en compte d'utilitzar l'operador = ser\u00e0 millor cridar a la funci\u00f3 igual (en definitiva, l'operador = crida a la funci\u00f3 igual, per tant ens estalviem un pas). Com que anirem fent tots els operadors de comparaci\u00f3, si cridem sempre a les funcions i no a altres operadors, al final ens estalviarem molts passos.</p> <p>Per aix\u00f2, millor fer aquesta versi\u00f3 de la funci\u00f3 distint(lat,lat)</p> <p>CREATE OR REPLACE FUNCTION distint(lat, lat) RETURNS bool AS \\(cos\\)</p> <p>BEGIN</p> <p>RETURN NOT igual(\\(1,\\)2);</p> <p>END;  \\(cos\\) LANGUAGE plpgsql;</p> <p>L'operador major \u00e9s un poc m\u00e9s complicat. Hem de considerar una latitud major si est\u00e0 m\u00e9s al nord. Per tant a l'hemisferi nord quan m\u00e9s graus m\u00e9s al nord, per\u00f2 a l'hemisferi sud \u00e9s al rev\u00e9s.</p> <p>CREATE FUNCTION major (lat1 lat, lat2 lat) RETURNS bool AS \\(cos\\)</p> <p>DECLARE</p> <p>aux bool;</p> <p>BEGIN</p> <p>IF lat1.h='N' AND lat2.h='S' THEN aux := TRUE;</p> <p>ELSIF lat1.h='S' AND lat2.h='N' THEN aux := FALSE;</p> <p>ELSIF lat1.h='N' AND lat2.h='N' THEN               -- Hemisferi NORD</p> <p>IF lat1.g &gt; lat2.g THEN aux := TRUE;</p> <p>ELSIF lat1.g &lt; lat2.g THEN aux := FALSE;</p> <p>ELSE</p> <p>IF lat1.m &gt; lat2.m THEN aux := TRUE;</p> <p>ELSIF lat1.m &lt; lat2.m THEN aux := FALSE;</p> <p>ELSE</p> <p>IF lat1.s &gt; lat2.s THEN aux := TRUE;</p> <p>ELSE aux := FALSE; -- si s\u00f3n iguals \u00e9s fals</p> <p>END IF;</p> <p>END IF;</p> <p>END IF;</p> <p>ELSE                               -- Hemisferi SUD, al rev\u00e9s que al NORD</p> <p>IF lat1.g &lt; lat2.g THEN aux := TRUE;</p> <p>ELSIF lat1.g &gt; lat2.g THEN aux := FALSE;</p> <p>ELSE</p> <p>IF lat1.m &lt; lat2.m THEN aux := TRUE;</p> <p>ELSIF lat1.m &gt; lat2.m THEN aux := FALSE;</p> <p>ELSE</p> <p>IF lat1.s &lt; lat2.s THEN aux := TRUE;</p> <p>ELSE aux := FALSE;</p> <p>END IF;</p> <p>END IF;</p> <p>END IF;</p> <p>END IF;</p> <p>RETURN aux;</p> <p>END; \\(cos\\) </p> <p>LANGUAGE plpgsql;</p> <p>Segurament podria haver quedat m\u00e9s curt, per\u00f2 aix\u00ed crec que s'ent\u00e9n molt b\u00e9. Ara l'operador:</p> <p>CREATE OPERATOR &gt;</p> <p>(LEFTARG = lat,</p> <p>RIGHTARG = lat,</p> <p>PROCEDURE = major,</p> <p>COMMUTATOR = &lt; ,</p> <p>NEGATOR = &lt;= );</p> <p>Podr\u00edem provar-lo aix\u00ed:</p> <p>SELECT * FROM POBLACIONS3 </p> <p>WHERE latitud &gt; '(N,40,0,0)'</p> <p>ORDER BY NOM;</p> <p>i podrem comprovar que Rio de Janeiro no apareixer\u00e0.</p> <p>Afortunadament tots els altres operadors es poden derivar dels que ja tenim:</p> <p>CREATE OR REPLACE FUNCTION major_igual (lat,lat) RETURNS bool AS '</p> <p>BEGIN</p> <p>RETURN (\\(1 &gt; \\(2) OR (\\)1=\\)2);</p> <p>END; ' LANGUAGE plpgsql;</p> <p>CREATE OPERATOR &gt;=</p> <p>(LEFTARG = lat,</p> <p>RIGHTARG = lat,</p> <p>PROCEDURE = major_igual,</p> <p>COMMUTATOR = &lt;= ,</p> <p>NEGATOR = &lt; );</p> <p>I el menor seria negant el major o igual i el menor o igual negant el major.</p> <p>Nota important</p> <p>Per la mateixa ra\u00f3 de la nota anterior, millor fer aquesta versi\u00f3 de la funci\u00f3\u00a0major_igual(lat,lat):</p> <p>CREATE OR REPLACE FUNCTION major_igual (lat,lat) RETURNS bool AS '</p> <p>BEGIN</p> <p>RETURN major(\\(1,\\)2) OR igual(\\(1,\\)2);</p> <p>END; ' LANGUAGE plpgsql;</p> <p>I exactament igual amb les funcions\u00a0menor(lat,lat) i\u00a0menor_igual(lat,lat)</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T07_PLpgSQL/92_operadors_de_classe/","title":"92 operadors de classe","text":"<p>Bases de Dades</p> <ul> <li>Tema 7: Programaci\u00f3 en PostgreSQL</li> <li>Objectius i Coneixements previs</li> <li>0. Nota inicial</li> <li>1. Introducci\u00f3</li> <li>2. PL/pgSQL</li> <li>3. Declaraci\u00f3 de variables</li> <li>4. Instruccions</li> <li>5. Funcions </li> <li>Exercicis</li> <li>6. Utilitzaci\u00f3 de cursors </li> <li>Exercicis</li> <li>7. Missatges i excepcions</li> <li>8. Triggers </li> <li>Exercicis</li> <li>9. Creaci\u00f3 d'altres objectes basats en funcions </li> <li>9.1 Operadors <ul> <li>Exercicis</li> </ul> </li> <li>9.2 Operadors de classe</li> <li>9.3 Funcions d'agregat <ul> <li>Exercicis</li> </ul> </li> <li>Exercicis de tot el tema</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T07_PLpgSQL/92_operadors_de_classe/#92-operadors-de-classe","title":"9.2 Operadors de classe","text":"<p>Hem fet els operadors de comparaci\u00f3 per a un nou tipus de dades que hem creat, per\u00f2 a pesar d'aix\u00f2, no podem ordenar per un camp d'aquest tipus, \u00e9s a dir, consultes com la seg\u00fcent encara no funcionen:</p> <p>SELECT *</p> <p>FROM POBLACIONS3</p> <p>ORDER BY latitud DESC;</p> <p>observeu com la primera \u00e9s Rio de Janeiro, quan havia de ser l'\u00faltima.</p> <p></p> <p>Ens falta un pas m\u00e9s, construir un OPERADOR DE CLASSE (OPERATOR CLASS), que permetr\u00e0 indexar per un camp d'aquest tipus. Aix\u00f2 suposar\u00e0 que podrem ordenar de forma ascendent o descendent, i que podrem crear \u00edndex formats per camps d'aquest tipus; fins i tot podr\u00e0 ser, a partir d'aquest moment, clau principal.</p> <p>Una vegada tenim tots els operadors de comparaci\u00f3, nom\u00e9s ens resta crear una funci\u00f3 de suport a l'operador i definir pr\u00f2piament l'operador de classe.</p> <p>Nota </p> <p>Abans de continuar, estigueu segurs que teniu tots els operadors creats, incloent &lt; i &lt;=</p> <p>La funci\u00f3 de suport ha de tenir dos par\u00e0metres del tipus que volem, i tornar -1, 1 o 0, depenent de si el primer operand \u00e9s menor, major o igual que el segon, respectivament.</p> <p>CREATE OR REPLACE FUNCTION lat_cmp(lat1 lat,lat2 lat) RETURNS integer AS \\(cos\\)</p> <p>BEGIN</p> <p>IF lat1 &lt; lat2 THEN return -1;</p> <p>ELSEIF lat1 &gt; lat2 THEN return 1;</p> <p>ELSE return 0;</p> <p>END IF;</p> <p>END;</p> <p>\\(cos\\) LANGUAGE 'plpgsql';</p> <p>Ara ja podem definir l'operador de classe. Haurem de tenir privilegis d'administraci\u00f3 (per evitar que qualsevol usuari puga crear operadors de classe). Haurem d'especificar:</p> <ul> <li>El tipus de dades per a qui definim l'operador de classe.</li> <li>El m\u00e8tode d'indexaci\u00f3 que utilitzarem (normalment btree, b-arbre)</li> <li>L'estrat\u00e8gia d'ordenaci\u00f3, especificant quins s\u00f3n els nostres operadors i associant-los a n\u00fameros.</li> <li>Tamb\u00e9 haurem d'especificar la funci\u00f3 de suport.</li> </ul> <p>Lamentablement no teniu privilegis d'administraci\u00f3, per tant aquesta part no la podreu fer, \u00fanicament us podreu fiar. La definici\u00f3 de l'operador de classe quedar\u00e0 aix\u00ed :</p> <p>CREATE OPERATOR CLASS lat_op_cl DEFAULT </p> <p>FOR TYPE lat USING btree AS OPERATOR 1 &lt;, OPERATOR 2 &lt;=, OPERATOR 3 =, OPERATOR 4 &gt;=, OPERATOR 5 &gt;, FUNCTION 1 lat_cmp(lat, lat);</p> <p>Si esteu molt molt interessats i voleu comprovar-lo, m'ho dieu a mi i us crear\u00e9 aquest operador de classe.</p> <p>Ara ja ens funcionaria la seg\u00fcent sent\u00e8ncia:</p> <p>SELECT *</p> <p>FROM POBLACIONS3</p> <p>ORDER BY latitud DESC;</p> <p>observeu com estem ordenant de forma ascendent, i la primera \u00e9s Rio de Janeiro:</p> <p></p> <p>I fins i tot, si f\u00f3ra el cas, podr\u00edem definir el camp latitud com a clau principal, que no \u00e9s el cas perqu\u00e8 ja \u00e9s nom.</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T07_PLpgSQL/93_funcions_dagregat/","title":"93 funcions dagregat","text":"<p>Bases de Dades</p> <ul> <li>Tema 7: Programaci\u00f3 en PostgreSQL</li> <li>Objectius i Coneixements previs</li> <li>0. Nota inicial</li> <li>1. Introducci\u00f3</li> <li>2. PL/pgSQL</li> <li>3. Declaraci\u00f3 de variables</li> <li>4. Instruccions</li> <li>5. Funcions </li> <li>Exercicis</li> <li>6. Utilitzaci\u00f3 de cursors </li> <li>Exercicis</li> <li>7. Missatges i excepcions</li> <li>8. Triggers </li> <li>Exercicis</li> <li>9. Creaci\u00f3 d'altres objectes basats en funcions </li> <li>9.1 Operadors <ul> <li>Exercicis</li> </ul> </li> <li>9.2 Operadors de classe</li> <li>9.3 Funcions d'agregat <ul> <li>Exercicis</li> </ul> </li> <li>Exercicis de tot el tema</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T07_PLpgSQL/93_funcions_dagregat/#93-funcions-dagregat","title":"9.3 Funcions d'agregat","text":"<p>En PostgreSQL tamb\u00e9 podem definir funcions d'agregat, de l'estil de MAX, SUM, AVG, ... Podem fer-ho sobre qualsevol tipus, existent o definit per l'usuari</p> <p>Una funci\u00f3 d'agregat vindr\u00e0 definida pel seu nom i pel tipus de dades. Per aix\u00f2 encara no funciona la sent\u00e8ncia</p> <p>SELECT MAX(latitud) </p> <p>FROM POBLACIONS3;</p> <p>ja que MAX no est\u00e0 definida sobre el tipus de dades nou.</p> <p>A banda del tipus de dades, podrem jugar amb un tipus de dades intern, mentre es calcula la funci\u00f3 d'agregat, que no t\u00e9 per qu\u00e8 ser igual al tipus de dades de la funci\u00f3. I la funci\u00f3 d'agregat vindr\u00e0 definida per una o dues funcions: una funci\u00f3 de transici\u00f3 d'estat (sfunc) que anir\u00e0 calculant l'estat intern mentre van arribant nous valors; i opcionalment una altra funci\u00f3 final (ffunc) per a fer un \u00faltim c\u00e0lcul i donar el valor final (per exemple en la mitjana sfunc anir\u00e0 calculant la suma dels valors, i ffunc haur\u00e0 de dividir pel nombre total d'elements).</p> <p>sfunc( estat-intern, seg\u00fcent-item-dades ) ---&gt; seg\u00fcent-estat-intern</p> <p>ffunc( estat-intern ) ---&gt; valor-final</p> <p>Opcionalment tamb\u00e9 podrem donar un valor inicial. La sintaxi \u00e9s:</p> <p>CREATE AGGREGATE nom ( </p> <p>BASETYPE = tipus_dades, SFUNC = sfunc, STYPE = tipus_dades_intern [ , FINALFUNC = ffunc ] [ , INITCOND = condici\u00f3_inicial ] [ , SORTOP = operador_ordenaci\u00f3 ]</p> <p>)</p> <p>Anem a crear la funci\u00f3 d'agregat MAX per al tipus de dades lat. Comencem per la funci\u00f3 d'estat, que en aquest cas senzillament anir\u00e0 agafant el m\u00e0xim. \u00c9s, per tant, com la funci\u00f3 que calcula el m\u00e0xim de dos n\u00fameros, per\u00f2 en lat. No tindrem en consideraci\u00f3 els valors nuls, per no complicar la cosa.</p> <p>CREATE OR REPLACE FUNCTION MAX2(lat1 lat,lat2 lat) RETURNS lat AS \\(cos\\)</p> <p>BEGIN</p> <p>IF lat2 &gt; lat1 THEN RETURN lat2;</p> <p>ELSE RETURN lat1;</p> <p>END IF;</p> <p>END; \\(cos\\) </p> <p>LANGUAGE plpgsql;</p> <p>Ara ja va la funci\u00f3 d'agregat:</p> <p>CREATE AGGREGATE MAX (</p> <p>BASETYPE = lat,</p> <p>SFUNC = MAX2,</p> <p>STYPE = lat,</p> <p>INITCOND = '(S,90,0,0)');</p> <p>Hem posat com a valor inicial el pol sud, per evitar el problema dels nuls. Si tot ha anat b\u00e9, ja podrem fer consultes com la del principi d'aquesta pregunta.</p> <p>SELECT MAX(latitud)</p> <p>FROM POBLACIONS3;</p> <p>Si hav\u00edem creat tamb\u00e9 l'operador de classe, les podrem complicar ordenant-les. Per exemple, podem traure la latitud m\u00e0xima de cada comarca, ordenades de nord a sud:</p> <p>SELECT comarca,MAX(latitud)</p> <p>FROM POBLACIONS3</p> <p>GROUP BY comarca</p> <p>ORDER BY MAX(latitud) DESC;</p> <p>Com sempre, la sent\u00e8ncia d'esborrar \u00e9s m\u00e9s senzilla. Per a esborrar una funci\u00f3 d'agregat, hem d'especificar el nom de la funci\u00f3 d'agregat i entre par\u00e8ntesis el tipus implicat:</p> <p>DROP AGGREGATE MAX (lat);</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T07_PLpgSQL/9_creaci_daltres_objectes_basats_en_funcions/","title":"9 creaci daltres objectes basats en funcions","text":"<p>Bases de Dades</p> <ul> <li>Tema 7: Programaci\u00f3 en PostgreSQL</li> <li>Objectius i Coneixements previs</li> <li>0. Nota inicial</li> <li>1. Introducci\u00f3</li> <li>2. PL/pgSQL</li> <li>3. Declaraci\u00f3 de variables</li> <li>4. Instruccions</li> <li>5. Funcions </li> <li>Exercicis</li> <li>6. Utilitzaci\u00f3 de cursors </li> <li>Exercicis</li> <li>7. Missatges i excepcions</li> <li>8. Triggers </li> <li>Exercicis</li> <li>9. Creaci\u00f3 d'altres objectes basats en funcions </li> <li>9.1 Operadors <ul> <li>Exercicis</li> </ul> </li> <li>9.2 Operadors de classe</li> <li>9.3 Funcions d'agregat <ul> <li>Exercicis</li> </ul> </li> <li>Exercicis de tot el tema</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T07_PLpgSQL/9_creaci_daltres_objectes_basats_en_funcions/#9-creacio-daltres-objectes-basats-en-funcions","title":"9. Creaci\u00f3 d'altres objectes basats en funcions","text":"<p>Ara que ja sabem crear funcions, i ho hem practicat fins i tot per a crear triggers, podr\u00edem plantejar-nos crear altres objectes, com operadors, operadors de classe, funcions d'agregat, ..., per als quals hem d'utilitzar funcions. Aix\u00ed \u00e9s com veurem l'extensibilitat de PostgreSQL, com \u00e9s de vers\u00e0til i ens podem crear objectes a la nostra mida.</p> <p>Nota En pgAdmin 1.18.1 o qualsevol altra versi\u00f3, no es visualitzen per defecte tots els tipus d'objectes de la Base de Dades. Nom\u00e9s hem d'anar al men\u00fa Fitxer -&gt; Opcions i en la pestanya Visualitza (Browser) triar els objectes que volem.</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T07_PLpgSQL/exercicis/","title":"Exercicis","text":"<p>Bases de Dades</p> <ul> <li>Tema 7: Programaci\u00f3 en PostgreSQL</li> <li>Objectius i Coneixements previs</li> <li>0. Nota inicial</li> <li>1. Introducci\u00f3</li> <li>2. PL/pgSQL</li> <li>3. Declaraci\u00f3 de variables</li> <li>4. Instruccions</li> <li>5. Funcions </li> <li>Exercicis</li> <li>6. Utilitzaci\u00f3 de cursors </li> <li>Exercicis</li> <li>7. Missatges i excepcions</li> <li>8. Triggers </li> <li>Exercicis</li> <li>9. Creaci\u00f3 d'altres objectes basats en funcions </li> <li>9.1 Operadors <ul> <li>Exercicis</li> </ul> </li> <li>9.2 Operadors de classe</li> <li>9.3 Funcions d'agregat <ul> <li>Exercicis</li> </ul> </li> <li>Exercicis de tot el tema</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T07_PLpgSQL/exercicis/#exercicis","title":"Exercicis","text":""},{"location":"BD-T07_PLpgSQL/exercicis/#exercicis_1","title":"Exercicis","text":"<p>En la Base de Dades geo_grup_9999x:</p> <p>7.1.- Crea una funci\u00f3 anomenada DEU_Q, que traga els n\u00fameros del 1 al 10 i els seus quadrats. (Utilitza RAISE NOTICE).</p> <p>7.2.- Fes una altra funci\u00f3, IMP, que traga per pantalla els n\u00fameros imparells del 1 al 50. (Utilitza RAISE NOTICE).</p> <p>7.3.- Fes\u00a0una funci\u00f3 anomenada TAULA_MULT, per a que traga la taula de multiplicar del par\u00e0metre que se li ha de passar. (Utilitza RAISE NOTICE). Aquest podria ser el seu aspecte, en executar-la:</p> <p></p> <p>7.4.- Fes una funci\u00f3, anomenada MAX2, que tinga dos par\u00e0metres num\u00e8rics i que torne el m\u00e0xim entre aquestos dos. (Ara ja no s'ha d'utilitzar RAISE NOTICE). Podeu comprovar el seu funcionament fent per exemple SELECT MAX(5,7);\u00a0\u00a0 SELECT MAX(15,7). Sempre ha de mostrar el m\u00e0xim dels dos.</p> <p>7.5.- Utilitza l'anterior per a crear MAX3. Has d'utilitzar obligat\u00f2riament la funci\u00f3 MAX2</p> <p>7.6.- (Voluntari) Fes la funci\u00f3 LAT_A_TEXT, tenint en compte que ha de quedar com en la taula POBLACIONS. Segurament la dificultat m\u00e9s gran ser\u00e0 aconseguir que apareguen les cometes despr\u00e9s dels minuts i dels segons.</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T07_PLpgSQL/exercicis0/","title":"Exercicis0","text":"<p>Bases de Dades</p> <ul> <li>Tema 7: Programaci\u00f3 en PostgreSQL</li> <li>Objectius i Coneixements previs</li> <li>0. Nota inicial</li> <li>1. Introducci\u00f3</li> <li>2. PL/pgSQL</li> <li>3. Declaraci\u00f3 de variables</li> <li>4. Instruccions</li> <li>5. Funcions </li> <li>Exercicis</li> <li>6. Utilitzaci\u00f3 de cursors </li> <li>Exercicis</li> <li>7. Missatges i excepcions</li> <li>8. Triggers </li> <li>Exercicis</li> <li>9. Creaci\u00f3 d'altres objectes basats en funcions </li> <li>9.1 Operadors <ul> <li>Exercicis</li> </ul> </li> <li>9.2 Operadors de classe</li> <li>9.3 Funcions d'agregat <ul> <li>Exercicis</li> </ul> </li> <li>Exercicis de tot el tema</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T07_PLpgSQL/exercicis0/#exercicis","title":"Exercicis","text":""},{"location":"BD-T07_PLpgSQL/exercicis0/#exercicis_1","title":"Exercicis","text":"<p>7.7.- Fes una funci\u00f3 anomenada POBLACIONS_ALTES que accepte 2 par\u00e0metres, el primer de tipus text que ser\u00e0 una comarca, i el segon num\u00e8ric que ser\u00e0 una altura. Ha de traure les poblacions de la comarca del primer par\u00e0metre que s\u00f3n m\u00e9s altes que el segon par\u00e0metre. Mostrarem el nom de la poblaci\u00f3 i l'altura. Aquest podria ser el resultat en executar-se:</p> <p></p> <p>7.8.- Fes una funci\u00f3 anomenada COMARQUES_NUMPOBLES sense par\u00e0metres que\u00a0traga per pantalla les comarques ordenades alfab\u00e8ticament amb el n\u00famero de pobles de cadascuna</p> <p></p> <p>7.9.- Fes una funci\u00f3 anomenada COMARQUES_NUMPOBLES_NUMINSTITUTS sense par\u00e0metres que\u00a0traga per pantalla les comarques ordenades alfab\u00e8ticament amb el n\u00famero de pobles de cadascuna i el n\u00famero d'instituts. En la consulta tindrem dos dificultats:</p> <ul> <li>Hem d'agafar totes les poblacions, fins i tot les que no tenen institut</li> <li>Com que hem d'accedir als instituts, per a comptar els pobles haurem de comptar els pobles\u00a0distints, i aix\u00ed si un poble t\u00e9 m\u00e9s d'un institut, no comptar-lo m\u00e9s d'una vegada</li> </ul> <p></p> <p>7.10.-\u00a0Fes una funci\u00f3 anomenada\u00a0NUM_HABITANTS_COMARCA que accepte un par\u00e0metre de tipus text, i torne el n\u00famero d'habitants d'eixa comarca</p> <p></p> <p>7.11.- Fer la funci\u00f3\u00a0COMARQUES_NUMHABITANTS sense par\u00e0metres per a traure per pantalla totes les comarques i el n\u00famero d'habitants. En la consulta has d'utilitzar obligat\u00f2riament la funci\u00f3 anterior</p> <p></p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T07_PLpgSQL/exercicis1/","title":"Exercicis1","text":"<p>Bases de Dades</p> <ul> <li>Tema 7: Programaci\u00f3 en PostgreSQL</li> <li>Objectius i Coneixements previs</li> <li>0. Nota inicial</li> <li>1. Introducci\u00f3</li> <li>2. PL/pgSQL</li> <li>3. Declaraci\u00f3 de variables</li> <li>4. Instruccions</li> <li>5. Funcions </li> <li>Exercicis</li> <li>6. Utilitzaci\u00f3 de cursors </li> <li>Exercicis</li> <li>7. Missatges i excepcions</li> <li>8. Triggers </li> <li>Exercicis</li> <li>9. Creaci\u00f3 d'altres objectes basats en funcions </li> <li>9.1 Operadors <ul> <li>Exercicis</li> </ul> </li> <li>9.2 Operadors de classe</li> <li>9.3 Funcions d'agregat <ul> <li>Exercicis</li> </ul> </li> <li>Exercicis de tot el tema</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T07_PLpgSQL/exercicis1/#exercicis","title":"Exercicis","text":""},{"location":"BD-T07_PLpgSQL/exercicis1/#exercicis_1","title":"Exercicis","text":"<p>En la Base de Dades geo_grup_9999x:</p> <p>7.12.- Crear un trigger anomenat TR_ALT_POS que controle que l'altura d'una nova poblaci\u00f3 siga estrictament positiva. La funci\u00f3 en la qual es basa es pot anomenar ALT_POS. </p> <p>7.13.- Modificar l'anterior per a que ho controle tamb\u00e9 quan es tracta d'una modificaci\u00f3.</p> <p>7.14.- Crear un trigger anomenat TR_EXT_0_1000 que controle que l'extensi\u00f3 d'un municipi (poblaci\u00f3) estiga obligat\u00f2riament entre 0 i 1000, i ha de ser sempre, tant si s'insereix una nova poblaci\u00f3 com si es modifica. Per\u00f2 en aquesta ocasi\u00f3, en compte de traure un error, el que farem ser\u00e0 modificar aquest valor: si \u00e9s major que 1000, li donarem el valor 1000, i si \u00e9s negatiu li posarem 0. Ho aconseguirem modificant NEW.extensio, i com la funci\u00f3 del trigger torna sempre NEW, doncs agafar\u00e0 el nou valor. Anomeneu a la funci\u00f3 EXT_0_1000.\u00a0</p> <p>7.15.- VOLUNTARI. En la taula POBLACIONS3 tenim controlat que la latitud introdu\u00efda siga correcta per mig del tipus lat, per\u00f2 no en la taula POBLACIONS, on \u00e9s de tipus VARCHAR(50) i per tant es podria introduir una latitud incorrecta molt f\u00e0cilment. Crea un trigger que controle que quan s'introdueix o es modifica la latitud de POBLACIONS siga correcta. Per a aix\u00f2</p> <ul> <li>Els car\u00e0cters 1 i 2 han de ser els graus, que han d'estar entre 00 i 90</li> <li>El car\u00e0cter 3 ha de ser \u00ba</li> <li>Els car\u00e0cters 4 i 5 formen els minuts, i han d'estar entre 00 i 59</li> <li>El car\u00e0cter 6 ha de ser '</li> <li>Els car\u00e0cters 7 i 8 formen els segons, i han d'estar entre 00 i 59</li> <li>El car\u00e0cter 9 ha de ser \"</li> <li>El car\u00e0cter 10 ha de ser N o S</li> <li>Si no s'acompleix alguna de les restriccions anteriors, ha d'eixir un error dient que la latitud ha d'estar entre 00\u00ba00'00\"N i 90\u00ba00'00\"N , o entre\u00a000\u00ba00'00\"S i 90\u00ba00'00\"S \u00a0</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T07_PLpgSQL/exercicis2/","title":"Exercicis2","text":"<p>Bases de Dades</p> <ul> <li>Tema 7: Programaci\u00f3 en PostgreSQL</li> <li>Objectius i Coneixements previs</li> <li>0. Nota inicial</li> <li>1. Introducci\u00f3</li> <li>2. PL/pgSQL</li> <li>3. Declaraci\u00f3 de variables</li> <li>4. Instruccions</li> <li>5. Funcions </li> <li>Exercicis</li> <li>6. Utilitzaci\u00f3 de cursors </li> <li>Exercicis</li> <li>7. Missatges i excepcions</li> <li>8. Triggers </li> <li>Exercicis</li> <li>9. Creaci\u00f3 d'altres objectes basats en funcions </li> <li>9.1 Operadors <ul> <li>Exercicis</li> </ul> </li> <li>9.2 Operadors de classe</li> <li>9.3 Funcions d'agregat <ul> <li>Exercicis</li> </ul> </li> <li>Exercicis de tot el tema</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T07_PLpgSQL/exercicis2/#exercicis","title":"Exercicis","text":""},{"location":"BD-T07_PLpgSQL/exercicis2/#exercicis_1","title":"Exercicis","text":"<p>En la Base de Dades geo_grup_9999x:</p> <p>7.16.- Crear els dos operadors de comparaci\u00f3 que quedaven per al tipus lat: &lt; i &lt;=. Primer haureu de crear les 2 funcions que queden: menor(lat,lat) i menor_igual(lat,lat)</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T07_PLpgSQL/exercicis3/","title":"Exercicis3","text":"<p>Bases de Dades</p> <ul> <li>Tema 7: Programaci\u00f3 en PostgreSQL</li> <li>Objectius i Coneixements previs</li> <li>0. Nota inicial</li> <li>1. Introducci\u00f3</li> <li>2. PL/pgSQL</li> <li>3. Declaraci\u00f3 de variables</li> <li>4. Instruccions</li> <li>5. Funcions </li> <li>Exercicis</li> <li>6. Utilitzaci\u00f3 de cursors </li> <li>Exercicis</li> <li>7. Missatges i excepcions</li> <li>8. Triggers </li> <li>Exercicis</li> <li>9. Creaci\u00f3 d'altres objectes basats en funcions </li> <li>9.1 Operadors <ul> <li>Exercicis</li> </ul> </li> <li>9.2 Operadors de classe</li> <li>9.3 Funcions d'agregat <ul> <li>Exercicis</li> </ul> </li> <li>Exercicis de tot el tema</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T07_PLpgSQL/exercicis3/#exercicis","title":"Exercicis","text":""},{"location":"BD-T07_PLpgSQL/exercicis3/#exercicis_1","title":"Exercicis","text":"<p>En la Base de Dades geo_grup_9999x:</p> <p>7.17.- Crear la funci\u00f3 d'agregat MIN per al tipus de dades lat.</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T07_PLpgSQL/exercicis_de_tot_el_tema/","title":"Exercicis de tot el tema","text":"<p>Bases de Dades</p> <ul> <li>Tema 7: Programaci\u00f3 en PostgreSQL</li> <li>Objectius i Coneixements previs</li> <li>0. Nota inicial</li> <li>1. Introducci\u00f3</li> <li>2. PL/pgSQL</li> <li>3. Declaraci\u00f3 de variables</li> <li>4. Instruccions</li> <li>5. Funcions </li> <li>Exercicis</li> <li>6. Utilitzaci\u00f3 de cursors </li> <li>Exercicis</li> <li>7. Missatges i excepcions</li> <li>8. Triggers </li> <li>Exercicis</li> <li>9. Creaci\u00f3 d'altres objectes basats en funcions </li> <li>9.1 Operadors <ul> <li>Exercicis</li> </ul> </li> <li>9.2 Operadors de classe</li> <li>9.3 Funcions d'agregat <ul> <li>Exercicis</li> </ul> </li> <li>Exercicis de tot el tema</li> </ul> <p>\u00ab Anterior</p>"},{"location":"BD-T07_PLpgSQL/exercicis_de_tot_el_tema/#exercicis-de-tot-el-tema","title":"Exercicis de tot el tema","text":""},{"location":"BD-T07_PLpgSQL/exercicis_de_tot_el_tema/#exercicis","title":"Exercicis","text":"<p>En la Base de Dades geo_grup_9999x:</p> <p>7.1.- Crea una funci\u00f3 anomenada DEU_Q, que traga els n\u00fameros del 1 al 10 i els seus quadrats. (Utilitza RAISE NOTICE).</p> <p>7.2.- Fes una altra funci\u00f3, IMP, que traga per pantalla els n\u00fameros imparells del 1 al 50. (Utilitza RAISE NOTICE).</p> <p>7.3.- Fes\u00a0una funci\u00f3 anomenada TAULA_MULT, per a que traga la taula de multiplicar del par\u00e0metre que se li ha de passar. (Utilitza RAISE NOTICE). Aquest podria ser el seu aspecte, en executar-la:</p> <p></p> <p>7.4.- Fes una funci\u00f3, anomenada MAX2, que tinga dos par\u00e0metres num\u00e8rics i que torne el m\u00e0xim entre aquestos dos. (Ara ja no s'ha d'utilitzar RAISE NOTICE).</p> <p>7.5.- Utilitza l'anterior per a crear MAX3. Has d'utilitzar obligat\u00f2riament la funci\u00f3 MAX2</p> <p>7.6.- (Voluntari) Fes la funci\u00f3 LAT_A_TEXT, tenint en compte que ha de quedar com en la taula POBLACIONS. Segurament la dificultat m\u00e9s gran ser\u00e0 aconseguir que apareguen les cometes despr\u00e9s dels minuts i dels segons.</p> <p>7.7.- Fes una funci\u00f3 anomeneda POBLACIONS_ALTES que accepte 2 par\u00e0metres, el primer de tipus text que ser\u00e0 una comarca, i el segon num\u00e8ric que ser\u00e0 una altura. Ha de traure les poblacions de la comarca del primer par\u00e0metre que s\u00f3n m\u00e9s altes que el segon par\u00e0metre. Mostrarem el nom de la poblaci\u00f3 i l'altura. Aquest podria ser el resultat en executar-se:</p> <p></p> <p>7.8.- Fes una funci\u00f3 anomenada\u00a0COMARQUES_NUMPOBLES\u00a0sense par\u00e0metres que\u00a0traga per pantalla les comarques ordenades alfab\u00e8ticament amb el n\u00famero de pobles de cadascuna</p> <p></p> <p>7.9.- Fes una funci\u00f3 anomenada\u00a0COMARQUES_NUMPOBLES_NUMINSTITUTS\u00a0sense par\u00e0metres que\u00a0traga per pantalla les comarques ordenades alfab\u00e8ticament amb el n\u00famero de pobles de cadascuna i el n\u00famero d'instituts. En la consulta tindrem dos dificultats:</p> <ul> <li>Hem d'agafar totes les poblacions, fins i tot les que no tenen institut</li> <li>Com que hem d'accedir als instituts, per a comptar els pobles haurem de comptar els pobles\u00a0distints, i aix\u00ed si un poble t\u00e9 m\u00e9s d'un institut, no comptar-lo m\u00e9s d'una vegada</li> </ul> <p></p> <p>7.10.-\u00a0Fes una funci\u00f3 anomenada\u00a0NUM_HABITANTS_COMARCA\u00a0que accepte un par\u00e0metre de tipus text, i torne el n\u00famero d'habitants d'eixa comarca</p> <p></p> <p>7.11.- Fer la funci\u00f3\u00a0COMARQUES_NUMHABITANTS\u00a0sense par\u00e0metres per a traure per pantalla totes les comarques i el n\u00famero d'habitants. En la consulta has d'utilitzar obligat\u00f2riament la funci\u00f3 anterior</p> <p></p> <p>7.12.- Crear un trigger anomenat TR_ALT_POS que controle que l'altura d'una nova poblaci\u00f3 siga estrictament positiva. La funci\u00f3 en la qual es basa es pot anomenar ALT_POS.</p> <p>7.13.- Modificar l'anterior per a que ho controle tamb\u00e9 quan es tracta d'una modificaci\u00f3.</p> <p>7.14.- Crear un trigger anomenat TR_EXT_0_1000 que controle que l'extensi\u00f3 d'un municipi (poblaci\u00f3) estiga obligat\u00f2riament entre 0 i 1000, i ha de ser sempre, tant si s'insereix una nova poblaci\u00f3 com si es modifica. Per\u00f2 en aquesta ocasi\u00f3, en compte de traure un error, el que farem ser\u00e0 modificar aquest valor: si \u00e9s major que 1000, li donarem el valor 1000, i si \u00e9s negatiu li posarem 0. Ho aconseguirem modificant NEW.extensio, i com la funci\u00f3 del trigger torna sempre NEW, doncs agafar\u00e0 el nou valor. Anomeneu a la funci\u00f3 EXT_0_1000.\u00a0</p> <p>7.15.-\u00a0VOLUNTARI. En la taula POBLACIONS3 tenim controlat que la latitud introdu\u00efda siga correcta per mig del tipus lat, per\u00f2 no en la taula POBLACIONS, on \u00e9s de tipus VARCHAR(50) i per tant es podria introduir una latitud incorrecta molt f\u00e0cilment. Crea un trigger que controle que quan s'introdueix o es modifica la latitud de POBLACIONS siga correcta. Per a aix\u00f2</p> <ul> <li>Els car\u00e0cter 1 i 2 han de ser els graus, que han d'estar entre 00 i 90</li> <li>El car\u00e0cter 3 ha de ser \u00ba</li> <li>Els car\u00e0cters 4 i 5 formen els minuts, i han d'estar entre 00 i 59</li> <li>El car\u00e0cter 6 ha de ser '</li> <li>Els car\u00e0cters 7 i 8 formen els segons, i han d'estar entre 00 i 59</li> <li>El car\u00e0cter 9 ha de ser \"</li> <li>El car\u00e0cter 10 ha de ser N o S</li> <li>Si no s'acompleix alguna de les restriccions anteriors, ha d'eixir un error dient que la latitud ha d'estar entre 00\u00ba00'00\"N i 90\u00ba00'00\"N , o entre\u00a000\u00ba00'00\"S i 90\u00ba00'00\"S</li> </ul> <p>7.16.- Crear els dos operadors de comparaci\u00f3 que quedaven per al tipus lat: &lt; i &lt;=</p> <p>7.17.- Crear la funci\u00f3 d'agregat MIN per al tipus de dades lat.</p> <p>7.18.- VOLUNTARI. Fes una funci\u00f3 en PL/pgSQL anomenada DENSITAT_CENTRES que donat el nom d'una comarca ens torne la quantitat de centres que t\u00e9 per unitat de superf\u00edcie.</p> <p></p> <p>7.19.- VOLUNTARI. Fes una funci\u00f3 anomenada introduir_institut(varchar,varchar,varchar,varchar,numeric,numeric), que accepte els par\u00e0metres indicats, un per cada camp de la taula INSTITUTS, que comprove:</p> <ul> <li>Que el primer par\u00e0metre, el codi de l\u2019institut, tinga exactament 8 car\u00e0cters i que comence per 03, 12 o 46 (els codis de prov\u00edncia)</li> <li>Que el codi postal estiga entre 3001 i 3999, 12001 i 12999 o 46001 i 46999</li> <li>Observa que el cod_m no caldr\u00e0 comprovar-lo, ja que \u00e9s clau externa i saltaria l\u2019error si no \u00e9s un codi de municipi existent</li> </ul> <p>En cas que tot siga correcte, s\u2019ha d\u2019introduir el nou institut. En cas contrari ha de saltar un error</p> <p>7.20.- VOLUNTARI. Fes un trigger per a portar una auditoria de la taula INSTITUTS per a controlar totes les modificacions que es fan en la taula INSTITUTS. Per a aix\u00f2 per cada actualitzaci\u00f3 feta, introduirem una fila en la taula nova anomenada AUDIT_INSTITUT (creant-la pr\u00e8viament si no existeix) amb la seg\u00fcent informaci\u00f3:</p> <ul> <li>num_a: \u00e9s la clau principal de la taula, que ser\u00e0 un autonum\u00e8ric (SERIAL)</li> <li>operacio: contindr\u00e0 el tipus d\u2019operaci\u00f3 d\u2019actualitzaci\u00f3 realitzada en la taula INSTITUTS, que podr\u00e0 ser: INSERT, DELETE o UPDATE</li> <li>codi_institut: codi del institut afectat per l\u2019operaci\u00f3 d\u2019actualitzaci\u00f3</li> <li>usuari: usuari que ha realitzat l\u2019operaci\u00f3 d\u2019actualitzaci\u00f3; es pot obtenir amb current_user;   podr\u00edem pensar que sempre ser\u00e0 el mateix usuari qui fa l\u2019operaci\u00f3, per\u00f2 en realitat ho pot fer tot usuari que tinga perm\u00eds d\u2019acc\u00e9s a la Base de Dades. En la imatge es pot observar com l\u2019usuari postgres tamb\u00e9 ha fet una operaci\u00f3 d\u2019actualitzaci\u00f3</li> <li>data_op: data-hora (timestamp) de l\u2019actualitzaci\u00f3; es pot obtenir amb la funci\u00f3 now()</li> </ul> <p>En la imatge s\u2019observa com s\u2019han fet 3 actualitzacions des del moment de creaci\u00f3 del trigger, l\u2019ultima d\u2019elles realitzada per l\u2019usuari postgres. Evidentment, la manera de comprovar-lo vosaltres \u00e9s fer operacions d'actualitzaci\u00f3 i el resultat ha de ser obligat\u00f2riament deferent:</p> <p></p> <p>\u00ab Anterior</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T07_PLpgSQL/objectius_i_coneixements_previs/","title":"Objectius i coneixements previs","text":"<p>Bases de Dades</p> <ul> <li>Tema 7: Programaci\u00f3 en PostgreSQL</li> <li>Objectius i Coneixements previs</li> <li>0. Nota inicial</li> <li>1. Introducci\u00f3</li> <li>2. PL/pgSQL</li> <li>3. Declaraci\u00f3 de variables</li> <li>4. Instruccions</li> <li>5. Funcions </li> <li>Exercicis</li> <li>6. Utilitzaci\u00f3 de cursors </li> <li>Exercicis</li> <li>7. Missatges i excepcions</li> <li>8. Triggers </li> <li>Exercicis</li> <li>9. Creaci\u00f3 d'altres objectes basats en funcions </li> <li>9.1 Operadors <ul> <li>Exercicis</li> </ul> </li> <li>9.2 Operadors de classe</li> <li>9.3 Funcions d'agregat <ul> <li>Exercicis</li> </ul> </li> <li>Exercicis de tot el tema</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T07_PLpgSQL/objectius_i_coneixements_previs/#objectius-i-coneixements-previs","title":"Objectius i Coneixements previs","text":""},{"location":"BD-T07_PLpgSQL/objectius_i_coneixements_previs/#objectius","title":"Objectius","text":"<p>Com tots els SGBD, PostgreSQL ofereix la possibilitat d'afegir funcions, triggers, ... </p> <p>Per a poder fer aquestos fragments de codi, en PostgreSQL es poden fer en molts llenguatges. Triarem un en concret, el PL/pgSQL i el veurem amb una determinada profunditat. Una vegada coneguda la seua sintaxi, crearem funcions escrites en aquest llenguatge. Insistirem en les funcions que utilitzen cursors. </p> <p>Especial \u00e8mfasi, tamb\u00e9, en la construcci\u00f3 de triggers, per ser elements que ajuden a definir millor una Base de Dades. </p> <p>Finalment acabarem de construir objectes que es basen en funcions. </p> <p>Els objectius, per tant seran:\u00a0 </p> <ul> <li> <p>Con\u00e9ixer la possibilitat de crear funcions amb m\u00e9s d'un llenguatge</p> </li> <li> <p>Dominar la sintaxi de PL/pgSQL</p> </li> <li> <p>Crear funcions en PL/pgSQL</p> </li> <li> <p>Utilitzaci\u00f3 correcta de cursors</p> </li> <li> <p>Creaci\u00f3 de triggers</p> </li> <li> <p>Creaci\u00f3 d'altres objectes, com operadors, operadors de classe i funcions d'agregat</p> </li> </ul> <p></p>"},{"location":"BD-T07_PLpgSQL/objectius_i_coneixements_previs/#coneixements-previs","title":"Coneixements previs","text":"<p>Els coneixements previs per a poder seguir aquest tema s\u00f3n 3:</p> <ul> <li>Con\u00e8ixer SQL (Tema 6)</li> <li>Con\u00e8ixer l'entorn d'un client de PostgreSQL, concretament DBeaver (Tema 6)</li> <li>Tenir coneixements de programaci\u00f3 (m\u00f2dul de Programaci\u00f3).</li> <li>Tenir coneixements de Bases de Dades Relacionals</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T08_BD_NoSQL/","title":"Index","text":"<p>Bases de Dades</p> <ul> <li>Tema 8: Bases de Dades NoSQL</li> <li>1 - Introducci\u00f3</li> <li>2 - BD Clau-Valor: Redis </li> <li>2.1 - Instal\u00b7laci\u00f3 de Redis</li> <li>2.2 - Entron gr\u00e0fic: Redis Desktop Manager</li> <li>2.3 - Utilitzaci\u00f3 de Redis <ul> <li>2.3.1 - Strings</li> <li>2.3.2 - Keys</li> <li>2.3.3 - Hash</li> <li>2.3.4 - List</li> <li>2.3.5 - Set</li> <li>2.3.6 - Set ordenat</li> </ul> </li> <li>3 - MongoDB </li> <li>3.1 - Estructura JSON</li> <li>3.2 - Instal\u00b7laci\u00f3 de MongoDB <ul> <li>3.2.1 - Connexi\u00f3 al servidor de l'Institut</li> </ul> </li> <li>3.3 - Utilitzaci\u00f3 de MongoDB <ul> <li>3.3.1 - Tipus de dades</li> <li>3.3.2 - Operacions b\u00e0siques</li> <li>3.2.3 - Operacions d'actualitzaci\u00f3 avan\u00e7ada </li> <li>3.3.3.1 - $set</li> <li>3.3.3.2 - $unset</li> <li>3.3.3.3 - $rename</li> <li>3.3.3.4 - $inc</li> <li>3.3.3.5 - Elements d'un array</li> <li>3.3.3.6 - Inserci\u00f3 en Arrays: $push</li> <li>3.3.3.7 - Eliminaci\u00f3 en arrays: $pop i $pull</li> <li>3.3.3.8 - Upsert</li> </ul> </li> <li>3.4 - Consulta de documents <ul> <li>3.4.1 - Par\u00e0metres de les funcions find() i findOne()</li> <li>3.4.2 - Operadors de les condicions</li> <li>3.4.3 - Agregaci\u00f3</li> </ul> </li> <li>4 - BD XML: eXist-db </li> <li>4.1 - Instal\u00b7laci\u00f3 d'eXist-db</li> <li>4.2 - Llenguatges de consultes XPATH i XQUERY <ul> <li>4.2.1 - XPATH </li> <li>4.2.1.1 - Vista d'arbre</li> <li>4.2.1.2 - Navegaci\u00f3</li> <li>4.2.1.3 - Seq\u00fc\u00e8ncies</li> <li>4.2.1.4 - Funcions</li> <li>4.2.2 - XQUERY </li> <li>4.2.2.1 - Consultes XQuery</li> <li>4.2.2.2 - Variables</li> <li>4.2.2.3 - Expressions avaluables</li> <li>4.2.2.4 - Expressions FLWOR</li> <li>4.2.2.5 - Alternatives</li> <li>4.2.2.6 - Exemple de consulta \"elaborada\"</li> <li>4.2.2.7 - Funcions de eXist-db de manipulaci\u00f3 de BD</li> </ul> </li> <li>5 - FIREBASE (voluntari) </li> <li>5.1 - Creaci\u00f3 d'una aplicaci\u00f3</li> <li>5.2 - Realtime Database (RD)</li> <li>5.3 - Cloud Firestore (CF)</li> <li>5.4 - Cloud Storage</li> <li>Exercicis</li> </ul> <p>Seg\u00fcent \u00bb</p>"},{"location":"BD-T08_BD_NoSQL/#tema-8-bases-de-dades-nosql","title":"Tema 8: Bases de Dades NoSQL","text":"<p>Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement SenseObraDerivada 4.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T08_BD_NoSQL/1__introducci/","title":"1  introducci","text":"<p>Bases de Dades</p> <ul> <li>Tema 8: Bases de Dades NoSQL</li> <li>1 - Introducci\u00f3</li> <li>2 - BD Clau-Valor: Redis </li> <li>2.1 - Instal\u00b7laci\u00f3 de Redis</li> <li>2.2 - Entron gr\u00e0fic: Redis Desktop Manager</li> <li>2.3 - Utilitzaci\u00f3 de Redis <ul> <li>2.3.1 - Strings</li> <li>2.3.2 - Keys</li> <li>2.3.3 - Hash</li> <li>2.3.4 - List</li> <li>2.3.5 - Set</li> <li>2.3.6 - Set ordenat</li> </ul> </li> <li>3 - MongoDB </li> <li>3.1 - Estructura JSON</li> <li>3.2 - Instal\u00b7laci\u00f3 de MongoDB <ul> <li>3.2.1 - Connexi\u00f3 al servidor de l'Institut</li> </ul> </li> <li>3.3 - Utilitzaci\u00f3 de MongoDB <ul> <li>3.3.1 - Tipus de dades</li> <li>3.3.2 - Operacions b\u00e0siques</li> <li>3.2.3 - Operacions d'actualitzaci\u00f3 avan\u00e7ada </li> <li>3.3.3.1 - $set</li> <li>3.3.3.2 - $unset</li> <li>3.3.3.3 - $rename</li> <li>3.3.3.4 - $inc</li> <li>3.3.3.5 - Elements d'un array</li> <li>3.3.3.6 - Inserci\u00f3 en Arrays: $push</li> <li>3.3.3.7 - Eliminaci\u00f3 en arrays: $pop i $pull</li> <li>3.3.3.8 - Upsert</li> </ul> </li> <li>3.4 - Consulta de documents <ul> <li>3.4.1 - Par\u00e0metres de les funcions find() i findOne()</li> <li>3.4.2 - Operadors de les condicions</li> <li>3.4.3 - Agregaci\u00f3</li> </ul> </li> <li>4 - BD XML: eXist-db </li> <li>4.1 - Instal\u00b7laci\u00f3 d'eXist-db</li> <li>4.2 - Llenguatges de consultes XPATH i XQUERY <ul> <li>4.2.1 - XPATH </li> <li>4.2.1.1 - Vista d'arbre</li> <li>4.2.1.2 - Navegaci\u00f3</li> <li>4.2.1.3 - Seq\u00fc\u00e8ncies</li> <li>4.2.1.4 - Funcions</li> <li>4.2.2 - XQUERY </li> <li>4.2.2.1 - Consultes XQuery</li> <li>4.2.2.2 - Variables</li> <li>4.2.2.3 - Expressions avaluables</li> <li>4.2.2.4 - Expressions FLWOR</li> <li>4.2.2.5 - Alternatives</li> <li>4.2.2.6 - Exemple de consulta \"elaborada\"</li> <li>4.2.2.7 - Funcions de eXist-db de manipulaci\u00f3 de BD</li> </ul> </li> <li>5 - FIREBASE (voluntari) </li> <li>5.1 - Creaci\u00f3 d'una aplicaci\u00f3</li> <li>5.2 - Realtime Database (RD)</li> <li>5.3 - Cloud Firestore (CF)</li> <li>5.4 - Cloud Storage</li> <li>Exercicis</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T08_BD_NoSQL/1__introducci/#1-introduccio","title":"1 - Introducci\u00f3","text":"<p>En els \u00faltims anys estan eixint noves Bases de Dades que estan fugint del que ells anomenen \"rigidesa\" de les Bases de Dades Relacionals, on les dades estan molt estructurades: taules amb camps perfectament definits, i amb les restriccions que hem vist que es poden crear.</p> <p>I si vulgu\u00e9rem guardar dades poc estructurades? Per exemple dels usuaris d'una determinada organitzaci\u00f3, que no sempre ens guardem la mateixa informaci\u00f3: unes vegades ens guardem el tel\u00e8fon, altres no, altres ens guardem m\u00e9s d'un tel\u00e8fon; altres vegades ens volem guardar la seua p\u00e0gina web, altres vegades les aficions, ... En el model relacional, molt estructurat, haur\u00edem de preveure tots els camps necessaris, i en cas de que sorgira la necessitat d'una nova informaci\u00f3 haur\u00edem de canviar l'estructura de la taula.</p> <p>O un altre exemple, volem guardar senzillament unes quantes \"variables\" de forma permanent. Podria ser per exemple guardar les prefer\u00e8ncies de l'usuari en una aplicaci\u00f3 per a dispositius m\u00f2bils. Si ho disseny\u00e0rem en una taula, seria una taula amb molts camps, per\u00f2 que despr\u00e9s nom\u00e9s hi haur\u00e0 una fila, la de l'usuari.</p> <p>Un altre exemple seria guardar informaci\u00f3 de documents XML o JSON, els est\u00e0ndars d'intercanvi d'informaci\u00f3. En el Model Relacional haur\u00edem de guardar el document XML o JSON pr\u00e0cticament en un camp, tot junt, i seria cost\u00f3s buscar dins de l'estructura XML o JSON.</p> <p>Per a salvar aquestos inconvenients mencionats han eixit una s\u00e8rie d'iniciatives noves que s'han agrupat en el terme NoSQL (Not Only SQL). S\u00f3n en definitiva Bases de Dades que no estan basades en el Model Relacional, i que en determinades ocasions poden ser m\u00e9s eficients que les Bases de Dades Relacionals precisament per fugir de la rigidesa que proporciona aquest model, amb dades tan ben estructurades. El terme clau \u00e9s \"en determinades ocasions\", \u00e9s a dir, per a guardar un determinat tipus d'informaci\u00f3. Aix\u00ed ens trobarem distints tipus de Bases de Dades NoSQL, depenent del tipus d'informaci\u00f3 que vulguen guardar:</p> <ul> <li>Bases de Dades Orientades a Objectes, per a poder guardar objectes, com per exemple DB4O</li> <li>Bases de Dades Orientades a Documents (o simplement Bases de Dades Documentals), per a guardar documents de determinats tipus: XML, JSON, ... Per exemple eXist que guarda documents XML, o MongoDB que guarda la informaci\u00f3 en un format similar a JSON.</li> <li>Bases de Dades Clau-Valor, per a guardar informaci\u00f3 de forma molt senzilla, guardant \u00fanicament la clau (el nom de la propietat) i el seu valor</li> <li>Bases de Dades Orientades a Grafs, per a guardar estructures com els grafs, on hi ha una s\u00e8rie de nodes i arestes que comunicarien (relacionarien) els nodes</li> <li>Altres tipus com les Bases de Dades Multivalor, les Bases de Dades Tabulars, Bases de Dades Orientades a Columna, ...</li> </ul> <p>En aquest tema nom\u00e9s veurem una Base de Dades Clau-Valor, Redis, per la seua senzillesa; i dues Bases de Dades documentals, MongoDB, per la seua utilitzaci\u00f3 actual, i eXist-db, que guarda documents XML.</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement SenseObraDerivada 4.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T08_BD_NoSQL/21__installaci_de_redis/","title":"21  installaci de redis","text":"<p>Bases de Dades</p> <ul> <li>Tema 8: Bases de Dades NoSQL</li> <li>1 - Introducci\u00f3</li> <li>2 - BD Clau-Valor: Redis </li> <li>2.1 - Instal\u00b7laci\u00f3 de Redis</li> <li>2.2 - Entron gr\u00e0fic: Redis Desktop Manager</li> <li>2.3 - Utilitzaci\u00f3 de Redis <ul> <li>2.3.1 - Strings</li> <li>2.3.2 - Keys</li> <li>2.3.3 - Hash</li> <li>2.3.4 - List</li> <li>2.3.5 - Set</li> <li>2.3.6 - Set ordenat</li> </ul> </li> <li>3 - MongoDB </li> <li>3.1 - Estructura JSON</li> <li>3.2 - Instal\u00b7laci\u00f3 de MongoDB <ul> <li>3.2.1 - Connexi\u00f3 al servidor de l'Institut</li> </ul> </li> <li>3.3 - Utilitzaci\u00f3 de MongoDB <ul> <li>3.3.1 - Tipus de dades</li> <li>3.3.2 - Operacions b\u00e0siques</li> <li>3.2.3 - Operacions d'actualitzaci\u00f3 avan\u00e7ada </li> <li>3.3.3.1 - $set</li> <li>3.3.3.2 - $unset</li> <li>3.3.3.3 - $rename</li> <li>3.3.3.4 - $inc</li> <li>3.3.3.5 - Elements d'un array</li> <li>3.3.3.6 - Inserci\u00f3 en Arrays: $push</li> <li>3.3.3.7 - Eliminaci\u00f3 en arrays: $pop i $pull</li> <li>3.3.3.8 - Upsert</li> </ul> </li> <li>3.4 - Consulta de documents <ul> <li>3.4.1 - Par\u00e0metres de les funcions find() i findOne()</li> <li>3.4.2 - Operadors de les condicions</li> <li>3.4.3 - Agregaci\u00f3</li> </ul> </li> <li>4 - BD XML: eXist-db </li> <li>4.1 - Instal\u00b7laci\u00f3 d'eXist-db</li> <li>4.2 - Llenguatges de consultes XPATH i XQUERY <ul> <li>4.2.1 - XPATH </li> <li>4.2.1.1 - Vista d'arbre</li> <li>4.2.1.2 - Navegaci\u00f3</li> <li>4.2.1.3 - Seq\u00fc\u00e8ncies</li> <li>4.2.1.4 - Funcions</li> <li>4.2.2 - XQUERY </li> <li>4.2.2.1 - Consultes XQuery</li> <li>4.2.2.2 - Variables</li> <li>4.2.2.3 - Expressions avaluables</li> <li>4.2.2.4 - Expressions FLWOR</li> <li>4.2.2.5 - Alternatives</li> <li>4.2.2.6 - Exemple de consulta \"elaborada\"</li> <li>4.2.2.7 - Funcions de eXist-db de manipulaci\u00f3 de BD</li> </ul> </li> <li>5 - FIREBASE (voluntari) </li> <li>5.1 - Creaci\u00f3 d'una aplicaci\u00f3</li> <li>5.2 - Realtime Database (RD)</li> <li>5.3 - Cloud Firestore (CF)</li> <li>5.4 - Cloud Storage</li> <li>Exercicis</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T08_BD_NoSQL/21__installaci_de_redis/#21-installacio-de-redis","title":"2.1 - Instal\u00b7laci\u00f3 de Redis","text":"<p>Redis est\u00e0 constru\u00eft per a Linux. Tamb\u00e9 funciona, per\u00f2, des de Windows com veurem una miqueta m\u00e9s avant.</p> <p>Instal\u00b7laci\u00f3 en Linux</p> <p>El lloc des d'on baixar-lo \u00e9s la p\u00e0gina oficial:</p> <p>http://redis.io</p> <p>En el moment de fer aquestos apunts, l'\u00faltima versi\u00f3 estable \u00e9s la 6.2.6.</p> <p>Ens baixem el fitxer, el descomprimim, i despr\u00e9s des d'una terminal ens situem en el directori on s'ha descomprimit i fem make per a generar els executables. Despr\u00e9s de molts avisos, s'hauria d'haver instal\u00b7lat b\u00e9, i sense ser necessaris els permisos d'administrador. Aquest seria el resum d'accions, fetes totes elles des d'una terminal (per\u00f2 no cal descomprimir des d'una terminal) i havent-nos situat pr\u00e8viament en el lloc on est\u00e0 el fitxer baixat. Tamb\u00e9 suposarem que el fitxer est\u00e0 col\u00b7locat en el lloc on volem que estiga instal\u00b7lat de forma definitiva. Recordeu que podeu descomprimir-lo de la manera que us resulte m\u00e9s c\u00f2moda:</p> <p>tar xzf redis-6.2.6.tar.gz</p> <p>o tamb\u00e9 el podeu descomprimir des del navegador d'arxius, com ja hav\u00edem comentat.</p> <p>Una vegada descomprimit, des d'una terminal ens hem de situar en el directori acabat de descomprimir i fer make</p> <p>cd redis-6.2.6</p> <p>make</p> <p>Amb a\u00e7\u00f2 s'haurien d'haver generat els executables, i ja hauria de funcionar. Recordeu que no fan falta permisos d'administrador per a realitzar a\u00e7\u00f2.</p> <p>Per a posar en marxa el servidor, quasi que el m\u00e9s c\u00f2mode ser\u00e0 obrir un terminal, situar-nos en el directori\u00a0redis-6.2.6/src i des d'ahi executar redis-server. Hauria d'eixir una finestra similar a la seg\u00fcent, amb m\u00e9s o menys avisos (observeu que al principi de la imatge estan les ordres donades).</p> <p></p> <p>Entre altres coses diu que el servidor est\u00e0 en marxa esperant connexions al port 6379, que \u00e9s el port per defecte de Redis. Aquesta finestra del terminal l'haurem de deixar en marxa. Quan vulguem detenir Redis, senzillament fem ctrl-c, i detindrem l'execuci\u00f3 de forma ordenada (guardant-se les dades no guardades i tancant-se tot b\u00e9)</p> <p>Podr\u00edem haver executat directament redis-server fent-li doble-clic des d'un explorador d'arxius, per exemple, per\u00f2 aleshores no podr\u00edem parar-lo i en definitiva controlar-lo tan c\u00f2modament.</p> <p>Per a fer una connexi\u00f3 des d'un client, tamb\u00e9 des d'un terminal (un altre) executem redis-cli:</p> <p></p> <p>Ja ha fet la connexi\u00f3, concretament a localhost (127.0.0.1) i al port 6379, que hav\u00edem quedat que \u00e9s el port per defecte.</p> <p>Comprovem que s\u00ed que funciona. Encara no hi ha dades, perqu\u00e8 l'acabem d'instal\u00b7lar. I recordeu que \u00e9s una Base de Dades clau-valor. Per a crear una entrada posarem set clau valor. Per a obtenir-la posarem get clau. En la imatge es pot comprovar:</p> <p></p> <p>Hem creat una clau anomenada clau_1 amb el valor primera, com es pot comprovar en el moment d'obtenir-la amb get.</p> <p>Si al programa redis-cli no li posem par\u00e0metres, intentar\u00e0 fer una connexi\u00f3 local (localhost). Si volem connectar a un servidor situat en una altra adre\u00e7a, li la posem amb el par\u00e0metre -h adre\u00e7a, per exemple:</p> <p>redis-cli -h 192.168.1.26</p> <p>Ac\u00ed tenim una imatge des d'una connexi\u00f3 externa, des d'un altre equip:</p> <p></p> <p>Nota: Connexi\u00f3 al servidor de l'Institut</p> <p>En el servidor de dades de l'Institut tamb\u00e9 tenim instal\u00b7lat redis. Per\u00f2 per a no tenir accessos no desitjats, cal una autenticaci\u00f3. Senzillament \u00e9s posar el comando\u00a0auth amb la contrasenya:\u00a0auth ieselcaminas.ad</p> <p>En la seg\u00fcent imatge es veu com s\u00ed que hem pogut connectar</p> <p></p> <p>Instal\u00b7laci\u00f3 en Windows de 64 bits</p> <p>Encara que Redis est\u00e0 constru\u00eft per a Linux, hi ha versions per a Windows, preferiblement de 64 bits. Tamb\u00e9 podrem trobar versions de 32 bits, per\u00f2 molt m\u00e9s antigues.</p> <p>El lloc on poder baixar els fitxers de Redis per a Windows de 64 bits \u00e9s:</p> <p>https://github.com/MSOpenTech/redis/releases</p> <p></p> <p>Ens baixem el zip, el descomprimim, i ja ho tindrem disponible (sense fer make ni res). Observeu com en la carpeta resultat de descomprimir ja tenim els executables redis-server i redis-cli que s\u00f3n els que ens interessen:</p> <p></p> <p>Executem redis-server directament i ja el tindrem en marxa:</p> <p></p> <p>Executem tamb\u00e9 el redis-cli i el resultat ser\u00e0 el mateix que en Linux. Hem incorporar una nova clau i despr\u00e9s obtenim el seu contingut:</p> <p></p> <p>Instal\u00b7laci\u00f3 en Windows de 32 bits</p> <p>\u00c9s un poc m\u00e9s complicada de trobar. I sobretot, \u00e9s una versi\u00f3 prou m\u00e9s antiga. Podem descarregar-la de la seg\u00fcent adre\u00e7a:</p> <p>https://github.com/rgl/redis/downloads</p> <p></p> <p>Aquesta s\u00ed que \u00e9s d'instal\u00b7laci\u00f3 (no de descompressi\u00f3 \u00fanicament). La documentaci\u00f3 suggereix que s'active com un servei. Per aix\u00f2, en la llista de programes de l'Inici no est\u00e0 el server, \u00fanicament el client. Per\u00f2 el podem trobar en el directori on s'ha instal\u00b7lat: C:\\Archivos de programa\\Redis. Trobarem tant redis-server.exe com redis-cli.exe. Posem en marxa el servidor fent doble-clic a redis-server.exe:</p> <p></p> <p>I ja nom\u00e9s falta posar en marxa el client (des del men\u00fa o fent doble-clic a\u00a0redis-cli.exe). En la imatge es veu com podem connectar, crear una clau i tornar el seu valor:</p> <p></p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement SenseObraDerivada 4.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T08_BD_NoSQL/22__entron_grfic_redis_desktop_manager/","title":"22  entron grfic redis desktop manager","text":"<p>Bases de Dades</p> <ul> <li>Tema 8: Bases de Dades NoSQL</li> <li>1 - Introducci\u00f3</li> <li>2 - BD Clau-Valor: Redis </li> <li>2.1 - Instal\u00b7laci\u00f3 de Redis</li> <li>2.2 - Entron gr\u00e0fic: Redis Desktop Manager</li> <li>2.3 - Utilitzaci\u00f3 de Redis <ul> <li>2.3.1 - Strings</li> <li>2.3.2 - Keys</li> <li>2.3.3 - Hash</li> <li>2.3.4 - List</li> <li>2.3.5 - Set</li> <li>2.3.6 - Set ordenat</li> </ul> </li> <li>3 - MongoDB </li> <li>3.1 - Estructura JSON</li> <li>3.2 - Instal\u00b7laci\u00f3 de MongoDB <ul> <li>3.2.1 - Connexi\u00f3 al servidor de l'Institut</li> </ul> </li> <li>3.3 - Utilitzaci\u00f3 de MongoDB <ul> <li>3.3.1 - Tipus de dades</li> <li>3.3.2 - Operacions b\u00e0siques</li> <li>3.2.3 - Operacions d'actualitzaci\u00f3 avan\u00e7ada </li> <li>3.3.3.1 - $set</li> <li>3.3.3.2 - $unset</li> <li>3.3.3.3 - $rename</li> <li>3.3.3.4 - $inc</li> <li>3.3.3.5 - Elements d'un array</li> <li>3.3.3.6 - Inserci\u00f3 en Arrays: $push</li> <li>3.3.3.7 - Eliminaci\u00f3 en arrays: $pop i $pull</li> <li>3.3.3.8 - Upsert</li> </ul> </li> <li>3.4 - Consulta de documents <ul> <li>3.4.1 - Par\u00e0metres de les funcions find() i findOne()</li> <li>3.4.2 - Operadors de les condicions</li> <li>3.4.3 - Agregaci\u00f3</li> </ul> </li> <li>4 - BD XML: eXist-db </li> <li>4.1 - Instal\u00b7laci\u00f3 d'eXist-db</li> <li>4.2 - Llenguatges de consultes XPATH i XQUERY <ul> <li>4.2.1 - XPATH </li> <li>4.2.1.1 - Vista d'arbre</li> <li>4.2.1.2 - Navegaci\u00f3</li> <li>4.2.1.3 - Seq\u00fc\u00e8ncies</li> <li>4.2.1.4 - Funcions</li> <li>4.2.2 - XQUERY </li> <li>4.2.2.1 - Consultes XQuery</li> <li>4.2.2.2 - Variables</li> <li>4.2.2.3 - Expressions avaluables</li> <li>4.2.2.4 - Expressions FLWOR</li> <li>4.2.2.5 - Alternatives</li> <li>4.2.2.6 - Exemple de consulta \"elaborada\"</li> <li>4.2.2.7 - Funcions de eXist-db de manipulaci\u00f3 de BD</li> </ul> </li> <li>5 - FIREBASE (voluntari) </li> <li>5.1 - Creaci\u00f3 d'una aplicaci\u00f3</li> <li>5.2 - Realtime Database (RD)</li> <li>5.3 - Cloud Firestore (CF)</li> <li>5.4 - Cloud Storage</li> <li>Exercicis</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T08_BD_NoSQL/22__entron_grfic_redis_desktop_manager/#22-entron-grafic-redis-desktop-manager","title":"2.2 - Entron gr\u00e0fic: Redis Desktop Manager","text":"<p>Com hem comprovat en el punt anterior, la connexi\u00f3 que fem des del client \u00e9s a trav\u00e9s de consola. Per tant haurem de posar comandos i ens contestar\u00e0 la seua execuci\u00f3.</p> <p>Podem instal\u00b7lar-nos una aplicaci\u00f3 gr\u00e0fica que fa\u00e7a un poc m\u00e9s atractiva la presentaci\u00f3.</p> <p>La instal\u00b7laci\u00f3 d'aquesta eina \u00e9s totalment optativa, no cal que la feu. De fet, ens els exemples que es mostraran en tot el tema nom\u00e9s s'utilitzar\u00e0 el mode consola.</p> <p>\u00c9s completament independent del servidor, i podem instal\u00b7lar-la perfectament sense tenir el servidor, utilitzant-la aleshores per a connectar a un servidor remot.</p> <p>El podem baixar lliurement de la p\u00e0gina oficial redisdesktop.com on podrem comprovar que tenim per a totes les plataformes:</p> <p></p> <p>Instal\u00b7laci\u00f3 en Ubuntu</p> <p>Ens baixarem el paquet que haurem d'instal\u00b7lar b\u00e9 amb el Centre de programari d'Ubuntu, o b\u00e9 senzillament des d'una terminal, situats al directori on l'hem baixat fent</p> <p>sudo dkpg -i redis-desktop-manager_0.8.3-120_amd64.deb</p> <p>Com veieu fan falta permisos d'administrador, i si no hi ha problemes de depend\u00e8ncies, s'instal\u00b7lar\u00e0 sense problemes.</p> <p>Com que \u00e9s igual que en Windows, si teniu curiositat mireu la imatge posterior de quan est\u00e0 instal\u00b7lat, per a comprovar la connexi\u00f3 al servior.</p> <p>Instal\u00b7laci\u00f3 en Windows</p> <p>En Windows el que ens baixarem \u00e9s un exe. L'executem (permetent l'execuci\u00f3 quan ho pregunta Windows) i li podem donar a totes les opcions per defecte.</p> <p>Quan l'executem, ens eixir\u00e0 la seg\u00fcent pantalla:</p> <p></p> <p>Podem comprovar que baix tenim el bot\u00f3 per a connectar a un servidor. Per a connectar al servidor local li posem com a adre\u00e7a localhost. En la imatge s'ha fet el test de connexi\u00f3.</p> <p></p> <p>Per a connectar a un remot, posarem la seua adre\u00e7a:</p> <p></p> <p>En aquesta imatge es veu com hem connectat perfectament als dos servidors. Es pot comprovar com en cadascun d'ells hi ha m\u00e9s d'una Base de Dades, per\u00f2 nosaltres nom\u00e9s utilitzarem la db0, que \u00e9s a la que es connecta per defecte.</p> <p></p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement SenseObraDerivada 4.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T08_BD_NoSQL/231__strings/","title":"231  strings","text":"<p>Bases de Dades</p> <ul> <li>Tema 8: Bases de Dades NoSQL</li> <li>1 - Introducci\u00f3</li> <li>2 - BD Clau-Valor: Redis </li> <li>2.1 - Instal\u00b7laci\u00f3 de Redis</li> <li>2.2 - Entron gr\u00e0fic: Redis Desktop Manager</li> <li>2.3 - Utilitzaci\u00f3 de Redis <ul> <li>2.3.1 - Strings</li> <li>2.3.2 - Keys</li> <li>2.3.3 - Hash</li> <li>2.3.4 - List</li> <li>2.3.5 - Set</li> <li>2.3.6 - Set ordenat</li> </ul> </li> <li>3 - MongoDB </li> <li>3.1 - Estructura JSON</li> <li>3.2 - Instal\u00b7laci\u00f3 de MongoDB <ul> <li>3.2.1 - Connexi\u00f3 al servidor de l'Institut</li> </ul> </li> <li>3.3 - Utilitzaci\u00f3 de MongoDB <ul> <li>3.3.1 - Tipus de dades</li> <li>3.3.2 - Operacions b\u00e0siques</li> <li>3.2.3 - Operacions d'actualitzaci\u00f3 avan\u00e7ada </li> <li>3.3.3.1 - $set</li> <li>3.3.3.2 - $unset</li> <li>3.3.3.3 - $rename</li> <li>3.3.3.4 - $inc</li> <li>3.3.3.5 - Elements d'un array</li> <li>3.3.3.6 - Inserci\u00f3 en Arrays: $push</li> <li>3.3.3.7 - Eliminaci\u00f3 en arrays: $pop i $pull</li> <li>3.3.3.8 - Upsert</li> </ul> </li> <li>3.4 - Consulta de documents <ul> <li>3.4.1 - Par\u00e0metres de les funcions find() i findOne()</li> <li>3.4.2 - Operadors de les condicions</li> <li>3.4.3 - Agregaci\u00f3</li> </ul> </li> <li>4 - BD XML: eXist-db </li> <li>4.1 - Instal\u00b7laci\u00f3 d'eXist-db</li> <li>4.2 - Llenguatges de consultes XPATH i XQUERY <ul> <li>4.2.1 - XPATH </li> <li>4.2.1.1 - Vista d'arbre</li> <li>4.2.1.2 - Navegaci\u00f3</li> <li>4.2.1.3 - Seq\u00fc\u00e8ncies</li> <li>4.2.1.4 - Funcions</li> <li>4.2.2 - XQUERY </li> <li>4.2.2.1 - Consultes XQuery</li> <li>4.2.2.2 - Variables</li> <li>4.2.2.3 - Expressions avaluables</li> <li>4.2.2.4 - Expressions FLWOR</li> <li>4.2.2.5 - Alternatives</li> <li>4.2.2.6 - Exemple de consulta \"elaborada\"</li> <li>4.2.2.7 - Funcions de eXist-db de manipulaci\u00f3 de BD</li> </ul> </li> <li>5 - FIREBASE (voluntari) </li> <li>5.1 - Creaci\u00f3 d'una aplicaci\u00f3</li> <li>5.2 - Realtime Database (RD)</li> <li>5.3 - Cloud Firestore (CF)</li> <li>5.4 - Cloud Storage</li> <li>Exercicis</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T08_BD_NoSQL/231__strings/#231-strings","title":"2.3.1 - Strings","text":"<p>\u00c9s el tipus de dades m\u00e9s senzill, m\u00e9s b\u00e0sic. Ser\u00e0 una cadena de car\u00e0cters de tipus binary safe en la qual normalment guardarem les habituals cadenes de car\u00e0cters, per\u00f2 que tamb\u00e9 podr\u00edem guardar imatges o objectes serialitzats de Java. La grand\u00e0ria m\u00e0xima \u00e9s de 512Mb.</p> <p>Ara veurem els comandos m\u00e9s habituals que afecten a aquest tipus. Com a norma general, hem de ser conscients que els comandos no s\u00f3n sensibles a maj\u00fascules o min\u00fascules, per\u00f2 les claus i els valors s\u00ed que ho s\u00f3n. \u00c9s a dir, el comando get tamb\u00e9 es pot escriure GET o Get. Per\u00f2 la clau Hola \u00e9s diferent de la clau hola.</p> <p>Concretament, els comandos que veurem seran:</p> <p>get\u00a0 ,\u00a0 set\u00a0 , setex\u00a0 ,\u00a0 psetex\u00a0 ,\u00a0 mget\u00a0 ,\u00a0 mset\u00a0 ,\u00a0 append\u00a0 ,\u00a0 strlen\u00a0 ,\u00a0 getrange\u00a0 ,\u00a0 setrange\u00a0 ,\u00a0 incr\u00a0 ,\u00a0 decr\u00a0 ,\u00a0 incrby\u00a0 ,\u00a0 decrby</p> <p>GET</p> <p>Sintaxi</p> <p>get clau</p> <p>Torna el valor de la clau especificada, sempre que siga de tipus String. Si la clau \u00e9s d'un altre tipus, donar\u00e0 error. I si la clau no existeix, tornar\u00e0 el valor especial nil .</p> <p>Exemples</p> <p>127.0.0.1:6379&gt; get clau_1 \"primera\" 127.0.0.1:6379&gt; get clau_2 (nil)</p> <p>SET</p> <p>Sintaxi</p> <p>set clau valor</p> <p>Assigna a la clau especificada com a primer par\u00e0metre el valor especificat com a segon par\u00e0metre. Si el valor consta de m\u00e9s d'una paraula, haur\u00e0 d'anar entre cometes dobles.</p> <p>Redis sempre guardar\u00e0 el valor com a string, encara que nosaltres pensem que li passem un valor enter o real.</p> <p>I una altra caracter\u00edstica \u00e9s que si la clau existeix ja, matxacar\u00e0 el seu contingut, com era de esperar.</p> <p>Exemples</p> <p>127.0.0.1:6379&gt; set clau_2 segona OK 127.0.0.1:6379&gt; set text \"Un text amb m\u00e9s d'una paraula\" OK</p> <p>127.0.0.1:6379&gt; set quatre 4 OK 127.0.0.1:6379&gt; get quatre \"4\" 127.0.0.1:6379&gt; set pi 3.14159265359 OK 127.0.0.1:6379&gt; get pi \"3.14159265359\"</p> <p>Nota</p> <p>Si poseu algun accent, en tornar el valor (fent get) us semblar\u00e0 que no s'ha guardat b\u00e9. S\u00ed que s'haur\u00e0 guardat b\u00e9, el que passa \u00e9s que posteriorment no es visualitza b\u00e9 en fer el get. Es pot comprovar entrant en el client amb l'opci\u00f3 raw , \u00e9s a dir redis-cli --raw</p> <p>El comando SET t\u00e9 una opci\u00f3 molt interessant, que servir\u00e0 per a donar un temps de vida a la clau, transcorregut el qual desapareix la clau (amb el seu valor, clar). A\u00e7\u00f2 s'anomena temps d'expiraci\u00f3 i s'aconsegueix amb el par\u00e0metre EX del comando SET seguit del n\u00famero de segons que volem que dure la clau.</p> <p>Exemple</p> <p>127.0.0.1:6379&gt; set clau_3 tercera ex 10 OK 127.0.0.1:6379&gt; get clau_3 \"tercera\" 127.0.0.1:6379&gt; get clau_3 (nil)</p> <p>Primer s\u00ed que existeix, per\u00f2 al cap de 10 segons ha deixat d'existir.</p> <p>De forma equivalent es pot expressar el temps en milisegons, amb el par\u00e0metre PX en compte de EX.</p> <p>Hav\u00edem comentat al principi, que si en el moment de fer el SET la clau ja existia, es reempla\u00e7ar\u00e0 el seu contingut. Podem modificar aquest comportament amb el par\u00e0metre NX (Not eXists): si no existia la clau, la crear\u00e0 amb el valor, per\u00f2 si ja existia, la deixar\u00e0 com estava. Ens ho indicar\u00e0 dient OK en cas de crear-la i NIL en cas de no crear-la perqu\u00e0 ja existia.</p> <p>127.0.0.1:6379&gt; set clau_4 quarta nx OK 127.0.0.1:6379&gt; set clau_1 quarta nx (nil) 127.0.0.1:6379&gt; get clau_4 \"quarta\" 127.0.0.1:6379&gt; get clau_1 \"primera\"</p> <p>I de forma inversa, si posem el par\u00e0metre XX, si ja existeix la clau, reempla\u00e7ar\u00e0 el valor, per\u00f2 si no existia, no far\u00e0 res.</p> <p>SETEX</p> <p>Sintaxi</p> <p>setex clau segons valor</p> <p>Funciona igual que el SET amb el par\u00e0metre EX: crear\u00e0 la clau amb el valor, per\u00f2 tindr\u00e0 una exist\u00e8ncia dels segons indicats.</p> <p>PSETEX</p> <p>Sintaxi</p> <p>psetex clau milisegons valor</p> <p>Funciona igual que l'anterior, per\u00f2 el que especifiquem s\u00f3n els milisegons d'exist\u00e8ncia.</p> <p>MGET</p> <p>Sintaxi</p> <p>mget clau1 clau2 clauN</p> <p>Torna una llista de valors, els de les claus indicades.</p> <p>Exemple</p> <p>127.0.0.1:6379&gt; set mes1 gener OK 127.0.0.1:6379&gt; set mes2 febrer OK 127.0.0.1:6379&gt; set mes3 mar\u00e7 OK 127.0.0.1:6379&gt; mget mes1 mes2 mes3 \\1) \"gener\" \\2) \"febrer\" \\3) \"mar\\xc3\\xa7\"</p> <p>Nota </p> <p>Recordeu que els car\u00e0cters com vocals accentuades, \u00e7, \u00f1, ... s'han introdu\u00eft b\u00e9, per\u00f2 potser no es visualiten b\u00e9. Es pot evitar entrant en el client d'aquesta manera redis-cli --raw</p> <p>Si alguna de les claus no exiteix, tornar\u00e0 nil en el seu lloc</p> <p>MSET</p> <p>Sintaxi</p> <p>mset clau1 valor1 clau2 valor2 clauN valorN</p> <p>Assigna els valors corresponents a les claus. \u00c9s una operaci\u00f3 at\u00f2mica: es posen (o canvien) tots els valors a l'hora.</p> <p>127.0.0.1:6379&gt; mset mes4 abril mes5 maig mes6 juny mes7 juliol OK 127.0.0.1:6379&gt; mget mes1 mes2 mes3 mes4 mes5 mes6 mes7 \\1) \"gener\" \\2) \"febrer\" \\3) \"mar\\xc3\\xa7\" \\4) \"abril\" \\5) \"maig\" \\6) \"juny\" \\7) \"juliol\"</p> <p>Si no vulgu\u00e9rem reempla\u00e7ar valors, podr\u00edem utilitzar el comando MSETNX, totalment equivalent, per\u00f2 haur\u00edem de tenir en compte que si alguna ja existeix i per tant no pot canviar el valor, no faria l'operaci\u00f3, \u00e9s a dir, tampoc crearia les altres.</p> <p>APPEND</p> <p>Sintaxi</p> <p>append clau1 valor1</p> <p>Si la clau no existeix la crea assignant-li el valor (com el SET), per\u00f2 si ja existeix, concatena el valor al final de la cadena que ja hi havia.</p> <p>127.0.0.1:6379&gt; append salutacio Hola (integer) 4 127.0.0.1:6379&gt; get salutacio \"Hola\" 127.0.0.1:6379&gt; append salutacio \", com va?\" (integer) 13 127.0.0.1:6379&gt; get salutacio \"Hola, com va?\"</p> <p>STRLEN</p> <p>Sintaxi</p> <p>strlen clau1</p> <p>Torna el n\u00famero de car\u00e0cters que hi ha en el valor de la clau. Si la clau no existeix, tornar\u00e0 0. Si la clau \u00e9s d'un altre tipus, tornar\u00e0 error.</p> <p>127.0.0.1:6379&gt; strlen salutacio (integer) 13 127.0.0.1:6379&gt; strlen sal (integer) 0</p> <p>GETRANGE</p> <p>Sintaxi</p> <p>getrange clau1 inici final</p> <p>Extrau una subcadena del valor de la clau (ha de ser de tipus String) des del n\u00famero de car\u00e0cter d'inici fins al n\u00famero del final (ambd\u00f3s inclosos). El primer car\u00e0cter \u00e9s el 0. Si posem de final un n\u00famero major que l'\u00faltim, igual ho traur\u00e0 fins el final.</p> <p>Es poden posar tamb\u00e9 valor negatius que ens ajuden a agafar la cadena des del final. El -1 \u00e9s l'\u00faltim car\u00e0cter, el -2 el pen\u00faltim, ... I es poden barrejar n\u00fameros positius i negatius. Aix\u00ed,\u00a0 rang 0 -1 \u00e9s tota la cadena.</p> <p>127.0.0.1:6379&gt; getrange salutacio 1 3 \"ola\" 127.0.0.1:6379&gt; getrange salutacio 6 50 \"com va?\" 127.0.0.1:6379&gt; getrange salutacio 6 -1 \"com va?\" 127.0.0.1:6379&gt; getrange salutacio -7 -5 \"com\" 127.0.0.1:6379&gt; getrange salutacio 0 -1 \"Hola, com va?\"</p> <p>SETRANGE</p> <p>Sintaxi</p> <p>setrange clau1 despla\u00e7ament valor</p> <p>Substitueix part del valor de la cadena, a partir del despla\u00e7ament, amb el vaolr proporcionat. No s'admenten en despla\u00e7ament valors negatius.</p> <p>127.0.0.1:6379&gt; get salutacio \"Hola, com va?\" 127.0.0.1:6379&gt; setrange salutacio 4 \". C\" (integer) 13 127.0.0.1:6379&gt; get salutacio \"Hola. Com va?\"</p> <p>INCR</p> <p>Sintaxi</p> <p>incr clau1</p> <p>A pesar de que Redis guarda els strings com a tals, com a cadenes de car\u00e0cters, en algunes ocasions \u00e9s capa\u00e7 de transformar la cadena a un n\u00famero. \u00c9s el cas del comando INCR, que converteix la cadena en un enter (si pot) i incrementa aquest valor en una unitat.</p> <p>Si la clau no existeix la crea assumint que valia 0, i per tant despr\u00e9s valdr\u00e0 1.</p> <p>Si el valor de la clau no era un n\u00famero enter, donar\u00e0 un error.</p> <p>127.0.0.1:6379&gt; set compt1 20 OK 127.0.0.1:6379&gt; get compt1 \"20\" 127.0.0.1:6379&gt; incr compt1 (integer) 21 127.0.0.1:6379&gt; get compt1 \"21\" 127.0.0.1:6379&gt; incr compt2 (integer) 1 127.0.0.1:6379&gt; get compt2 \"1\" 127.0.0.1:6379&gt; incr clau_1 (error) ERR value is not an integer or out of range 127.0.0.1:6379&gt; set compt3 4.25 OK 127.0.0.1:6379&gt; incr compt3 (error) ERR value is not an integer or out of range</p> <p>DECR</p> <p>Sintaxi</p> <p>decr clau1</p> <p>Decrementa en una unitat el valor de la clau (senpre que siga un enter).</p> <p>Pot agafar valors negatius.</p> <p>Si la clau no existeix la crea assumint que valia 0, i per tant despr\u00e9s valdr\u00e0 -1.</p> <p>127.0.0.1:6379&gt; decr compt2 (integer) 0 127.0.0.1:6379&gt; decr compt2 (integer) -1 127.0.0.1:6379&gt; get compt2 \"-1\"</p> <p>INCRBY</p> <p>Sintaxi</p> <p>incrby clau1 increment</p> <p>Incrementa el valor de la clau en el n\u00famero d'unitats indicat en increment (el valor ha de ser enter). L'increment pot ser negatiu.</p> <p>127.0.0.1:6379&gt; incrby compt1 10 (integer) 31 127.0.0.1:6379&gt; incrby compt1 -20 (integer) 11</p> <p>DECRBY</p> <p>Sintaxi</p> <p>decrby clau1 decrement</p> <p>Decrementa el valor de la clau el n\u00famero d'unitat indicat en decrement.</p> <p>127.0.0.1:6379&gt; decrby compt1 5 (integer) 6</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement SenseObraDerivada 4.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T08_BD_NoSQL/232__keys/","title":"232  keys","text":"<p>Bases de Dades</p> <ul> <li>Tema 8: Bases de Dades NoSQL</li> <li>1 - Introducci\u00f3</li> <li>2 - BD Clau-Valor: Redis </li> <li>2.1 - Instal\u00b7laci\u00f3 de Redis</li> <li>2.2 - Entron gr\u00e0fic: Redis Desktop Manager</li> <li>2.3 - Utilitzaci\u00f3 de Redis <ul> <li>2.3.1 - Strings</li> <li>2.3.2 - Keys</li> <li>2.3.3 - Hash</li> <li>2.3.4 - List</li> <li>2.3.5 - Set</li> <li>2.3.6 - Set ordenat</li> </ul> </li> <li>3 - MongoDB </li> <li>3.1 - Estructura JSON</li> <li>3.2 - Instal\u00b7laci\u00f3 de MongoDB <ul> <li>3.2.1 - Connexi\u00f3 al servidor de l'Institut</li> </ul> </li> <li>3.3 - Utilitzaci\u00f3 de MongoDB <ul> <li>3.3.1 - Tipus de dades</li> <li>3.3.2 - Operacions b\u00e0siques</li> <li>3.2.3 - Operacions d'actualitzaci\u00f3 avan\u00e7ada </li> <li>3.3.3.1 - $set</li> <li>3.3.3.2 - $unset</li> <li>3.3.3.3 - $rename</li> <li>3.3.3.4 - $inc</li> <li>3.3.3.5 - Elements d'un array</li> <li>3.3.3.6 - Inserci\u00f3 en Arrays: $push</li> <li>3.3.3.7 - Eliminaci\u00f3 en arrays: $pop i $pull</li> <li>3.3.3.8 - Upsert</li> </ul> </li> <li>3.4 - Consulta de documents <ul> <li>3.4.1 - Par\u00e0metres de les funcions find() i findOne()</li> <li>3.4.2 - Operadors de les condicions</li> <li>3.4.3 - Agregaci\u00f3</li> </ul> </li> <li>4 - BD XML: eXist-db </li> <li>4.1 - Instal\u00b7laci\u00f3 d'eXist-db</li> <li>4.2 - Llenguatges de consultes XPATH i XQUERY <ul> <li>4.2.1 - XPATH </li> <li>4.2.1.1 - Vista d'arbre</li> <li>4.2.1.2 - Navegaci\u00f3</li> <li>4.2.1.3 - Seq\u00fc\u00e8ncies</li> <li>4.2.1.4 - Funcions</li> <li>4.2.2 - XQUERY </li> <li>4.2.2.1 - Consultes XQuery</li> <li>4.2.2.2 - Variables</li> <li>4.2.2.3 - Expressions avaluables</li> <li>4.2.2.4 - Expressions FLWOR</li> <li>4.2.2.5 - Alternatives</li> <li>4.2.2.6 - Exemple de consulta \"elaborada\"</li> <li>4.2.2.7 - Funcions de eXist-db de manipulaci\u00f3 de BD</li> </ul> </li> <li>5 - FIREBASE (voluntari) </li> <li>5.1 - Creaci\u00f3 d'una aplicaci\u00f3</li> <li>5.2 - Realtime Database (RD)</li> <li>5.3 - Cloud Firestore (CF)</li> <li>5.4 - Cloud Storage</li> <li>Exercicis</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T08_BD_NoSQL/232__keys/#232-keys","title":"2.3.2 - Keys","text":"<p>Ara anem a veure comandos que ens permeten treballar amb les claus, per a buscar-les, veure si existeixen, etc. No importar\u00e0 el tipus de les claus (de moment nom\u00e9s hem treballat amb claus de tipus String, per\u00f2 si ja en tingu\u00e9rem dels altres tipus tamb\u00e9 es veurien afectades). En cap cas d'aquestos comandos accedirem al valor de les claus.</p> <p>La llista de comandos de claus que veurem \u00e9s:</p> <p>keys\u00a0 ,\u00a0 exists\u00a0 ,\u00a0 del\u00a0 ,\u00a0 type\u00a0 ,\u00a0 rename\u00a0 ,\u00a0 renamenx\u00a0 ,\u00a0 expire\u00a0 ,\u00a0 pexpire\u00a0 ,\u00a0 ttl\u00a0 ,\u00a0 pttl\u00a0 ,\u00a0 persist</p> <p>KEYS</p> <p>Sintaxi</p> <p>keys patr\u00f3</p> <p>Torna totes les claus que coincideixen amb el patr\u00f3. En el patr\u00f3 podem posar car\u00e0cters comod\u00ed:</p> <ul> <li>* : equival a 0 o m\u00e9s car\u00e0cters. Per exemple \"Mar*a\" podria tornar \"Mara\", \"Maria\", \"Marta\", \"Margarita\", ...</li> <li>? : equival exactament a un car\u00e0cter. Per exemple \"Mar?a\" podria tornar \"Maria\" o \"Marta\",\u00a0 per\u00f2 no \"Mara\", \"Margarita\", ...</li> <li>[ab] : ser\u00e0 cert si en el lloc corresponent hi ha un dels car\u00e0cters especificats entre els claud\u00e0tors. Per exemple \"Mar[it]a\" podria tornar \"Maria\" o \"Marta\", per\u00f2 no \"Marga\"</li> </ul> <p>Per a tornar totes les claus utilitzarem keys *</p> <p>127.0.0.1:6379&gt; keys * 1) \"mes3\" 2) \"salutacio\" 3) \"pi\" 4) \"clau_4\" 5) \"compt2\" 6) \"mes6\" 7) \"mes1\" 8) \"mes4\" 9) \"clau_1\" \\10) \"compt3\" \\11) \"quatre\" \\12) \"mes7\" \\13) \"mes2\" \\14) \"mes5\" \\15) \"compt1\" \\16) \"clau_2\" \\17) \"text\"</p> <p>127.0.0.1:6379&gt; keys mes? \\1) \"mes5\" \\2) \"mes3\" \\3) \"mes7\" \\4) \"mes2\" \\5) \"mes6\" \\6) \"mes4\" \\7) \"mes1\"</p> <p>127.0.0.1:6379&gt; keys c* \\1) \"clau_4\" \\2) \"compt2\" \\3) \"clau_1\" \\4) \"compt3\" \\5) \"compt1\" \\6) \"clau_2\"</p> <p>127.0.0.1:6379&gt; keys mes[125] \\1) \"mes5\" \\2) \"mes2\" \\3) \"mes1\"</p> <p>Nota</p> <p>L'ordre en el qual es mostraran les claus no t\u00e9 per qu\u00e8 ser igual per a tots nosaltres. \u00c9l m\u00e9s normal \u00e9s que cadasc\u00fa de nosaltres tinga un ordre diferent. A\u00e7\u00f2 t\u00e9 a veure amb els conjunts (set), un tipus de dades que veurem m\u00e9s avant.</p> <p>EXISTS</p> <p>Sintaxi</p> <p>exists clau</p> <p>Torna 1 si la clau existeix, i 0 si no existeix. No importa de quin tipus siga la clau.</p> <p>127.0.0.1:6379&gt; exists clau_1 (integer) 1 127.0.0.1:6379&gt; exists clau_25 (integer) 0</p> <p>DEL</p> <p>Sintaxi</p> <p>del clau1 clau2 clauN</p> <p>Elimina la clau o claus especificades. Si posem m\u00e9s d'una clau i alguna no existeix, la ignorar\u00e0 i s\u00ed que esborrar\u00e0 les altres.</p> <p>127.0.0.1:6379&gt; del compt2 (integer) 1 127.0.0.1:6379&gt; del mes6 mes7 mes8 mes9 (integer) 2</p> <p>Observeu que ens indica quantes claus ha esborrat. En el primer exemple ha esborrat la clau especificada, i en el segon diu que ha esborrat 2, que seran mes6 i mes7, ja que mes8 i mes9 no existien.</p> <p>TYPE</p> <p>Sintaxi</p> <p>type clau</p> <p>Torna el tipus de la clau especificada. Els valors possibles s\u00f3n:</p> <ul> <li>string</li> <li>hash</li> <li>list</li> <li>set</li> <li>zset (conjunt ordenat)</li> </ul> <p>Exemples</p> <p>127.0.0.1:6379&gt; type clau_1 string</p> <p>RENAME</p> <p>Sintaxi</p> <p>rename clau novaclau</p> <p>Canvia el nom de la clau a la clau nova, conservant el valor. D\u00f3na error si la clau antiga no existeix. Si la clau nova ja existia reempla\u00e7ar\u00e0 el seu valor.</p> <p>Exemples</p> <p>127.0.0.1:6379&gt; get salutacio \"Hola. Com va?\" 127.0.0.1:6379&gt; rename salutacio saludar OK 127.0.0.1:6379&gt; get salutacio (nil) 127.0.0.1:6379&gt; get saludar \"Hola. Com va?\" 127.0.0.1:6379&gt; rename clau_22 clau_23 (error) ERR no such key</p> <p>RENAMENX</p> <p>Sintaxi</p> <p>renamenx clau novaclau</p> <p>Igual que l'anterior per\u00f2 \u00fanicament si la clau nova no existia. Si ja existia no fa res (tornant 0 per a indicar-h0).</p> <p>Exemples</p> <p>127.0.0.1:6379&gt; renamenx compt1 compt3 (integer) 0 127.0.0.1:6379&gt; get compt1 \"9\"</p> <p>Estem suposant que la clau compt3 ja existeix</p> <p>EXPIRE</p> <p>Sintaxi</p> <p>expire clau segons</p> <p>Assigna com a temps d'expiraci\u00f3 de la clau els segons especificats. Si ja tenia temps d'expiraci\u00f3, el modifica posant-li aquest valor especificat.</p> <p>En cas que a una clau amb temps d'expiraci\u00f3 li canviem el nom amb RENAME, continuar\u00e0 amb temps d'expiraci\u00f3 que li quedava.</p> <p>PEXPIRE</p> <p>Sintaxi</p> <p>pexpire clau milisegons</p> <p>El mateix per\u00f2 en milisegons</p> <p>TTL</p> <p>Sintaxi</p> <p>ttl clau</p> <p>Torna el temps de vida (fins l'expiraci\u00f3) d'una clau. Si la clau no t\u00e9 temps d'expiraci\u00f3, torna -1.</p> <p>Exemples</p> <p>127.0.0.1:6379&gt; expire compt3 10 (integer) 1 127.0.0.1:6379&gt; ttl compt3 (integer) 6 127.0.0.1:6379&gt; ttl compt3 (integer) 3 127.0.0.1:6379&gt; ttl compt3 (integer) 0 127.0.0.1:6379&gt; get compt3 (nil)</p> <p>PTTL</p> <p>Sintaxi</p> <p>pttl clau</p> <p>Igual que l'anterior, per\u00f2 ens torna el temps en milisegons.</p> <p>PERSIST</p> <p>Sintaxi</p> <p>persist clau</p> <p>Elimina el temps d'expiraci\u00f3 d'una clau, si \u00e9s que en tenia. Ara la clau no expirar\u00e0 mai.</p> <p>Exemples</p> <p>127.0.0.1:6379&gt; expire compt1 20 (integer) 1 127.0.0.1:6379&gt; ttl compt1 (integer) 12 127.0.0.1:6379&gt; ttl compt1 (integer) 7 127.0.0.1:6379&gt; persist compt1 (integer) 1 127.0.0.1:6379&gt; ttl compt1 (integer) -1 127.0.0.1:6379&gt; get compt1 \"9\"</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement SenseObraDerivada 4.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T08_BD_NoSQL/233__hash/","title":"233  hash","text":"<p>Bases de Dades</p> <ul> <li>Tema 8: Bases de Dades NoSQL</li> <li>1 - Introducci\u00f3</li> <li>2 - BD Clau-Valor: Redis </li> <li>2.1 - Instal\u00b7laci\u00f3 de Redis</li> <li>2.2 - Entron gr\u00e0fic: Redis Desktop Manager</li> <li>2.3 - Utilitzaci\u00f3 de Redis <ul> <li>2.3.1 - Strings</li> <li>2.3.2 - Keys</li> <li>2.3.3 - Hash</li> <li>2.3.4 - List</li> <li>2.3.5 - Set</li> <li>2.3.6 - Set ordenat</li> </ul> </li> <li>3 - MongoDB </li> <li>3.1 - Estructura JSON</li> <li>3.2 - Instal\u00b7laci\u00f3 de MongoDB <ul> <li>3.2.1 - Connexi\u00f3 al servidor de l'Institut</li> </ul> </li> <li>3.3 - Utilitzaci\u00f3 de MongoDB <ul> <li>3.3.1 - Tipus de dades</li> <li>3.3.2 - Operacions b\u00e0siques</li> <li>3.2.3 - Operacions d'actualitzaci\u00f3 avan\u00e7ada </li> <li>3.3.3.1 - $set</li> <li>3.3.3.2 - $unset</li> <li>3.3.3.3 - $rename</li> <li>3.3.3.4 - $inc</li> <li>3.3.3.5 - Elements d'un array</li> <li>3.3.3.6 - Inserci\u00f3 en Arrays: $push</li> <li>3.3.3.7 - Eliminaci\u00f3 en arrays: $pop i $pull</li> <li>3.3.3.8 - Upsert</li> </ul> </li> <li>3.4 - Consulta de documents <ul> <li>3.4.1 - Par\u00e0metres de les funcions find() i findOne()</li> <li>3.4.2 - Operadors de les condicions</li> <li>3.4.3 - Agregaci\u00f3</li> </ul> </li> <li>4 - BD XML: eXist-db </li> <li>4.1 - Instal\u00b7laci\u00f3 d'eXist-db</li> <li>4.2 - Llenguatges de consultes XPATH i XQUERY <ul> <li>4.2.1 - XPATH </li> <li>4.2.1.1 - Vista d'arbre</li> <li>4.2.1.2 - Navegaci\u00f3</li> <li>4.2.1.3 - Seq\u00fc\u00e8ncies</li> <li>4.2.1.4 - Funcions</li> <li>4.2.2 - XQUERY </li> <li>4.2.2.1 - Consultes XQuery</li> <li>4.2.2.2 - Variables</li> <li>4.2.2.3 - Expressions avaluables</li> <li>4.2.2.4 - Expressions FLWOR</li> <li>4.2.2.5 - Alternatives</li> <li>4.2.2.6 - Exemple de consulta \"elaborada\"</li> <li>4.2.2.7 - Funcions de eXist-db de manipulaci\u00f3 de BD</li> </ul> </li> <li>5 - FIREBASE (voluntari) </li> <li>5.1 - Creaci\u00f3 d'una aplicaci\u00f3</li> <li>5.2 - Realtime Database (RD)</li> <li>5.3 - Cloud Firestore (CF)</li> <li>5.4 - Cloud Storage</li> <li>Exercicis</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T08_BD_NoSQL/233__hash/#233-hash","title":"2.3.3 - Hash","text":"<p>Ja hav\u00edem comentat que el tipus Hash \u00e9s una esp\u00e8cie de registre, amb subcamps (en realitat haur\u00edem de dir sub-claus). Pot tenir qualsevol n\u00famero de subcamps que seran de tipus String.</p> <p>Redis \u00e9s molt eficient en quant a l'espai que ocupen els Hash, i sobretot en el temps de recuperaci\u00f3 de les dades.</p> <p>Els comandos que vam veure per al String no es poden aplicar al Hash. Tanmateix els comandos del Hash s\u00f3n molt similars a aquells, comen\u00e7ant sempre per H.</p> <p>Veurem els seg\u00fcents comandos:</p> <p>hset\u00a0 ,\u00a0 hget\u00a0 ,\u00a0 hgetall\u00a0 ,\u00a0 hdel\u00a0 ,\u00a0 hkeys\u00a0 ,\u00a0 hvals ,\u00a0 hmget\u00a0\u00a0 ,\u00a0 hmset\u00a0 ,\u00a0 hexists\u00a0 ,\u00a0 hsetnx\u00a0 ,\u00a0 hincrby</p> <p>HSET</p> <p>Sintaxi</p> <p>hset clau camp valor</p> <p>Assigna al camp especificat de la clau especificada el valor especificat. Si el valor consta de m\u00e9s d'una paraula, haur\u00e0 d'anar entre cometes dobles.</p> <p>Si la clau no existia, la crear\u00e0, i si ja existia, senzillament afegir\u00e0 el camp. I si d'aquesta clau\u00a0 ja existia el camp, modificar\u00e0 el seu valor.</p> <p>Evidentment, en claus diferents poden haver camps amb els mateixos noms.</p> <p>Exemples</p> <p>127.0.0.1:6379&gt; hset empleat_1 nom Andreu (integer) 1 127.0.0.1:6379&gt; hset empleat_1 departament 10 (integer) 1 127.0.0.1:6379&gt; hset empleat_1 sou 1000.0 (integer) 1</p> <p>127.0.0.1:6379&gt; hset empleat_2 nom Berta (integer) 1 127.0.0.1:6379&gt; hset empleat_2 sou 1500.0 (integer) 1</p> <p>HGET</p> <p>Sintaxi</p> <p>hget clau camp</p> <p>Torna el valor del camp de la clau. Si no existia (el camp o la clau) torna nil. Nom\u00e9s podem especificar un camp.</p> <p>Exemples</p> <p>127.0.0.1:6379&gt; hget empleat_1 nom \"Andreu\" 127.0.0.1:6379&gt; hget empleat_1 departament \"10\" 127.0.0.1:6379&gt; hget empleat_2 nom \"Berta\" 127.0.0.1:6379&gt; hget empleat_2 departament (nil)</p> <p>HGETALL</p> <p>Sintaxi</p> <p>hgetall clau</p> <p>Torna una llista amb tots els camps i els seus valors de la clau. La seq\u00fc\u00e8ncia \u00e9s: camp1 valor1 camp2 valor2 ... Per\u00f2 no ens podem fiar que l'ordre siga el mateix ordre que quan el vam definir.</p> <p>Exemples</p> <p>127.0.0.1:6379&gt; hgetall empleat_1 \\1) \"nom\" \\2) \"Andreu\" \\3) \"departament\" \\4) \"10\" \\5) \"sou\" \\6) \"1000.0\"</p> <p>HDEL</p> <p>Sintaxi</p> <p>hdel clau camp1 camp2 campN</p> <p>Elimina el o els camps especificats. Si no existeixen algun d'ells, senzillament l'ignora i si que elimina els altres.</p> <p>Exemples</p> <p>127.0.0.1:6379&gt; hdel empleat_1 departament (integer) 1 127.0.0.1:6379&gt; hgetall empleat_1 \\1) \"nom\" \\2) \"Andreu\" \\3) \"sou\" \\4) \"1000.0\"</p> <p>HKEYS</p> <p>Sintaxi</p> <p>hkeys clau</p> <p>Torna una llista amb els camps de la clau. Si la clau no existia, torna una llista buida</p> <p>Exemples</p> <p>127.0.0.1:6379&gt; hkeys empleat_1 \\1) \"nom\" \\2) \"sou\"</p> <p>HVALS</p> <p>Sintaxi</p> <p>hvals clau</p> <p>Torna una llista amb els valors (\u00fanicament els valors) de tots els camps de la clau. Si la clau no existia, torna una llista buida</p> <p>Exemples</p> <p>127.0.0.1:6379&gt; hvals empleat_1 \\1) \"Andreu\" \\2) \"1000.0\"</p> <p>Altres Comandos</p> <p>Tamb\u00e9 existeixen altres comandos, de funcionament com cabria esperar (els hem vist tots en el cas de String):</p> <ul> <li>hmget: Torna m\u00e9s d'un camp de la clau</li> <li>hmset: assigna m\u00e9s d'un camp a una clau</li> <li>hexists: indica si existeix el subcamp de la clau</li> <li>hsetnx: assigna \u00fanicament en cas de que no existisca el camp.</li> <li>hincrby: incrementa el camp de la clau</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement SenseObraDerivada 4.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T08_BD_NoSQL/234__list/","title":"234  list","text":"<p>Bases de Dades</p> <ul> <li>Tema 8: Bases de Dades NoSQL</li> <li>1 - Introducci\u00f3</li> <li>2 - BD Clau-Valor: Redis </li> <li>2.1 - Instal\u00b7laci\u00f3 de Redis</li> <li>2.2 - Entron gr\u00e0fic: Redis Desktop Manager</li> <li>2.3 - Utilitzaci\u00f3 de Redis <ul> <li>2.3.1 - Strings</li> <li>2.3.2 - Keys</li> <li>2.3.3 - Hash</li> <li>2.3.4 - List</li> <li>2.3.5 - Set</li> <li>2.3.6 - Set ordenat</li> </ul> </li> <li>3 - MongoDB </li> <li>3.1 - Estructura JSON</li> <li>3.2 - Instal\u00b7laci\u00f3 de MongoDB <ul> <li>3.2.1 - Connexi\u00f3 al servidor de l'Institut</li> </ul> </li> <li>3.3 - Utilitzaci\u00f3 de MongoDB <ul> <li>3.3.1 - Tipus de dades</li> <li>3.3.2 - Operacions b\u00e0siques</li> <li>3.2.3 - Operacions d'actualitzaci\u00f3 avan\u00e7ada </li> <li>3.3.3.1 - $set</li> <li>3.3.3.2 - $unset</li> <li>3.3.3.3 - $rename</li> <li>3.3.3.4 - $inc</li> <li>3.3.3.5 - Elements d'un array</li> <li>3.3.3.6 - Inserci\u00f3 en Arrays: $push</li> <li>3.3.3.7 - Eliminaci\u00f3 en arrays: $pop i $pull</li> <li>3.3.3.8 - Upsert</li> </ul> </li> <li>3.4 - Consulta de documents <ul> <li>3.4.1 - Par\u00e0metres de les funcions find() i findOne()</li> <li>3.4.2 - Operadors de les condicions</li> <li>3.4.3 - Agregaci\u00f3</li> </ul> </li> <li>4 - BD XML: eXist-db </li> <li>4.1 - Instal\u00b7laci\u00f3 d'eXist-db</li> <li>4.2 - Llenguatges de consultes XPATH i XQUERY <ul> <li>4.2.1 - XPATH </li> <li>4.2.1.1 - Vista d'arbre</li> <li>4.2.1.2 - Navegaci\u00f3</li> <li>4.2.1.3 - Seq\u00fc\u00e8ncies</li> <li>4.2.1.4 - Funcions</li> <li>4.2.2 - XQUERY </li> <li>4.2.2.1 - Consultes XQuery</li> <li>4.2.2.2 - Variables</li> <li>4.2.2.3 - Expressions avaluables</li> <li>4.2.2.4 - Expressions FLWOR</li> <li>4.2.2.5 - Alternatives</li> <li>4.2.2.6 - Exemple de consulta \"elaborada\"</li> <li>4.2.2.7 - Funcions de eXist-db de manipulaci\u00f3 de BD</li> </ul> </li> <li>5 - FIREBASE (voluntari) </li> <li>5.1 - Creaci\u00f3 d'una aplicaci\u00f3</li> <li>5.2 - Realtime Database (RD)</li> <li>5.3 - Cloud Firestore (CF)</li> <li>5.4 - Cloud Storage</li> <li>Exercicis</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T08_BD_NoSQL/234__list/#234-list","title":"2.3.4 - List","text":"<p>Les Llistes en Redis s\u00f3n llistes de Strings ordenades, on cada element est\u00e0 associat a un \u00edndex de la llista. Es poden recuperar els elements tant de forma ordenada (per l'\u00edndex) com accedint directament a una posici\u00f3.</p> <p>Els elements es poden afegir al principi, al final o tamb\u00e9 en una posici\u00f3 determinada.</p> <p>La llista es crea en el moment en qu\u00e8 s'insereix el primer element, i desapareix quan llevem l'\u00faltim element que quede.</p> <p>Estan molt ben optimitzades per a la inserci\u00f3 i per a la consulta.</p> <p>Els comandos que afecten a les llistes comencen quasi tots per L, excepte alguns que comencen per R indicant que fan l'operaci\u00f3 per la dreta.</p> <p>Per cert, els valors dels elements es poden repetir.</p> <p>La llista de comandos que afecten a llistes que veurem \u00e9s:</p> <p>lpush\u00a0 ,\u00a0 rpush\u00a0 ,\u00a0 lpop\u00a0 ,\u00a0 rpop\u00a0 ,\u00a0 lset\u00a0 ,\u00a0 lindex\u00a0 ,\u00a0 linsert\u00a0 ,\u00a0 lrange\u00a0 ,\u00a0 llen\u00a0 ,\u00a0 lrem\u00a0 ,\u00a0 ltrim</p> <p>LPUSH</p> <p>Sintaxi</p> <p>lpush clau valor1 valor2 valorN</p> <p>Introdueix els valors a la llista (creant la clau si \u00e9s necessari). Les insereix en la primera posici\u00f3, o tamb\u00e9 podr\u00edem dir que per l'esquerra (Left PUSH), imaginant que els elements estan ordenats d'esquerra a dreta. Si posem m\u00e9s d'un valor, s'aniran introduint sempre en la primera posici\u00f3. El comando tornar\u00e0 el n\u00famero d'elements (strings) de la llista despr\u00e9s de la inserci\u00f3.</p> <p>Exemples</p> <p>127.0.0.1:6379&gt; lpush llista1 primera segona tercera (integer) 3</p> <p>127.0.0.1:6379&gt; lrange llista1 0 -1 \\1) \"tercera\" \\2) \"segona\" \\3) \"primera\"</p> <p>127.0.0.1:6379&gt; lpush llista1 quarta cinquena (integer) 5</p> <p>127.0.0.1:6379&gt; lrange llista1 0 -1 \\1) \"cinquena\" \\2) \"quarta\" \\3) \"tercera\" \\4) \"segona\" \\5) \"primera\"</p> <p>Nota </p> <p>Per a veure el contingut de la llista utilitzarem el comando lrange llista 0 -1, que torna la llista sencera. Veurem de forma m\u00e9s completa aquest comando amb posterioritat.</p> <p>RPUSH</p> <p>Sintaxi</p> <p>rpush clau valor1 valor2 valorN</p> <p>Introdueix els valors a la llista (creant la clau si \u00e9s necessari). Les insereix en l'\u00faltima posici\u00f3, o tamb\u00e9 podr\u00edem dir que per la dreta (Right PUSH), imaginant que els elements estan ordenats d'esquerra a dreta.\u00a0 El comando tornar\u00e0 el n\u00famero d'elements (strings) de la llista despr\u00e9s de la inserci\u00f3.</p> <p>Exemples</p> <p>127.0.0.1:6379&gt; rpush llista1 sisena setena (integer) 7</p> <p>127.0.0.1:6379&gt; lrange llista1 0 -1 \\1) \"cinquena\" \\2) \"quarta\" \\3) \"tercera\" \\4) \"segona\" \\5) \"primera\" \\6) \"sisena\" \\7) \"setena\"</p> <p>LPOP</p> <p>Sintaxi</p> <p>lpop clau</p> <p>Torna i elimina el primer element (el de m\u00e9s a l'esquerra).</p> <p>Exemples</p> <p>127.0.0.1:6379&gt; lpop llista1 \"cinquena\"</p> <p>127.0.0.1:6379&gt; lrange llista1 0 -1 \\1) \"quarta\" \\2) \"tercera\" \\3) \"segona\" \\4) \"primera\" \\5) \"sisena\" \\6) \"setena\"</p> <p>RPOP</p> <p>Sintaxi</p> <p>rpop clau</p> <p>Torna i elimina l'\u00faltim element (el de m\u00e9s a la dreta).</p> <p>Exemples</p> <p>127.0.0.1:6379&gt; rpop llista1 \"setena\"</p> <p>127.0.0.1:6379&gt; lrange llista1 0 -1 \\1) \"quarta\" \\2) \"tercera\" \\3) \"segona\" \\4) \"primera\" \\5) \"sisena\"</p> <p>LSET</p> <p>Sintaxi</p> <p>lset clau index valor</p> <p>Substitueix el valor de la posici\u00f3 indicada per l'\u00edndex. Tant la clau com l'element de la posici\u00f3 indicada han d'existir, sin\u00f3 donar\u00e0 error. Ara la L no significa Left sin\u00f3 List.</p> <p>La primera posici\u00f3 \u00e9s la 0. I tamb\u00e9 es poden posar n\u00fameros negatius: -1 \u00e9s l'\u00faltim, -2 el pen\u00faltim, ...</p> <p>Exemples</p> <p>127.0.0.1:6379&gt; lset llista1 2 quarta OK</p> <p>127.0.0.1:6379&gt; lrange llista1 0 -1 \\1) \"quarta\" \\2) \"tercera\" \\3) \"quarta\" \\4) \"primera\" \\5) \"sisena\"</p> <p>127.0.0.1:6379&gt; lset llista1 -1 cinquena OK</p> <p>127.0.0.1:6379&gt; lrange llista1 0 -1 \\1) \"quarta\" \\2) \"tercera\" \\3) \"quarta\" \\4) \"primera\" \\5) \"cinquena\"</p> <p>Observeu com es poden repetir els valors</p> <p>LINDEX</p> <p>Sintaxi</p> <p>lindex clau index</p> <p>Torna l'element situat en la posici\u00f3 indicada per l'\u00edndex, per\u00f2 sense eliminar-lo de la llista.</p> <p>Exemples</p> <p>127.0.0.1:6379&gt; lrange llista1 0 -1 \\1) \"quarta\" \\2) \"tercera\" \\3) \"quarta\" \\4) \"primera\" \\5) \"cinquena\"</p> <p>127.0.0.1:6379&gt; lindex llista1 0 \"quarta\"</p> <p>127.0.0.1:6379&gt; lindex llista1 3 \"primera\"</p> <p>127.0.0.1:6379&gt; lindex llista1 -1 \"cinquena\"</p> <p>127.0.0.1:6379&gt; lrange llista1 0 -1 \\1) \"quarta\" \\2) \"tercera\" \\3) \"quarta\" \\4) \"primera\" \\5) \"cinquena\"</p> <p>LINSERT</p> <p>Sintaxi</p> <p>linsert clau BEFORE | AFTER valor1 valor2</p> <p>Insereix el valor2 abans o despr\u00e9s (segons el que triem) de la primera vegada que troba el valor1. No substitueix, sin\u00f3 que insereix en una determinada posici\u00f3. Els elements que van despr\u00e9s de l'element introdu\u00eft veuran actualitzat el seu \u00edndex.</p> <p>Exemples</p> <p>127.0.0.1:6379&gt; lrange llista1 0 -1 \\1) \"quarta\" \\2) \"tercera\" \\3) \"quarta\" \\4) \"primera\" \\5) \"cinquena\"</p> <p>127.0.0.1:6379&gt; linsert llista1 AFTER quarta segona (integer) 6</p> <p>127.0.0.1:6379&gt; lrange llista1 0 -1 \\1) \"quarta\" \\2) \"segona\" \\3) \"tercera\" \\4) \"quarta\" \\5) \"primera\" \\6) \"cinquena\"</p> <p>127.0.0.1:6379&gt; linsert llista1 BEFORE cinquena sisena (integer) 7</p> <p>127.0.0.1:6379&gt; lrange llista1 0 -1 \\1) \"quarta\" \\2) \"segona\" \\3) \"tercera\" \\4) \"quarta\" \\5) \"primera\" \\6) \"sisena\" \\7) \"cinquena\"</p> <p>Si intentem inserir abans o despr\u00e9s un element que no existeix, tornar\u00e0 -1 indicant que no l'ha trobat i no far\u00e0 la inserci\u00f3.</p> <p>127.0.0.1:6379&gt; linsert llista1 BEFORE desena setena (integer) -1</p> <p>127.0.0.1:6379&gt; lrange llista1 0 -1 \\1) \"quarta\" \\2) \"segona\" \\3) \"tercera\" \\4) \"quarta\" \\5) \"primera\" \\6) \"sisena\" \\7) \"cinquena\"</p> <p>LRANGE</p> <p>Sintaxi</p> <p>lrange clau inici final</p> <p>Torna els elements de la llista que hi ha entre els index inici i final, ambd\u00f3s inclosos. El primer element \u00e9s el 0. Es poden posar valors negatius, sent -1 l'\u00faltim, -2 el pen\u00faltim, ...</p> <p>Exemples</p> <p>127.0.0.1:6379&gt; lrange llista1 0 -1 \\1) \"quarta\" \\2) \"segona\" \\3) \"tercera\" \\4) \"quarta\" \\5) \"primera\" \\6) \"sisena\" \\7) \"cinquena\"</p> <p>127.0.0.1:6379&gt; lrange llista1 2 4 \\1) \"tercera\" \\2) \"quarta\" \\3) \"primera\"</p> <p>127.0.0.1:6379&gt; lrange llista1 1 -2 \\1) \"segona\" \\2) \"tercera\" \\3) \"quarta\" \\4) \"primera\" \\5) \"sisena\"</p> <p>127.0.0.1:6379&gt; lrange llista1 4 4 \\1) \"primera\"</p> <p>LLEN</p> <p>Sintaxi</p> <p>llen clau</p> <p>Torna el n\u00famero d'elements de la llista</p> <p>Exemples</p> <p>127.0.0.1:6379&gt; llen llista1 (integer) 7</p> <p>LREM</p> <p>Sintaxi</p> <p>lrem clau n\u00famero valor</p> <p>Elimina elements de la llista que coincidisquen amb el valor proporcionat. Ja sabem que els valors es poden repetir. Amb el n\u00famero indiquem quants elements volem que s'esborren: si posem 1 s'esborrar\u00e0 el primer element amb aquest valor, si posem 2 s'esborraran els dos primers elements (els de m\u00e9s a l'esquerra) que tingen aquest valor. Si posem 0 s'esborraran tots els elements amb aquest valor</p> <p>Exemples</p> <p>127.0.0.1:6379&gt; rpush llista1 segona (integer) 8</p> <p>127.0.0.1:6379&gt; lrange llista1 0 -1 \\1) \"quarta\" \\2) \"segona\" \\3) \"tercera\" \\4) \"quarta\" \\5) \"primera\" \\6) \"sisena\" \\7) \"cinquena\" \\8) \"segona\"</p> <p>127.0.0.1:6379&gt; lrem llista1 1 segona (integer) 1</p> <p>127.0.0.1:6379&gt; lrange llista1 0 -1 \\1) \"quarta\" \\2) \"tercera\" \\3) \"quarta\" \\4) \"primera\" \\5) \"sisena\" \\6) \"cinquena\" \\7) \"segona\"</p> <p>127.0.0.1:6379&gt; lrem llista1 0 quarta (integer) 2</p> <p>127.0.0.1:6379&gt; lrange llista1 0 -1 \\1) \"tercera\" \\2) \"primera\" \\3) \"sisena\" \\4) \"cinquena\" \\5) \"segona\"</p> <p>LTRIM</p> <p>Sintaxi</p> <p>ltrim clau inici final</p> <p>Elimina els elements que queden fora dels \u00edndex inici i final, \u00e9s a dir elimina els que estiguen a l'esquerra d'inici, i els que estiguen a la dreta de final.</p> <p>Exemples</p> <p>127.0.0.1:6379&gt; ltrim llista1 1 -2 OK</p> <p>127.0.0.1:6379&gt; lrange llista1 0 -1 \\1) \"primera\" \\2) \"sisena\" \\3) \"cinquena\"</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement SenseObraDerivada 4.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T08_BD_NoSQL/235__set/","title":"235  set","text":"<p>Bases de Dades</p> <ul> <li>Tema 8: Bases de Dades NoSQL</li> <li>1 - Introducci\u00f3</li> <li>2 - BD Clau-Valor: Redis </li> <li>2.1 - Instal\u00b7laci\u00f3 de Redis</li> <li>2.2 - Entron gr\u00e0fic: Redis Desktop Manager</li> <li>2.3 - Utilitzaci\u00f3 de Redis <ul> <li>2.3.1 - Strings</li> <li>2.3.2 - Keys</li> <li>2.3.3 - Hash</li> <li>2.3.4 - List</li> <li>2.3.5 - Set</li> <li>2.3.6 - Set ordenat</li> </ul> </li> <li>3 - MongoDB </li> <li>3.1 - Estructura JSON</li> <li>3.2 - Instal\u00b7laci\u00f3 de MongoDB <ul> <li>3.2.1 - Connexi\u00f3 al servidor de l'Institut</li> </ul> </li> <li>3.3 - Utilitzaci\u00f3 de MongoDB <ul> <li>3.3.1 - Tipus de dades</li> <li>3.3.2 - Operacions b\u00e0siques</li> <li>3.2.3 - Operacions d'actualitzaci\u00f3 avan\u00e7ada </li> <li>3.3.3.1 - $set</li> <li>3.3.3.2 - $unset</li> <li>3.3.3.3 - $rename</li> <li>3.3.3.4 - $inc</li> <li>3.3.3.5 - Elements d'un array</li> <li>3.3.3.6 - Inserci\u00f3 en Arrays: $push</li> <li>3.3.3.7 - Eliminaci\u00f3 en arrays: $pop i $pull</li> <li>3.3.3.8 - Upsert</li> </ul> </li> <li>3.4 - Consulta de documents <ul> <li>3.4.1 - Par\u00e0metres de les funcions find() i findOne()</li> <li>3.4.2 - Operadors de les condicions</li> <li>3.4.3 - Agregaci\u00f3</li> </ul> </li> <li>4 - BD XML: eXist-db </li> <li>4.1 - Instal\u00b7laci\u00f3 d'eXist-db</li> <li>4.2 - Llenguatges de consultes XPATH i XQUERY <ul> <li>4.2.1 - XPATH </li> <li>4.2.1.1 - Vista d'arbre</li> <li>4.2.1.2 - Navegaci\u00f3</li> <li>4.2.1.3 - Seq\u00fc\u00e8ncies</li> <li>4.2.1.4 - Funcions</li> <li>4.2.2 - XQUERY </li> <li>4.2.2.1 - Consultes XQuery</li> <li>4.2.2.2 - Variables</li> <li>4.2.2.3 - Expressions avaluables</li> <li>4.2.2.4 - Expressions FLWOR</li> <li>4.2.2.5 - Alternatives</li> <li>4.2.2.6 - Exemple de consulta \"elaborada\"</li> <li>4.2.2.7 - Funcions de eXist-db de manipulaci\u00f3 de BD</li> </ul> </li> <li>5 - FIREBASE (voluntari) </li> <li>5.1 - Creaci\u00f3 d'una aplicaci\u00f3</li> <li>5.2 - Realtime Database (RD)</li> <li>5.3 - Cloud Firestore (CF)</li> <li>5.4 - Cloud Storage</li> <li>Exercicis</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T08_BD_NoSQL/235__set/#235-set","title":"2.3.5 - Set","text":"<p>Els Sets de Redis s\u00f3n conjunts de valors de tipus String no ordenats. Podrem afegir, actualitzar i esborrar aquestos elements de forma c\u00f2moda i eficient. No es permetran els valors duplicats.</p> <p>A m\u00e9s Redis ens ofereix operacions interessants com la uni\u00f3, intersecci\u00f3 i difer\u00e8ncia de conjunts.</p> <p>Com sempre, els comandos s\u00f3n espec\u00edfics, \u00e9s a dir no ens valen els de Strings, Hash o List. Tots els comandos comencen per S.</p> <p>Aquesta \u00e9s la llista dels que veurem:</p> <p>sadd\u00a0 ,\u00a0 smembers\u00a0 ,\u00a0 sismember\u00a0 ,\u00a0 scard\u00a0 ,\u00a0 srem\u00a0 ,\u00a0 spop\u00a0 ,\u00a0 srandmember\u00a0 ,\u00a0 sunion\u00a0 ,\u00a0 sunionstore\u00a0 ,\u00a0 sdiff\u00a0 ,\u00a0 sdiffstore\u00a0 ,\u00a0 sinter\u00a0 ,\u00a0 sinterstore\u00a0 ,\u00a0 smove</p> <p>SADD</p> <p>Sintaxi</p> <p>sadd clau valor1 valor2 valorN</p> <p>Afegeix els valors al conjunt (creant la clau si \u00e9s necessari). Recordem que l'ordre no \u00e9s important, i que no es poden repetir els valors; si intentem introduir un repetit, no donar\u00e0 error, per\u00f2 no l'introduir\u00e0. El comando tornar\u00e0 el n\u00famero d'elements que realment s'han afegit.</p> <p>Exemples</p> <p>127.0.0.1:6379&gt; sadd colors roig verd blau (integer) 3</p> <p>127.0.0.1:6379&gt; sadd colors verd groc (integer) 1</p> <p>SMEMBERS</p> <p>Sintaxi</p> <p>smembers clau</p> <p>Torna tots els valors del conjunt. Si la clau no existeix tornar\u00e0 un conjunt buit. Recordeu que l'ordre dels elements no \u00e9s predecible</p> <p>Exemples</p> <p>127.0.0.1:6379&gt; smembers colors \\1) \"groc\" \\2) \"verd\" \\3) \"roig\" \\4) \"blau\"</p> <p>SISMEMBER</p> <p>Sintaxi</p> <p>sismember clau valor</p> <p>Comprova si el valor est\u00e0 en el conjunt, tornant 1 en cas afirmatiu i 0 en cas negatiu.</p> <p>Exemples</p> <p>127.0.0.1:6379&gt; sismember colors verd (integer) 1</p> <p>127.0.0.1:6379&gt; sismember colors negre (integer) 0</p> <p>SCARD</p> <p>Sintaxi</p> <p>sard clau</p> <p>Torna la cardinalitat, \u00e9s a dir, el n\u00famero d'elements del conjunt en l'actualitat.</p> <p>Exemples</p> <p>127.0.0.1:6379&gt; scard colors (integer) 4</p> <p>SREM</p> <p>Sintaxi</p> <p>srem clau valor1 valor2 valorN</p> <p>Elimina els valors del conjunt. Si el conjunt es queda buit, eliminar\u00e0 la clau tamb\u00e9. Si algun dels valor no \u00e9s cap element del conjunt, senzillament s'ignorar\u00e0. El comando torna el n\u00famero d'elements realment eliminat.</p> <p>Exemples</p> <p>127.0.0.1:6379&gt; srem colors verd negre (integer) 1</p> <p>127.0.0.1:6379&gt; smembers colors \\1) \"groc\" \\2) \"roig\" \\3) \"blau\"</p> <p>SPOP</p> <p>Sintaxi</p> <p>spop clau</p> <p>Torna i elimina un valor aleatori del conjunt. Recordeu que a m\u00e9s de tornar-lo, l'elimina del conjunt.</p> <p>Exemples</p> <p>127.0.0.1:6379&gt; smembers colors \\1) \"groc\" \\2) \"roig\" \\3) \"blau\"</p> <p>127.0.0.1:6379&gt; spop colors \"groc\"</p> <p>127.0.0.1:6379&gt; smembers colors \\1) \"roig\" \\2) \"blau\"</p> <p>SRANDMEMBER</p> <p>Sintaxi</p> <p>srandmember clau</p> <p>Molt paregut a l'anterior. Torna un valor aleatori del conjunt, per\u00f2 en aquesta ocasi\u00f3 no l'elimina del conjunt.</p> <p>Exemples</p> <p>127.0.0.1:6379&gt; srandmember colors \"blau\"</p> <p>127.0.0.1:6379&gt; smembers colors \\1) \"roig\" \\2) \"blau\"</p> <p>SUNION</p> <p>Sintaxi</p> <p>sunion clau1 clau2 clauN</p> <p>Torna la uni\u00f3 dels elements dels conjunts especificats. \u00c9s una uni\u00f3 correcta, \u00e9s a dir, no es repetir\u00e0 cap valor.</p> <p>No modifica cap conjunt, i el resultat \u00fanicament es torna, no es guarda en cap lloc de forma permanent.</p> <p>Exemples</p> <p>127.0.0.1:6379&gt; smembers colors \\1) \"roig\" \\2) \"blau\"</p> <p>127.0.0.1:6379&gt; sadd colors1 verd roig groc (integer) 3</p> <p>127.0.0.1:6379&gt; smembers colors1 \\1) \"groc\" \\2) \"roig\" \\3) \"verd\"</p> <p>127.0.0.1:6379&gt; sunion colors colors1 \\1) \"verd\" \\2) \"groc\" \\3) \"roig\" \\4) \"blau\"</p> <p>SUNIONSTORE</p> <p>Sintaxi</p> <p>sunionstore clau_dest\u00ed clau1 clau2 clauN</p> <p>Igual que l'anterior, per\u00f2 ara s\u00ed que es guarda el resultat de la uni\u00f3 en un conjunt, clau_dest\u00ed (el primer especificat). Si la clau_dest\u00ed ja existia, substituir\u00e0 el contingut.</p> <p>Exemples</p> <p>127.0.0.1:6379&gt; smembers colors \\1) \"roig\" \\2) \"blau\"</p> <p>127.0.0.1:6379&gt; smembers colors1 \\1) \"groc\" \\2) \"roig\" \\3) \"verd\"</p> <p>127.0.0.1:6379&gt; sunionstore colors2 colors colors1 (integer) 4</p> <p>127.0.0.1:6379&gt; smembers colors2 \\1) \"verd\" \\2) \"groc\" \\3) \"roig\" \\4) \"blau\"</p> <p>SDIFF</p> <p>Sintaxi</p> <p>sdiff clau1 clau2 clauN</p> <p>Torna la difer\u00e8ncia dels elements del primer conjunt respecte de la uni\u00f3 de tots els altres. \u00c9s a dir, torna els elements del primer conjunt que no pertanyen a cap dels altres.</p> <p>No modifica cap conjunt, i el resultat \u00fanicament es torna, no es guarda en cap lloc de forma permanent.</p> <p>Exemples</p> <p>127.0.0.1:6379&gt; smembers colors \\1) \"roig\" \\2) \"blau\"</p> <p>127.0.0.1:6379&gt; smembers colors1 \\1) \"groc\" \\2) \"roig\" \\3) \"verd\"</p> <p>127.0.0.1:6379&gt; sdiff colors1 colors \\1) \"verd\" \\2) \"groc\"</p> <p>SDIFFSTORE</p> <p>Sintaxi</p> <p>sdiffstore clau_dest\u00ed clau1 clau2 clauN</p> <p>Igual que l'anterior, per\u00f2 ara s\u00ed que es guarda el resultat de la difer\u00e8ncia en un conjunt, clau_dest\u00ed (el primer especificat). Si la clau_dest\u00ed ja existia, substituir\u00e0 el contingut.</p> <p>Exemples</p> <p>127.0.0.1:6379&gt; smembers colors \\1) \"roig\" \\2) \"blau\"</p> <p>127.0.0.1:6379&gt; smembers colors1 \\1) \"groc\" \\2) \"roig\" \\3) \"verd\"</p> <p>127.0.0.1:6379&gt; sdiffstore colors3 colors1 colors (integer) 2</p> <p>127.0.0.1:6379&gt; smembers colors3 \\1) \"verd\" \\2) \"groc\"</p> <p>SINTER</p> <p>Sintaxi</p> <p>sinter clau1 clau2 clauN</p> <p>Torna la intersecci\u00f3 dels elements dels conjunts. \u00c9s a dir, torna els elements que pertanyen a tots els conjunts especificats.</p> <p>No modifica cap conjunt, i el resultat \u00fanicament es torna, no es guarda en cap lloc de forma permanent.</p> <p>Exemples</p> <p>127.0.0.1:6379&gt; smembers colors \\1) \"roig\" \\2) \"blau\"</p> <p>127.0.0.1:6379&gt; smembers colors1 \\1) \"groc\" \\2) \"roig\" \\3) \"verd\"</p> <p>127.0.0.1:6379&gt; sinter colors colors1 \\1) \"roig\"</p> <p>SINTERSTORE</p> <p>Sintaxi</p> <p>sinterstore clau_dest\u00ed clau1 clau2 clauN</p> <p>Igual que l'anterior, per\u00f2 ara s\u00ed que es guarda el resultat de la intersecci\u00f3 en un conjunt, clau_dest\u00ed (el primer especificat). Si la clau_dest\u00ed ja existia, substituir\u00e0 el contingut.</p> <p>Exemples</p> <p>127.0.0.1:6379&gt; smembers colors \\1) \"roig\" \\2) \"blau\"</p> <p>127.0.0.1:6379&gt; smembers colors1 \\1) \"groc\" \\2) \"roig\" \\3) \"verd\"</p> <p>127.0.0.1:6379&gt; sinterstore colors4 colors colors1 (integer) 1</p> <p>127.0.0.1:6379&gt; smembers colors4 \\1) \"roig\"</p> <p>SMOVE</p> <p>Sintaxi</p> <p>smove clau_font clau_dest\u00ed valor</p> <p>Meneja el valor del conjunt or\u00edgen (el primer conjunt) al conjunt dest\u00ed (el segon). Aix\u00f2 suposar\u00e0 eliminar-lo del primer i afegir-lo al segon. Tornar\u00e0 1 si l'ha menejat, i 0 si no l'ha menejat.</p> <p>Exemples</p> <p>127.0.0.1:6379&gt; smembers colors \\1) \"roig\" \\2) \"blau\"</p> <p>127.0.0.1:6379&gt; smembers colors1 \\1) \"groc\" \\2) \"roig\" \\3) \"verd\"</p> <p>127.0.0.1:6379&gt; smove colors1 colors verd (integer) 1</p> <p>127.0.0.1:6379&gt; smembers colors \\1) \"verd\" \\2) \"roig\" \\3) \"blau\"</p> <p>127.0.0.1:6379&gt; smembers colors1 \\1) \"groc\" \\2) \"roig\"</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement SenseObraDerivada 4.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T08_BD_NoSQL/236__set_ordenat/","title":"236  set ordenat","text":"<p>Bases de Dades</p> <ul> <li>Tema 8: Bases de Dades NoSQL</li> <li>1 - Introducci\u00f3</li> <li>2 - BD Clau-Valor: Redis </li> <li>2.1 - Instal\u00b7laci\u00f3 de Redis</li> <li>2.2 - Entron gr\u00e0fic: Redis Desktop Manager</li> <li>2.3 - Utilitzaci\u00f3 de Redis <ul> <li>2.3.1 - Strings</li> <li>2.3.2 - Keys</li> <li>2.3.3 - Hash</li> <li>2.3.4 - List</li> <li>2.3.5 - Set</li> <li>2.3.6 - Set ordenat</li> </ul> </li> <li>3 - MongoDB </li> <li>3.1 - Estructura JSON</li> <li>3.2 - Instal\u00b7laci\u00f3 de MongoDB <ul> <li>3.2.1 - Connexi\u00f3 al servidor de l'Institut</li> </ul> </li> <li>3.3 - Utilitzaci\u00f3 de MongoDB <ul> <li>3.3.1 - Tipus de dades</li> <li>3.3.2 - Operacions b\u00e0siques</li> <li>3.2.3 - Operacions d'actualitzaci\u00f3 avan\u00e7ada </li> <li>3.3.3.1 - $set</li> <li>3.3.3.2 - $unset</li> <li>3.3.3.3 - $rename</li> <li>3.3.3.4 - $inc</li> <li>3.3.3.5 - Elements d'un array</li> <li>3.3.3.6 - Inserci\u00f3 en Arrays: $push</li> <li>3.3.3.7 - Eliminaci\u00f3 en arrays: $pop i $pull</li> <li>3.3.3.8 - Upsert</li> </ul> </li> <li>3.4 - Consulta de documents <ul> <li>3.4.1 - Par\u00e0metres de les funcions find() i findOne()</li> <li>3.4.2 - Operadors de les condicions</li> <li>3.4.3 - Agregaci\u00f3</li> </ul> </li> <li>4 - BD XML: eXist-db </li> <li>4.1 - Instal\u00b7laci\u00f3 d'eXist-db</li> <li>4.2 - Llenguatges de consultes XPATH i XQUERY <ul> <li>4.2.1 - XPATH </li> <li>4.2.1.1 - Vista d'arbre</li> <li>4.2.1.2 - Navegaci\u00f3</li> <li>4.2.1.3 - Seq\u00fc\u00e8ncies</li> <li>4.2.1.4 - Funcions</li> <li>4.2.2 - XQUERY </li> <li>4.2.2.1 - Consultes XQuery</li> <li>4.2.2.2 - Variables</li> <li>4.2.2.3 - Expressions avaluables</li> <li>4.2.2.4 - Expressions FLWOR</li> <li>4.2.2.5 - Alternatives</li> <li>4.2.2.6 - Exemple de consulta \"elaborada\"</li> <li>4.2.2.7 - Funcions de eXist-db de manipulaci\u00f3 de BD</li> </ul> </li> <li>5 - FIREBASE (voluntari) </li> <li>5.1 - Creaci\u00f3 d'una aplicaci\u00f3</li> <li>5.2 - Realtime Database (RD)</li> <li>5.3 - Cloud Firestore (CF)</li> <li>5.4 - Cloud Storage</li> <li>Exercicis</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T08_BD_NoSQL/236__set_ordenat/#236-set-ordenat","title":"2.3.6 - Set ordenat","text":"<p>Els Sets Ordenats (Sorted Set) de Redis s\u00f3n Sets que a m\u00e9s de guardar els valors, guarden tamb\u00e9 una puntuaci\u00f3 (score) per a cada valor, i Redis mantindr\u00e0 el conjunt ordenat per aquesta puntuaci\u00f3.</p> <p>Els valors no es podran repetir, per\u00f2 s\u00ed les puntuacions.</p> <p>Alguns dels comandos seran iguals que els del Set, ja que un conjunt ordenat no deixa de ser un conjunt, per\u00f2 amb la informaci\u00f3 de la puntuaci\u00f3 (i que no es poden repetir els valors). En aquesta ocasi\u00f3 comen\u00e7aran per Z.</p> <p>I aquesta \u00e9s la llista dels que veurem:</p> <p>zadd\u00a0 ,\u00a0\u00a0zcard\u00a0 ,\u00a0 zscore\u00a0 ,\u00a0 zcount\u00a0 ,\u00a0 zrange\u00a0 ,\u00a0 zrangebyscore\u00a0 ,\u00a0 zrank\u00a0 ,\u00a0 zrem\u00a0 ,\u00a0 zremrangebyscore\u00a0 ,\u00a0 zincrby</p> <p>ZADD</p> <p>Sintaxi</p> <p>zadd clau puntuaci\u00f31 valor1 puntuaci\u00f32 valor2 puntuaci\u00f3N valorN</p> <p>Afegeix els valors al conjunt (creant la clau si \u00e9s necessari) amb les puntuacions corresponents. Les puntuacions seran Strings de valors reals (float). No es poden repetir els valors, per\u00f2 s\u00ed les puntuacions. Si intentem introduir un valor repetit, el que far\u00e0 ser\u00e0 actualitzar la puntuaci\u00f3. El comando tornar\u00e0 el n\u00famero d'elements que realment s'han afegit.</p> <p>Exemples</p> <p>127.0.0.1:6379&gt; zadd puntuacions 1 Nom1 2 Nom2 5 Nom3 4 Nom4 (integer) 4</p> <p>127.0.0.1:6379&gt; zrange puntuacions 0 -1 \\1) \"Nom1\" \\2) \"Nom2\" \\3) \"Nom4\" \\4) \"Nom3\"</p> <p>ZCARD</p> <p>Sintaxi</p> <p>zcard clau</p> <p>Torna la cardinalitat, \u00e9s a dir, el n\u00famero d'elements del conjunt ordenat en l'actualitat.</p> <p>Exemples</p> <p>127.0.0.1:6379&gt; zcard puntuacions (integer) 4</p> <p>ZSCORE</p> <p>Sintaxi</p> <p>zscore clau valor</p> <p>Torna la puntuaci\u00f3 (score) del valor especificat del conjunt ordenat. Si no existeix el valor o no existaix la clau, torna nil.</p> <p>Exemples</p> <p>127.0.0.1:6379&gt; zscore puntuacions Nom3 \"5\"</p> <p>127.0.0.1:6379&gt; zscore puntuacions Nom7 (nil)</p> <p>ZCOUNT</p> <p>Sintaxi</p> <p>zcount clau min max</p> <p>Torna el n\u00famero de valors que estan entre les puntuacions especificades (ambdues incloses).</p> <p>Exemples</p> <p>127.0.0.1:6379&gt; zcount puntuacions 2 5 (integer) 3</p> <p>ZRANGE</p> <p>Sintaxi</p> <p>zrange clau inici final [withscores]</p> <p>Torna els elements del conjunt ordenat que hi ha entre els index inici i final, ambd\u00f3s inclosos. I es trauen per ordre ascentent de puntuaci\u00f3. El primer element \u00e9s el 0. Es poden posar valors negatius, sent -1 l'\u00faltim, -2 el pen\u00faltim, ... Opcionalment podem posar WITHSCORES per a que ens torne tamb\u00e9 la puntuaci\u00f3 de cada element</p> <p>Exemples</p> <p>127.0.0.1:6379&gt; zrange puntuacions 0 -1 \\1) \"Nom1\" \\2) \"Nom2\" \\3) \"Nom4\" \\4) \"Nom3\"</p> <p>127.0.0.1:6379&gt; zrange puntuacions 0 -1 withscores \\1) \"Nom1\" \\2) \"1\" \\3) \"Nom2\" \\4) \"2\" \\5) \"Nom4\" \\6) \"4\" \\7) \"Nom3\" \\8) \"5\"</p> <p>Si vulgu\u00e9rem traure el conjunt en ordre invers de puntuaci\u00f3, utilitzar\u00edem el comando ZREVRANGE (reverse range).</p> <p>127.0.0.1:6379&gt; zrevrange puntuacions 0 -1 withscores \\1) \"Nom3\" \\2) \"5\" \\3) \"Nom4\" \\4) \"4\" \\5) \"Nom2\" \\6) \"2\" \\7) \"Nom1\" \\8) \"1\"</p> <p>ZRANGEBYSCORE</p> <p>Sintaxi</p> <p>zrangebyscore clau min max [withscores]</p> <p>Torna els elements del conjunt ordenat que tenen una puntuaci\u00f3 compresa entre min i max (ambdues incloses). I es trauen per ordre ascentent de puntuaci\u00f3. Opcionalment podem posar WITHSCORES per a que ens torne tamb\u00e9 la puntuaci\u00f3 de cada element.\u00a0</p> <p>Exemples</p> <p>127.0.0.1:6379&gt; zrangebyscore puntuacions 2 5 \\1) \"Nom2\" \\2) \"Nom4\" \\3) \"Nom3\"</p> <p>127.0.0.1:6379&gt; zrangebyscore puntuacions 2 5 withscores \\1) \"Nom2\" \\2) \"2\" \\3) \"Nom4\" \\4) \"4\" \\5) \"Nom3\" \\6) \"5\"</p> <p>Si vulgu\u00e9rem que les puntuacions foren estrictament majors que la puntiuaci\u00f3 m\u00ednima i/o estrictament menor que la puntuaci\u00f3 m\u00e0xima, posar\u00edem un par\u00e8ntesi davant de min i/o max:</p> <p>127.0.0.1:6379&gt; zrangebyscore puntuacions 2 (5 withscores \\1) \"Nom2\" \\2) \"2\" \\3) \"Nom4\" \\4) \"4\"</p> <p>I si vulgu\u00e9rem traure el conjunt en ordre invers de puntuaci\u00f3, utilitzar\u00edem el comando ZREVRANGEBYSCORE (reverse range). Cuideu que com va en ordre invers, ara el valor m\u00e0xim ha de ser el primer, i el m\u00ednim el segon.</p> <p>127.0.0.1:6379&gt; zrevrangebyscore puntuacions 5 2 withscores \\1) \"Nom3\" \\2) \"5\" \\3) \"Nom4\" \\4) \"4\" \\5) \"Nom2\" \\6) \"2\"</p> <p>ZRANK</p> <p>Sintaxi</p> <p>zrank clau valor</p> <p>Torna el n\u00famero d'ordre de l'element amb el valor especificat. El primer valor \u00e9s el 0. Si no existeix, torna nil.</p> <p>Exemples</p> <p>127.0.0.1:6379&gt; zrank puntuacions Nom1 (integer) 0</p> <p>127.0.0.1:6379&gt; zrank puntuacions Nom4 (integer) 2</p> <p>127.0.0.1:6379&gt; zrank puntuacions Nom7 (nil)</p> <p>Si volem saber el n\u00famero d'ordre per\u00f2 des del final de la llista (en ordre invers), hem d'utilitzar ZREVRANK:</p> <p>127.0.0.1:6379&gt; zrevrank puntuacions Nom1 (integer) 3</p> <p>127.0.0.1:6379&gt; zrevrank puntuacions Nom4 (integer) 1</p> <p>ZREM</p> <p>Sintaxi</p> <p>zrem clau valor1 valor2 valorN</p> <p>Elimina els elements amb els valors especificats. Si algun valor no existeix, senzillament l'ignora. Torna el n\u00famero d'elements realment eliminats.</p> <p>Exemples</p> <p>127.0.0.1:6379&gt; zrem puntuacions Nom1 (integer) 1</p> <p>127.0.0.1:6379&gt; zrange puntuacions 0 -1 withscores \\1) \"Nom2\" \\2) \"2\" \\3) \"Nom4\" \\4) \"4\" \\5) \"Nom3\" \\6) \"5\"</p> <p>ZREMRANGEBYSCORE</p> <p>Sintaxi</p> <p>zremrangebyscore clau min max</p> <p>Elimina els elements amb puntuaci\u00f3 compresa entre el m\u00ednim i el m\u00e0xim de forma inclusiva. Si volem fer-ho de forma excusiva (sense incloure les puntuacions dels extrems) posarem un par\u00e8ntesi davant del m\u00ednim i/o el m\u00e0xim. Torna el n\u00famero d'elements realment eliminats.</p> <p>Exemples</p> <p>127.0.0.1:6379&gt; zremrangebyscore puntuacions (2 4 (integer) 1</p> <p>127.0.0.1:6379&gt; zrange puntuacions 0 -1 withscores \\1) \"Nom2\" \\2) \"2\" \\3) \"Nom3\" \\4) \"5\"</p> <p>ZINCRBY</p> <p>Sintaxi</p> <p>zincrby clau increment valor</p> <p>Incrementa la puntuaci\u00f3 de l'element especificat. El valor de la puntuaci\u00f3 a incrementar \u00e9s un n\u00famero real. Torna el valor la puntuaci\u00f3 final de l'element. Si l'element no existia, l'inserir\u00e0, assumint una puntuaci\u00f3 inicial de 0.</p> <p>Exemples</p> <p>127.0.0.1:6379&gt; zincrby puntuacions 1.5 Nom2 \"3.5\"</p> <p>127.0.0.1:6379&gt; zincrby puntuacions 2.75 Nom5 \"2.75\"</p> <p>127.0.0.1:6379&gt; zrange puntuacions 0 -1 withscores \\1) \"Nom5\" \\2) \"2.75\" \\3) \"Nom2\" \\4) \"3.5\" \\5) \"Nom3\" \\6) \"5\"</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement SenseObraDerivada 4.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T08_BD_NoSQL/23__utilitzaci_de_redis/","title":"23  utilitzaci de redis","text":"<p>Bases de Dades</p> <ul> <li>Tema 8: Bases de Dades NoSQL</li> <li>1 - Introducci\u00f3</li> <li>2 - BD Clau-Valor: Redis </li> <li>2.1 - Instal\u00b7laci\u00f3 de Redis</li> <li>2.2 - Entron gr\u00e0fic: Redis Desktop Manager</li> <li>2.3 - Utilitzaci\u00f3 de Redis <ul> <li>2.3.1 - Strings</li> <li>2.3.2 - Keys</li> <li>2.3.3 - Hash</li> <li>2.3.4 - List</li> <li>2.3.5 - Set</li> <li>2.3.6 - Set ordenat</li> </ul> </li> <li>3 - MongoDB </li> <li>3.1 - Estructura JSON</li> <li>3.2 - Instal\u00b7laci\u00f3 de MongoDB <ul> <li>3.2.1 - Connexi\u00f3 al servidor de l'Institut</li> </ul> </li> <li>3.3 - Utilitzaci\u00f3 de MongoDB <ul> <li>3.3.1 - Tipus de dades</li> <li>3.3.2 - Operacions b\u00e0siques</li> <li>3.2.3 - Operacions d'actualitzaci\u00f3 avan\u00e7ada </li> <li>3.3.3.1 - $set</li> <li>3.3.3.2 - $unset</li> <li>3.3.3.3 - $rename</li> <li>3.3.3.4 - $inc</li> <li>3.3.3.5 - Elements d'un array</li> <li>3.3.3.6 - Inserci\u00f3 en Arrays: $push</li> <li>3.3.3.7 - Eliminaci\u00f3 en arrays: $pop i $pull</li> <li>3.3.3.8 - Upsert</li> </ul> </li> <li>3.4 - Consulta de documents <ul> <li>3.4.1 - Par\u00e0metres de les funcions find() i findOne()</li> <li>3.4.2 - Operadors de les condicions</li> <li>3.4.3 - Agregaci\u00f3</li> </ul> </li> <li>4 - BD XML: eXist-db </li> <li>4.1 - Instal\u00b7laci\u00f3 d'eXist-db</li> <li>4.2 - Llenguatges de consultes XPATH i XQUERY <ul> <li>4.2.1 - XPATH </li> <li>4.2.1.1 - Vista d'arbre</li> <li>4.2.1.2 - Navegaci\u00f3</li> <li>4.2.1.3 - Seq\u00fc\u00e8ncies</li> <li>4.2.1.4 - Funcions</li> <li>4.2.2 - XQUERY </li> <li>4.2.2.1 - Consultes XQuery</li> <li>4.2.2.2 - Variables</li> <li>4.2.2.3 - Expressions avaluables</li> <li>4.2.2.4 - Expressions FLWOR</li> <li>4.2.2.5 - Alternatives</li> <li>4.2.2.6 - Exemple de consulta \"elaborada\"</li> <li>4.2.2.7 - Funcions de eXist-db de manipulaci\u00f3 de BD</li> </ul> </li> <li>5 - FIREBASE (voluntari) </li> <li>5.1 - Creaci\u00f3 d'una aplicaci\u00f3</li> <li>5.2 - Realtime Database (RD)</li> <li>5.3 - Cloud Firestore (CF)</li> <li>5.4 - Cloud Storage</li> <li>Exercicis</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T08_BD_NoSQL/23__utilitzaci_de_redis/#23-utilitzacio-de-redis","title":"2.3 - Utilitzaci\u00f3 de Redis","text":"<p>Anem a veure la utilitzaci\u00f3 de Redis. Ens connectarem com a clients i intentarem fer operacions.</p> <ul> <li>Les primeres seran les m\u00e9s senzilles, utilitzant \u00fanicament el tipus de dades String.</li> <li>Posteriorment mirarem com treballar amb les claus: buscar-ne una, veure si existeix, buscar unes quantes, ...</li> <li>Despr\u00e9s ja anirem a pels tipus de dades m\u00e9s complicats: </li> <li>Hash</li> <li>List</li> <li>Set</li> <li>Sorted Set</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement SenseObraDerivada 4.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T08_BD_NoSQL/2__bd_clauvalor_redis/","title":"2  bd clauvalor redis","text":"<p>Bases de Dades</p> <ul> <li>Tema 8: Bases de Dades NoSQL</li> <li>1 - Introducci\u00f3</li> <li>2 - BD Clau-Valor: Redis </li> <li>2.1 - Instal\u00b7laci\u00f3 de Redis</li> <li>2.2 - Entron gr\u00e0fic: Redis Desktop Manager</li> <li>2.3 - Utilitzaci\u00f3 de Redis <ul> <li>2.3.1 - Strings</li> <li>2.3.2 - Keys</li> <li>2.3.3 - Hash</li> <li>2.3.4 - List</li> <li>2.3.5 - Set</li> <li>2.3.6 - Set ordenat</li> </ul> </li> <li>3 - MongoDB </li> <li>3.1 - Estructura JSON</li> <li>3.2 - Instal\u00b7laci\u00f3 de MongoDB <ul> <li>3.2.1 - Connexi\u00f3 al servidor de l'Institut</li> </ul> </li> <li>3.3 - Utilitzaci\u00f3 de MongoDB <ul> <li>3.3.1 - Tipus de dades</li> <li>3.3.2 - Operacions b\u00e0siques</li> <li>3.2.3 - Operacions d'actualitzaci\u00f3 avan\u00e7ada </li> <li>3.3.3.1 - $set</li> <li>3.3.3.2 - $unset</li> <li>3.3.3.3 - $rename</li> <li>3.3.3.4 - $inc</li> <li>3.3.3.5 - Elements d'un array</li> <li>3.3.3.6 - Inserci\u00f3 en Arrays: $push</li> <li>3.3.3.7 - Eliminaci\u00f3 en arrays: $pop i $pull</li> <li>3.3.3.8 - Upsert</li> </ul> </li> <li>3.4 - Consulta de documents <ul> <li>3.4.1 - Par\u00e0metres de les funcions find() i findOne()</li> <li>3.4.2 - Operadors de les condicions</li> <li>3.4.3 - Agregaci\u00f3</li> </ul> </li> <li>4 - BD XML: eXist-db </li> <li>4.1 - Instal\u00b7laci\u00f3 d'eXist-db</li> <li>4.2 - Llenguatges de consultes XPATH i XQUERY <ul> <li>4.2.1 - XPATH </li> <li>4.2.1.1 - Vista d'arbre</li> <li>4.2.1.2 - Navegaci\u00f3</li> <li>4.2.1.3 - Seq\u00fc\u00e8ncies</li> <li>4.2.1.4 - Funcions</li> <li>4.2.2 - XQUERY </li> <li>4.2.2.1 - Consultes XQuery</li> <li>4.2.2.2 - Variables</li> <li>4.2.2.3 - Expressions avaluables</li> <li>4.2.2.4 - Expressions FLWOR</li> <li>4.2.2.5 - Alternatives</li> <li>4.2.2.6 - Exemple de consulta \"elaborada\"</li> <li>4.2.2.7 - Funcions de eXist-db de manipulaci\u00f3 de BD</li> </ul> </li> <li>5 - FIREBASE (voluntari) </li> <li>5.1 - Creaci\u00f3 d'una aplicaci\u00f3</li> <li>5.2 - Realtime Database (RD)</li> <li>5.3 - Cloud Firestore (CF)</li> <li>5.4 - Cloud Storage</li> <li>Exercicis</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T08_BD_NoSQL/2__bd_clauvalor_redis/#2-bd-clau-valor-redis","title":"2 - BD Clau-Valor: Redis","text":"<p>Segurament de tots els tipus de Bases de Dades NoSQL existents, la de m\u00e9s f\u00e0cil comprensi\u00f3 \u00e9s la Base de Dades Clau-Valor. En ella s'aniran guardant parelles clau-valor, \u00e9s a dir, el nom d'una determinada propietat i el seu valor. La clau ha de ser \u00fanica, \u00e9s a dir, no es pot repetir ja que en cas contrari no es podria tornar a recuperar.</p> <p>Per tant no hi ha definici\u00f3 de taules ni cap altra estructura; es van guardant parelles clau-valor i prou. En el moment de recuperar la informaci\u00f3 veurem que podrem obtenir el contingut d'una clau, o el de m\u00e9s d'una al mateix temps.</p> <p>L'exemple que veurem de Base de Dades Clau-Valor \u00e9s Redis, molt famosa per a seua pot\u00e8ncia i efici\u00e8ncia.</p> <p>La clau sempre \u00e9s de tipus String, i com ja hem comentat no poden haver dues claus iguals. En canvi en Redis els valors poden ser de 5 tipus diferents:</p> <ul> <li>Cadenes de car\u00e0cters (String). Per exemple: nom_1 --&gt; Albert</li> <li>Registres (Hashes) que seran claus que tindran subcamps (sub-claus). Per exemple: empleat_1 --&gt; [ nom=\"Albert\" , departament=\"10\" , sou=\"1000.0\" ]</li> <li>Llistes (Lists) que s\u00f3n conjunts ordenats de valors. Per exemple: llista_1 --&gt; { \"Primer\" , \"Segon\" , \"Tercer\" }</li> <li>Conjunts (Sets) s\u00f3n conjunts desordenats de valors. No importa el seu ordre, i de fet ser\u00e0 impredictible l'ordre amb el qual els torna Redis. Per exemple: colors --&gt; { \"Blau\" , \"Verd\" , \"Roig\" }</li> <li>Conjunts Ordenats (Sorted Sets). Ja veurem la difer\u00e8ncia entre llistes i conjunts ordenats.</li> </ul> <p>Algunes caracter\u00edstiques de Redis s\u00f3n:</p> <ul> <li>\u00c9s una arquitectura client-servidor</li> <li>\u00c9s extraordin\u00e0riament eficient quan es pot carregar tota en mem\u00f2ria, encara que si no pot carregar-la tamb\u00e9 funcionar\u00e0 de forma molt r\u00e0pida. I a m\u00e9s mant\u00e9 una sincronitzaci\u00f3 constant a disc per a fer les dades persistents. Aquesta tasca la fa en segon pla, de manera que no afecta al servei.</li> <li>Per a poder suportar ratios de lectura molt alts fa una replicaci\u00f3 master/slave, \u00e9s a dir que pot haver m\u00e9s d'un servidor, i un \u00e9s el que actua de master i els altres s\u00f3n r\u00e8pliques del primer. El slave rep una c\u00f2pia inicial de la Base de Dades sencera. A mida que es van realitzant escriptures en el master, es van enviant a tots els slaves connectats. Els clients es poden connectar als distints servidors, b\u00e9 siga al master o als slaves, sense haver de carregar sempre al master.</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement SenseObraDerivada 4.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T08_BD_NoSQL/31__estructura_json/","title":"31  estructura json","text":"<p>Bases de Dades</p> <ul> <li>Tema 8: Bases de Dades NoSQL</li> <li>1 - Introducci\u00f3</li> <li>2 - BD Clau-Valor: Redis </li> <li>2.1 - Instal\u00b7laci\u00f3 de Redis</li> <li>2.2 - Entron gr\u00e0fic: Redis Desktop Manager</li> <li>2.3 - Utilitzaci\u00f3 de Redis <ul> <li>2.3.1 - Strings</li> <li>2.3.2 - Keys</li> <li>2.3.3 - Hash</li> <li>2.3.4 - List</li> <li>2.3.5 - Set</li> <li>2.3.6 - Set ordenat</li> </ul> </li> <li>3 - MongoDB </li> <li>3.1 - Estructura JSON</li> <li>3.2 - Instal\u00b7laci\u00f3 de MongoDB <ul> <li>3.2.1 - Connexi\u00f3 al servidor de l'Institut</li> </ul> </li> <li>3.3 - Utilitzaci\u00f3 de MongoDB <ul> <li>3.3.1 - Tipus de dades</li> <li>3.3.2 - Operacions b\u00e0siques</li> <li>3.2.3 - Operacions d'actualitzaci\u00f3 avan\u00e7ada </li> <li>3.3.3.1 - $set</li> <li>3.3.3.2 - $unset</li> <li>3.3.3.3 - $rename</li> <li>3.3.3.4 - $inc</li> <li>3.3.3.5 - Elements d'un array</li> <li>3.3.3.6 - Inserci\u00f3 en Arrays: $push</li> <li>3.3.3.7 - Eliminaci\u00f3 en arrays: $pop i $pull</li> <li>3.3.3.8 - Upsert</li> </ul> </li> <li>3.4 - Consulta de documents <ul> <li>3.4.1 - Par\u00e0metres de les funcions find() i findOne()</li> <li>3.4.2 - Operadors de les condicions</li> <li>3.4.3 - Agregaci\u00f3</li> </ul> </li> <li>4 - BD XML: eXist-db </li> <li>4.1 - Instal\u00b7laci\u00f3 d'eXist-db</li> <li>4.2 - Llenguatges de consultes XPATH i XQUERY <ul> <li>4.2.1 - XPATH </li> <li>4.2.1.1 - Vista d'arbre</li> <li>4.2.1.2 - Navegaci\u00f3</li> <li>4.2.1.3 - Seq\u00fc\u00e8ncies</li> <li>4.2.1.4 - Funcions</li> <li>4.2.2 - XQUERY </li> <li>4.2.2.1 - Consultes XQuery</li> <li>4.2.2.2 - Variables</li> <li>4.2.2.3 - Expressions avaluables</li> <li>4.2.2.4 - Expressions FLWOR</li> <li>4.2.2.5 - Alternatives</li> <li>4.2.2.6 - Exemple de consulta \"elaborada\"</li> <li>4.2.2.7 - Funcions de eXist-db de manipulaci\u00f3 de BD</li> </ul> </li> <li>5 - FIREBASE (voluntari) </li> <li>5.1 - Creaci\u00f3 d'una aplicaci\u00f3</li> <li>5.2 - Realtime Database (RD)</li> <li>5.3 - Cloud Firestore (CF)</li> <li>5.4 - Cloud Storage</li> <li>Exercicis</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T08_BD_NoSQL/31__estructura_json/#31-estructura-json","title":"3.1 - Estructura JSON","text":"<p>Amb JSON podrem representar:</p> <ul> <li>Valors, de tipus car\u00e0cter (entre cometes dobles), num\u00e8ric (sense cometes) , boole\u00e0 (true o false) o null.</li> <li>Parelles clau valor, \u00e9s a dir un nom simb\u00f2lic acompanyat d'un valor associat.. Es representen aix\u00ed: \"nom\" : valor</li> <li>Objectes, que \u00e9s una col\u00b7lecci\u00f3 de membres, cadasc\u00fa dels quals pot ser una parella clau valor, o altres objectes (fins i tot arrays): es representen entre claus, i amb els elements separats per comes: { \"nom1\" : \"valor1\" , \"nom2\": valor2 , valor 3 , ... }</li> <li>Arrays, que s\u00f3n llistes d'elements. Els elements no tenen per qu\u00e8 tenir la mateixa estructura, per\u00f2 nosaltres intentarem que s\u00ed que la tinguen per coher\u00e8ncia. Cada element pot ser un valor , una parella clau valor, un objecte o un array.</li> </ul> <p>Veja'm algun exemples:</p> <p>{ \"p1\" : 2 , \"p2\" : 4 , \"p3\" : 6 , \"p4\" : 8 , \"p5\" : 10 }</p> <p>en aquest cas tenim un objecte, l'arrel, que t\u00e9 5 membres, tots ells parelles clau-valor.</p> <p>{ \"num\": 1 , \"nom\": \"Andreu\" , \"departament\": 10 , \"edat\": 32 , \"sou\": 1000.0  }</p> <p>ara un objecte, l'arrel, tamb\u00e9 amb 5 membres que s\u00f3n parelles clau-valor. Observeu com la clau sempre la posem entre cometes, i el valor quan \u00e9s un string tamb\u00e9, per\u00f2 quan \u00e9s num\u00e8ric, no.</p> <p>{ \"empleat\" : { \"num\": 1 , \"nom\": \"Andreu\" , \"departament\": 10 , \"edat\": 32 , \"sou\": 1000.0  } }</p> <p>en aquest cas tenim un objecte, l'arrel que consta d'un \u00fanic objecte, empleat, el qual consta de 5 membres clau-valor.</p> <p>Mirem ara un exemple amb un array:</p> <p>{ \"notes\" : [ 5 , 7 , 8 , 7 ] }</p> <p>on tenim l'element arrel que consta d'un \u00fanic membre, notes, que \u00e9s un array.</p> <p>Tamb\u00e9 seria correcte d'aquesta manera, per veure que l'element arrel no t\u00e9 perqu\u00e8 ser un objecte, sin\u00f3 tamb\u00e9 un array</p> <p>[ 5 , 7 , 8 , 7 ]</p> <p>I ara un m\u00e9s complet amb la mateixa estructura que el fitxer XML que hav\u00edem vist en la pregunta 4. Tindrem un objecte arrel, amb nom\u00e9s un objecte, empresa, que t\u00e9 un \u00fanic element empleat que \u00e9s un array amb 4 elements, cadascun dels empleats:</p> <p>{ \"empresa\":  { \"empleat\":  [\u00a0 { \"num\": \"1\", \"nom\": \"Andreu\", \"departament\": \"10\", \"edat\": \"32\", \"sou\": \"1000.0\" }, { \"num\": \"2\", \"nom\": \"Bernat\", \"departament\": \"20\", \"edat\": \"28\", \"sou\": \"1200.0\" }, { \"num\": \"3\", \"nom\": \"Cl\u00e0udia\", \"departament\": \"10\", \"edat\": \"26\", \"sou\": \"1100.0\" }, { \"num\": \"4\", \"nom\": \"Dami\u00e0\", \"departament\": \"10\", \"edat\": \"40\", \"sou\": \"1500.0\" } ] } }</p> <p>Anem a veure un parell de casos m\u00e9s reals. Aquesta \u00e9s la contestaci\u00f3 que fa el WebService de Bicicas en sol\u00b7licitar l'estat actual de bicicletes en els diferents punts (en el moment de fer els apunts es consulta en l'adre\u00e7a http://gestiona.bicicas.es/apps/apps.php):</p> <p>[ {\"ocupacion\": [ , , , ... ] } ]</p> <p>Com podeu comprovar, l'arrel no \u00e9s un objecte, sin\u00f3 un Array. En l'array nom\u00e9s ens interessa el primer element que \u00e9s un objecte amb un \u00fanic membre, ocupacion (en l'exemple no hi ha m\u00e9s elements, per\u00f2 en poden haver m\u00e9s en un moment determinat, quan volen fer avisos). I ocupacion \u00e9s un array, amb un objecte per cada estaci\u00f3 de bicicas, amb les parelles clau valor id, punto, puestos (les bicicletes que caben), ocupados (quantes bicicletes hi ha col\u00b7locades en aquest moment), latitud i longitud (les coordenades), ...</p> <p>Nota</p> <p>En realitat ens apareixer\u00e0 tota la informaci\u00f3 molt m\u00e9s apegada, perqu\u00e8 realment est\u00e0 en una \u00fanica l\u00ednia.</p> <p>Per a poder observar millor l'estructura podem utilitzar un visor de json. Normalment el navegador Firefox els visualitza b\u00e9, encara que tamb\u00e9 dep\u00e9n de la versi\u00f3. Si tenim instal\u00b7lada una versi\u00f3 que admet la visualitzaci\u00f3 de JSON, ho intentar\u00e0 interpretar, encara que segurament la millor manera de veure el format JSON \u00e9s,tiar les opcions Dades sense processar --&gt; Format d'impressi\u00f3, que \u00e9s la que veiem a la dreta:</p> <p>Si la versi\u00f3 nostra de Firefox no visualitza el format JSON, podem buscar un visor dels molts que hi ha per internet. En la figura n'hem utilitzat un, i es pot observar com facilita molt la lectura.</p> <p></p> <p>Un altre exemple. Un WebService de GeoNames (una Base de Dade geogr\u00e0fica gratu\u00efta i accessible a trav\u00e9s d'Internet) ens proporciona informaci\u00f3 dels llocs que troba dins d'un rectangle delimitat per un latitud al nord i al sud, i una longitud a l'esti a l'oest\u00a0 (en l'exemple: nord 40.01, sud 39.9, est 0.1 i oest -0.1). Per exemple, http://api.geonames.org/citiesJSON?north=40.01&amp;south=39.99&amp;east=0.01&amp;west=-0.01&amp;lang=ES&amp;username=demo torna el seg\u00fcent:</p> <p>{</p> <p>\"geonames\": [</p> <p>{</p> <p>\"lng\": -0.04935,</p> <p>\"geonameId\": 2519752,</p> <p>\"countrycode\": \"ES\",</p> <p>\"name\": \"Castell\u00f3 de la Plana\",</p> <p>\"fclName\": \"city, village,...\",</p> <p>\"toponymName\": \"Castell\u00f3 de la Plana\",</p> <p>\"fcodeName\": \"seat of a second-order administrative division\",</p> <p>\"wikipedia\": \"en.wikipedia.org/wiki/Castell%C3%B3n_de_la_Plana\",</p> <p>\"lat\": 39.98567,</p> <p>\"fcl\": \"P\",</p> <p>\"population\": 180005,</p> <p>\"fcode\": \"PPLA2\"</p> <p>},</p> <p>{</p> <p>\"lng\": -0.06313,</p> <p>\"geonameId\": 2521909,</p> <p>\"countrycode\": \"ES\",</p> <p>\"name\": \"Almazora\",</p> <p>\"fclName\": \"city, village,...\",</p> <p>\"toponymName\": \"Almassora\",</p> <p>\"fcodeName\": \"populated place\",</p> <p>\"wikipedia\": \"en.wikipedia.org/wiki/Almassora\",</p> <p>\"lat\": 39.94729,</p> <p>\"fcl\": \"P\",</p> <p>\"population\": 24963,</p> <p>\"fcode\": \"PPL\"</p> <p>},</p> <p>...</p> <p>]</p> <p>}</p> <p>A partir de l'arrel (que ara s\u00ed que \u00e9s un objecte), tenim un membre: geonames, que \u00e9s un array (un element per cada \"lloc\" trobat), on cada element t\u00e9 informaci\u00f3 diversa, com el nom del lloc, les coordenades, la poblaci\u00f3, ...</p> <p>Nota</p> <p>De fa uns mesos que Google limita el servei anterior, i ha de ser amb un usuari validat. No valdr\u00e0 la pena, per al poc profit que li traur\u00edem. Mostrem en qu\u00e8 consisteix el servei \u00fanicament a nivell il\u00b7lustratiu</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement SenseObraDerivada 4.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T08_BD_NoSQL/321__connexi_al_servidor_de_linstitut/","title":"321  connexi al servidor de linstitut","text":"<p>Bases de Dades</p> <ul> <li>Tema 8: Bases de Dades NoSQL</li> <li>1 - Introducci\u00f3</li> <li>2 - BD Clau-Valor: Redis </li> <li>2.1 - Instal\u00b7laci\u00f3 de Redis</li> <li>2.2 - Entron gr\u00e0fic: Redis Desktop Manager</li> <li>2.3 - Utilitzaci\u00f3 de Redis <ul> <li>2.3.1 - Strings</li> <li>2.3.2 - Keys</li> <li>2.3.3 - Hash</li> <li>2.3.4 - List</li> <li>2.3.5 - Set</li> <li>2.3.6 - Set ordenat</li> </ul> </li> <li>3 - MongoDB </li> <li>3.1 - Estructura JSON</li> <li>3.2 - Instal\u00b7laci\u00f3 de MongoDB <ul> <li>3.2.1 - Connexi\u00f3 al servidor de l'Institut</li> </ul> </li> <li>3.3 - Utilitzaci\u00f3 de MongoDB <ul> <li>3.3.1 - Tipus de dades</li> <li>3.3.2 - Operacions b\u00e0siques</li> <li>3.2.3 - Operacions d'actualitzaci\u00f3 avan\u00e7ada </li> <li>3.3.3.1 - $set</li> <li>3.3.3.2 - $unset</li> <li>3.3.3.3 - $rename</li> <li>3.3.3.4 - $inc</li> <li>3.3.3.5 - Elements d'un array</li> <li>3.3.3.6 - Inserci\u00f3 en Arrays: $push</li> <li>3.3.3.7 - Eliminaci\u00f3 en arrays: $pop i $pull</li> <li>3.3.3.8 - Upsert</li> </ul> </li> <li>3.4 - Consulta de documents <ul> <li>3.4.1 - Par\u00e0metres de les funcions find() i findOne()</li> <li>3.4.2 - Operadors de les condicions</li> <li>3.4.3 - Agregaci\u00f3</li> </ul> </li> <li>4 - BD XML: eXist-db </li> <li>4.1 - Instal\u00b7laci\u00f3 d'eXist-db</li> <li>4.2 - Llenguatges de consultes XPATH i XQUERY <ul> <li>4.2.1 - XPATH </li> <li>4.2.1.1 - Vista d'arbre</li> <li>4.2.1.2 - Navegaci\u00f3</li> <li>4.2.1.3 - Seq\u00fc\u00e8ncies</li> <li>4.2.1.4 - Funcions</li> <li>4.2.2 - XQUERY </li> <li>4.2.2.1 - Consultes XQuery</li> <li>4.2.2.2 - Variables</li> <li>4.2.2.3 - Expressions avaluables</li> <li>4.2.2.4 - Expressions FLWOR</li> <li>4.2.2.5 - Alternatives</li> <li>4.2.2.6 - Exemple de consulta \"elaborada\"</li> <li>4.2.2.7 - Funcions de eXist-db de manipulaci\u00f3 de BD</li> </ul> </li> <li>5 - FIREBASE (voluntari) </li> <li>5.1 - Creaci\u00f3 d'una aplicaci\u00f3</li> <li>5.2 - Realtime Database (RD)</li> <li>5.3 - Cloud Firestore (CF)</li> <li>5.4 - Cloud Storage</li> <li>Exercicis</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T08_BD_NoSQL/321__connexi_al_servidor_de_linstitut/#321-connexio-al-servidor-de-linstitut","title":"3.2.1 - Connexi\u00f3 al servidor de l'Institut","text":"<p>Quan hem utilitzat el client, hem executat el programa mongo sense posar-li res m\u00e9s. Per defecte s'ha connectat al servidor que tenim en la mateixa m\u00e0quina.</p> <p>Per\u00f2 en realitat li podem especificar l'adre\u00e7a on est\u00e0 el servidor al qual volem connectar. En concret, l'adre\u00e7a del servidor de dades de l'Institut en el qual tamb\u00e9 tenim instal\u00b7lat MongoDB:</p> <p>mongo  89.36.214.106</p> <p>Podem connectar, per\u00f2 no podrem fer cap operaci\u00f3, perqu\u00e8 est\u00e0 habilitada l'autenticaci\u00f3 per a previndre atacs, cosa que no tenim en el servidor que hem instal\u00b7lat cadasc\u00fa en la seua m\u00e0quina.</p> <p>Aleshores, si intentem fer qualsevol operaci\u00f3, ens donar\u00e0 error perqu\u00e8 no estem autenticats:</p> <p></p> <p>La manera d'autenticar ser\u00e0 utilitzant el comando db.auth(\"usuari\", \"contrasenya\"). I en connectarem a un usuari que t\u00e9 perm\u00eds per a utilitzar la BD test:</p> <ul> <li>Usuari: ad</li> <li>Contrasenya: ieselcaminas</li> </ul> <p>A partir d'eixe moment ja podrem utilitzar-lo sense problemes:</p> <p></p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement SenseObraDerivada 4.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T08_BD_NoSQL/323__operacions_dactualitzaci_avanada/","title":"323  operacions dactualitzaci avanada","text":"<p>Bases de Dades</p> <ul> <li>Tema 8: Bases de Dades NoSQL</li> <li>1 - Introducci\u00f3</li> <li>2 - BD Clau-Valor: Redis </li> <li>2.1 - Instal\u00b7laci\u00f3 de Redis</li> <li>2.2 - Entron gr\u00e0fic: Redis Desktop Manager</li> <li>2.3 - Utilitzaci\u00f3 de Redis <ul> <li>2.3.1 - Strings</li> <li>2.3.2 - Keys</li> <li>2.3.3 - Hash</li> <li>2.3.4 - List</li> <li>2.3.5 - Set</li> <li>2.3.6 - Set ordenat</li> </ul> </li> <li>3 - MongoDB </li> <li>3.1 - Estructura JSON</li> <li>3.2 - Instal\u00b7laci\u00f3 de MongoDB <ul> <li>3.2.1 - Connexi\u00f3 al servidor de l'Institut</li> </ul> </li> <li>3.3 - Utilitzaci\u00f3 de MongoDB <ul> <li>3.3.1 - Tipus de dades</li> <li>3.3.2 - Operacions b\u00e0siques</li> <li>3.2.3 - Operacions d'actualitzaci\u00f3 avan\u00e7ada </li> <li>3.3.3.1 - $set</li> <li>3.3.3.2 - $unset</li> <li>3.3.3.3 - $rename</li> <li>3.3.3.4 - $inc</li> <li>3.3.3.5 - Elements d'un array</li> <li>3.3.3.6 - Inserci\u00f3 en Arrays: $push</li> <li>3.3.3.7 - Eliminaci\u00f3 en arrays: $pop i $pull</li> <li>3.3.3.8 - Upsert</li> </ul> </li> <li>3.4 - Consulta de documents <ul> <li>3.4.1 - Par\u00e0metres de les funcions find() i findOne()</li> <li>3.4.2 - Operadors de les condicions</li> <li>3.4.3 - Agregaci\u00f3</li> </ul> </li> <li>4 - BD XML: eXist-db </li> <li>4.1 - Instal\u00b7laci\u00f3 d'eXist-db</li> <li>4.2 - Llenguatges de consultes XPATH i XQUERY <ul> <li>4.2.1 - XPATH </li> <li>4.2.1.1 - Vista d'arbre</li> <li>4.2.1.2 - Navegaci\u00f3</li> <li>4.2.1.3 - Seq\u00fc\u00e8ncies</li> <li>4.2.1.4 - Funcions</li> <li>4.2.2 - XQUERY </li> <li>4.2.2.1 - Consultes XQuery</li> <li>4.2.2.2 - Variables</li> <li>4.2.2.3 - Expressions avaluables</li> <li>4.2.2.4 - Expressions FLWOR</li> <li>4.2.2.5 - Alternatives</li> <li>4.2.2.6 - Exemple de consulta \"elaborada\"</li> <li>4.2.2.7 - Funcions de eXist-db de manipulaci\u00f3 de BD</li> </ul> </li> <li>5 - FIREBASE (voluntari) </li> <li>5.1 - Creaci\u00f3 d'una aplicaci\u00f3</li> <li>5.2 - Realtime Database (RD)</li> <li>5.3 - Cloud Firestore (CF)</li> <li>5.4 - Cloud Storage</li> <li>Exercicis</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T08_BD_NoSQL/323__operacions_dactualitzaci_avanada/#323-operacions-dactualitzacio-avancada","title":"3.2.3 - Operacions d'actualitzaci\u00f3 avan\u00e7ada","text":"<p>Al final de la pregunta anterior vam veure l'actualitzaci\u00f3 de documents ja existents a la Base de Dades. Aquesta actualitzaci\u00f3 la f\u00e9iem modificant tot el document, encara que ten\u00edm la variant de guardar el document en una variable, modificar aquesta variable i despr\u00e9s fer l'actualitzaci\u00f3 amb aquesta variable. Per\u00f2 observeu que continua sent una modificaci\u00f3 de tot el document, una substituci\u00f3 del document antic per un document nou.</p> <p>En aquesta pregunta veurem la utilitzaci\u00f3 d'uns modificadors (modifiers) de l'operaci\u00f3 update(), que ens permetran modificar documents de forma potent: creant i eliminant claus (elements) d'un document, o canviant-los, i fins i tot afegir o eliminar elements d'un array.</p> <p>Recordem que si volem modificar tots els documents que acomplesquen la condici\u00f3, i no nom\u00e9s el primer, hem de posar com a tercer par\u00e0metre:\u00a0{multi: true}</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement SenseObraDerivada 4.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T08_BD_NoSQL/32__installaci_de_mongodb/","title":"32  installaci de mongodb","text":"<p>Bases de Dades</p> <ul> <li>Tema 8: Bases de Dades NoSQL</li> <li>1 - Introducci\u00f3</li> <li>2 - BD Clau-Valor: Redis </li> <li>2.1 - Instal\u00b7laci\u00f3 de Redis</li> <li>2.2 - Entron gr\u00e0fic: Redis Desktop Manager</li> <li>2.3 - Utilitzaci\u00f3 de Redis <ul> <li>2.3.1 - Strings</li> <li>2.3.2 - Keys</li> <li>2.3.3 - Hash</li> <li>2.3.4 - List</li> <li>2.3.5 - Set</li> <li>2.3.6 - Set ordenat</li> </ul> </li> <li>3 - MongoDB </li> <li>3.1 - Estructura JSON</li> <li>3.2 - Instal\u00b7laci\u00f3 de MongoDB <ul> <li>3.2.1 - Connexi\u00f3 al servidor de l'Institut</li> </ul> </li> <li>3.3 - Utilitzaci\u00f3 de MongoDB <ul> <li>3.3.1 - Tipus de dades</li> <li>3.3.2 - Operacions b\u00e0siques</li> <li>3.2.3 - Operacions d'actualitzaci\u00f3 avan\u00e7ada </li> <li>3.3.3.1 - $set</li> <li>3.3.3.2 - $unset</li> <li>3.3.3.3 - $rename</li> <li>3.3.3.4 - $inc</li> <li>3.3.3.5 - Elements d'un array</li> <li>3.3.3.6 - Inserci\u00f3 en Arrays: $push</li> <li>3.3.3.7 - Eliminaci\u00f3 en arrays: $pop i $pull</li> <li>3.3.3.8 - Upsert</li> </ul> </li> <li>3.4 - Consulta de documents <ul> <li>3.4.1 - Par\u00e0metres de les funcions find() i findOne()</li> <li>3.4.2 - Operadors de les condicions</li> <li>3.4.3 - Agregaci\u00f3</li> </ul> </li> <li>4 - BD XML: eXist-db </li> <li>4.1 - Instal\u00b7laci\u00f3 d'eXist-db</li> <li>4.2 - Llenguatges de consultes XPATH i XQUERY <ul> <li>4.2.1 - XPATH </li> <li>4.2.1.1 - Vista d'arbre</li> <li>4.2.1.2 - Navegaci\u00f3</li> <li>4.2.1.3 - Seq\u00fc\u00e8ncies</li> <li>4.2.1.4 - Funcions</li> <li>4.2.2 - XQUERY </li> <li>4.2.2.1 - Consultes XQuery</li> <li>4.2.2.2 - Variables</li> <li>4.2.2.3 - Expressions avaluables</li> <li>4.2.2.4 - Expressions FLWOR</li> <li>4.2.2.5 - Alternatives</li> <li>4.2.2.6 - Exemple de consulta \"elaborada\"</li> <li>4.2.2.7 - Funcions de eXist-db de manipulaci\u00f3 de BD</li> </ul> </li> <li>5 - FIREBASE (voluntari) </li> <li>5.1 - Creaci\u00f3 d'una aplicaci\u00f3</li> <li>5.2 - Realtime Database (RD)</li> <li>5.3 - Cloud Firestore (CF)</li> <li>5.4 - Cloud Storage</li> <li>Exercicis</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T08_BD_NoSQL/32__installaci_de_mongodb/#32-installacio-de-mongodb","title":"3.2 - Instal\u00b7laci\u00f3 de MongoDB","text":"<p>Podrem instal\u00b7lar MongoDB en qualsevol plataforma. I fins i tot sense tenir permisos d'administrador, com veurem en el cas d'Ubuntu.</p> <p>Instal\u00b7laci\u00f3 en Linux</p> <p>Per a poder fer la instal\u00b7laci\u00f3 m\u00e9s b\u00e0sica, podrem fer-lo sense permisos d'administrador. Si els tenim tot \u00e9s m\u00e9s c\u00f2mode, per\u00f2 si no en tenim tamb\u00e9 ho podem fer, com veurem i remarcarem a continuaci\u00f3.</p> <p>De la p\u00e0gina de MongoDB (https://www.mongodb.com/download-center#community) el m\u00e9s c\u00f2mode \u00e9s anar a la versi\u00f3 Community, i triar l'opci\u00f3 de la dreta\u00a0Current releases &amp; packages, i ens baixem la versi\u00f3 apropiada per al nostre Sistema Operatiu. Observeu com en el cas de Linux hi ha moltes versions. En el cas d'Ubuntu 20.04 de 64 bits, aquest fitxer \u00e9s: https://fastdl.mongodb.org/linux/mongodb-linux-x86_64-ubuntu2004-5.0.5.tgz. Per\u00f2 recordeu que us heu d'assegurar de la versi\u00f3</p> <p>Senzillament descomprimirem aquest fitxer on vulguem, i ja estar\u00e0 feta la instal\u00b7laci\u00f3 b\u00e0sica.</p> <p>Per defecte el directori de la Base de Dades \u00e9s /data/db</p> <p>L'\u00fanic problema que podr\u00edem tenir si no som administradors \u00e9s que no tinguem perm\u00eds per crear aquest directori. Aleshores crearem un altre directori i en el moment d'arrancar el servidor, li especificarem aquest lloc.</p> <p>La manera d'arrancar el servidor ser\u00e0:</p> <p>/bin/mongod <p>Opcionalment li podem dir on est\u00e0 la Base de Dades (si no ho especifiquem assumir\u00e0 que est\u00e0 en /data/db):</p> <p>/bin/mongod --dbpath  <p>Resumint, i estant situats al directori on hem descomprimit MongoDB:</p> <ul> <li>Si som administradors: </li> <li>Creem el directori de dades:</li> </ul> <p>mkdir /data mkdir /data/db</p> <ul> <li>Arranquem el servidor:</li> </ul> <p>./bin/mongod</p> <ul> <li>Si no som administradors: </li> <li>Creem el directori de dades:</li> </ul> <p>mkdir data mkdir data/db</p> <ul> <li>Arranquem el servidor:</li> </ul> <p>./bin/mongod --dbpath ./data/db</p> <p>La seg\u00fcent imatge il\u00b7lustra aquesta segona opci\u00f3:</p> <p></p> <p>Una vegada en marxa el servidor, no hem de tancar aquesta terminal, ja que parar\u00edem el servidor. Per a connectar un client, obrim una segona terminal i executem el client mongo:</p> <p>./bin/mongo</p> <p></p> <p>Per a provar el seu funcionament, anem a fer un parell de comandos: un per a guardar un document i un altre per a reculerar-lo.</p> <p>Per a qualsevol operaci\u00f3 s'ha de posar db seguit del nom de la col\u00b7lecci\u00f3, i despr\u00e9s l'operaci\u00f3 que volem fer. Amb el sg\u00fcent:</p> <p>&gt; db.exemple.save( {msg:\"Hola, qu\u00e8 tal?\"} )</p> <p>Ens contestar\u00e0:</p> <p>WriteResult({ \"nInserted\" : 1 })</p> <p>Indicant que ha inserit un document en la col\u00b7lecci\u00f3 exemple (si no estava creada, la crear\u00e0).</p> <p>I amb el seg\u00fcent comando recuperem la informaci\u00f3:</p> <p>&gt; db.exemple.findOne()</p> <p>Que ens tornar\u00e0:</p> <p>{ \"_id\" : ObjectId(\"56cc130590d651d45ef3d3be\"), \"msg\" : \"Hola, qu\u00e8 tal?\" }</p> <p>Tot ho fa en la mateixa terminal, i a cadasc\u00fa de nosaltres ens donar\u00e0 un n\u00famero diferent en ObjectId. En la seg\u00fcent imatge es veuen les dues operacions:</p> <p></p> <p>En realitat estem connectats a una Base de Dades anomenada test. Podem crear i utilitzar m\u00e9s d'una Base de Dades, per\u00f2 en aquest curs tindr\u00e9s m\u00e9s que suficient amb aquesta Base de Dades. Per a comprovar-ho podem executar la seg\u00fcent sent\u00e8ncia, que ens torna el nom de la Base de Dades:</p> <p>&gt; db.getName() test</p> <p>Instal\u00b7laci\u00f3 en Windows</p> <p>No ofereix cap dificultat. Ens baixem la versi\u00f3 apropiada de MongoDB per a Windows, depenent de si \u00e9s de 32 o 64 bits la nostra versi\u00f3, que resultar\u00e0 ser un .msi directament executable. En el moment de fer aquestos apunts, el de la versi\u00f3 de 64 bits era el fitxer:</p> <p>mongodb-win32-x86_64-2008plus-ssl-3.2.3-signed.msi</p> <p>Una vegada baixat, executem el fitxer. Haurem d'acceptar la llic\u00e8ncia, instal\u00b7lar la versi\u00f3 completa, i acceptar quan Windows ens avise que un programa vol instal\u00b7lar software. El de sempre.</p> <p>Com en el cas de Linux, abans d'executar el servidor haurem de tenir el directori creat. Per defecte el directori ser\u00e0 \\data\\db</p> <p>Aqueste serien les ordres per a crear el directori i despr\u00e9s arrancar el servidor:</p> <p>mkdir \\data\\db C:\\Program Files\\MongoDB\\Server\\3.2\\bin\\mongod.exe</p> <p>En aquest a imatge s'observa que en intentar posar en marxa el servidor, el Firewall de Windows ho detecta, i sol\u00b7licita perm\u00e9s per posar-lo en marxa. Acceptem i prou:</p> <p></p> <p>Per a connectar-nos com a clients, ho haurem de fer des d'una altra terminal, ja que si tanquem aquesta pararem el servidor. El programa \u00e9s mongo.exe:</p> <p>C:\\Program Files\\MongoDB\\Server\\3.2\\bin\\mongo.exe</p> <p></p> <p>Per a provar el seu funcionament, anem a fer un parell de comandos: un per a guardar un document i un altre per a reculerar-lo.</p> <p>Per a qualsevol operaci\u00f3 s'ha de posar db seguit del nom de la col\u00b7lecci\u00f3, i despr\u00e9s l'operaci\u00f3 que volem fer. Amb el sg\u00fcent:</p> <p>&gt; db.exemple.save( {msg:\"Hola, qu\u00e8 tal?\"} )</p> <p>Ens contestar\u00e0:</p> <p>WriteResult({ \"nInserted\" : 1 })</p> <p>Indicant que ha inserit un document en la col\u00b7lecci\u00f3 exemple (si no estava creada, la crear\u00e0).</p> <p>I amb el seg\u00fcent comando recuperem la informaci\u00f3:</p> <p>&gt; db.exemple.findOne()</p> <p>Que ens tornar\u00e0:</p> <p>{ \"_id\" : ObjectId(\"56cc1acd73b559230de8f71b\"), \"msg\" : \"Hola, qu\u00e8 tal?\" }</p> <p>Tot ho fa en la mateixa terminal, i a cadasc\u00fa de nosaltres ens donar\u00e0 un n\u00famero diferent en ObjectId. En la seg\u00fcent imatge es veuen les dues operacions:</p> <p></p> <p>En realitat estem connectats a una Base de Dades anomenada test. Podem crear i utilitzar m\u00e9s d'una Base de Dades, per\u00f2 en aquest curs tindr\u00e9s m\u00e9s que suficient amb aquesta Base de Dades. Per a comprovar-ho podem executar la seg\u00fcent sent\u00e8ncia, que ens torna el nom de la Base de Dades:</p> <p>&gt; db.getName() test</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement SenseObraDerivada 4.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T08_BD_NoSQL/331__tipus_de_dades/","title":"331  tipus de dades","text":"<p>Bases de Dades</p> <ul> <li>Tema 8: Bases de Dades NoSQL</li> <li>1 - Introducci\u00f3</li> <li>2 - BD Clau-Valor: Redis </li> <li>2.1 - Instal\u00b7laci\u00f3 de Redis</li> <li>2.2 - Entron gr\u00e0fic: Redis Desktop Manager</li> <li>2.3 - Utilitzaci\u00f3 de Redis <ul> <li>2.3.1 - Strings</li> <li>2.3.2 - Keys</li> <li>2.3.3 - Hash</li> <li>2.3.4 - List</li> <li>2.3.5 - Set</li> <li>2.3.6 - Set ordenat</li> </ul> </li> <li>3 - MongoDB </li> <li>3.1 - Estructura JSON</li> <li>3.2 - Instal\u00b7laci\u00f3 de MongoDB <ul> <li>3.2.1 - Connexi\u00f3 al servidor de l'Institut</li> </ul> </li> <li>3.3 - Utilitzaci\u00f3 de MongoDB <ul> <li>3.3.1 - Tipus de dades</li> <li>3.3.2 - Operacions b\u00e0siques</li> <li>3.2.3 - Operacions d'actualitzaci\u00f3 avan\u00e7ada </li> <li>3.3.3.1 - $set</li> <li>3.3.3.2 - $unset</li> <li>3.3.3.3 - $rename</li> <li>3.3.3.4 - $inc</li> <li>3.3.3.5 - Elements d'un array</li> <li>3.3.3.6 - Inserci\u00f3 en Arrays: $push</li> <li>3.3.3.7 - Eliminaci\u00f3 en arrays: $pop i $pull</li> <li>3.3.3.8 - Upsert</li> </ul> </li> <li>3.4 - Consulta de documents <ul> <li>3.4.1 - Par\u00e0metres de les funcions find() i findOne()</li> <li>3.4.2 - Operadors de les condicions</li> <li>3.4.3 - Agregaci\u00f3</li> </ul> </li> <li>4 - BD XML: eXist-db </li> <li>4.1 - Instal\u00b7laci\u00f3 d'eXist-db</li> <li>4.2 - Llenguatges de consultes XPATH i XQUERY <ul> <li>4.2.1 - XPATH </li> <li>4.2.1.1 - Vista d'arbre</li> <li>4.2.1.2 - Navegaci\u00f3</li> <li>4.2.1.3 - Seq\u00fc\u00e8ncies</li> <li>4.2.1.4 - Funcions</li> <li>4.2.2 - XQUERY </li> <li>4.2.2.1 - Consultes XQuery</li> <li>4.2.2.2 - Variables</li> <li>4.2.2.3 - Expressions avaluables</li> <li>4.2.2.4 - Expressions FLWOR</li> <li>4.2.2.5 - Alternatives</li> <li>4.2.2.6 - Exemple de consulta \"elaborada\"</li> <li>4.2.2.7 - Funcions de eXist-db de manipulaci\u00f3 de BD</li> </ul> </li> <li>5 - FIREBASE (voluntari) </li> <li>5.1 - Creaci\u00f3 d'una aplicaci\u00f3</li> <li>5.2 - Realtime Database (RD)</li> <li>5.3 - Cloud Firestore (CF)</li> <li>5.4 - Cloud Storage</li> <li>Exercicis</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T08_BD_NoSQL/331__tipus_de_dades/#331-tipus-de-dades","title":"3.3.1 - Tipus de dades","text":"<p>Els valors dels elements, \u00e9s a dir de les parelles clau valor, poden ser d'una amplia gama de tipus. Fem un r\u00e0pid rep\u00e0s.</p> <p>En els exemples que van a continuaci\u00f3 definim senzillament parelles clau-valor dels diferents tipus, o en tot cas ens ho guardem en variables, per\u00f2 no guardarem encara en la Base de Dades (ho farem en la seg\u00fcent pregunta).</p> <p>Quan guardem en una variable es mostrar\u00e0 el prompt, la definici\u00f3 de la variable i despr\u00e9s el resultat d'haver guardat la variable. Utilitzarem requadres blancs. Els requadres grocs s\u00f3n \u00fanicament de la definici\u00f3 d'una clau-valor d'un determinat tipus</p> <p>NULL</p> <p>M\u00e9s que un tipus de dades \u00e9s un valor, millor dit, l'abs\u00e8ncia de valor</p> <p>{ \"x\" : null }</p> <p>BOOLEAN</p> <p>El tipus boole\u00e0, que pot agafar els valors true o false.</p> <p>{ \"x\" : true }</p> <p>{ \"y\" : false }</p> <p>NUMBER</p> <p>Per defecte, el tiups de dades num\u00e8rics ser\u00e0 el de coma flotant (float), simple precisi\u00f3. Si volem un altre tiups (enter, doble precisi\u00f3, ...) ho haurem d'indicar expressament. Aix\u00ed els dos seg\u00fcents valors s\u00f3n float:</p> <p>{ \"x\" : 3.14 }</p> <p>{ \"y\" : 3 }</p> <p>Si volem que siga estrictament enter, per exemple, haurem d'utilitzar una funci\u00f3 de conversi\u00f3:</p> <p>{ \"x\" : NumberDouble(\"3.14\") }</p> <p>{ \"y\" : NumberInt(\"3\") }</p> <p>STRING</p> <p>Es pot guardar qualsevol cadena amb car\u00e0cters de la codificaci\u00f3 UTF-8</p> <p>{\u00a0 x : \"Hola, qu\u00e8 tal?\"}</p> <p>DATE</p> <p>Es guarda data i hora, i internament es guarden en milisegons des de l'any inicial. No es guara el Time zone , \u00e9s a dir,* la desviaci\u00f3 respecte a l'hora internacional.</p> <p>{ x : ISODate(\"2016-02-24T11:15:27.471Z\") }</p> <p>Normalment utilitzarem funcions de tractament de la data-hora. L'anterior era per a convertir el string en data-hora. La seg\u00fcent \u00e9s per a obtenir la data-hora actual:</p> <p>{ x : new Date() }</p> <p>\u00c9s a dir, que si no posem par\u00e0metre, ens d\u00f3na la data-hora actual. Per\u00f2 li podem posar com a par\u00e0metre la data-hora que volem que genere. En aquest exemple, nom\u00e9s posem data, per tant l'ho ser\u00e0 les 00:00:</p> <p>&gt; z = new Date(\"2016-08-01\") ISODate(\"2016-08-01T00:00:00Z\")</p> <p>En aquest s\u00ed que posem una determinada hora, i observeu com hem deposar la T (Time) entre el dia i l'hora:</p> <p>&gt; z = new Date(\"2016-08-01T10:00\") ISODate(\"2016-08-01T08:00:00Z\")</p> <p>\u00c9s molt important que posem sempre New Date() per a generar una data-hora. Si posem \u00fanicament Date(), el que estem generant \u00e9s un string (amb la data i hora, per\u00f2 un string):</p> <p>&gt; z = Date(\"2016-08-01\") Fri Feb 26 2016 08:30:13 GMT+0100 (CET)</p> <p>ARRAY</p> <p>\u00c9s un conjunt d'elements, cadascun de qualsevol tipus, encara que el m\u00e9s habitual \u00e9s que siguen del mateix tipus. Van entre claud\u00e0tors ( [ ] ) i els elements separats per comes.</p> <p>{ x : [ 2 , 4 , 6 , 8 ] }</p> <p>Com coment\u00e0vem, cada element de l'array pot ser de qualsevol tipus:</p> <p>{ y : [ 2 , 3.14 , \"Hola\" , new Date() ] }</p> <p>En MongoDB podrem treballar molt b\u00e9 amb arrays, i tindrem operacions per a poder buscar dins de l'array, modificar un element, crear \u00edndex, ...</p> <p>DOCUMENTS\u00a0(OBJECTES)</p> <p>Els documents poden contenir com a elements uns altres documents (objectes en la terminologis\u00a1a JSON, per\u00f2 documents en la terminologia de MongoDB).</p> <p>Com sempre van entre claus ( { } ), i els elements que contindran van separats per comes i seran parelles clau-valor de qualsevol tipus (fins i tot altres documents).</p> <p>{ x : { a : 1 , b : 2 } }</p> <p>Posar documents dins d'uns altres documents (el que s'anomena embedded document) ens permet guardar la informaci\u00f3 d'una manera m\u00e9s real, no tan plana. Aix\u00ed per exemple, les dades d'una persona les podr\u00edem definir de la seg\u00fcent manera. Les posarem en una variable, per veure despr\u00e9s com podem accedir als diferents elements, encara que el m\u00e9s normal ser\u00e0 guardar-lo en la Base de Dades (amb insert() o save() ). Si copiem el que va a continuaci\u00f3 al terminal de Mongo, ens apareixer\u00e0 amb un format estrany. \u00c9s perqu\u00e8 la sent\u00e8ncia d'assignaci\u00f3 a la variable ocupa m\u00e9s d'una l\u00ednia, i apareixeran 3 punts al principi per a indicar que continua la sent\u00e8ncia. Per\u00f2 funcionar\u00e0 perfectament :</p> <p>doc = { nom:\"Joan Mart\u00ed\", adre\u00e7a: { carrer:\"Major\", n\u00famero:1, poblaci\u00f3:\"Castell\u00f3\" } , tel\u00e8fons : [964223344,678345123] }</p> <p>Observeu com aquesta estructura que ha quedat tan clara, segurament en una Base de Dades Relacional ens hauria tocat guardar en 3 taules: la de persones, la d'adreces i la de tel\u00e8fons.</p> <p>Per a accedir als elements d'un document pos\u00e0vem el punt. Doncs el mateix per als elements d'un document dins d'un document. I tamb\u00e9 podem accedir als elements d'un array, posant l'\u00edndex entre claud\u00e0tors.</p> <p>&gt; doc.nom Joan Mart\u00ed</p> <p>&gt; doc.adre\u00e7a</p> <p>&gt; doc.adre\u00e7a.carrer Major</p> <p>&gt; doc.tel\u00e8fons [ 964223344, 678345123 ]</p> <p>&gt; doc.tel\u00e8fons[0] 964223344</p> <p>OBJECT ID</p> <p>\u00c9s un tipus que defineix MongoDB per a poder obtenir valors \u00fanics. \u00c9s el valor per defecte de l'element _id , necessari en tot document (atenci\u00f3: en un document, no en un element de tipus document que hem dit equivalent a l'objecte de JSON). \u00c9s un n\u00famero long, \u00e9s a dir que utilitza 24 bytes.</p> <p>Farem proves de la seua utilitzaci\u00f3 en la se\u00fcent pregunta, en el moment d'inserir diferents documents.</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement SenseObraDerivada 4.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T08_BD_NoSQL/332__operacions_bsiques/","title":"332  operacions bsiques","text":"<p>Bases de Dades</p> <ul> <li>Tema 8: Bases de Dades NoSQL</li> <li>1 - Introducci\u00f3</li> <li>2 - BD Clau-Valor: Redis </li> <li>2.1 - Instal\u00b7laci\u00f3 de Redis</li> <li>2.2 - Entron gr\u00e0fic: Redis Desktop Manager</li> <li>2.3 - Utilitzaci\u00f3 de Redis <ul> <li>2.3.1 - Strings</li> <li>2.3.2 - Keys</li> <li>2.3.3 - Hash</li> <li>2.3.4 - List</li> <li>2.3.5 - Set</li> <li>2.3.6 - Set ordenat</li> </ul> </li> <li>3 - MongoDB </li> <li>3.1 - Estructura JSON</li> <li>3.2 - Instal\u00b7laci\u00f3 de MongoDB <ul> <li>3.2.1 - Connexi\u00f3 al servidor de l'Institut</li> </ul> </li> <li>3.3 - Utilitzaci\u00f3 de MongoDB <ul> <li>3.3.1 - Tipus de dades</li> <li>3.3.2 - Operacions b\u00e0siques</li> <li>3.2.3 - Operacions d'actualitzaci\u00f3 avan\u00e7ada </li> <li>3.3.3.1 - $set</li> <li>3.3.3.2 - $unset</li> <li>3.3.3.3 - $rename</li> <li>3.3.3.4 - $inc</li> <li>3.3.3.5 - Elements d'un array</li> <li>3.3.3.6 - Inserci\u00f3 en Arrays: $push</li> <li>3.3.3.7 - Eliminaci\u00f3 en arrays: $pop i $pull</li> <li>3.3.3.8 - Upsert</li> </ul> </li> <li>3.4 - Consulta de documents <ul> <li>3.4.1 - Par\u00e0metres de les funcions find() i findOne()</li> <li>3.4.2 - Operadors de les condicions</li> <li>3.4.3 - Agregaci\u00f3</li> </ul> </li> <li>4 - BD XML: eXist-db </li> <li>4.1 - Instal\u00b7laci\u00f3 d'eXist-db</li> <li>4.2 - Llenguatges de consultes XPATH i XQUERY <ul> <li>4.2.1 - XPATH </li> <li>4.2.1.1 - Vista d'arbre</li> <li>4.2.1.2 - Navegaci\u00f3</li> <li>4.2.1.3 - Seq\u00fc\u00e8ncies</li> <li>4.2.1.4 - Funcions</li> <li>4.2.2 - XQUERY </li> <li>4.2.2.1 - Consultes XQuery</li> <li>4.2.2.2 - Variables</li> <li>4.2.2.3 - Expressions avaluables</li> <li>4.2.2.4 - Expressions FLWOR</li> <li>4.2.2.5 - Alternatives</li> <li>4.2.2.6 - Exemple de consulta \"elaborada\"</li> <li>4.2.2.7 - Funcions de eXist-db de manipulaci\u00f3 de BD</li> </ul> </li> <li>5 - FIREBASE (voluntari) </li> <li>5.1 - Creaci\u00f3 d'una aplicaci\u00f3</li> <li>5.2 - Realtime Database (RD)</li> <li>5.3 - Cloud Firestore (CF)</li> <li>5.4 - Cloud Storage</li> <li>Exercicis</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T08_BD_NoSQL/332__operacions_bsiques/#332-operacions-basiques","title":"3.3.2 - Operacions b\u00e0siques","text":"<p>En aquest punt anem a veure les operacions m\u00e9s b\u00e0siques, per a poder treballar sobre exemples pr\u00e0ctics, i aix\u00ed disposar ja d'unes dades inicials per a practicar.</p> <p>Inserci\u00f3 elemental</p> <p>La funci\u00f3 insert afegir\u00e0 documents a una col\u00b7lecci\u00f3. En el par\u00e0metre posem el document directament, o una variable que continga el document. Si la col\u00b7lecci\u00f3 no existia, la crear\u00e0 i despr\u00e9s afegir\u00e0 el document. En la seg\u00fcent sent\u00e8ncia estem treballant sobre la col\u00b7lecci\u00f3 exemple, que segurament ja existir\u00e0 de quan vam la pregunta 3.1 d'instal\u00b7laci\u00f3 de MongoDB, que per a provar vam inserir un document. Per\u00f2 si no existia, la crear\u00e0 sense problemes.</p> <p>&gt; db.exemple.insert({ msg2 : \"Com va la cosa?\"}) WriteResult({ \"nInserted\" : 1 })</p> <p>Acabem d'inserir un nou document, i aix\u00ed ens ho avisa ( { \"nInserted\" : 1 } , s'ha inserit un document). Autom\u00e0ticament haur\u00e0 creat un element _id de tipus ObjectId, ja que li fa falta per a identificar el document entre tots els altres de la col\u00b7lecci\u00f3.</p> <p>I en aquest exemple ens guardem el document en la variable doc, i despr\u00e9s l'inserim</p> <p>&gt; doc = { msg3 : \"Per ac\u00ed no ens podem queixar ...\"} { \"msg3\" : \"Per ac\u00ed no ens podem queixar ...\" } &gt; db.exemple.insert(doc) WriteResult({ \"nInserted\" : 1 })</p> <p>Tamb\u00e9 ens indica que ha inserit un document. I haur\u00e0 creat tamb\u00e9 el camp _id com veurem en el seg\u00fcent punt</p> <p>Lectura</p> <p>Tenim dues funcions per a recuperar informaci\u00f3: find i findOne.</p> <ul> <li>find() : recuperar\u00e0 tots els documents de la col\u00b7lecci\u00f3, encara que podrem posar criteris per a que ens torne tots els documents que acomplesquen aquestos criteris (ho veurem m\u00e9s avant).</li> <li>findOne() : nom\u00e9s tornar\u00e0 un document, en principi el primer. Pot ser sobre tots els documents (i per tant seria el primer document), o posar una condici\u00f3, i tornaria el primer que acomplir\u00e0 la condici\u00f3.</li> </ul> <p>Exemple de find():</p> <p>&gt; db.exemple.find() { \"_id\" : ObjectId(\"56ce310bc61e04ba81def50b\"), \"msg\" : \"Hola, qu\u00e8 tal?\" } { \"_id\" : ObjectId(\"56ce31f6c61e04ba81def50c\"), \"msg2\" : \"Com va la cosa?\" } { \"_id\" : ObjectId(\"56ce3237c61e04ba81def50d\"), \"msg3\" : \"Per ac\u00ed no ens podem queixar ...\" } &gt;</p> <p>Exemple de findOne():</p> <p>&gt; db.exemple.findOne() { \"_id\" : ObjectId(\"56ce310bc61e04ba81def50b\"), \"msg\" : \"Hola, qu\u00e8 tal?\" } &gt;</p> <p>En tots els casos podem comprovar que \u00e9s cert el que ven\u00edem afirmant, que ha creat autom\u00e0ticament l'element _id per a cada document guardat. Evidentment, cadasc\u00fa de nosaltres tindr\u00e0 una valors diferents.</p> <p>Inserci\u00f3 especificant el id</p> <p>Ara que ja sabem consultar els document de la col\u00b7lecci\u00f3 amb find() anem a continuar les insercions de documents, per veure les possibilitats que tenim.</p> <p>En els document que hem inserit fins el moment, no hem especificat el camp _id, i Mongo l'ha generat autom\u00e0ticament de tipus ObjectId.</p> <p>Per\u00f2 nosaltres podrem posar aquest camp _id amb el valor que vulguem. Aix\u00f2 s\u00ed, haurem d'estar segurs que aquest valor no l'agafa cap altre dcument de la col\u00b7lecci\u00f3, o ens donar\u00e0 un error.</p> <p>Aix\u00ed per exemple anem a inserir la informaci\u00f3 d'uns alumnes. Els posarem en una col\u00b7lecci\u00f3 nova anomenada alumnes, i els intentarem posar un _id personal. Per exemple posarem els n\u00fameros 51, 52, 53, ...</p> <p>&gt; db.alumnes.insert ({_id: 51 , nom: \"Rebeca\" , cognoms: \"Mart\u00ed Peral\"}) WriteResult({ \"nInserted\" : 1 })</p> <p>Ha anat b\u00e9, i si mirem els documents que tenim en la col\u00b7lecci\u00f3, comprovarem que ens ha respectat el _id:</p> <p>&gt; db.alumnes.find() { \"_id\" : 51, \"nom\" : \"Rebeca\", \"cognoms\" : \"Mart\u00ed Peral\" } &gt;</p> <p>Per\u00f2 si intentem inserir un altre document amb el mateix _id (51), ens donar\u00e0 error:</p> <p>&gt; db.alumnes.insert ({_id: 51 , nom: \"Raquel\" , cognoms: \"Gomis Arnau\"}) WriteResult({ \"nInserted\" : 0, \"writeError\" : { \"code\" : 11000, \"errmsg\" : \"E11000 duplicate key error collection: test.alumnes index: _id_ dup key: { : 51.0 }\" } }) &gt;</p> <p>Ens avisa que estem duplicant la clau principal , \u00e9s a dir l'identificador.</p> <p>Inserci\u00f3 m\u00faltiple: insertMany()</p> <p>Quan els documents que volem inserir s\u00f3n senzills, podem inserir m\u00e9s d'un a la vegada, posant dis del insert() un array amb tots els elements. Depenent de la versi\u00f3 de Mongo, aquesta operaci\u00f3 l'haurem de fer per mig d'una altre sent\u00e8ncia: insertMany() En el seg\u00fcent exemple creem uns quants nombres primers en la col\u00b7lecci\u00f3 del mateix nom:</p> <p>&gt; db.nombresprimers.insertMany( [ {_id:2} , {_id:3} , {_id:5} , {_id:7} , {_id:11} , {_id:13} , {_id:17} , {_id:19} ] ) BulkWriteResult({ \"writeErrors\" : [ ], \"writeConcernErrors\" : [ ], \"nInserted\" : 8, \"nUpserted\" : 0, \"nMatched\" : 0, \"nModified\" : 0, \"nRemoved\" : 0, \"upserted\" : [ ] }) &gt;</p> <p>Ens avisa que ha fet 8 insercions, i ac\u00ed els tenim:</p> <p>&gt; db.nombresprimers.find() { \"_id\" : 2 } { \"_id\" : 3 } { \"_id\" : 5 } { \"_id\" : 7 } { \"_id\" : 11 } { \"_id\" : 13 } { \"_id\" : 17 } { \"_id\" : 19 } &gt;</p> <p>Esborrat</p> <p>Per a esborrar un document d 'una col\u00b7lecci\u00f3 utilitzarem la funci\u00f3 remove, passant-li com a par\u00e0metre la condici\u00f3 del document o documents a esborrar.</p> <p>&gt; db.nombresprimers.remove( {\"_id\" : 19} ) WriteResult({ \"nRemoved\" : 1 }) &gt;</p> <p>Ens avisa que ha esborrat un document.</p> <p>La condici\u00f3 no cal que siga sobre el camp _id. Pot ser sobre qualsevol camp, i esborrar\u00e0 tots els que coincideixen.</p> <p>&gt; db.exemple.remove( {\"msg3\" : \"Per ac\u00ed no ens podem queixar ...\"} ) WriteResult({ \"nRemoved\" : 1 }) &gt;</p> <p>Tamb\u00e9 tenim la possibilitat d'esborrar tota una col\u00b7lecci\u00f3 amb la funci\u00f3 drop(). Pareu atenci\u00f3 perqu\u00e8 \u00e9s molt senzilla d'eliminar, i per tant, potencialment molt perillosa.</p> <p>&gt; db.nombresprimers.drop() true &gt;</p> <p>Actualitzaci\u00f3: update() i updateMany()</p> <p>La funci\u00f3 update servir\u00e0 per a actualitzar un document ja guardat. Pot tindre tres par\u00e0metres, els dos primers obligatoris:</p> <ul> <li>El primer par\u00e0metre ser\u00e0 la condici\u00f3 per a trobar el document (o els documents) que es va a actualitzar.</li> <li>El segon par\u00e0metre ser\u00e0 el nou document que substituir\u00e0 l'anterior</li> <li>El tercer par\u00e0metre \u00e9s per a especificar opcions addicionals, com per exemple si es modifica nom\u00e9s un document o tots els que acompleixen la condici\u00f3</li> </ul> <p>Per exemple, si mirem les dades actuals:</p> <p>&gt; db.exemple.find() { \"_id\" : ObjectId(\"56ce310bc61e04ba81def50b\"), \"msg\" : \"Hola, qu\u00e8 tal?\" }</p> <p>Podem comprovar el contingut del segon document, el que te msg2. Anem a modificar-lo: en el primer par\u00e0metre posem condici\u00f3 de b\u00fasqueda (nom\u00e9s hi haur\u00e0 un) i en el segon posem el nou document que substituir\u00e0 l'anterior</p> <p>&gt; db.exemple.update( {msg2:\"Com va la cosa?\"} , {msg2:\"Qu\u00e8? Com va la cosa?\"} ) WriteResult({ \"nMatched\" : 1, \"nUpserted\" : 0, \"nModified\" : 1 })</p> <p>Observeu que la contestaci\u00f3 del update() \u00e9s que ha fet match (hi ha hagut coincid\u00e8ncia) amb un document, i que ha modificat un. Si no en troba cap, no donar\u00e0 error, senzillament dir\u00e0 que ha fet match amb 0 documents, i que ha modificat 0 documents. Mirem com efectivament ha canviat el segon document</p> <p>&gt; db.exemple.find() { \"_id\" : ObjectId(\"56ce310bc61e04ba81def50b\"), \"msg\" : \"Hola, qu\u00e8 tal?\" }</p> <p>Ens vindran molt b\u00e9 les variables per a les actualitzacions, ja que en moltes ocasions ser\u00e0 modificar lleugerament el document, canviant o afegint algun element. Ho podrem fer c\u00f2modament amb la variable: primer guardem el document a modificar en una variable; despr\u00e9s modifiquem la variable; i per \u00faltim fem l'operaci\u00f3 d'actualitzaci\u00f3. Evidentment si tenim alguna variable amb el contingut del document ens podr\u00edem estalviar el primer pas.</p> <p>&gt; doc1 = db.exemple.findOne()</p> <p>&gt; doc1.titol = \"Missatge 1\" Missatge 1</p> <p>&gt; db.exemple.update( {msg:\"Hola, qu\u00e8 tal?\"} , doc1) WriteResult({ \"nMatched\" : 1, \"nUpserted\" : 0, \"nModified\" : 1 }) &gt; db.exemple.findOne() { \"_id\" : ObjectId(\"56ce310bc61e04ba81def50b\"), \"msg\" : \"Hola, qu\u00e8 tal?\", \"titol\" : \"Missatge 1\" } &gt;</p> <p>Opcions</p> <p>Com hav\u00edem comentat al principi de la pregunta, es pot posar un tercer par\u00e0metre per a especificar una s\u00e8rie d'opcions. Nom\u00e9s en veurem una: la possibilitat de dir que es modifiquen tots els documents que acomplesquen la condici\u00f3 del primer par\u00e0metre. Per defecte, si no posem aquesta opci\u00f3, es modificar\u00e0 \u00fanicament el primer document que acompleix la condici\u00f3. Si volem que es modifiquen tots els documents que acompleixen la condici\u00f3 haurem de posar com a tercer par\u00e0metre:</p> <p>{ multi: true }</p> <p>Per exemple, suposem que tenim dos documents amb el camp\u00a0msg\u00a0amb el valor \"Hola, qu\u00e8 tal?, aleshores, amb aquesta sent\u00e8ncia es modificarien els dos:</p> <p>&gt; db.exemple.update( {msg:\"Hola, qu\u00e8 tal?\"} , doc1, {multi:true}) WriteResult({ \"nMatched\" : 2, \"nUpserted\" : 0, \"nModified\" : 2 })</p> <p>Est\u00e0 marcat en roig, perqu\u00e8 segurament no tindrem 2 documents amb aquesta condici\u00f3.</p> <p>Tamb\u00e9 ho aconseguir\u00edem amb la funci\u00f3 updateMany(), que modificar\u00e0 tots els documents que acomplesquen la condici\u00f3. Mo caldr\u00e0, evidentment, posar-li el tercer par\u00e0metre:</p> <p>&gt; db.exemple.updateMany( {msg:\"Hola, qu\u00e8 tal?\"} , doc1) WriteResult({ \"nMatched\" : 2, \"nUpserted\" : 0, \"nModified\" : 2 })</p> <p>Tamb\u00e9 est\u00e0 marcat en roig perqu\u00e8 segurament no tindrem 2 documents amb aquesta condici\u00f3.</p> <p>Funci\u00f3 Save</p> <p>Hem vist la manera d'inserir nous documents amb insert() i d'actualitzar documents existents amb update(). Per\u00f2 si intentem inserir un document ja existent (la manera de saber-ho \u00e9s pel camp _id) ens donar\u00e0 error. I si intentem actualitzar un document no existent, no donar\u00e0 error, per\u00f2 no actualitzar\u00e0 res.</p> <p>La funci\u00f3 save() \u00e9s una barreja dels dos: si el document que anem a salvar ja existeix, doncs el modificar\u00e0, i si no existeix el crear\u00e0.</p> <p>Provem-ho amb un exemple, i aprofitem-nos que en la variable doc1 tenim el contingut d'un document. Fem una modificaci\u00f3, per exemple afegint el camp destinatari:</p> <p>&gt; doc1.destinatari = \"Ferran\" Ferran</p> <p>&gt; doc1 { \"_id\" : ObjectId(\"56ce310bc61e04ba81def50b\"), \"msg\" : \"Hola, qu\u00e8 tal?\", \"titol\" : \"Missatge 1\", \"destinatari\" : \"Ferran\" }</p> <p>Anem a guardar-lo amb save():</p> <p>&gt; db.exemple.save(doc1) WriteResult({ \"nMatched\" : 1, \"nUpserted\" : 0, \"nModified\" : 1 })</p> <p>Ja ens avisa qiue com ha trobat el document (\"nMatched : 1\") ha modificat un. Efectivament, mirem com ha modificat el document existent:</p> <p>&gt; db.exemple.find() { \"_id\" : ObjectId(\"56ce310bc61e04ba81def50b\"), \"msg\" : \"Hola, qu\u00e8 tal?\", \"titol\" : \"Missatge 1\", \"destinatari\" : \"Ferran\" }</p> <p>Anem a fer ara una modificaci\u00f3 del camp _id. A tots els efectes ser\u00e0 un document nou, ja que la manera d'identificar un document \u00e9s per aquest camp:</p> <p>&gt; doc1._id=100 100</p> <p>&gt; doc1 { \"_id\" : 100, \"msg\" : \"Hola, qu\u00e8 tal?\", \"titol\" : \"Missatge 1\", \"destinatari\" : \"Ferran\" }</p> <p>I ara anem a fer el save() d'aquest document:</p> <p>&gt; db.exemple.save(doc1) WriteResult({ \"nMatched\" : 0, \"nUpserted\" : 1, \"nModified\" : 0, \"_id\" : 100 })</p> <p>Observeu com ara avisa que no n'ha trobat cap igual, i el que fa \u00e9s inserir-lo (ens diu nUpserted, que \u00e9s una barreja de Updated i\u00a0Inserted; m\u00e9s avant tornarem a aquesta paraula)</p> <p>&gt; db.exemple.find() { \"_id\" : ObjectId(\"56ce310bc61e04ba81def50b\"), \"msg\" : \"Hola, qu\u00e8 tal?\", \"titol\" : \"Missatge 1\", \"destinatari\" : \"Ferran\" } { \"_id\" : ObjectId(\"56ce31f6c61e04ba81def50c\"), \"msg2\" : \"Qu\u00e8? Com va la cosa?\" }</p> <p>Efectivament s'ha guardat com un nou document</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement SenseObraDerivada 4.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T08_BD_NoSQL/3331__set/","title":"3331  set","text":"<p>Bases de Dades</p> <ul> <li>Tema 8: Bases de Dades NoSQL</li> <li>1 - Introducci\u00f3</li> <li>2 - BD Clau-Valor: Redis </li> <li>2.1 - Instal\u00b7laci\u00f3 de Redis</li> <li>2.2 - Entron gr\u00e0fic: Redis Desktop Manager</li> <li>2.3 - Utilitzaci\u00f3 de Redis <ul> <li>2.3.1 - Strings</li> <li>2.3.2 - Keys</li> <li>2.3.3 - Hash</li> <li>2.3.4 - List</li> <li>2.3.5 - Set</li> <li>2.3.6 - Set ordenat</li> </ul> </li> <li>3 - MongoDB </li> <li>3.1 - Estructura JSON</li> <li>3.2 - Instal\u00b7laci\u00f3 de MongoDB <ul> <li>3.2.1 - Connexi\u00f3 al servidor de l'Institut</li> </ul> </li> <li>3.3 - Utilitzaci\u00f3 de MongoDB <ul> <li>3.3.1 - Tipus de dades</li> <li>3.3.2 - Operacions b\u00e0siques</li> <li>3.2.3 - Operacions d'actualitzaci\u00f3 avan\u00e7ada </li> <li>3.3.3.1 - $set</li> <li>3.3.3.2 - $unset</li> <li>3.3.3.3 - $rename</li> <li>3.3.3.4 - $inc</li> <li>3.3.3.5 - Elements d'un array</li> <li>3.3.3.6 - Inserci\u00f3 en Arrays: $push</li> <li>3.3.3.7 - Eliminaci\u00f3 en arrays: $pop i $pull</li> <li>3.3.3.8 - Upsert</li> </ul> </li> <li>3.4 - Consulta de documents <ul> <li>3.4.1 - Par\u00e0metres de les funcions find() i findOne()</li> <li>3.4.2 - Operadors de les condicions</li> <li>3.4.3 - Agregaci\u00f3</li> </ul> </li> <li>4 - BD XML: eXist-db </li> <li>4.1 - Instal\u00b7laci\u00f3 d'eXist-db</li> <li>4.2 - Llenguatges de consultes XPATH i XQUERY <ul> <li>4.2.1 - XPATH </li> <li>4.2.1.1 - Vista d'arbre</li> <li>4.2.1.2 - Navegaci\u00f3</li> <li>4.2.1.3 - Seq\u00fc\u00e8ncies</li> <li>4.2.1.4 - Funcions</li> <li>4.2.2 - XQUERY </li> <li>4.2.2.1 - Consultes XQuery</li> <li>4.2.2.2 - Variables</li> <li>4.2.2.3 - Expressions avaluables</li> <li>4.2.2.4 - Expressions FLWOR</li> <li>4.2.2.5 - Alternatives</li> <li>4.2.2.6 - Exemple de consulta \"elaborada\"</li> <li>4.2.2.7 - Funcions de eXist-db de manipulaci\u00f3 de BD</li> </ul> </li> <li>5 - FIREBASE (voluntari) </li> <li>5.1 - Creaci\u00f3 d'una aplicaci\u00f3</li> <li>5.2 - Realtime Database (RD)</li> <li>5.3 - Cloud Firestore (CF)</li> <li>5.4 - Cloud Storage</li> <li>Exercicis</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T08_BD_NoSQL/3331__set/#3331-set","title":"3.3.3.1 - $set","text":"<p>El modificador $set assigna un valor a un camp del document seleccionat de la Base de Dades. Si el camp ja existia, modificar\u00e0 el valor, i si no existia el crear\u00e0.</p> <p>La sintaxi del modificador $set \u00e9s la seg\u00fcent:</p> <p>{ $set : { clau : valor} }</p> <p>Per\u00f2 recordeu que \u00e9s un modificador, i l'hem d'utilitzar dins d'una operaci\u00f3 d'actualitzaci\u00f3. Anir\u00e0 en el segon par\u00e0metre del update(), i per tant amb aquestos modificadors ja no posem tot el document en el segon par\u00e0metre, sin\u00f3 \u00fanicament l'operador de modificaci\u00f3.</p> <p>Mirem-ho millor en un exemple:</p> <p>&gt; db.alumnes.insert( {nom:\"Abel\", cognoms:\"Bernat Carrera\"} )  WriteResult({ \"nInserted\" : 1 }) &gt; &gt; db.alumnes.findOne() { \"_id\" : ObjectId(\"56debe3017bf4ed437dc77c8\"), \"nom\" : \"Abel\", \"cognoms\" : \"Bernat Carrera\" } &gt;</p> <p>Suposem ara que li volem afegir l'edat. Abans ho far\u00edem guardant el document en una variable, i afegint el camp, per a guardar despr\u00e9s. Ara ho tenim m\u00e9s f\u00e0cil:</p> <p>&gt; db.alumnes.update( {nom:\"Abel\"} , { $set: {edat:21} } ) WriteResult({ \"nMatched\" : 1, \"nUpserted\" : 0, \"nModified\" : 1 })</p> <p>Ha trobat un, i l'ha modificat. Evidentment, si hi haguera m\u00e9s d'un alumne a mb el nom Abel, els modificaria tots.</p> <p>&gt; db.alumnes.findOne() { \"_id\" : ObjectId(\"56debe3017bf4ed437dc77c8\"), \"nom\" : \"Abel\", \"cognoms\" : \"Bernat Carrera\", \"edat\" : 21 }</p> <p>Es pot especificar m\u00e9s d'un camp amb els valor corresponents. Si no existien es crearan, i si ja existien es modificaran:</p> <p>&gt; db.alumnes.update( {nom:\"Abel\"} , { $set: {nota: 8.5 , edat:22} } ) WriteResult({ \"nMatched\" : 1, \"nUpserted\" : 0, \"nModified\" : 1 }) &gt; db.alumnes.findOne() { \"_id\" : ObjectId(\"56debe3017bf4ed437dc77c8\"), \"nom\" : \"Abel\", \"cognoms\" : \"Bernat Carrera\", \"edat\" : 22, \"nota\" : 8.5 }</p> <p>I fins i tot es pot canviar el tipus d'un camp determinat, i utilitzar arrays, i objectes, ...</p> <p>&gt; db.alumnes.update( {nom:\"Abel\"} , { $set: {nota: [8.5,7.5,9] , adre\u00e7a:{carrer:\"Major\",numero:7,cp:\"12001\"}\u00a0 } } ) WriteResult({ \"nMatched\" : 1, \"nUpserted\" : 0, \"nModified\" : 1 })</p> <p>&gt; db.alumnes.findOne() { \"_id\" : ObjectId(\"56debe3017bf4ed437dc77c8\"), \"nom\" : \"Abel\", \"cognoms\" : \"Bernat Carrera\", \"edat\" : 22, \"nota\" : [ 8.5, 7.5, 9 ], \"adre\u00e7a\" : { \"carrer\" : \"Major\", \"numero\" : 7, \"cp\" : \"12001\" } }</p> <p>Podem fins i tot modificar ara nom\u00e9s el valor d'un camp d'un objecte del document. Per exemple, anem a modificar el codi postal de l'anterior alumne. La manera d'arribar al codi postal ser\u00e0 adre\u00e7a.cp, per\u00f2 haurem d'anar amb compte que vaja entre cometes per a que el trobe:</p> <p>&gt;\u00a0 db.alumnes.update( {nom:\"Abel\"} , { $set: {adre\u00e7a.cp:\"12502\"} } ) 2016-03-08T13:19:59.744+0100 E QUERY\u00a0\u00a0\u00a0 [thread1] SyntaxError: missing : after property id @(shell):1:49</p> <p>&gt; db.alumnes.update( {nom:\"Abel\"} , { $set: {\"adre\u00e7a.cp\":\"12502\"} } ) WriteResult({ \"nMatched\" : 1, \"nUpserted\" : 0, \"nModified\" : 1 }) &gt; db.alumnes.findOne() { \"_id\" : ObjectId(\"56debe3017bf4ed437dc77c8\"), \"nom\" : \"Abel\", \"cognoms\" : \"Bernat Carrera\", \"edat\" : 22, \"nota\" : [ 8.5, 7.5, 9 ], \"adre\u00e7a\" : { \"carrer\" : \"Major\", \"numero\" : 7, \"cp\" : \"12502\" } }</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement SenseObraDerivada 4.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T08_BD_NoSQL/3332__unset/","title":"3332  unset","text":"<p>Bases de Dades</p> <ul> <li>Tema 8: Bases de Dades NoSQL</li> <li>1 - Introducci\u00f3</li> <li>2 - BD Clau-Valor: Redis </li> <li>2.1 - Instal\u00b7laci\u00f3 de Redis</li> <li>2.2 - Entron gr\u00e0fic: Redis Desktop Manager</li> <li>2.3 - Utilitzaci\u00f3 de Redis <ul> <li>2.3.1 - Strings</li> <li>2.3.2 - Keys</li> <li>2.3.3 - Hash</li> <li>2.3.4 - List</li> <li>2.3.5 - Set</li> <li>2.3.6 - Set ordenat</li> </ul> </li> <li>3 - MongoDB </li> <li>3.1 - Estructura JSON</li> <li>3.2 - Instal\u00b7laci\u00f3 de MongoDB <ul> <li>3.2.1 - Connexi\u00f3 al servidor de l'Institut</li> </ul> </li> <li>3.3 - Utilitzaci\u00f3 de MongoDB <ul> <li>3.3.1 - Tipus de dades</li> <li>3.3.2 - Operacions b\u00e0siques</li> <li>3.2.3 - Operacions d'actualitzaci\u00f3 avan\u00e7ada </li> <li>3.3.3.1 - $set</li> <li>3.3.3.2 - $unset</li> <li>3.3.3.3 - $rename</li> <li>3.3.3.4 - $inc</li> <li>3.3.3.5 - Elements d'un array</li> <li>3.3.3.6 - Inserci\u00f3 en Arrays: $push</li> <li>3.3.3.7 - Eliminaci\u00f3 en arrays: $pop i $pull</li> <li>3.3.3.8 - Upsert</li> </ul> </li> <li>3.4 - Consulta de documents <ul> <li>3.4.1 - Par\u00e0metres de les funcions find() i findOne()</li> <li>3.4.2 - Operadors de les condicions</li> <li>3.4.3 - Agregaci\u00f3</li> </ul> </li> <li>4 - BD XML: eXist-db </li> <li>4.1 - Instal\u00b7laci\u00f3 d'eXist-db</li> <li>4.2 - Llenguatges de consultes XPATH i XQUERY <ul> <li>4.2.1 - XPATH </li> <li>4.2.1.1 - Vista d'arbre</li> <li>4.2.1.2 - Navegaci\u00f3</li> <li>4.2.1.3 - Seq\u00fc\u00e8ncies</li> <li>4.2.1.4 - Funcions</li> <li>4.2.2 - XQUERY </li> <li>4.2.2.1 - Consultes XQuery</li> <li>4.2.2.2 - Variables</li> <li>4.2.2.3 - Expressions avaluables</li> <li>4.2.2.4 - Expressions FLWOR</li> <li>4.2.2.5 - Alternatives</li> <li>4.2.2.6 - Exemple de consulta \"elaborada\"</li> <li>4.2.2.7 - Funcions de eXist-db de manipulaci\u00f3 de BD</li> </ul> </li> <li>5 - FIREBASE (voluntari) </li> <li>5.1 - Creaci\u00f3 d'una aplicaci\u00f3</li> <li>5.2 - Realtime Database (RD)</li> <li>5.3 - Cloud Firestore (CF)</li> <li>5.4 - Cloud Storage</li> <li>Exercicis</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T08_BD_NoSQL/3332__unset/#3332-unset","title":"3.3.3.2 - $unset","text":"<p>El modificador $unset servir\u00e0 per a eliminar elements (camps) d'un o uns documents. Si el camp existia, l'eliminar\u00e0, i si no existia, no donar\u00e0 error (avisar\u00e0 que s'han modificat 0 documents).</p> <p>La sintaxi \u00e9s:</p> <p>{ $unset : {camp : 1 } }</p> <p>Haurem de posar un valor al camp que anem a esborrar per a mantenir la sintaxi correcta, i posem 1 que equival a true. Tamb\u00e9 podr\u00edem posar -1, que equival a false, per\u00f2 aleshores no l'esborraria, i per tant no far\u00edem res. Sempre posarem 1.</p> <p>Mirem el seg\u00fcent exemple. Afegim un camp, que ser\u00e0 el n\u00famero d'ordre, i despr\u00e9s el llevarem.</p> <p>&gt; db.alumnes.update( {nom:\"Abel\"} , { $set: {num_ordre:10} } ) WriteResult({ \"nMatched\" : 1, \"nUpserted\" : 0, \"nModified\" : 1 }) &gt; db.alumnes.findOne() { \"_id\" : ObjectId(\"56debe3017bf4ed437dc77c8\"), \"nom\" : \"Abel\", \"cognoms\" : \"Bernat Carrera\", \"edat\" : 22, \"nota\" : [ 8.5, 7.5, 9 ], \"adre\u00e7a\" : { \"carrer\" : \"Major\", \"numero\" : 7, \"cp\" : \"12502\" }, \"num_ordre\" : 10 }</p> <p>&gt; db.alumnes.update( {nom:\"Abel\"} , { $unset: {num_ordre:1} } ) WriteResult({ \"nMatched\" : 1, \"nUpserted\" : 0, \"nModified\" : 1 }) &gt; db.alumnes.update( {nom:\"Abel\"} , { $unset: {puntuacio:1} } ) WriteResult({ \"nMatched\" : 1, \"nUpserted\" : 0, \"nModified\" : 0 })</p> <p>Hem afegit primer el camp num_ordre, i hem mostrat el document per comprovar que existeix. Despr\u00e9s esborrem el camp num_ordre (i ens confirma que ha modificat un document). Despr\u00e9s intentem esborrar un camp que no existeix,\u00a0puntuacio. No d\u00f3na error, per\u00f2 ens avisa que ha modificat 0 documents. Podem comprovar al final com el document ha quedat com esper\u00e0vem.</p> <p>&gt; db.alumnes.findOne() { \"_id\" : ObjectId(\"56debe3017bf4ed437dc77c8\"), \"nom\" : \"Abel\", \"cognoms\" : \"Bernat Carrera\", \"edat\" : 22, \"nota\" : [ 8.5, 7.5, 9 ], \"adre\u00e7a\" : { \"carrer\" : \"Major\", \"numero\" : 7, \"cp\" : \"12502\" } }</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement SenseObraDerivada 4.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T08_BD_NoSQL/3333__rename/","title":"3333  rename","text":"<p>Bases de Dades</p> <ul> <li>Tema 8: Bases de Dades NoSQL</li> <li>1 - Introducci\u00f3</li> <li>2 - BD Clau-Valor: Redis </li> <li>2.1 - Instal\u00b7laci\u00f3 de Redis</li> <li>2.2 - Entron gr\u00e0fic: Redis Desktop Manager</li> <li>2.3 - Utilitzaci\u00f3 de Redis <ul> <li>2.3.1 - Strings</li> <li>2.3.2 - Keys</li> <li>2.3.3 - Hash</li> <li>2.3.4 - List</li> <li>2.3.5 - Set</li> <li>2.3.6 - Set ordenat</li> </ul> </li> <li>3 - MongoDB </li> <li>3.1 - Estructura JSON</li> <li>3.2 - Instal\u00b7laci\u00f3 de MongoDB <ul> <li>3.2.1 - Connexi\u00f3 al servidor de l'Institut</li> </ul> </li> <li>3.3 - Utilitzaci\u00f3 de MongoDB <ul> <li>3.3.1 - Tipus de dades</li> <li>3.3.2 - Operacions b\u00e0siques</li> <li>3.2.3 - Operacions d'actualitzaci\u00f3 avan\u00e7ada </li> <li>3.3.3.1 - $set</li> <li>3.3.3.2 - $unset</li> <li>3.3.3.3 - $rename</li> <li>3.3.3.4 - $inc</li> <li>3.3.3.5 - Elements d'un array</li> <li>3.3.3.6 - Inserci\u00f3 en Arrays: $push</li> <li>3.3.3.7 - Eliminaci\u00f3 en arrays: $pop i $pull</li> <li>3.3.3.8 - Upsert</li> </ul> </li> <li>3.4 - Consulta de documents <ul> <li>3.4.1 - Par\u00e0metres de les funcions find() i findOne()</li> <li>3.4.2 - Operadors de les condicions</li> <li>3.4.3 - Agregaci\u00f3</li> </ul> </li> <li>4 - BD XML: eXist-db </li> <li>4.1 - Instal\u00b7laci\u00f3 d'eXist-db</li> <li>4.2 - Llenguatges de consultes XPATH i XQUERY <ul> <li>4.2.1 - XPATH </li> <li>4.2.1.1 - Vista d'arbre</li> <li>4.2.1.2 - Navegaci\u00f3</li> <li>4.2.1.3 - Seq\u00fc\u00e8ncies</li> <li>4.2.1.4 - Funcions</li> <li>4.2.2 - XQUERY </li> <li>4.2.2.1 - Consultes XQuery</li> <li>4.2.2.2 - Variables</li> <li>4.2.2.3 - Expressions avaluables</li> <li>4.2.2.4 - Expressions FLWOR</li> <li>4.2.2.5 - Alternatives</li> <li>4.2.2.6 - Exemple de consulta \"elaborada\"</li> <li>4.2.2.7 - Funcions de eXist-db de manipulaci\u00f3 de BD</li> </ul> </li> <li>5 - FIREBASE (voluntari) </li> <li>5.1 - Creaci\u00f3 d'una aplicaci\u00f3</li> <li>5.2 - Realtime Database (RD)</li> <li>5.3 - Cloud Firestore (CF)</li> <li>5.4 - Cloud Storage</li> <li>Exercicis</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T08_BD_NoSQL/3333__rename/#3333-rename","title":"3.3.3.3 - $rename","text":"<p>El modificador $rename canviar\u00e0 el nom d'un camp. Si no existia, no donar\u00e0 error i senzillament no el modificar\u00e0. Hem de cuidar de posar el nou nom del camp entre cometes, per a que no done error.</p> <p>La sintaxi \u00e9s:</p> <p>{ $rename : { camp1 : \"nou_nom1\" , camp2 : \"nou_nom2\" , ... } }</p> <p>Per exemple, canviem el nom del camp nota a notes:</p> <p>&gt; db.alumnes.update( {nom:\"Abel\"} , { $rename: {nota:\"notes\"} } ) WriteResult({ \"nMatched\" : 1, \"nUpserted\" : 0, \"nModified\" : 1 }) &gt; db.alumnes.findOne() { \"_id\" : ObjectId(\"56debe3017bf4ed437dc77c8\"), \"nom\" : \"Abel\", \"cognoms\" : \"Bernat Carrera\", \"edat\" : 22, \"adre\u00e7a\" : { \"carrer\" : \"Major\", \"numero\" : 7, \"cp\" : \"12502\" }, \"notes\" : [ 8.5, 7.5, 9 ] }</p> <p>Observeu que l'ha canviat de lloc, cosa que ens fa pensar que en canviar de nom un camp, el que fa \u00e9s tornar a crear-lo amb el nou nom, i esborrar el camp antic.</p> <p>En aquest exemple tornem a canviar el nom a nota, i intentem canviar el nom a un camp inexistent, camp1. No donar\u00e0 error.</p> <p>&gt; db.alumnes.update( {nom:\"Abel\"} , { $rename: {camp1: \"camp2\" , notes:\"nota\"} } ) WriteResult({ \"nMatched\" : 1, \"nUpserted\" : 0, \"nModified\" : 1 }) &gt; db.alumnes.findOne() { \"_id\" : ObjectId(\"56debe3017bf4ed437dc77c8\"), \"nom\" : \"Abel\", \"cognoms\" : \"Bernat Carrera\", \"edat\" : 22, \"adre\u00e7a\" : { \"carrer\" : \"Major\", \"numero\" : 7, \"cp\" : \"12502\" }, \"nota\" : [ 8.5, 7.5, 9 ] }</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement SenseObraDerivada 4.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T08_BD_NoSQL/3334__inc/","title":"3334  inc","text":"<p>Bases de Dades</p> <ul> <li>Tema 8: Bases de Dades NoSQL</li> <li>1 - Introducci\u00f3</li> <li>2 - BD Clau-Valor: Redis </li> <li>2.1 - Instal\u00b7laci\u00f3 de Redis</li> <li>2.2 - Entron gr\u00e0fic: Redis Desktop Manager</li> <li>2.3 - Utilitzaci\u00f3 de Redis <ul> <li>2.3.1 - Strings</li> <li>2.3.2 - Keys</li> <li>2.3.3 - Hash</li> <li>2.3.4 - List</li> <li>2.3.5 - Set</li> <li>2.3.6 - Set ordenat</li> </ul> </li> <li>3 - MongoDB </li> <li>3.1 - Estructura JSON</li> <li>3.2 - Instal\u00b7laci\u00f3 de MongoDB <ul> <li>3.2.1 - Connexi\u00f3 al servidor de l'Institut</li> </ul> </li> <li>3.3 - Utilitzaci\u00f3 de MongoDB <ul> <li>3.3.1 - Tipus de dades</li> <li>3.3.2 - Operacions b\u00e0siques</li> <li>3.2.3 - Operacions d'actualitzaci\u00f3 avan\u00e7ada </li> <li>3.3.3.1 - $set</li> <li>3.3.3.2 - $unset</li> <li>3.3.3.3 - $rename</li> <li>3.3.3.4 - $inc</li> <li>3.3.3.5 - Elements d'un array</li> <li>3.3.3.6 - Inserci\u00f3 en Arrays: $push</li> <li>3.3.3.7 - Eliminaci\u00f3 en arrays: $pop i $pull</li> <li>3.3.3.8 - Upsert</li> </ul> </li> <li>3.4 - Consulta de documents <ul> <li>3.4.1 - Par\u00e0metres de les funcions find() i findOne()</li> <li>3.4.2 - Operadors de les condicions</li> <li>3.4.3 - Agregaci\u00f3</li> </ul> </li> <li>4 - BD XML: eXist-db </li> <li>4.1 - Instal\u00b7laci\u00f3 d'eXist-db</li> <li>4.2 - Llenguatges de consultes XPATH i XQUERY <ul> <li>4.2.1 - XPATH </li> <li>4.2.1.1 - Vista d'arbre</li> <li>4.2.1.2 - Navegaci\u00f3</li> <li>4.2.1.3 - Seq\u00fc\u00e8ncies</li> <li>4.2.1.4 - Funcions</li> <li>4.2.2 - XQUERY </li> <li>4.2.2.1 - Consultes XQuery</li> <li>4.2.2.2 - Variables</li> <li>4.2.2.3 - Expressions avaluables</li> <li>4.2.2.4 - Expressions FLWOR</li> <li>4.2.2.5 - Alternatives</li> <li>4.2.2.6 - Exemple de consulta \"elaborada\"</li> <li>4.2.2.7 - Funcions de eXist-db de manipulaci\u00f3 de BD</li> </ul> </li> <li>5 - FIREBASE (voluntari) </li> <li>5.1 - Creaci\u00f3 d'una aplicaci\u00f3</li> <li>5.2 - Realtime Database (RD)</li> <li>5.3 - Cloud Firestore (CF)</li> <li>5.4 - Cloud Storage</li> <li>Exercicis</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T08_BD_NoSQL/3334__inc/#3334-inc","title":"3.3.3.4 - $inc","text":"<p>Com cabria esperar, el modificador $inc servir\u00e0 per a incrementar un camp num\u00e8ric. Si el camp existia, l'incrementar\u00e0 en la quantitat indicada. Si no existia, crear\u00e0 el camp amb un valor inicial de 0, i incrementar\u00e0 el valor amb la quantitat indicada. La quantitat pot ser positiva, negativa o fins i tot amb part fraccion\u00e0ria. Sempre funcionar\u00e0 b\u00e9, excepte quan el camp a incrementar no siga num\u00e8ric, que donar\u00e0 error.</p> <p>La sintaxi \u00e9s aquesta:</p> <p>{ $inc : {camp : quantitat } }</p> <p>En els seg\u00fcents exemples, incrementem un camp nou (per tant el crear\u00e0 amb el valor especificat), i despr\u00e9s l'incrementem en quantitats positives, negatives i fraccion\u00e0ries, concretament l'inicialitzem amb un 2, i desp\u00e9s l'incrementem en 5, en -4 i en 2.25, per tant el resultat final ser\u00e0 5.25:</p> <p>&gt; db.alumnes.update( {nom:\"Abel\"} , { $inc: {puntuacio:2} } ) WriteResult({ \"nMatched\" : 1, \"nUpserted\" : 0, \"nModified\" : 1 }) &gt; db.alumnes.findOne() { \"_id\" : ObjectId(\"56debe3017bf4ed437dc77c8\"), \"nom\" : \"Abel\", \"cognoms\" : \"Bernat Carrera\", \"edat\" : 22, \"nota\" : [ 8.5, 7.5, 9 ], \"adre\u00e7a\" : { \"carrer\" : \"Major\", \"numero\" : 7, \"cp\" : \"12502\" }, \"puntuacio\" : 2 } &gt; db.alumnes.update( {nom:\"Abel\"} , { $inc: {puntuacio:5} } ) WriteResult({ \"nMatched\" : 1, \"nUpserted\" : 0, \"nModified\" : 1 }) &gt; db.alumnes.update( {nom:\"Abel\"} , { $inc: {puntuacio:-4} } ) WriteResult({ \"nMatched\" : 1, \"nUpserted\" : 0, \"nModified\" : 1 }) &gt; db.alumnes.update( {nom:\"Abel\"} , { $inc: {puntuacio:2.25} } ) WriteResult({ \"nMatched\" : 1, \"nUpserted\" : 0, \"nModified\" : 1 }) &gt; db.alumnes.findOne() { \"_id\" : ObjectId(\"56debe3017bf4ed437dc77c8\"), \"nom\" : \"Abel\", \"cognoms\" : \"Bernat Carrera\", \"edat\" : 22, \"nota\" : [ 8.5, 7.5, 9 ], \"adre\u00e7a\" : { \"carrer\" : \"Major\", \"numero\" : 7, \"cp\" : \"12502\" }, \"puntuacio\" : 5.25 }</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement SenseObraDerivada 4.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T08_BD_NoSQL/3335__elements_dun_array/","title":"3335  elements dun array","text":"<p>Bases de Dades</p> <ul> <li>Tema 8: Bases de Dades NoSQL</li> <li>1 - Introducci\u00f3</li> <li>2 - BD Clau-Valor: Redis </li> <li>2.1 - Instal\u00b7laci\u00f3 de Redis</li> <li>2.2 - Entron gr\u00e0fic: Redis Desktop Manager</li> <li>2.3 - Utilitzaci\u00f3 de Redis <ul> <li>2.3.1 - Strings</li> <li>2.3.2 - Keys</li> <li>2.3.3 - Hash</li> <li>2.3.4 - List</li> <li>2.3.5 - Set</li> <li>2.3.6 - Set ordenat</li> </ul> </li> <li>3 - MongoDB </li> <li>3.1 - Estructura JSON</li> <li>3.2 - Instal\u00b7laci\u00f3 de MongoDB <ul> <li>3.2.1 - Connexi\u00f3 al servidor de l'Institut</li> </ul> </li> <li>3.3 - Utilitzaci\u00f3 de MongoDB <ul> <li>3.3.1 - Tipus de dades</li> <li>3.3.2 - Operacions b\u00e0siques</li> <li>3.2.3 - Operacions d'actualitzaci\u00f3 avan\u00e7ada </li> <li>3.3.3.1 - $set</li> <li>3.3.3.2 - $unset</li> <li>3.3.3.3 - $rename</li> <li>3.3.3.4 - $inc</li> <li>3.3.3.5 - Elements d'un array</li> <li>3.3.3.6 - Inserci\u00f3 en Arrays: $push</li> <li>3.3.3.7 - Eliminaci\u00f3 en arrays: $pop i $pull</li> <li>3.3.3.8 - Upsert</li> </ul> </li> <li>3.4 - Consulta de documents <ul> <li>3.4.1 - Par\u00e0metres de les funcions find() i findOne()</li> <li>3.4.2 - Operadors de les condicions</li> <li>3.4.3 - Agregaci\u00f3</li> </ul> </li> <li>4 - BD XML: eXist-db </li> <li>4.1 - Instal\u00b7laci\u00f3 d'eXist-db</li> <li>4.2 - Llenguatges de consultes XPATH i XQUERY <ul> <li>4.2.1 - XPATH </li> <li>4.2.1.1 - Vista d'arbre</li> <li>4.2.1.2 - Navegaci\u00f3</li> <li>4.2.1.3 - Seq\u00fc\u00e8ncies</li> <li>4.2.1.4 - Funcions</li> <li>4.2.2 - XQUERY </li> <li>4.2.2.1 - Consultes XQuery</li> <li>4.2.2.2 - Variables</li> <li>4.2.2.3 - Expressions avaluables</li> <li>4.2.2.4 - Expressions FLWOR</li> <li>4.2.2.5 - Alternatives</li> <li>4.2.2.6 - Exemple de consulta \"elaborada\"</li> <li>4.2.2.7 - Funcions de eXist-db de manipulaci\u00f3 de BD</li> </ul> </li> <li>5 - FIREBASE (voluntari) </li> <li>5.1 - Creaci\u00f3 d'una aplicaci\u00f3</li> <li>5.2 - Realtime Database (RD)</li> <li>5.3 - Cloud Firestore (CF)</li> <li>5.4 - Cloud Storage</li> <li>Exercicis</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T08_BD_NoSQL/3335__elements_dun_array/#3335-elements-dun-array","title":"3.3.3.5 - Elements d'un array","text":"<p>Per a accedir directament a un element d'un array d'un determinat document es pot utilitzar la seg\u00fcent sintaxi:</p> <p>\"array.index\"</p> <p>Hem de tenir present que el primer element de l'array \u00e9s el de sub\u00edndex 0. I no us oblideu de tancar-ho tot entre comentes per a que ho puga trobar.</p> <p>Si no existeix l'element amb el sub\u00edndex indicat, donar\u00e0 error.</p> <p>Per exemple, anem a pujar un punt la primera nota de l'alumne que estem utilitzant en tots els exemples :</p> <p>&gt;db.alumnes.update( {nom:\"Abel\"} , { $inc : { \"nota.0\" : 1 } } )</p> <p>&gt; db.alumnes.findOne() { \"_id\" : ObjectId(\"56df11d778549bdfbf2125e3\"), \"nom\" : \"Abel\", \"cognoms\" : \"Bernat Carrera\", \"edat\" : 22, \"adre\u00e7a\" : { \"carrer\" : \"Major\", \"numero\" : 7, \"cp\" : \"12502\" }, \"nota\" : [ 9.5, 7.5, 9 ] }</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement SenseObraDerivada 4.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T08_BD_NoSQL/3336__inserci_en_arrays_push/","title":"3336  inserci en arrays push","text":"<p>Bases de Dades</p> <ul> <li>Tema 8: Bases de Dades NoSQL</li> <li>1 - Introducci\u00f3</li> <li>2 - BD Clau-Valor: Redis </li> <li>2.1 - Instal\u00b7laci\u00f3 de Redis</li> <li>2.2 - Entron gr\u00e0fic: Redis Desktop Manager</li> <li>2.3 - Utilitzaci\u00f3 de Redis <ul> <li>2.3.1 - Strings</li> <li>2.3.2 - Keys</li> <li>2.3.3 - Hash</li> <li>2.3.4 - List</li> <li>2.3.5 - Set</li> <li>2.3.6 - Set ordenat</li> </ul> </li> <li>3 - MongoDB </li> <li>3.1 - Estructura JSON</li> <li>3.2 - Instal\u00b7laci\u00f3 de MongoDB <ul> <li>3.2.1 - Connexi\u00f3 al servidor de l'Institut</li> </ul> </li> <li>3.3 - Utilitzaci\u00f3 de MongoDB <ul> <li>3.3.1 - Tipus de dades</li> <li>3.3.2 - Operacions b\u00e0siques</li> <li>3.2.3 - Operacions d'actualitzaci\u00f3 avan\u00e7ada </li> <li>3.3.3.1 - $set</li> <li>3.3.3.2 - $unset</li> <li>3.3.3.3 - $rename</li> <li>3.3.3.4 - $inc</li> <li>3.3.3.5 - Elements d'un array</li> <li>3.3.3.6 - Inserci\u00f3 en Arrays: $push</li> <li>3.3.3.7 - Eliminaci\u00f3 en arrays: $pop i $pull</li> <li>3.3.3.8 - Upsert</li> </ul> </li> <li>3.4 - Consulta de documents <ul> <li>3.4.1 - Par\u00e0metres de les funcions find() i findOne()</li> <li>3.4.2 - Operadors de les condicions</li> <li>3.4.3 - Agregaci\u00f3</li> </ul> </li> <li>4 - BD XML: eXist-db </li> <li>4.1 - Instal\u00b7laci\u00f3 d'eXist-db</li> <li>4.2 - Llenguatges de consultes XPATH i XQUERY <ul> <li>4.2.1 - XPATH </li> <li>4.2.1.1 - Vista d'arbre</li> <li>4.2.1.2 - Navegaci\u00f3</li> <li>4.2.1.3 - Seq\u00fc\u00e8ncies</li> <li>4.2.1.4 - Funcions</li> <li>4.2.2 - XQUERY </li> <li>4.2.2.1 - Consultes XQuery</li> <li>4.2.2.2 - Variables</li> <li>4.2.2.3 - Expressions avaluables</li> <li>4.2.2.4 - Expressions FLWOR</li> <li>4.2.2.5 - Alternatives</li> <li>4.2.2.6 - Exemple de consulta \"elaborada\"</li> <li>4.2.2.7 - Funcions de eXist-db de manipulaci\u00f3 de BD</li> </ul> </li> <li>5 - FIREBASE (voluntari) </li> <li>5.1 - Creaci\u00f3 d'una aplicaci\u00f3</li> <li>5.2 - Realtime Database (RD)</li> <li>5.3 - Cloud Firestore (CF)</li> <li>5.4 - Cloud Storage</li> <li>Exercicis</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T08_BD_NoSQL/3336__inserci_en_arrays_push/#3336-insercio-en-arrays-push","title":"3.3.3.6 - Inserci\u00f3 en Arrays: $push","text":"<p>La manera m\u00e9s senzilla d'introduir un element en un array \u00e9s utilitzar $push sense m\u00e9s. Si existia l'array, introduir\u00e0 el o els nous elements al final. Si no existia l'array, el crear\u00e0 amb aquest o aquestos elements.</p> <p>La sintaxi \u00e9s:</p> <p>{ $push : { clau : element } }</p> <p>Per exemple anem a afegir una nota a l'alumne de sempre, i posem-la diferent per veure que s'introdueix al final:</p> <p>&gt; db.alumnes.update( {nom:\"Abel\"} , { $push : { nota : 7 } } ) WriteResult({ \"nMatched\" : 1, \"nUpserted\" : 0, \"nModified\" : 1 })</p> <p>&gt; db.alumnes.findOne() { \"_id\" : ObjectId(\"56df11d778549bdfbf2125e3\"), \"nom\" : \"Abel\", \"cognoms\" : \"Bernat Carrera\", \"edat\" : 22, \"adre\u00e7a\" : { \"carrer\" : \"Major\", \"numero\" : 7, \"cp\" : \"12502\" }, \"nota\" : [ 9.5, 7.5, 9, 7 ] }</p> <p>Tambe hi ha manera d'introduir un element en una determinada posici\u00f3 que no siga al final, per\u00f2 es complica prou la cosa, ja que hem d'utilitzar per una banda el modificador \\(position** per a dir on s'ha d'inserir, i per una altra banda el modificador **\\)each per a poder especificar el o els valors que es volen inserir. Es posa a continuaci\u00f3 \u00fanicament de forma il\u00b7lustrativa.</p> <p>Per a inserir en una determinada posici\u00f3 hem d'utilitzar obligat\u00f2riament 2 modificadors m\u00e9s:</p> <ul> <li>\\(position** indicar\u00e0 a partir de quina posici\u00f3 es far\u00e0 l'acci\u00f3 (normalment d'inserir en l'array, \u00e9s a dir, **\\)push </li> <li>$each ens permet especificar una s\u00e8rie de valors com un array, i vol dir que es far\u00e0 l'operaci\u00f3 per a cada valor de l'array</li> </ul> <p>Els dos modificadors seguiran la sintaxi de sempre, de clau valor, per tant el conjunt de la sintaxi \u00e9s:</p> <p>{ $ push :  { clau_del_array : { \\(position : *posici\u00f3* , \\)each : [ valors ] } } }</p> <p>Ac\u00ed tenim un exemple on introdu\u00efm una nota en la primera posici\u00f3:</p> <p>&gt; db.alumnes.update( {nom:\"Abel\"} , { $push : { nota : { $position : 0 , $each : [5] } } } ) WriteResult({ \"nMatched\" : 1, \"nUpserted\" : 0, \"nModified\" : 1 })</p> <p>&gt; db.alumnes.findOne() { \"_id\" : ObjectId(\"56df11d778549bdfbf2125e3\"), \"nom\" : \"Abel\", \"cognoms\" : \"Bernat Carrera\", \"edat\" : 22, \"adre\u00e7a\" : { \"carrer\" : \"Major\", \"numero\" : 7, \"cp\" : \"12502\" }, \"nota\" : [ 5, 9.5, 7.5, 9, 7 ] }</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement SenseObraDerivada 4.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T08_BD_NoSQL/3337__eliminaci_en_arrays_pop_i_pull/","title":"3337  eliminaci en arrays pop i pull","text":"<p>Bases de Dades</p> <ul> <li>Tema 8: Bases de Dades NoSQL</li> <li>1 - Introducci\u00f3</li> <li>2 - BD Clau-Valor: Redis </li> <li>2.1 - Instal\u00b7laci\u00f3 de Redis</li> <li>2.2 - Entron gr\u00e0fic: Redis Desktop Manager</li> <li>2.3 - Utilitzaci\u00f3 de Redis <ul> <li>2.3.1 - Strings</li> <li>2.3.2 - Keys</li> <li>2.3.3 - Hash</li> <li>2.3.4 - List</li> <li>2.3.5 - Set</li> <li>2.3.6 - Set ordenat</li> </ul> </li> <li>3 - MongoDB </li> <li>3.1 - Estructura JSON</li> <li>3.2 - Instal\u00b7laci\u00f3 de MongoDB <ul> <li>3.2.1 - Connexi\u00f3 al servidor de l'Institut</li> </ul> </li> <li>3.3 - Utilitzaci\u00f3 de MongoDB <ul> <li>3.3.1 - Tipus de dades</li> <li>3.3.2 - Operacions b\u00e0siques</li> <li>3.2.3 - Operacions d'actualitzaci\u00f3 avan\u00e7ada </li> <li>3.3.3.1 - $set</li> <li>3.3.3.2 - $unset</li> <li>3.3.3.3 - $rename</li> <li>3.3.3.4 - $inc</li> <li>3.3.3.5 - Elements d'un array</li> <li>3.3.3.6 - Inserci\u00f3 en Arrays: $push</li> <li>3.3.3.7 - Eliminaci\u00f3 en arrays: $pop i $pull</li> <li>3.3.3.8 - Upsert</li> </ul> </li> <li>3.4 - Consulta de documents <ul> <li>3.4.1 - Par\u00e0metres de les funcions find() i findOne()</li> <li>3.4.2 - Operadors de les condicions</li> <li>3.4.3 - Agregaci\u00f3</li> </ul> </li> <li>4 - BD XML: eXist-db </li> <li>4.1 - Instal\u00b7laci\u00f3 d'eXist-db</li> <li>4.2 - Llenguatges de consultes XPATH i XQUERY <ul> <li>4.2.1 - XPATH </li> <li>4.2.1.1 - Vista d'arbre</li> <li>4.2.1.2 - Navegaci\u00f3</li> <li>4.2.1.3 - Seq\u00fc\u00e8ncies</li> <li>4.2.1.4 - Funcions</li> <li>4.2.2 - XQUERY </li> <li>4.2.2.1 - Consultes XQuery</li> <li>4.2.2.2 - Variables</li> <li>4.2.2.3 - Expressions avaluables</li> <li>4.2.2.4 - Expressions FLWOR</li> <li>4.2.2.5 - Alternatives</li> <li>4.2.2.6 - Exemple de consulta \"elaborada\"</li> <li>4.2.2.7 - Funcions de eXist-db de manipulaci\u00f3 de BD</li> </ul> </li> <li>5 - FIREBASE (voluntari) </li> <li>5.1 - Creaci\u00f3 d'una aplicaci\u00f3</li> <li>5.2 - Realtime Database (RD)</li> <li>5.3 - Cloud Firestore (CF)</li> <li>5.4 - Cloud Storage</li> <li>Exercicis</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T08_BD_NoSQL/3337__eliminaci_en_arrays_pop_i_pull/#3337-eliminacio-en-arrays-pop-i-pull","title":"3.3.3.7 - Eliminaci\u00f3 en arrays: $pop i $pull","text":"<p>Hi ha m\u00e9s d'una manera d'eliminar elements d'un array.</p> <p>$pop</p> <p>Si volem eliminar el primer element o l'\u00faltim, el modificador adequat \u00e9s $pop. La sintaxi \u00e9s</p> <p>{ $pop : { clau : posicio } }</p> <p>On en posici\u00f3 podrem posar:</p> <ul> <li>-1 , i esborrar\u00e0 el primer element</li> <li>1 , i esborrar\u00e0 l'\u00faltim</li> </ul> <p>En els seg\u00fcents exemples s'esborren primer l'\u00faltim element i despr\u00e9s el primer.</p> <p>&gt; db.alumnes.findOne() { \"_id\" : ObjectId(\"56df11d778549bdfbf2125e3\"), \"nom\" : \"Abel\", \"cognoms\" : \"Bernat Carrera\", \"edat\" : 22, \"adre\u00e7a\" : { \"carrer\" : \"Major\", \"numero\" : 7, \"cp\" : \"12502\" }, \"nota\" : [ 5, 9.5, 7.5, 9, 7 ] }</p> <p>&gt; db.alumnes.update( {nom:\"Abel\"} , { $pop : { nota : 1 } } ) WriteResult({ \"nMatched\" : 1, \"nUpserted\" : 0, \"nModified\" : 1 }) &gt; db.alumnes.findOne() { \"_id\" : ObjectId(\"56df11d778549bdfbf2125e3\"), \"nom\" : \"Abel\", \"cognoms\" : \"Bernat Carrera\", \"edat\" : 22, \"adre\u00e7a\" : { \"carrer\" : \"Major\", \"numero\" : 7, \"cp\" : \"12502\" }, \"nota\" : [ 5, 9.5, 7.5, 9 ] }</p> <p>&gt; db.alumnes.update( {nom:\"Abel\"} , { $pop : { nota : -1 } } ) WriteResult({ \"nMatched\" : 1, \"nUpserted\" : 0, \"nModified\" : 1 }) &gt; db.alumnes.findOne() { \"_id\" : ObjectId(\"56df11d778549bdfbf2125e3\"), \"nom\" : \"Abel\", \"cognoms\" : \"Bernat Carrera\", \"edat\" : 22, \"adre\u00e7a\" : { \"carrer\" : \"Major\", \"numero\" : 7, \"cp\" : \"12502\" }, \"nota\" : [ 9.5, 7.5, 9 ] }</p> <p>$pull</p> <p>Amb aquest modificador esborrarem els elements de l'array que coincidesquen amb una condici\u00f3, estiguen en la posici\u00f3 que estiguem. Observeu com es pot eliminar m\u00e9s d'un element.</p> <p>Per a poder comprovar-lo b\u00e9, primer inserim un altre element al final de l'array, amb el valor 7.5 (si heu seguit els mateixos exemples que en aquestos apunts, aquest valor ja es troba en la segona posici\u00f3).</p> <p>&gt; db.alumnes.update( {nom:\"Abel\"} , { $push : { nota : 7.5 } } ) WriteResult({ \"nMatched\" : 1, \"nUpserted\" : 0, \"nModified\" : 1 })</p> <p>&gt; db.alumnes.findOne() { \"_id\" : ObjectId(\"56debe3017bf4ed437dc77c8\"), \"nom\" : \"Abel\", \"cognoms\" : \"Bernat Carrera\", \"edat\" : 22, \"adre\u00e7a\" : { \"carrer\" : \"Major\", \"numero\" : 7, \"cp\" : \"12502\" }, \"nota\" : [ 9.5, 7.5, 9, 7.5 ] }</p> <p>Ara anem a esborrar amb $pull l'element de valor 7.5</p> <p>&gt; db.alumnes.update( {nom:\"Abel\"} , { $pull : { nota : 7.5 } } ) WriteResult({ \"nMatched\" : 1, \"nUpserted\" : 0, \"nModified\" : 1 })</p> <p>&gt; db.alumnes.findOne() { \"_id\" : ObjectId(\"56debe3017bf4ed437dc77c8\"), \"nom\" : \"Abel\", \"cognoms\" : \"Bernat Carrera\", \"edat\" : 22, \"adre\u00e7a\" : { \"carrer\" : \"Major\", \"numero\" : 7, \"cp\" : \"12502\" }, \"nota\" : [ 9.5, 9 ] }</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement SenseObraDerivada 4.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T08_BD_NoSQL/3338__upsert/","title":"3338  upsert","text":"<p>Bases de Dades</p> <ul> <li>Tema 8: Bases de Dades NoSQL</li> <li>1 - Introducci\u00f3</li> <li>2 - BD Clau-Valor: Redis </li> <li>2.1 - Instal\u00b7laci\u00f3 de Redis</li> <li>2.2 - Entron gr\u00e0fic: Redis Desktop Manager</li> <li>2.3 - Utilitzaci\u00f3 de Redis <ul> <li>2.3.1 - Strings</li> <li>2.3.2 - Keys</li> <li>2.3.3 - Hash</li> <li>2.3.4 - List</li> <li>2.3.5 - Set</li> <li>2.3.6 - Set ordenat</li> </ul> </li> <li>3 - MongoDB </li> <li>3.1 - Estructura JSON</li> <li>3.2 - Instal\u00b7laci\u00f3 de MongoDB <ul> <li>3.2.1 - Connexi\u00f3 al servidor de l'Institut</li> </ul> </li> <li>3.3 - Utilitzaci\u00f3 de MongoDB <ul> <li>3.3.1 - Tipus de dades</li> <li>3.3.2 - Operacions b\u00e0siques</li> <li>3.2.3 - Operacions d'actualitzaci\u00f3 avan\u00e7ada </li> <li>3.3.3.1 - $set</li> <li>3.3.3.2 - $unset</li> <li>3.3.3.3 - $rename</li> <li>3.3.3.4 - $inc</li> <li>3.3.3.5 - Elements d'un array</li> <li>3.3.3.6 - Inserci\u00f3 en Arrays: $push</li> <li>3.3.3.7 - Eliminaci\u00f3 en arrays: $pop i $pull</li> <li>3.3.3.8 - Upsert</li> </ul> </li> <li>3.4 - Consulta de documents <ul> <li>3.4.1 - Par\u00e0metres de les funcions find() i findOne()</li> <li>3.4.2 - Operadors de les condicions</li> <li>3.4.3 - Agregaci\u00f3</li> </ul> </li> <li>4 - BD XML: eXist-db </li> <li>4.1 - Instal\u00b7laci\u00f3 d'eXist-db</li> <li>4.2 - Llenguatges de consultes XPATH i XQUERY <ul> <li>4.2.1 - XPATH </li> <li>4.2.1.1 - Vista d'arbre</li> <li>4.2.1.2 - Navegaci\u00f3</li> <li>4.2.1.3 - Seq\u00fc\u00e8ncies</li> <li>4.2.1.4 - Funcions</li> <li>4.2.2 - XQUERY </li> <li>4.2.2.1 - Consultes XQuery</li> <li>4.2.2.2 - Variables</li> <li>4.2.2.3 - Expressions avaluables</li> <li>4.2.2.4 - Expressions FLWOR</li> <li>4.2.2.5 - Alternatives</li> <li>4.2.2.6 - Exemple de consulta \"elaborada\"</li> <li>4.2.2.7 - Funcions de eXist-db de manipulaci\u00f3 de BD</li> </ul> </li> <li>5 - FIREBASE (voluntari) </li> <li>5.1 - Creaci\u00f3 d'una aplicaci\u00f3</li> <li>5.2 - Realtime Database (RD)</li> <li>5.3 - Cloud Firestore (CF)</li> <li>5.4 - Cloud Storage</li> <li>Exercicis</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T08_BD_NoSQL/3338__upsert/#3338-upsert","title":"3.3.3.8 - Upsert","text":"<p>Aquesta paraula ja l'hav\u00edem comentada en un punt anterior.</p> <p>En el update() normal, si la condici\u00f3 de b\u00fasqueda no donava cap resultat (parlant r\u00e0pid, si no feis matching amb cap document), doncs no actualitzava cap document i punt.</p> <p>El Upsert \u00e9s una variant de l'update, que quan no coincidesca cap document amb la condici\u00f3, crear\u00e0 un document nou que ser\u00e0 el resultat de combinar el criteri que s'ha utilitzat en la condici\u00f3 amb les operacions d'actualitzaci\u00f3 fetes en el segon par\u00e0metre</p> <p>Per a que un Update actue d'aquesta manera, li hem de posar un tercer par\u00e0metre amb el valor true:</p> <p>update ( {...} , {...} , true )</p> <p>Recordeu que el primer par\u00e0metre era la condici\u00f3, i el segon l'actualitzaci\u00f3.</p> <p>Mirem-ho en l'exemple dels alumnes. Si anem a actualitzar els cognoms, i es troba el document, s'actualitzar\u00e0:</p> <p>&gt; db.alumnes.update( { nom:\"Abel\" } , { $set : { cognoms : \"Bernat Cantera\" } } , true ) WriteResult({ \"nMatched\" : 1, \"nUpserted\" : 0, \"nModified\" : 1 })</p> <p>Efectivament, ens diu que ha modificat un document.</p> <p>Per\u00f2 si no es troba el document (per exemple perqu\u00e8 li hem posat el nom Berta):</p> <p>&gt; db.alumnes.update( { nom:\"Berta\" } , { $set : { cognoms : \"Bernat Cantero\" } } , true ) WriteResult({ \"nMatched\" : 0, \"nUpserted\" : 1, \"nModified\" : 0, \"_id\" : ObjectId(\"56dfdbd136d8b095cb6bd57a\") })</p> <p>Ja ens avisa que no ha fet cap matching, i ha fet un Upsert. Ho podem comprovar mirant tots els document de la col\u00b7lecci\u00f3:</p> <p>&gt; db.alumnes.find() { \"_id\" : ObjectId(\"56debe3017bf4ed437dc77c8\"), \"nom\" : \"Abel\", \"cognoms\" : \"Bernat Cantera\", \"edat\" : 22, \"adre\u00e7a\" : { \"carrer\" : \"Major\", \"numero\" : 7, \"cp\" : \"12502\" }, \"nota\" : [ 9.5, 9 ] } { \"_id\" : ObjectId(\"56dfdbd136d8b095cb6bd57a\"), \"nom\" : \"Berta\", \"cognoms\" : \"Bernat Cantero\" } &gt;</p> <p>El nou documenttindr\u00e0 els camps:</p> <ul> <li>_id , amb el que ens havia avisat que generaria</li> <li>Els camps de la condici\u00f3, que en el nostre exemple \u00e9s { nom:\"Berta\" }</li> <li>Els camps de l'actualitzaci\u00f3, que en el nostre exemple eren els cognoms</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement SenseObraDerivada 4.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T08_BD_NoSQL/33__utilitzaci_de_mongodb/","title":"33  utilitzaci de mongodb","text":"<p>Bases de Dades</p> <ul> <li>Tema 8: Bases de Dades NoSQL</li> <li>1 - Introducci\u00f3</li> <li>2 - BD Clau-Valor: Redis </li> <li>2.1 - Instal\u00b7laci\u00f3 de Redis</li> <li>2.2 - Entron gr\u00e0fic: Redis Desktop Manager</li> <li>2.3 - Utilitzaci\u00f3 de Redis <ul> <li>2.3.1 - Strings</li> <li>2.3.2 - Keys</li> <li>2.3.3 - Hash</li> <li>2.3.4 - List</li> <li>2.3.5 - Set</li> <li>2.3.6 - Set ordenat</li> </ul> </li> <li>3 - MongoDB </li> <li>3.1 - Estructura JSON</li> <li>3.2 - Instal\u00b7laci\u00f3 de MongoDB <ul> <li>3.2.1 - Connexi\u00f3 al servidor de l'Institut</li> </ul> </li> <li>3.3 - Utilitzaci\u00f3 de MongoDB <ul> <li>3.3.1 - Tipus de dades</li> <li>3.3.2 - Operacions b\u00e0siques</li> <li>3.2.3 - Operacions d'actualitzaci\u00f3 avan\u00e7ada </li> <li>3.3.3.1 - $set</li> <li>3.3.3.2 - $unset</li> <li>3.3.3.3 - $rename</li> <li>3.3.3.4 - $inc</li> <li>3.3.3.5 - Elements d'un array</li> <li>3.3.3.6 - Inserci\u00f3 en Arrays: $push</li> <li>3.3.3.7 - Eliminaci\u00f3 en arrays: $pop i $pull</li> <li>3.3.3.8 - Upsert</li> </ul> </li> <li>3.4 - Consulta de documents <ul> <li>3.4.1 - Par\u00e0metres de les funcions find() i findOne()</li> <li>3.4.2 - Operadors de les condicions</li> <li>3.4.3 - Agregaci\u00f3</li> </ul> </li> <li>4 - BD XML: eXist-db </li> <li>4.1 - Instal\u00b7laci\u00f3 d'eXist-db</li> <li>4.2 - Llenguatges de consultes XPATH i XQUERY <ul> <li>4.2.1 - XPATH </li> <li>4.2.1.1 - Vista d'arbre</li> <li>4.2.1.2 - Navegaci\u00f3</li> <li>4.2.1.3 - Seq\u00fc\u00e8ncies</li> <li>4.2.1.4 - Funcions</li> <li>4.2.2 - XQUERY </li> <li>4.2.2.1 - Consultes XQuery</li> <li>4.2.2.2 - Variables</li> <li>4.2.2.3 - Expressions avaluables</li> <li>4.2.2.4 - Expressions FLWOR</li> <li>4.2.2.5 - Alternatives</li> <li>4.2.2.6 - Exemple de consulta \"elaborada\"</li> <li>4.2.2.7 - Funcions de eXist-db de manipulaci\u00f3 de BD</li> </ul> </li> <li>5 - FIREBASE (voluntari) </li> <li>5.1 - Creaci\u00f3 d'una aplicaci\u00f3</li> <li>5.2 - Realtime Database (RD)</li> <li>5.3 - Cloud Firestore (CF)</li> <li>5.4 - Cloud Storage</li> <li>Exercicis</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T08_BD_NoSQL/33__utilitzaci_de_mongodb/#33-utilitzacio-de-mongodb","title":"3.3 - Utilitzaci\u00f3 de MongoDB","text":"<p>Comen\u00e7arem la utilitzaci\u00f3 de MongoDB des de la consola que hav\u00edem arrancat al final de la instal\u00b7laci\u00f3.</p> <p>Recordeu que tindrem dues teminals:</p> <ul> <li>Una amb el servidor en marxa (i que no hem de tancar): mongod</li> <li>Una altra amb el client que es connecta al servidor: mongo</li> </ul> <p>En aquesta \u00faltima consola del client podem utilitzar sent\u00e8ncies del llenguatge Javascipt, per\u00f2 el que m\u00e9s ens interessar\u00e0, evidentment, s\u00f3n les sent\u00e8ncies d'acc\u00e9s a dades. Del llenguatge Javascript pr\u00e0cticament l'\u00fanic que utilitzarem s\u00f3n variables i algunes funcions.</p> <p>Utilitzaci\u00f3 de variables</p> <p>Com cament\u00e0vem el que m\u00e9s utilitzarem del llenguatge Javascript \u00e9s la utilitzaci\u00f3 de variables, que ens pot ser molt \u00fatil en algunes ocasions. Podrem utilitzar-les durant la sessi\u00f3, per\u00f2 evidentment no perduraran d'una sessi\u00f3 a l'altra.</p> <p>Per a definir una variable podem posar opcionalment davant la paraula reservada var, per\u00f2 no \u00e9s necessari. Posarem el nom de la variable, el signe igual, i a continuaci\u00f3 el valor de la variable, que pot ser una constant, o una expressi\u00f3 utilitzant constants, operadors, altres variables, funcions de Javascript, ...</p> <p>Especialment interessant s\u00f3n les variables que poden contenir un document JSON.</p> <p>Per exemple:</p> <p>&gt; a = 30 30 &gt; b=a/4 7.5 &gt; Math.sqrt(b) 2.7386127875258306 &gt; doc = {camp1: \"Hola\", camp2: 45, camp3: new Date()} { \"camp1\" : \"Hola\", \"camp2\" : 45, \"camp3\" : ISODate(\"2016-02-23T19:10:29.560Z\") } &gt;</p> <p>Una variable de tipus JSON es podr\u00e0 modificar molt facilment, tota ella, o algun dels elements. Per a arribar als elements posarem nom_variable.nom_camp:</p> <p>&gt; doc.camp4 = 3.141592 3.141592</p> <p>&gt; doc.camp5 = [ 2 , 4 , 6 , 8] [ 2, 4, 6, 8 ]</p> <p>I si ara intentem traure el contingut de la variable:</p> <p>&gt; doc { \"camp1\" : \"Hola\", \"camp2\" : 45, \"camp3\" : ISODate(\"2016-02-24T22:31:12.724Z\"), \"camp4\" : 3.141592, \"camp5\" : [ 2, 4, 6, 8 ] } &gt;</p> <p>Tamb\u00e9 hem de fer constar que en un document, que ser\u00e0 de tipus JSON (pr\u00e0cticament), ser\u00e0 un conjunt de parelles clau-valor, amb algunes restriccions:</p> <ul> <li>El document (que moltes vegades l'associarem a objecte de JSON) va entre claus ( { } )</li> <li>Els elements d'un objecte van separats per comes, i s\u00f3n parelles clau-valor.</li> <li>La clau no pot ser nula, ni repetir-se en el mateix objecte (s\u00ed en diferents objectes, clar)</li> <li>Els valors s\u00f3n dels tipus que veurem en la pregunta 3.2.1</li> <li>Un document guardat ha de contenir obligat\u00f2riament un camp anomenat _id, i que contindr\u00e0 un valor \u00fanic en la col\u00b7lecci\u00f3 i servir\u00e0 per a identificar-lo. Si en guardar un document no li hem posat camp _id, el generar\u00e0 autom\u00e0ticament MongoDB.</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement SenseObraDerivada 4.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T08_BD_NoSQL/341__parmetres_de_les_funcions_find_i_findone/","title":"341  parmetres de les funcions find i findone","text":"<p>Bases de Dades</p> <ul> <li>Tema 8: Bases de Dades NoSQL</li> <li>1 - Introducci\u00f3</li> <li>2 - BD Clau-Valor: Redis </li> <li>2.1 - Instal\u00b7laci\u00f3 de Redis</li> <li>2.2 - Entron gr\u00e0fic: Redis Desktop Manager</li> <li>2.3 - Utilitzaci\u00f3 de Redis <ul> <li>2.3.1 - Strings</li> <li>2.3.2 - Keys</li> <li>2.3.3 - Hash</li> <li>2.3.4 - List</li> <li>2.3.5 - Set</li> <li>2.3.6 - Set ordenat</li> </ul> </li> <li>3 - MongoDB </li> <li>3.1 - Estructura JSON</li> <li>3.2 - Instal\u00b7laci\u00f3 de MongoDB <ul> <li>3.2.1 - Connexi\u00f3 al servidor de l'Institut</li> </ul> </li> <li>3.3 - Utilitzaci\u00f3 de MongoDB <ul> <li>3.3.1 - Tipus de dades</li> <li>3.3.2 - Operacions b\u00e0siques</li> <li>3.2.3 - Operacions d'actualitzaci\u00f3 avan\u00e7ada </li> <li>3.3.3.1 - $set</li> <li>3.3.3.2 - $unset</li> <li>3.3.3.3 - $rename</li> <li>3.3.3.4 - $inc</li> <li>3.3.3.5 - Elements d'un array</li> <li>3.3.3.6 - Inserci\u00f3 en Arrays: $push</li> <li>3.3.3.7 - Eliminaci\u00f3 en arrays: $pop i $pull</li> <li>3.3.3.8 - Upsert</li> </ul> </li> <li>3.4 - Consulta de documents <ul> <li>3.4.1 - Par\u00e0metres de les funcions find() i findOne()</li> <li>3.4.2 - Operadors de les condicions</li> <li>3.4.3 - Agregaci\u00f3</li> </ul> </li> <li>4 - BD XML: eXist-db </li> <li>4.1 - Instal\u00b7laci\u00f3 d'eXist-db</li> <li>4.2 - Llenguatges de consultes XPATH i XQUERY <ul> <li>4.2.1 - XPATH </li> <li>4.2.1.1 - Vista d'arbre</li> <li>4.2.1.2 - Navegaci\u00f3</li> <li>4.2.1.3 - Seq\u00fc\u00e8ncies</li> <li>4.2.1.4 - Funcions</li> <li>4.2.2 - XQUERY </li> <li>4.2.2.1 - Consultes XQuery</li> <li>4.2.2.2 - Variables</li> <li>4.2.2.3 - Expressions avaluables</li> <li>4.2.2.4 - Expressions FLWOR</li> <li>4.2.2.5 - Alternatives</li> <li>4.2.2.6 - Exemple de consulta \"elaborada\"</li> <li>4.2.2.7 - Funcions de eXist-db de manipulaci\u00f3 de BD</li> </ul> </li> <li>5 - FIREBASE (voluntari) </li> <li>5.1 - Creaci\u00f3 d'una aplicaci\u00f3</li> <li>5.2 - Realtime Database (RD)</li> <li>5.3 - Cloud Firestore (CF)</li> <li>5.4 - Cloud Storage</li> <li>Exercicis</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T08_BD_NoSQL/341__parmetres_de_les_funcions_find_i_findone/#341-parametres-de-les-funcions-find-i-findone","title":"3.4.1 - Par\u00e0metres de les funcions find() i findOne()","text":"<p>Les funcions find() i findOne() s\u00f3n absolutament equivalents, amb l'\u00fainca difer\u00e8ncia que la primera torna tots els documents trobats, mentre que la segona nom\u00e9s torna el primer document trobat.</p> <p>Per una millor comprensi\u00f3, utilitzarem \u00fanicament find(), per veure tots els resultats obtinguts.</p> <p>La funci\u00f3 find() s'ha comparat tradicionalment amb la sent\u00e8ncia SELECT de SQL. Sempre tornar\u00e0 un conjunt de documents, que poden variar des de no tornar cap document, a tornar tots els de la col\u00b7lecci\u00f3.</p> <p>La funci\u00f3 find() pot tenir uns quants par\u00e0metres.</p> <ul> <li>El primer indica una condici\u00f3 o criteri, i tornar\u00e0 aquells documents de la col\u00b7lecci\u00f3 que acomplesquen la condici\u00f3 o criteri. Aquesta condici\u00f3 ve donada en forma de document (o objecte) JSON, i \u00e9s com l'hav\u00edem vist en la funci\u00f3 update():</li> </ul> <p>db.col_leccio1.find( { clau1 : valor1 } )</p> <p>Tornar\u00e0 tots els documents de la col\u00b7lecci\u00f3 col_leccio1 que tinguen el camp clau1 i que en ella tinguen el valor valor1. Aquest criteri pot ser el complicat que fa\u00e7a falta, formant-lo en JSON. En definitiva, tornar\u00e0 aquells documents que facen matching amb el document del criteri, \u00e9s a dir, funcionaria com un and</p> <p>db.col_leccio1.find( { clau1 : valor1 , clau2 : valor2 } )</p> <p>que tornaria aquells documents de la col_lecci\u00f31 que tenen el camp clau1 amb el valor valor1 i que tenen el camp clau2 amb el valor valor2</p> <p>Si no volem posar cap criteri, per a que els torne tots, no posem res com a par\u00e0metre, o encara millor, li passem un document (objecte) buit, de manera que tots els documents de la col\u00b7lecci\u00f3 faran matching amb ell.</p> <p>db.col_leccio1.find( { } )</p> <p>Tindrem a\u00e7\u00f2 present, sobretot quan ens toque utilitzar el segon par\u00e0metre de find. Si no volem cap criteri, posarem el document buit com l'exemple anterior</p> <ul> <li>El segon par\u00e0metre ens servir\u00e0 per a delimitar els camps dels documents que es visualitzaran. Tamb\u00e9 tindr\u00e0 el format JSON d'un objecte al qual li posarem com a claus els diferents camps que volem que apareguen o no, i com a valor 1 per a que s\u00ed que apareguen i 0 per a que no apareguen.</li> </ul> <p>Si posem algun camp a que s\u00ed que aparega (\u00e9s a dir, amb el valor 1), els \u00fanics que apareixeran seran aquestos, a m\u00e9s del_id que per defecte sempre apareix.</p> <p>&gt; db.alumnes.find({},{nom:1}) { \"_id\" : ObjectId(\"56debe3017bf4ed437dc77c8\"), \"nom\" : \"Abel\" }</p> <p>Per tant si no volem que aparega _id posarem:</p> <p>&gt; db.alumnes.find({},{_id:0}) { \"nom\" : \"Abel\", \"cognoms\" : \"Bernat Cantera\", \"edat\" : 22, \"adre\u00e7a\" : { \"carrer\" : \"Major\", \"numero\" : 7, \"cp\" : \"12502\" }, \"nota\" : [ 9.5, 9 ] }</p> <p>I si volem traure \u00fanicament el nom:</p> <p>&gt; db.alumnes.find({},{nom:1,_id:0}) { \"nom\" : \"Abel\" }</p> <p>Per \u00faltim, com que a partir d'ara utilitzarem documents m\u00e9s complicats, si volem que ens apareguen els camps que retornem d'una forma un poc m\u00e9s elegant o bonica (pretty), posarem aquesta funci\u00f3 al final: find().pretty()</p> <p>&gt; db.alumnes.find().pretty() { \"_id\" : ObjectId(\"56debe3017bf4ed437dc77c8\"), \"nom\" : \"Abel\", \"cognoms\" : \"Bernat Cantera\", \"edat\" : 22, \"adre\u00e7a\" : { \"carrer\" : \"Major\", \"numero\" : 7, \"cp\" : \"12502\" }, \"nota\" : [ 9.5, 9 ] } { \"_id\" : ObjectId(\"56dfdbd136d8b095cb6bd57a\"), \"nom\" : \"Berta\", \"cognoms\" : \"Bernat Cantero\" }</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement SenseObraDerivada 4.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T08_BD_NoSQL/342__operadors_de_les_condicions/","title":"342  operadors de les condicions","text":"<p>Bases de Dades</p> <ul> <li>Tema 8: Bases de Dades NoSQL</li> <li>1 - Introducci\u00f3</li> <li>2 - BD Clau-Valor: Redis </li> <li>2.1 - Instal\u00b7laci\u00f3 de Redis</li> <li>2.2 - Entron gr\u00e0fic: Redis Desktop Manager</li> <li>2.3 - Utilitzaci\u00f3 de Redis <ul> <li>2.3.1 - Strings</li> <li>2.3.2 - Keys</li> <li>2.3.3 - Hash</li> <li>2.3.4 - List</li> <li>2.3.5 - Set</li> <li>2.3.6 - Set ordenat</li> </ul> </li> <li>3 - MongoDB </li> <li>3.1 - Estructura JSON</li> <li>3.2 - Instal\u00b7laci\u00f3 de MongoDB <ul> <li>3.2.1 - Connexi\u00f3 al servidor de l'Institut</li> </ul> </li> <li>3.3 - Utilitzaci\u00f3 de MongoDB <ul> <li>3.3.1 - Tipus de dades</li> <li>3.3.2 - Operacions b\u00e0siques</li> <li>3.2.3 - Operacions d'actualitzaci\u00f3 avan\u00e7ada </li> <li>3.3.3.1 - $set</li> <li>3.3.3.2 - $unset</li> <li>3.3.3.3 - $rename</li> <li>3.3.3.4 - $inc</li> <li>3.3.3.5 - Elements d'un array</li> <li>3.3.3.6 - Inserci\u00f3 en Arrays: $push</li> <li>3.3.3.7 - Eliminaci\u00f3 en arrays: $pop i $pull</li> <li>3.3.3.8 - Upsert</li> </ul> </li> <li>3.4 - Consulta de documents <ul> <li>3.4.1 - Par\u00e0metres de les funcions find() i findOne()</li> <li>3.4.2 - Operadors de les condicions</li> <li>3.4.3 - Agregaci\u00f3</li> </ul> </li> <li>4 - BD XML: eXist-db </li> <li>4.1 - Instal\u00b7laci\u00f3 d'eXist-db</li> <li>4.2 - Llenguatges de consultes XPATH i XQUERY <ul> <li>4.2.1 - XPATH </li> <li>4.2.1.1 - Vista d'arbre</li> <li>4.2.1.2 - Navegaci\u00f3</li> <li>4.2.1.3 - Seq\u00fc\u00e8ncies</li> <li>4.2.1.4 - Funcions</li> <li>4.2.2 - XQUERY </li> <li>4.2.2.1 - Consultes XQuery</li> <li>4.2.2.2 - Variables</li> <li>4.2.2.3 - Expressions avaluables</li> <li>4.2.2.4 - Expressions FLWOR</li> <li>4.2.2.5 - Alternatives</li> <li>4.2.2.6 - Exemple de consulta \"elaborada\"</li> <li>4.2.2.7 - Funcions de eXist-db de manipulaci\u00f3 de BD</li> </ul> </li> <li>5 - FIREBASE (voluntari) </li> <li>5.1 - Creaci\u00f3 d'una aplicaci\u00f3</li> <li>5.2 - Realtime Database (RD)</li> <li>5.3 - Cloud Firestore (CF)</li> <li>5.4 - Cloud Storage</li> <li>Exercicis</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T08_BD_NoSQL/342__operadors_de_les_condicions/#342-operadors-de-les-condicions","title":"3.4.2 - Operadors de les condicions","text":"<p>Abans de comen\u00e7ar aquesta pregunta, anem a agafar unes dades de prova, que estan en el fitxer libros_ejemplo.json</p> <p>Nom\u00e9s heu de copiar el contingut del fitxer en la terminal del client de Mongo.</p> <p>Posem ac\u00ed el contingut per a que pugueu pegar-li una miradeta sense necessitat d'obrir-lo. Anir\u00e0 b\u00e9 per als exemples posteriors.</p> <p>db.libro.save({ \"_id\":\"9788408117117\", \"titulo\":\"Circo M\u00e1ximo\", \"autor\":\"Santiago Posteguillo\", \"editorial\":\"Planeta\", \"enstock\":true, \"paginas\":1100, \"precio\":21.75, \"fecha\":new ISODate(\"2013-08-29T00:00:00Z\"),\u00a0\u00a0 \u00a0\u00a0\u00a0 \u00a0 \"resumen\":\"Circo M\u00e1ximo, de Santiago Posteguillo, que ha escrito otras obras de narrativa hist\u00f3rica como Las Legiones Malditas o La traici\u00f3n de Roma, es la segunda parte de la trilog\u00eda de Trajano, que comenz\u00f3 con Los asesinos del emperador, un relato impactante, descomunal, descrito con un trepidante pulso narrativo destinado a trasla dar al lector a la Roma imperial de los c\u00e9sares. Santiago posteguillo se ha convertido en el autor espa\u00f1ol de referencia de la novela hist\u00f3rica sobre Roma y el mundo antiguo. Bienvenidos al mundo de Marco Ulpio Trajano. Circo M\u00e1ximo es la historia de Trajano y su gobierno, guerras y traiciones, lealtades insobornables e historias de amor imposibles. Hay una vestal, un juicio, inocentes acusados, un abogado especial, mensajes cifrados, c\u00f3digos secretos, batallas campales, fortalezas inexpugnables, asedios sin fin, dos aurigas rivales, el Anfiteatro, los gladiadores y tres carreras de cuadrigas. Hay tambi\u00e9n un caballo especial, diferente a todos, leyes antiguas olvidadas, sacrificios humanos, amargura y terror, pero tambi\u00e9n destellos de nobleza y esperanza, como la llama de Vesta, que mientras arde preserva a Roma. S\u00f3lo que hay noches en las que la llama del Templo de Vesta tiembla. La rueda de la Fortuna comienza entonces a girar. En esos momentos, todo puede pasar y hasta la vida del propio Trajano, aunque \u00e9l no lo sepa, corre peligro. Y, esto es lo mejor de todo, ocurri\u00f3: hubo un complot para asesinar a Marco Ulpio Trajano.\" })</p> <p>db.libro.save({ \"_id\":\"9788401342158\", \"titulo\":\"El juego de Ripper\", \"autor\":\"Isabel Allende\", \"editorial\":\"Plaza &amp; Janes\", \"enstock\":true, \"paginas\":480, \"precio\":21.75, \"fecha\":new ISODate(\"2014-03-01T00:00:00Z\"),\u00a0\u00a0 \u00a0\u00a0\u00a0 \u00a0 \"resumen\":\"Tal como predijo la astr\u00f3loga m\u00e1s reputada de San Francisco, una oleada de cr\u00edmenes comienza a sacudir la ciudad. En la investigaci\u00f3n sobre los asesinatos, el inspector Bob Mart\u00edn recibir\u00e1 la ayuda inesperada de un grupo de internautas especializados en juegos de rol, Ripper. 'Mi madre todav\u00eda est\u00e1 viva, pero la matar\u00e1 el Viernes Santo a medianoche', le advirti\u00f3 Amanda Mart\u00edn al inspector jefe y \u00e9ste no lo puso en duda, porque la chica hab\u00eda dado pruebas de saber m\u00e1s que \u00e9l y todos sus colegas del Departamento de Homicidios. La mujer estaba cautiva en alg\u00fan punto de los dieciocho mil kil\u00f3metros cuadrados de la bah\u00eda de San Francisco, ten\u00edan pocas horas para encontrarla con vida y \u00e9l no sab\u00eda por d\u00f3nde empezar a buscarla\", })</p> <p>db.libro.save({ \"_id\":\"9788496208919\", \"titulo\":\"Juego de tronos: Canci\u00f3n de hielo y fuego 1\", \"autor\":\"George R.R. Martin\", \"editorial\":\"Gigamesh\", \"enstock\":true, \"paginas\":793, \"precio\":9.5, \"fecha\":new ISODate(\"2011-11-24T00:00:00Z\"),\u00a0\u00a0\u00a0 \u00a0 \"resumen\":\"Tras el largo verano, el invierno se acerca a los Siete Reinos. Lord Eddars Stark, se\u00f1or de Invernalia, deja sus dominios para unirse a la corte del rey Robert Baratheon el Usurpador, hombre d\u00edscolo y otrora guerrero audaz cuyas mayores aficiones son comer, beber y engendrar bastardos. Eddard Stark desempe\u00f1ar\u00e1 el cargo de M ano del Rey e intentar\u00e1 desentra\u00f1ar una mara\u00f1a de intrigas que pondr\u00e1 en peligro su vida... y la de los suyos. En un mundo cuyas estaciones duran d\u00e9cadas y en el que retazos de una magia inmemorial y olvidada surgen en los rincones m\u00e1s sombrios y maravillosos, la traici\u00f3n y la lealtad, la compasi\u00f3n y la sed de venganza, el amor y el poder hacen del juego de tronos una poderosa trampa que atrapa en sus fauces a los personajes... y al lector. 'El regreso triunfal de Martin a la fantas\u00eda de m\u00e1s alta calidad... con personajes desarrollados con maestr\u00eda, prosa h\u00e1bil y pura obstinaci\u00f3n.'\" })</p> <p>db.libro.save({ \"_id\":\"9788499088075\", \"titulo\":\"La ladrona de libros\", \"autor\":\"Markus Zusak\", \"editorial\":\"Debolsillo\", \"enstock\":false, \"paginas\":544, \"precio\":9.45, \"fecha\":new ISODate(\"2009-01-09T00:00:00Z\"),\u00a0\u00a0\u00a0\u00a0 \u00a0 \"resumen\":\"En plena II Guerra Mundial, la peque\u00f1a Liesel hallar\u00e1 su salvaci\u00f3n en la lectura. Una novela preciosa, tremendamente humana y emocionante, que describe las peripecias de una ni\u00f1a alemana de nueve a\u00f1os desde que es dada en adopci\u00f3n por su madre hasta el final de la guerra. Su nueva familia, gente sencilla y nada afecta al na zismo, le ense\u00f1a a leer y a trav\u00e9s de los libros Rudy logra distraerse durante los bombardeos y combatir la tristeza. Pero es el libro que ella misma est\u00e1 escribiendo el que finalmente le salvar\u00e1 la vida.\", })</p> <p>db.libro.save({ \"_id\":\"9788415140054\", \"titulo\":\"La princesa de hielo\", \"autor\":\"Camilla Lackberg\", \"editorial\":\"Embolsillo\", \"enstock\":true, \"precio\":11, \"fecha\":new ISODate(\"2012-10-30T00:00:00Z\"),\u00a0\u00a0 \u00a0 \"resumen\":\"Misterio y secretos familiares en una emocionante novela de suspense Erica vuelve a su pueblo natal tras el fallecimiento de sus padres, pero se va a encontrar con un nuevo drama. Aparentemente su amiga de la infancia, Alex, se ha suicidado. Pronto se descubre que no solamente fue asesinada sino que estaba embarazada. El primer sospechoso es Anders, un artista fracasado con quien Alex manten\u00eda una relaci\u00f3n especial. Pero poco despu\u00e9s de ser liberado por falta de pruebas, Anders aparece muerto en su domicilio. Con la ayuda del comisario Patrik, Erica investigar\u00e1 el pasado de su amiga Alex.\" })</p> <p>db.libro.save({ \"_id\":\"9788408113331\", \"titulo\":\"Las carreras de Escorpio\", \"autor\":\"Maggie Stiefvater\", \"editorial\":\"Planeta\", \"enstock\":false, \"paginas\":290, \"precio\":17.23, \"fecha\":new ISODate(\"2013-06-04T00:00:00Z\"), \u00a0 \"resumen\":\"En la peque\u00f1a isla de Thisby, cada noviembre los caballos de agua de la mitolog\u00eda celta emergen del mar. Y cada noviembre, los hombres los capturan para participar en una emocionante carrera mortal. En las carreras de Escorpio, algunos compiten para ganar. Otros para sobrevivir. Los jinetes intentan dominar a sus caballos de agua el tiempo suficiente para acabar la carrera. Algunos lo consiguen. El resto, muere en el intento. Sean Kendrick es el favorito, y necesita ganar la carrera para ganar, tambi\u00e9n, su libertad. Pero Puck Connolly est\u00e1 dispuesta a ser su m\u00e1s dura adversaria. Ella nunca quiso participar en las carreras. Pero no tiene elecci\u00f3n: o compite y gana o\u2026 lo pierde todo.\", })</p> <p>db.libro.save({ \"_id\":\"9788468738895\", \"titulo\":\"Las reglas del juego\", \"autor\":\"Anna Casanovas\", \"enstock\":true, \"paginas\":null, \"precio\":15.90, \"fecha\":new ISODate(\"2014-02-06T00:00:00Z\"), \"resumen\":\"Susana Lobato tiene la vida perfectamente planeada y est\u00e1 a punto de conseguir todo lo que quiere: va a tener su propio programa de noticias econ\u00f3micas y en dos meses va a casarse con un hombre maravilloso. Pero una noche Tim anula la boda y la abandona para perseguir un sue\u00f1o que no la incluye a ella.Kev MacMurray acaba de cumplir treinta y cinco a\u00f1os y siente que ha llegado el momento de dar un cambio a su vida. No sabe por qu\u00e9, pero \u00faltimamente se est\u00e1 asfixiando y est\u00e1 convencido de que no puede seguir donde est\u00e1. Lo \u00fanico que lo retiene es la boda de Tim, su mejor amigo.Pero Tim anula la boda y una noche Kev coincide con Susana y respira por primera vez en mucho tiempo.\u00bfPor qu\u00e9 no le hab\u00eda sucedido antes? Se supon\u00eda que \u00e9l y Susana no se soportaban \u00bfDesde cu\u00e1ndo siente que si no besa a la prometida de su mejor amigo no podr\u00e1 seguir respirando?Susana nunca hab\u00eda reaccionado as\u00ed con nadie. \u00bfPuede correr el riesgo de averiguar qu\u00e9 pasar\u00e1 si se entrega a Kev?Y qu\u00e9 pasar\u00e1 si vuelve Tim, \u00bfpodr\u00e1n dar un paso atr\u00e1s?.\", })</p> <p>Com podeu comprovar estan els comandos d'inserci\u00f3 (save() ) i tamb\u00e9 es veu prou b\u00e9 els camps de cada document.</p> <p>Podeu veure que hi ha 7 documents en la nova col\u00b7lecci\u00f3 libro:</p> <p>&gt; db.libro.count() 7</p> <p>I tamb\u00e9 podem consultar els t\u00edtols de forma c\u00f2moda:</p> <p>&gt; db.libro.find( {} , {titulo:1} ) { \"_id\" : \"9788408117117\", \"titulo\" : \"Circo M\u00e1ximo\" } { \"_id\" : \"9788401342158\", \"titulo\" : \"El juego de Ripper\" } { \"_id\" : \"9788496208919\", \"titulo\" : \"Juego de tronos: Canci\u00f3n de hielo y fuego 1\" } { \"_id\" : \"9788499088075\", \"titulo\" : \"La ladrona de libros\" } { \"_id\" : \"9788415140054\", \"titulo\" : \"La princesa de hielo\" } { \"_id\" : \"9788408113331\", \"titulo\" : \"Las carreras de Escorpio\" }</p> <p>I un altre exemple, on consultem els llibres que estan en stock (hi ha un camp boole\u00e0 que ho diu: enstock), mostrant t\u00edtol, editorial i preu</p> <p>&gt; db.libro.find( {enstock: true} , {titulo:1 , editorial:1 , precio:1} ) { \"_id\" : \"9788408117117\", \"titulo\" : \"Circo M\u00e1ximo\", \"editorial\" : \"Planeta\", \"precio\" : 21.75 } { \"_id\" : \"9788401342158\", \"titulo\" : \"El juego de Ripper\", \"editorial\" : \"Plaza &amp; Janes\", \"precio\" : 21.75 } { \"_id\" : \"9788496208919\", \"titulo\" : \"Juego de tronos: Canci\u00f3n de hielo y fuego 1\", \"editorial\" : \"Gigamesh\", \"precio\" : 9.5 }</p> <p>I un \u00faltim exemple, on consultem els llibres que estan en stock i tenen un preu de 21.75 \u20ac, mostrant tot excepte el _id i el resum</p> <p>&gt; db.libro.find( {enstock: true , precio: 21.75} , {titulo:1 , editorial:1 , precio:1} ) { \"_id\" : \"9788408117117\", \"titulo\" : \"Circo M\u00e1ximo\", \"editorial\" : \"Planeta\", \"precio\" : 21.75 }</p> <p>Anem a mirar ara operadors que ens serviran per fer millor les consultes.</p> <p>Operadors de comparaci\u00f3</p> <p>Fins ara en totes les condicions hem utilitzat la igualtat, si un determinat camp era igual a un determinat valor. Per\u00f2 hi ha infinitat de consultes en les quals voldrem altres operacions de comparaci\u00f3: major, major o igual, menor, ...</p> <p>Aquestos s\u00f3n els operadors de comparaci\u00f3:</p> <ul> <li>$lt (less than) menor</li> <li>$lte (less than or equal) menor o igual</li> <li>$gt (gretaer than) major</li> <li>$gte (gretaer than or equal) major o igual</li> <li>$ne (not equal) distint</li> <li>$eq (equal) igual (per\u00f2 aquest quasi que no caldria, perqu\u00e8 en no posar res es refereix a la igualtat com fins ara)</li> </ul> <p>La sintaxi per a la seua utilitzaci\u00f3 \u00e9s, com sempre, acoplar-se a la sintaxi JSON:</p> <p>clau : { $operador : valor [, ... ] }</p> <p>Aix\u00ed per exemple, per a buscar els llibres de m\u00e9s de 10 \u20ac:</p> <p>&gt; db.libro.find( { precio : { $gt : 10 } } , { titulo:1 , precio:1 } ) { \"_id\" : \"9788408117117\", \"titulo\" : \"Circo M\u00e1ximo\", \"precio\" : 21.75 } { \"_id\" : \"9788401342158\", \"titulo\" : \"El juego de Ripper\", \"precio\" : 21.75 } { \"_id\" : \"9788415140054\", \"titulo\" : \"La princesa de hielo\", \"precio\" : 11 } { \"_id\" : \"9788408113331\", \"titulo\" : \"Las carreras de Escorpio\", \"precio\" : 17.23 }</p> <p>I per a buscar els llibres entre 10 i 20 \u20ac:</p> <p>&gt; db.libro.find( { precio : { $gt : 10 , $lt:20 } } , { titulo:1 , precio:1 } ) { \"_id\" : \"9788415140054\", \"titulo\" : \"La princesa de hielo\", \"precio\" : 11 } { \"_id\" : \"9788408113331\", \"titulo\" : \"Las carreras de Escorpio\", \"precio\" : 17.23 }</p> <p>\u00c9s especialment \u00fatil per a les dates, ja que dif\u00edcilment trobarem una data (i hora) exacta, i voldrem quasi sempre els documents anteriors a una data, o posteriors, o entre dues dates. Haurem d'anar amb compte pel tractament especial de les dates: hem de comparar coses del mateix tipus, i per tant la data amb la qual volem comparar l'haurem de tenir en forma de data:</p> <p>&gt; var d = new ISODate(\"2013-01-01T00:00:00Z\") &gt; db.libro.find( {fecha:{$gte:d} } , {fecha:1} ) { \"_id\" : \"9788408117117\", \"fecha\" : ISODate(\"2013-08-29T00:00:00Z\") } { \"_id\" : \"9788401342158\", \"fecha\" : ISODate(\"2014-03-01T00:00:00Z\") } { \"_id\" : \"9788408113331\", \"fecha\" : ISODate(\"2013-06-04T00:00:00Z\") }</p> <p>$in</p> <p>Servir\u00e0 per a comprovar si el valor d'un camp est\u00e0 entre els d'una llista, proporcionada com un array. La sitaxi \u00e9s:</p> <p>clau : { $in : [valor1 , valor2 , ... , valorN] }</p> <p>I ac\u00ed tenim un exemple, els llibre de les editorials Planeta i Debolsillo:</p> <p>&gt; db.libro.find( { editorial: {$in : [\"Planeta\" , \"Debolsillo\"]} } , {titulo:1 , editorial:1} ) { \"_id\" : \"9788408117117\", \"titulo\" : \"Circo M\u00e1ximo\", \"editorial\" : \"Planeta\" } { \"_id\" : \"9788499088075\", \"titulo\" : \"La ladrona de libros\", \"editorial\" : \"Debolsillo\" }</p> <p>$nin</p> <p>\u00c9s el contrari, traura els que no estan en la llista.</p> <p>&gt; db.libro.find( { editorial: {$nin : [\"Planeta\" , \"Debolsillo\"]} } , {titulo:1 , editorial:1} ) { \"_id\" : \"9788401342158\", \"titulo\" : \"El juego de Ripper\", \"editorial\" : \"Plaza &amp; Janes\" } { \"_id\" : \"9788496208919\", \"titulo\" : \"Juego de tronos: Canci\u00f3n de hielo y fuego 1\", \"editorial\" : \"Gigamesh\" } { \"_id\" : \"9788415140054\", \"titulo\" : \"La princesa de hielo\", \"editorial\" : \"Embolsillo\" }</p> <p>Observeu com tamb\u00e9 trau els llibres que no tenen editorial, com \u00e9s el cas de l'\u00faltim llibre, Las reglas del juego</p> <p>$or</p> <p>L'operador anterior, \\(in**, ja feia una esp\u00e8cie de OR, per\u00f2 sempre sobre el mateix camp. Si l'operaci\u00f3 OR la volem fer sobre camps distints, haurem d'utilitzar l'operador **\\)or. La seua sintaxi ha de jugar amb la possibilitat de posar molts elements, i per tant conv\u00e9 l'array:</p> <p>$or : [ {clau1:valor1} , {clau2:valor2} , ... , {clauN:valorN} ]</p> <p>Ser\u00e0 cert si s'acompleix alguna de les condicions. Per exemple, traure els llibres que no estan en stock o que no tenen editorial:</p> <p>&gt; db.libro.find( { $or : [ {enstock:false} , {editorial:null} ] } , {titulo:1 , enstock:1 , editorial:1} ) { \"_id\" : \"9788499088075\", \"titulo\" : \"La ladrona de libros\", \"editorial\" : \"Debolsillo\", \"enstock\" : false } { \"_id\" : \"9788408113331\", \"titulo\" : \"Las carreras de Escorpio\", \"editorial\" : \"Planeta\", \"enstock\" : false }</p> <p>$not</p> <p>Serveix per a negar una altra condici\u00f3.</p> <p>$not : { condici\u00f3 }</p> <p>Per exemple els llibres que no s\u00f3n de l'editorial Planeta (observeu que seria m\u00e9s senzill utilitzar l'operador $ne, per\u00f2 \u00e9s per a mostrar el seu funcionament:</p> <p>&gt; db.libro.find( { editorial: {\\(not : {\\)eq:\"Planeta\"} } } , {titulo:1 , editorial:1} ) { \"_id\" : \"9788401342158\", \"titulo\" : \"El juego de Ripper\", \"editorial\" : \"Plaza &amp; Janes\" } { \"_id\" : \"9788496208919\", \"titulo\" : \"Juego de tronos: Canci\u00f3n de hielo y fuego 1\", \"editorial\" : \"Gigamesh\" } { \"_id\" : \"9788499088075\", \"titulo\" : \"La ladrona de libros\", \"editorial\" : \"Debolsillo\" } { \"_id\" : \"9788415140054\", \"titulo\" : \"La princesa de hielo\", \"editorial\" : \"Embolsillo\" }</p> <p>$exists</p> <p>Servir\u00e0 per a saber els documents que tenen un determinat camp</p> <p>clau : { $exists : boolean }</p> <p>Depenet del valor boolean, el funcionament ser\u00e0:</p> <ul> <li>true: torna els documents en els quals existeix el camp, encara que el seu valor siga nul</li> <li>false: torna els documents que no tenen el camp.</li> </ul> <p>Anem a traure els llibres que tenen el camp paginas:</p> <p>&gt; db.libro.find( { paginas: {$exists:true} } , {titulo:1 , paginas:1} ) { \"_id\" : \"9788408117117\", \"titulo\" : \"Circo M\u00e1ximo\", \"paginas\" : 1100 } { \"_id\" : \"9788401342158\", \"titulo\" : \"El juego de Ripper\", \"paginas\" : 480 } { \"_id\" : \"9788496208919\", \"titulo\" : \"Juego de tronos: Canci\u00f3n de hielo y fuego 1\", \"paginas\" : 793 } { \"_id\" : \"9788499088075\", \"titulo\" : \"La ladrona de libros\", \"paginas\" : 544 } { \"_id\" : \"9788408113331\", \"titulo\" : \"Las carreras de Escorpio\", \"paginas\" : 290 }</p> <p>Observeu com ens apareix tamb\u00e9 l'ultim llibre, que t\u00e9 el camp paginas amb el valor nul. En canvi si hagu\u00e9rem fet la consulta preguntant pels que s\u00f3n diferent de nul, no apareixeria aquest \u00faltim llibre:</p> <p>&gt; db.libro.find( { paginas: {$ne:null} } , {titulo:1 , paginas:1} ) { \"_id\" : \"9788408117117\", \"titulo\" : \"Circo M\u00e1ximo\", \"paginas\" : 1100 } { \"_id\" : \"9788401342158\", \"titulo\" : \"El juego de Ripper\", \"paginas\" : 480 } { \"_id\" : \"9788496208919\", \"titulo\" : \"Juego de tronos: Canci\u00f3n de hielo y fuego 1\", \"paginas\" : 793 } { \"_id\" : \"9788499088075\", \"titulo\" : \"La ladrona de libros\", \"paginas\" : 544 }</p> <p>I si posem false al valor en el $exists, \u00fanicament ens apareixer\u00e0 el llibre que no t\u00e9 el camp:</p> <p>&gt; db.libro.find( { paginas: {$exists:false} } , {titulo:1 , paginas:1} )</p> <p>I per la mateixa ra\u00f3 que abans, si traiem els que tenen paginas a null, ens eixir\u00e0 tant qui no t\u00e9 el camp, com qui el t\u00e9 per\u00f2 amb valor nul:</p> <p>&gt; db.libro.find( { paginas: null } , {titulo:1 , paginas:1} ) { \"_id\" : \"9788415140054\", \"titulo\" : \"La princesa de hielo\" }</p> <p>Per tant, per a segons quines coses, ens interessa l'operador $exists, en compte de jugar amb el nul.</p> <p>Expressions regulars</p> <p>Mongo accepta les expressions regulars de forma nativa, cosa que d\u00f3na molta pot\u00e8ncia per a poder buscar informaci\u00f3 diversa.</p> <p>Les expressions regulars en Mongo tenen la mateixa sintaxi que en Perl, i que \u00e9s molt molt pareguda a la major part de llenguatges de programaci\u00f3.</p> <p>Mirem alguns exemples. Els llibres dins dels quals est\u00e0 la paraula juego:</p> <p>&gt; db.libro.find( { titulo: /juego/ } , {titulo:1} ) { \"_id\" : \"9788401342158\", \"titulo\" : \"El juego de Ripper\" }</p> <p>Ara que tenen la paraula juego sense importar maj\u00fascules o min\u00fascules:</p> <p>&gt; db.libro.find( { titulo: /juego/i } , {titulo:1} ) { \"_id\" : \"9788401342158\", \"titulo\" : \"El juego de Ripper\" } { \"_id\" : \"9788496208919\", \"titulo\" : \"Juego de tronos: Canci\u00f3n de hielo y fuego 1\" }</p> <p>I ara que tenen la paraula juego nom\u00e9s al principi.</p> <p>&gt; db.libro.find( { titulo: /^juego/i } , {titulo:1} )</p> <p>I ara els llibres que en el reusum (resumen) que tenen la paraula amiga o amigo, \u00e9s a dir amig seguit d'una\u00a0a o una o:</p> <p>&gt; db.libro.find( { resumen: /amig[ao]/i } , {titulo:1} ) { \"_id\" : \"9788415140054\", \"titulo\" : \"La princesa de hielo\" }</p> <p>Arrays</p> <p>Les consultes dins d'arrays de Mongo s\u00f3n molt senzilles.</p> <p>La m\u00e9s senzilla \u00e9s com quan busquem un valor d'un tipus senzill, i en aquest cas el que far\u00e0 Mongo \u00e9s buscar en tot l'array per si est\u00e0 aquest valor. \u00c9s a dir, exactament igual que el que hem fet fins ara.</p> <p>db.col_leccio1.find ( { clau_array : valor } )</p> <p>Mirem-ho en un exemple. Anem a crear dos documents que tinguen un array cadascun, per exemple de colors. El creem en una col\u00b7lecci\u00f3 nova, anomenada colorins, en dos documents amb el mateix camp de tipus array, color, per\u00f2 amb dades diferents:</p> <p>&gt; db.colorins.insert({color: [\"roig\",\"blau\",\"groc\"]}) WriteResult({ \"nInserted\" : 1 })</p> <p>&gt; db.colorins.insert({color: [\"negre\",\"blanc\",\"roig\"]}) WriteResult({ \"nInserted\" : 1 })</p> <p>&gt; db.colorins.find(); { \"_id\" : ObjectId(\"56e1438ff6663c8169030e09\"), \"color\" : [ \"roig\", \"blau\", \"groc\" ] }</p> <p>Com es veu en la sintaxi, triar els documents que tenen un camp (en aquest cas d'array) que continga un valor, \u00e9s igual de senzill que quan es tracta d'un camp de tipus string, per exemple:</p> <p>&gt; db.colorins.find({color:\"roig\"}) { \"_id\" : ObjectId(\"56e1438ff6663c8169030e09\"), \"color\" : [ \"roig\", \"blau\", \"groc\" ] }</p> <p>Tamb\u00e9 podem utilitzar qualsevol dels operadors vistos fins el moment, com per exemple l'operador $in, que mirar\u00e0 els documents que tenen algun dels colors que s'especifica a continuaci\u00f3:</p> <p>&gt; db.colorins.find({color: {$in : [\"groc\",\"lila\"]} })</p> <p>O per exemple tamb\u00e9 utilitzar expressions regulars:</p> <p>&gt; db.colorins.find({color: /bl/ }) { \"_id\" : ObjectId(\"56e1438ff6663c8169030e09\"), \"color\" : [ \"roig\", \"blau\", \"groc\" ] }</p> <p>$all</p> <p>L'operador $all el podem utilitzar quan vulguem seleccionar els documents que en l'array tiguen tots els elements especificats.</p> <p>Per exemple, anem a buscar els document que tenen el color roig i blau.</p> <p>&gt; db.colorins.find({color : { $all : [\"roig\",\"blau\"]} })</p> <p>Sub\u00edndex</p> <p>Si volem mirar exactament una determinada posici\u00f3 de l'array, podem especificar la posici\u00f3 immediatament despr\u00e9s de la clau, separada per un punt. Recordeu que la primera posici\u00f3 \u00e9s la 0. Hem de posar entre cometes la clau i la posici\u00f3, sin\u00f3 no sabr\u00e0 trobar-la.</p> <p>Per exemple, busquem els documents que tenen el roig en la primera posici\u00f3.</p> <p>&gt; db.colorins.find({\"color.0\" : \"roig\"} )</p> <p>Nota</p> <p>Accedir a una determinada posici\u00f3 \u00e9s f\u00e0cil, per\u00f2 no \u00e9s tan f\u00e0cil accedir a una posici\u00f3 calculada, per exemple a l'\u00faltima posici\u00f3. Ja fa falta coneixements un poc m\u00e9s avan\u00e7ats de JavaScript, per a posar dins del find() una funci\u00f3 en JavaScript, i actuar dins d'aquesta.</p> <p>\u00danicament de manera il\u00b7lustrativa, posem ac\u00ed la manera de traure els documents, l'\u00faltim color dels quals \u00e9s el roig. En ella ens creem una variable amb l'\u00faltim element de l'array (amb pop()), i el comparem amb el color roig, tornant true en cas de que s\u00ed que siguen iguals:</p> <p>&gt; db.colorins.find(function() { var a =this.color.pop(); return (a ==\"roig\")}\u00a0 )</p> <p>Tamb\u00e9 hi ha una forma alternativa de fer-ho, que \u00e9s utilitzant l'operador $where, que ens permet crear condicions amb sintaxi JavaScript:</p> <p>&gt; db.colorins.find({$where:\"this.color[this.color.length - 1]=='roig'\"})</p> <p>$size</p> <p>L'operador $size ens servir\u00e0 per a fer condicions sobre el n\u00famero d'elements d'un array.</p> <p>Incorporem 2 documents nous, amb 2 i 4 elements respectivament, per a poder comprovar-lo:</p> <p>&gt; db.colorins.insert({color: [\"negre\",\"blanc\"]}) WriteResult({ \"nInserted\" : 1 })</p> <p>&gt; db.colorins.insert({color: [\"taronja\",\"gris\",\"lila\",\"verd\"]}) WriteResult({ \"nInserted\" : 1 })</p> <p>&gt; db.colorins.find() { \"_id\" : ObjectId(\"56e1438ff6663c8169030e09\"), \"color\" : [ \"roig\", \"blau\", \"groc\" ] } { \"_id\" : ObjectId(\"56e14398f6663c8169030e0a\"), \"color\" : [ \"negre\", \"blanc\", \"roig\" ] } { \"_id\" : ObjectId(\"56e16972aa3c92aaed389da6\"), \"color\" : [ \"negre\", \"blanc\" ] }</p> <p>Ara anem a seleccionar els documents que tenen 4 colors</p> <p>&gt; db.colorins.find({color:{$size:4}})</p> <p>Nota</p> <p>L'operador \\(size** nom\u00e9s admet un valor num\u00e8ric, i no es poden concatenar expressions amb altres operadors, com per exemple intentar la condici\u00f3 que la grand\u00e0ria de l'array siga menor o igual a un determinat valor. Es pot tornar a esquivar la q\u00fcesti\u00f3 amb l'operador **\\)where, i posar la condici\u00f3 en JavaScript. Aix\u00ed la consulta dels documents que tenen 3 o menys colors la podr\u00edem traure d'aquesta manera:</p> <p>&gt; db.colorins.find({$where:\"this.color.length&lt;=3\"}) { \"_id\" : ObjectId(\"56e1438ff6663c8169030e09\"), \"color\" : [ \"roig\", \"blau\", \"groc\" ] } { \"_id\" : ObjectId(\"56e14398f6663c8169030e0a\"), \"color\" : [ \"negre\", \"blanc\", \"roig\" ] }</p> <p>$slice</p> <p>L'operador $slice no \u00e9s un operador que es puga posar en les condicions (criteris), sin\u00f3 que servir\u00e0 per a extraure determinats elements de l'array, pel n\u00famero d'ordre d'aquestos elements en e l'array. Nom\u00e9s el podrem posar, per tant, en el segon par\u00e0metre del find().</p> <p>La sintaxi \u00e9s:</p> <p>clau : {$slice : x }</p> <p>Els valors que pot agafar x s\u00f3n:</p> <ul> <li>N\u00fameros positius: ser\u00e0 el n\u00famero d'elements del principi (per l'esquerra)</li> <li>N\u00fameros negatius: ser\u00e0 el n\u00famero d'elements del final (per la dreta)</li> <li>Un array de 2 elements ([x,y]): traur\u00e0 a partir de la posici\u00f3\u00a0x (0 \u00e9s el primer), tants elements com indique\u00a0y</li> </ul> <p>Per exemple, anem a traure els dos primers colors de cada document:</p> <p>&gt; db.colorins.find({} , {color:{$slice:2} }) { \"_id\" : ObjectId(\"56e1438ff6663c8169030e09\"), \"color\" : [ \"roig\", \"blau\" ] } { \"_id\" : ObjectId(\"56e14398f6663c8169030e0a\"), \"color\" : [ \"negre\", \"blanc\" ] } { \"_id\" : ObjectId(\"56e16972aa3c92aaed389da6\"), \"color\" : [ \"negre\", \"blanc\" ] }</p> <p>O traure l'\u00faltim color:</p> <p>&gt; db.colorins.find({} , {color:{$slice:-1 }}) { \"_id\" : ObjectId(\"56e1438ff6663c8169030e09\"), \"color\" : [ \"groc\" ] } { \"_id\" : ObjectId(\"56e14398f6663c8169030e0a\"), \"color\" : [ \"roig\" ] } { \"_id\" : ObjectId(\"56e16972aa3c92aaed389da6\"), \"color\" : [ \"blanc\" ] }</p> <p>O traure el tercer element, tinguen els que tinguen. Recordeu que el segon element, \u00e9s el de la posici\u00f3 2, i en volem traure 1.</p> <p>&gt; db.colorins.find({} , {color:{$slice:[2,1] }}) { \"_id\" : ObjectId(\"56e1438ff6663c8169030e09\"), \"color\" : [ \"groc\" ] } { \"_id\" : ObjectId(\"56e14398f6663c8169030e0a\"), \"color\" : [ \"roig\" ] } { \"_id\" : ObjectId(\"56e16972aa3c92aaed389da6\"), \"color\" : [ ] }</p> <p>Recerques en objectes</p> <p>Per a fer recerques en camps que a la seua vegada s\u00f3n objectes (o documents dins de documents, en la terminologia de Mongo), nom\u00e9s hem de posar la ruta de les claus separant per mig de punts, i cuider de posar-les entre cometes.</p> <p>Aix\u00ed, per exemple, anem a fer una consulta sobre la col\u00b7lecci\u00f3 d'alumnes, que eren uns documents en els quals hi havia algun camp de tipus objecte.</p> <p>&gt; db.alumnes.find().pretty() { \"_id\" : ObjectId(\"56debe3017bf4ed437dc77c8\"), \"nom\" : \"Abel\", \"cognoms\" : \"Bernat Cantera\", \"edat\" : 22, \"adre\u00e7a\" : { \"carrer\" : \"Major\", \"numero\" : 7, \"cp\" : \"12502\" }, \"nota\" : [ 9.5, 9 ] } { \"_id\" : ObjectId(\"56dfdbd136d8b095cb6bd57a\"), \"nom\" : \"Berta\", \"cognoms\" : \"Bernat Cantero\" }</p> <p>Es podrien traure els documents (els alumnes) que viuen en el codi postal 12502. Ens ha d'eixir l'\u00fanic alumne del qual tenim l'adre\u00e7a, que justament t\u00e9 aquest codi postal. Recordeu que en la clau (realment clau.subclau), ha d'anar entre cometes. Hem posat al final pretty() per a una millor lectura, per\u00f2 evidentment no \u00e9s necessari.</p> <p>&gt; db.alumnes.find({\"adre\u00e7a.cp\": \"12502\"}).pretty() { \"_id\" : ObjectId(\"56debe3017bf4ed437dc77c8\"), \"nom\" : \"Abel\", \"cognoms\" : \"Bernat Cantera\", \"edat\" : 22, \"adre\u00e7a\" : { \"carrer\" : \"Major\", \"numero\" : 7, \"cp\" : \"12502\" }, \"nota\" : [ 9.5, 9 ] }</p> <p>I funcionaria igual amb qualsevol n\u00famero de subnivells, \u00e9s a dir, documents que tenen objectes, els quals tenen objectes, ... I tamb\u00e9 amb altres tipus d'operadors, o expressions regulars, ...</p> <p>Per exemple, tots els alumnes de Castell\u00f3 (el codi postal ha de comen\u00e7ar per 12 i contenir 3 xifres m\u00e9s, \u00e9s a dir, car\u00e0cter del 0 al 9, i 3 vegades.</p> <p>&gt; db.alumnes.find({\"adre\u00e7a.cp\": /^12[0-9]{3}/}).pretty() { \"_id\" : ObjectId(\"56debe3017bf4ed437dc77c8\"), \"nom\" : \"Abel\", \"cognoms\" : \"Bernat Cantera\", \"edat\" : 22, \"adre\u00e7a\" : { \"carrer\" : \"Major\", \"numero\" : 7, \"cp\" : \"12502\" }, \"nota\" : [ 9.5, 9 ] }</p> <p>Limit, Skip i Sort</p> <p>Una vegada tenim feta una consulta, podem limitar el nombre de documents que ens ha de tornar, o ordenar-los.</p> <p>This document was truncated here because it was created in the Evaluation Mode. Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T08_BD_NoSQL/343__agregaci/","title":"343  agregaci","text":"<p>Bases de Dades</p> <ul> <li>Tema 8: Bases de Dades NoSQL</li> <li>1 - Introducci\u00f3</li> <li>2 - BD Clau-Valor: Redis </li> <li>2.1 - Instal\u00b7laci\u00f3 de Redis</li> <li>2.2 - Entron gr\u00e0fic: Redis Desktop Manager</li> <li>2.3 - Utilitzaci\u00f3 de Redis <ul> <li>2.3.1 - Strings</li> <li>2.3.2 - Keys</li> <li>2.3.3 - Hash</li> <li>2.3.4 - List</li> <li>2.3.5 - Set</li> <li>2.3.6 - Set ordenat</li> </ul> </li> <li>3 - MongoDB </li> <li>3.1 - Estructura JSON</li> <li>3.2 - Instal\u00b7laci\u00f3 de MongoDB <ul> <li>3.2.1 - Connexi\u00f3 al servidor de l'Institut</li> </ul> </li> <li>3.3 - Utilitzaci\u00f3 de MongoDB <ul> <li>3.3.1 - Tipus de dades</li> <li>3.3.2 - Operacions b\u00e0siques</li> <li>3.2.3 - Operacions d'actualitzaci\u00f3 avan\u00e7ada </li> <li>3.3.3.1 - $set</li> <li>3.3.3.2 - $unset</li> <li>3.3.3.3 - $rename</li> <li>3.3.3.4 - $inc</li> <li>3.3.3.5 - Elements d'un array</li> <li>3.3.3.6 - Inserci\u00f3 en Arrays: $push</li> <li>3.3.3.7 - Eliminaci\u00f3 en arrays: $pop i $pull</li> <li>3.3.3.8 - Upsert</li> </ul> </li> <li>3.4 - Consulta de documents <ul> <li>3.4.1 - Par\u00e0metres de les funcions find() i findOne()</li> <li>3.4.2 - Operadors de les condicions</li> <li>3.4.3 - Agregaci\u00f3</li> </ul> </li> <li>4 - BD XML: eXist-db </li> <li>4.1 - Instal\u00b7laci\u00f3 d'eXist-db</li> <li>4.2 - Llenguatges de consultes XPATH i XQUERY <ul> <li>4.2.1 - XPATH </li> <li>4.2.1.1 - Vista d'arbre</li> <li>4.2.1.2 - Navegaci\u00f3</li> <li>4.2.1.3 - Seq\u00fc\u00e8ncies</li> <li>4.2.1.4 - Funcions</li> <li>4.2.2 - XQUERY </li> <li>4.2.2.1 - Consultes XQuery</li> <li>4.2.2.2 - Variables</li> <li>4.2.2.3 - Expressions avaluables</li> <li>4.2.2.4 - Expressions FLWOR</li> <li>4.2.2.5 - Alternatives</li> <li>4.2.2.6 - Exemple de consulta \"elaborada\"</li> <li>4.2.2.7 - Funcions de eXist-db de manipulaci\u00f3 de BD</li> </ul> </li> <li>5 - FIREBASE (voluntari) </li> <li>5.1 - Creaci\u00f3 d'una aplicaci\u00f3</li> <li>5.2 - Realtime Database (RD)</li> <li>5.3 - Cloud Firestore (CF)</li> <li>5.4 - Cloud Storage</li> <li>Exercicis</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T08_BD_NoSQL/343__agregaci/#343-agregacio","title":"3.4.3 - Agregaci\u00f3","text":"<p>L'agregaci\u00f3 ens permetr\u00e0 fer consultes molt avan\u00e7ades. \u00c9s un proc\u00e9s un poc complicat per\u00f2 molt potent. Ens donar\u00e0 una pot\u00e8ncia quasi com la del SQL quan comencem a utilitzar el GROUP BY i HAVING.</p> <p>La t\u00e8cnica que s'utilitza \u00e9s la del pipeline, \u00e9s a dir fer una s\u00e8rie de comandos, cadascun agafa les dades que proporciona l'anterior i a la seua vegada proporciona les dades al seg\u00fcent comando. D'aquesta manera es tractar\u00e0 un conjunt de documents i es faran \"operacions\" sobre ells seq\u00fcencialment en blocs: filtrat, projecci\u00f3, agrupacions, ordenaci\u00f3, limitaci\u00f3 i skipping (saltar alguns).</p> <p>La sintaxi ser\u00e0:</p> <p>db.col_leccio1.aggregate ( operador $match ,\u00a0operador $project ,\u00a0operador $group , operador $sort , operador $limit , operador $skip )</p> <p>L'ordre dels operadors pot canviar, per\u00f2 hem de tenir en compte que els comandos s'executen en el ordre en qu\u00e8 els posem (d'esquerra a dreta). Aix\u00ed, per exemple, pot ser molt convenient posar el primer operador el $match, que \u00e9s el de seleccionar documents, aix\u00ed les altres operacions es faran sobre menys documents i aniran m\u00e9s r\u00e0pides.</p> <p>Cada par\u00e0metre del aggregate, \u00e9s a dir, cada operador tindr\u00e0 format JSON, i per tant sempre ser\u00e0 de l'estil:</p> <p>{ $operador : { clau:valor , ... } }</p> <p>Operador $match</p> <p>Servir\u00e0 per a filtrar els documents. Aleshores, l'agregaci\u00f3 nom\u00e9s afectar\u00e0 als documents seleccionats. Es poden utilitzar tots els operadors que hem anat estudiant.</p> <p>El seg\u00fcent exemple selecciona (per a aggregate, per\u00f2 com no fem res m\u00e9s senzillament selecciona els documents) els documents de l'editorial Planeta.</p> <p>&gt; db.libro.aggregate({$match:{editorial:\"Planeta\"}})</p> <p>En el seg\u00fcent exemple, a m\u00e9s de seleccionar els de l'editorial Planeta despr\u00e9s apliquem una projecci\u00f3 sobre els camps t\u00edtol i editorial, per a poder visualitzar millor el resultat.</p> <p>&gt; db.libro.aggregate({\\(match:{editorial:\"Planeta\"}},{\\)project:{titulo:1,editorial:1}}) { \"_id\" : \"9788408117117\", \"titulo\" : \"Circo M\u00e1ximo\", \"editorial\" : \"Planeta\" }</p> <p>Operador $project</p> <p>Ens permet projectar sobre determinats camps del document, per\u00f2 \u00e9s molt m\u00e9s complet que en la projecci\u00f3 \"normal\" que hav\u00edem fet fins ara, ja que permet tamb\u00e9 renomenar camps, fer c\u00e0lculs, etc.</p> <p>Projecci\u00f3</p> <p>La manera m\u00e9s senzilla, evidentment \u00e9s projectar sobre alguns camps dels existents, i el funcionament \u00e9s id\u00e8ntic al de l'altra vegada (valors 1 per a que apareguen, 0 per a que no apareguen; per defecte _id sempre apareix):</p> <p>&gt; db.libro.aggregate({$project:{titulo:1,editorial:1}}) { \"_id\" : \"9788408117117\", \"titulo\" : \"Circo M\u00e1ximo\", \"editorial\" : \"Planeta\" } { \"_id\" : \"9788401342158\", \"titulo\" : \"El juego de Ripper\", \"editorial\" : \"Plaza &amp; Janes\" } { \"_id\" : \"9788496208919\", \"titulo\" : \"Juego de tronos: Canci\u00f3n de hielo y fuego 1\", \"editorial\" : \"Gigamesh\" } { \"_id\" : \"9788499088075\", \"titulo\" : \"La ladrona de libros\", \"editorial\" : \"Debolsillo\" } { \"_id\" : \"9788415140054\", \"titulo\" : \"La princesa de hielo\", \"editorial\" : \"Embolsillo\" } { \"_id\" : \"9788408113331\", \"titulo\" : \"Las carreras de Escorpio\", \"editorial\" : \"Planeta\" }</p> <p>Renomenar</p> <p>$project tamb\u00e9 ens permet renomenar camps existents (despr\u00e9s veurem que tamb\u00e9 c\u00e0lculs). La manera ser\u00e0 posar d'aquest manera:</p> <p>{ \\(project : { \"nom\\_nou\" : \"\\)camp_vell\" } }</p> <p>El secret est\u00e0 en el d\u00f2lar que va davant del camp vell, ja que d'aquesta manera ens referim al valor d'aquest camp. Aix\u00ed per exemple renomenem el camp enstock a disponible, a banda de traure el t\u00edtol:</p> <p>&gt; db.libro.aggregate({\\(project:{titulo:1 , disponible:\"\\)enstock\"}}) { \"_id\" : \"9788408117117\", \"titulo\" : \"Circo M\u00e1ximo\", \"disponible\" : true } { \"_id\" : \"9788401342158\", \"titulo\" : \"El juego de Ripper\", \"disponible\" : true } { \"_id\" : \"9788496208919\", \"titulo\" : \"Juego de tronos: Canci\u00f3n de hielo y fuego 1\", \"disponible\" : true } { \"_id\" : \"9788499088075\", \"titulo\" : \"La ladrona de libros\", \"disponible\" : false } { \"_id\" : \"9788415140054\", \"titulo\" : \"La princesa de hielo\", \"disponible\" : true } { \"_id\" : \"9788408113331\", \"titulo\" : \"Las carreras de Escorpio\", \"disponible\" : false }</p> <p>Camps calculats</p> <p>Amb aquest nom gen\u00e8ric ens referirem a tots els c\u00e0lculs, expressions i m\u00e9s coses que podrem posar per a transformar el que ja tenim. Com veiem, a\u00e7\u00f2 \u00e9s molt m\u00e9s potent que la projecci\u00f3 normal.</p> <ul> <li>Expressions matem\u00e0tiques: Podrem aplicar f\u00f3rmules per a sumar (\\(add**), restar (**\\)subtract), multiplicar (\\(multiply**), dividir (**\\)divide) i m\u00e9s coses (pot\u00e8ncia, arrel quadrada, valor absolut, m\u00f2dul, ...). Cada operaci\u00f3 t\u00e9 el seu operador que ser\u00e0 una paraula precedida pel d\u00f2lar, i amb la sintaxi de JSON, on posarem els operands en un array.\u00a0</li> </ul> <p>Per exemple, traurem t\u00edtol del llibre, preu i preu en pessetes (multiplicant per 166.386)</p> <p>&gt; db.libro.aggregate({\\(project:{titulo:1 , precio:1 , preu\\_pessetes:{\\)multiply:[\"$precio\" , 166.386]}}}) { \"_id\" : \"9788408117117\", \"titulo\" : \"Circo M\u00e1ximo\", \"precio\" : 21.75, \"preu_pessetes\" : 3618.8955 } { \"_id\" : \"9788401342158\", \"titulo\" : \"El juego de Ripper\", \"precio\" : 21.75, \"preu_pessetes\" : 3618.8955 } { \"_id\" : \"9788496208919\", \"titulo\" : \"Juego de tronos: Canci\u00f3n de hielo y fuego 1\", \"precio\" : 9.5, \"preu_pessetes\" : 1580.667 } { \"_id\" : \"9788499088075\", \"titulo\" : \"La ladrona de libros\", \"precio\" : 9.45, \"preu_pessetes\" : 1572.3476999999998 } { \"_id\" : \"9788415140054\", \"titulo\" : \"La princesa de hielo\", \"precio\" : 11, \"preu_pessetes\" : 1830.2459999999999 } { \"_id\" : \"9788408113331\", \"titulo\" : \"Las carreras de Escorpio\", \"precio\" : 17.23, \"preu_pessetes\" : 2866.83078 }</p> <ul> <li>Expressions de dates: Ja veurem i ja podem anar intuint que moltes agregacions estaran basades en el temps, per a poder fer consultes de documents de la setmana passada, o el mes passat, ... Per a poder fer aquestes agregacions, hi ha un conjunt d'expressions que permeten extraure f\u00e0cilment d'una data el seu dia, mes, any, ... en forma de n\u00famero</li> </ul> <p>S\u00f3n les expressions: $year, $month, $week, $dayOfMonth, $DayOfWeek, $dayOfYear, $hour, \\(minute** i **\\)second.</p> <p>En el seg\u00fcent exemple traurem tots els documents, projectant per la data, any i mes:</p> <p>&gt; db.libro.aggregate({\\(project : {fecha:1 , a\u00f1o:{\\)year:\"\\(fecha\"} , mes:{\\)month:\"$fecha\"}}}) { \"_id\" : \"9788408117117\", \"fecha\" : ISODate(\"2013-08-29T00:00:00Z\"), \"a\u00f1o\" : 2013, \"mes\" : 8 } { \"_id\" : \"9788401342158\", \"fecha\" : ISODate(\"2014-03-01T00:00:00Z\"), \"a\u00f1o\" : 2014, \"mes\" : 3 } { \"_id\" : \"9788496208919\", \"fecha\" : ISODate(\"2011-11-24T00:00:00Z\"), \"a\u00f1o\" : 2011, \"mes\" : 11 } { \"_id\" : \"9788499088075\", \"fecha\" : ISODate(\"2009-01-09T00:00:00Z\"), \"a\u00f1o\" : 2009, \"mes\" : 1 } { \"_id\" : \"9788415140054\", \"fecha\" : ISODate(\"2012-10-30T00:00:00Z\"), \"a\u00f1o\" : 2012, \"mes\" : 10 } { \"_id\" : \"9788408113331\", \"fecha\" : ISODate(\"2013-06-04T00:00:00Z\"), \"a\u00f1o\" : 2013, \"mes\" : 6 }</p> <ul> <li>Expressions de strings: Ens permeten manipular els strings per a extraure subcadenes, concatenar, passar a maj\u00fascules o min\u00fascules. Aquestes s\u00f3n algunes de les funcions:</li> <li>$substr : [exp , inici , llarg\u00e0ria]\u00a0: extrau una subcadena del string del primer par\u00e0metre, des de la posici\u00f3 que indica el segon par\u00e0metre (o primer car\u00e0cter) i tants car\u00e0cters com el tercer par\u00e0metre</li> <li>$concat : [ exp1 , exp2 , ...] : concatena les expressions que hi ha en l'array</li> <li>\\(toLower : exp** i **\\)toUpper : exp : converteixen l'expressi\u00f3 a maj\u00fascules i min\u00fascules respectivament</li> </ul> <p>Per exemple, anem a traure el t\u00edtol dels llibres amb l'autor entre par\u00e8ntesis:</p> <p>&gt; db.libro.aggregate({\\(project: { \"Llibre:\" : {\\)concat : [\"\\(titulo\" , \" (\" , \"\\)autor\" , \")\"]}}}) { \"_id\" : \"9788408117117\", \"Llibre:\" : \"Circo M\u00e1ximo (Santiago Posteguillo)\" } { \"_id\" : \"9788401342158\", \"Llibre:\" : \"El juego de Ripper (Isabel Allende)\" } { \"_id\" : \"9788496208919\", \"Llibre:\" : \"Juego de tronos: Canci\u00f3n de hielo y fuego 1 (George R.R. Martin)\" } { \"_id\" : \"9788499088075\", \"Llibre:\" : \"La ladrona de libros (Markus Zusak)\" } { \"_id\" : \"9788415140054\", \"Llibre:\" : \"La princesa de hielo (Camilla Lackberg)\" } { \"_id\" : \"9788408113331\", \"Llibre:\" : \"Las carreras de Escorpio (Maggie Stiefvater)\" }</p> <p>I ara el mateix, per\u00f2 amb el t\u00edtol en maj\u00fascules:</p> <p>&gt; db.libro.aggregate({\\(project: { \"Llibre:\" : {\\)concat : [{\\(toUpper:\"\\)titulo\"}, \" (\" , \"$autor\" , \")\"]}}}) { \"_id\" : \"9788408117117\", \"Llibre:\" : \"CIRCO M\u00e1XIMO (Santiago Posteguillo)\" } { \"_id\" : \"9788401342158\", \"Llibre:\" : \"EL JUEGO DE RIPPER (Isabel Allende)\" } { \"_id\" : \"9788496208919\", \"Llibre:\" : \"JUEGO DE TRONOS: CANCI\u00f3N DE HIELO Y FUEGO 1 (George R.R. Martin)\" } { \"_id\" : \"9788499088075\", \"Llibre:\" : \"LA LADRONA DE LIBROS (Markus Zusak)\" } { \"_id\" : \"9788415140054\", \"Llibre:\" : \"LA PRINCESA DE HIELO (Camilla Lackberg)\" } { \"_id\" : \"9788408113331\", \"Llibre:\" : \"LAS CARRERAS DE ESCORPIO (Maggie Stiefvater)\" }</p> <p>Operador $group</p> <p>Realitza grups sobre els documents seleccionats pr\u00e8viament, per a valors iguals del camp o expressions que determinem. Posteriorment, amb els grups, podrem realitzar operacions, com sumar o traure la mitjana d'alguna quantitat dels documents del grup, o el m\u00e0xim o m\u00ednim, ...</p> <p>Per a poder agrupar, haurem de definir com a _id del grup el camp o camps pels valors dels quals volem agrupar. Per exemple, si volem agrupar els llibres per l'editorial, haurem de definir el _id del grup el camp editorial</p> <p>$group : { \"_id\" : camp o camps }</p> <p>Si agrupem per un \u00fanic camp, senzillament el posem amb un d\u00f2lar davant i entre cometes. Si \u00e9s m\u00e9s d'un camp, els posem com un objecte. Per exemple, agrupem per editorial:</p> <p>&gt; db.libro.aggregate( { \\(group : { \"\\_id\" : \"\\)editorial\" } } ) { \"_id\" : \"Debolsillo\" } { \"_id\" : null } { \"_id\" : \"Gigamesh\" } { \"_id\" : \"Embolsillo\" } { \"_id\" : \"Plaza &amp; Janes\" }</p> <p>Podem observar com hi ha algun llibre que no t\u00e9 editorial.</p> <p>Ara agrupem per any de publicaci\u00f3 (l'extraurem del camp fecha):</p> <p>&gt; db.libro.aggregate( { $group : { \"_id\" : { \"any\" : { \\(year : \"\\)fecha\" } } } } ) { \"_id\" : { \"any\" : 2012 } } { \"_id\" : { \"any\" : 2009 } } { \"_id\" : { \"any\" : 2011 } } { \"_id\" : { \"any\" : 2014 } } { \"_id\" : { \"any\" : 2013 } }</p> <p>I ara agrupem per editorial i any de publicaci\u00f3 (els dos llibres de Planeta s\u00f3n del 2013)</p> <p>&gt; db.libro.aggregate( { \\(group : { \"\\_id\" : { \"Editorial\" : \"\\)editorial\" , \"any\" : { \\(year : \"\\)fecha\" } } } } ) { \"_id\" : { \"Editorial\" : \"Embolsillo\", \"any\" : 2012 } } { \"_id\" : { \"any\" : 2014 } } { \"_id\" : { \"Editorial\" : \"Debolsillo\", \"any\" : 2009 } } { \"_id\" : { \"Editorial\" : \"Gigamesh\", \"any\" : 2011 } } { \"_id\" : { \"Editorial\" : \"Plaza &amp; Janes\", \"any\" : 2014 } } { \"_id\" : { \"Editorial\" : \"Planeta\", \"any\" : 2013 } }</p> <p>Operadors d'agrupaci\u00f3</p> <p>Ens permetran fer alguna operaci\u00f3 sobre els documents del grup. Es posen com a segon par\u00e0metre del grup (despr\u00e9s de la definici\u00f3 del _id).</p> <ul> <li>$sum : valor : sumar\u00e0 el valor de tots els documents del grup. El valor pot ser un camp num\u00e8ric, o alguna altra cosa m\u00e9s complicada.</li> <li>$avg : valor : calcular\u00e0 la mitjana dels valors per als documents del grup</li> <li>$max : valor : m\u00e0xim</li> <li>$min : valor : m\u00ednim</li> <li>$first : exp : agafar\u00e0 el primer valor de l'expressi\u00f3 del grup, ignorant les altres del grup</li> <li>$last : exp : agafar\u00e0 l'\u00faltim</li> </ul> <p>Per exemple, la suma dels preus dels llibres de cada editorial:</p> <p>&gt; db.libro.aggregate( { \\(group : { \"\\_id\" : \"\\)editorial\" , \"suma_preus\" : { \\(sum : \"\\)precio\"} } } ) { \"_id\" : \"Debolsillo\", \"suma_preus\" : 9.45 } { \"_id\" : null, \"suma_preus\" : 15.9 } { \"_id\" : \"Gigamesh\", \"suma_preus\" : 9.5 } { \"_id\" : \"Embolsillo\", \"suma_preus\" : 11 } { \"_id\" : \"Plaza &amp; Janes\", \"suma_preus\" : 21.75 }</p> <p>O la mitjana dels preus de cada any:</p> <p>&gt; db.libro.aggregate( { $group : { \"_id\" : { \"any\" : { \\(year : \"\\)fecha\" } } , \"mitjana preus\" : { \\(avg : \"\\)precio\" } } } ) { \"_id\" : { \"any\" : 2012 }, \"mitjana preus\" : 11 } { \"_id\" : { \"any\" : 2009 }, \"mitjana preus\" : 9.45 } { \"_id\" : { \"any\" : 2011 }, \"mitjana preus\" : 9.5 } { \"_id\" : { \"any\" : 2014 }, \"mitjana preus\" : 18.825 } { \"_id\" : { \"any\" : 2013 }, \"mitjana preus\" : 19.490000000000002 }</p> <p>Operador $sort</p> <p>Serveix per a ordenar i segueix la mateixa sint\u00e0xi que en les consultes normal (1: ordre ascendent; -1: ordre descendent). Podrem ordenar pels camps normals o per camps clalculats.</p> <p>Per exemple ordenem per la suma de preus de cada editorial:</p> <p>&gt; db.libro.aggregate( { \\(group : { \"\\_id\" : \"\\)editorial\" , \"suma_preus\" : { \\(sum : \"\\)precio\"} } } , { $sort : { suma_preus : 1 } }) { \"_id\" : \"Debolsillo\", \"suma_preus\" : 9.45 } { \"_id\" : \"Gigamesh\", \"suma_preus\" : 9.5 } { \"_id\" : \"Embolsillo\", \"suma_preus\" : 11 } { \"_id\" : null, \"suma_preus\" : 15.9 } { \"_id\" : \"Plaza &amp; Janes\", \"suma_preus\" : 21.75 }</p> <p>I ara ordenem de forma descendent per la mitjana de preus de cada any:</p> <p>&gt; db.libro.aggregate( { \\(group : { \"\\_id\" : {\"any\":{\\)year:\"\\(fecha\"}} , \"mitjana preus\":{\\)avg:\"\\(precio\"} } } , {\\)sort:{\"mitjana preus\":-1}}) { \"_id\" : { \"any\" : 2013 }, \"mitjana preus\" : 19.490000000000002 } { \"_id\" : { \"any\" : 2014 }, \"mitjana preus\" : 18.825 } { \"_id\" : { \"any\" : 2012 }, \"mitjana preus\" : 11 } { \"_id\" : { \"any\" : 2011 }, \"mitjana preus\" : 9.5 } { \"_id\" : { \"any\" : 2009 }, \"mitjana preus\" : 9.45 }</p> <p>Operador $limit</p> <p>Limita el resultat del aggregate al n\u00famero indicat.</p> <p>Per exemple, els tres anys de mitjana de preus m\u00e9s cara. \u00c9s com l'\u00faltim exemple, afegint el l\u00edmit:</p> <p>&gt; db.libro.aggregate({\\(group:{\"\\_id\":{\"any\":{\\)year:\"\\(fecha\"}},\"mitjana preus\":{\\)avg:\"\\(precio\"}}} , {\\)sort:{\"mitjana preus\":-1}} , {$limit:3}) { \"_id\" : { \"any\" : 2013 }, \"mitjana preus\" : 19.490000000000002 } { \"_id\" : { \"any\" : 2014 }, \"mitjana preus\" : 18.825 } { \"_id\" : { \"any\" : 2012 }, \"mitjana preus\" : 11 }</p> <p>Operador $skip</p> <p>Salta el n\u00famero indicat</p> <p>En l'exemple anterior, ara saltem els 3 primers:</p> <p>&gt; db.libro.aggregate({\\(group:{\"\\_id\":{\"any\":{\\)year:\"\\(fecha\"}},\"mitjana preus\":{\\)avg:\"\\(precio\"}}} , {\\)sort:{\"mitjana preus\":-1}} , {$skip:3}) { \"_id\" : { \"any\" : 2011 }, \"mitjana preus\" : 9.5 } { \"_id\" : { \"any\" : 2009 }, \"mitjana preus\" : 9.45 }</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement SenseObraDerivada 4.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T08_BD_NoSQL/34__consulta_de_documents/","title":"34  consulta de documents","text":"<p>Bases de Dades</p> <ul> <li>Tema 8: Bases de Dades NoSQL</li> <li>1 - Introducci\u00f3</li> <li>2 - BD Clau-Valor: Redis </li> <li>2.1 - Instal\u00b7laci\u00f3 de Redis</li> <li>2.2 - Entron gr\u00e0fic: Redis Desktop Manager</li> <li>2.3 - Utilitzaci\u00f3 de Redis <ul> <li>2.3.1 - Strings</li> <li>2.3.2 - Keys</li> <li>2.3.3 - Hash</li> <li>2.3.4 - List</li> <li>2.3.5 - Set</li> <li>2.3.6 - Set ordenat</li> </ul> </li> <li>3 - MongoDB </li> <li>3.1 - Estructura JSON</li> <li>3.2 - Instal\u00b7laci\u00f3 de MongoDB <ul> <li>3.2.1 - Connexi\u00f3 al servidor de l'Institut</li> </ul> </li> <li>3.3 - Utilitzaci\u00f3 de MongoDB <ul> <li>3.3.1 - Tipus de dades</li> <li>3.3.2 - Operacions b\u00e0siques</li> <li>3.2.3 - Operacions d'actualitzaci\u00f3 avan\u00e7ada </li> <li>3.3.3.1 - $set</li> <li>3.3.3.2 - $unset</li> <li>3.3.3.3 - $rename</li> <li>3.3.3.4 - $inc</li> <li>3.3.3.5 - Elements d'un array</li> <li>3.3.3.6 - Inserci\u00f3 en Arrays: $push</li> <li>3.3.3.7 - Eliminaci\u00f3 en arrays: $pop i $pull</li> <li>3.3.3.8 - Upsert</li> </ul> </li> <li>3.4 - Consulta de documents <ul> <li>3.4.1 - Par\u00e0metres de les funcions find() i findOne()</li> <li>3.4.2 - Operadors de les condicions</li> <li>3.4.3 - Agregaci\u00f3</li> </ul> </li> <li>4 - BD XML: eXist-db </li> <li>4.1 - Instal\u00b7laci\u00f3 d'eXist-db</li> <li>4.2 - Llenguatges de consultes XPATH i XQUERY <ul> <li>4.2.1 - XPATH </li> <li>4.2.1.1 - Vista d'arbre</li> <li>4.2.1.2 - Navegaci\u00f3</li> <li>4.2.1.3 - Seq\u00fc\u00e8ncies</li> <li>4.2.1.4 - Funcions</li> <li>4.2.2 - XQUERY </li> <li>4.2.2.1 - Consultes XQuery</li> <li>4.2.2.2 - Variables</li> <li>4.2.2.3 - Expressions avaluables</li> <li>4.2.2.4 - Expressions FLWOR</li> <li>4.2.2.5 - Alternatives</li> <li>4.2.2.6 - Exemple de consulta \"elaborada\"</li> <li>4.2.2.7 - Funcions de eXist-db de manipulaci\u00f3 de BD</li> </ul> </li> <li>5 - FIREBASE (voluntari) </li> <li>5.1 - Creaci\u00f3 d'una aplicaci\u00f3</li> <li>5.2 - Realtime Database (RD)</li> <li>5.3 - Cloud Firestore (CF)</li> <li>5.4 - Cloud Storage</li> <li>Exercicis</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T08_BD_NoSQL/34__consulta_de_documents/#34-consulta-de-documents","title":"3.4 - Consulta de documents","text":"<p>En la pregunta anterior hem vist com introduir, eliminar i modificar documents. Les consultes de documents han segut molt senzilles, per a comprovar \u00fanicament els resultats.</p> <p>En aquesta pregunta veurem en profunditat la consulta de documents.</p> <ul> <li>Funcions find() i findOne(), que s\u00f3n les que hem utilitzat fins ara. Veurem en profunditat la seua sintaxi i pot\u00e8ncia.</li> <li>Limitarem i ordenarem tamb\u00e9 els resultats</li> <li>Fins i tot podrem elaborar m\u00e9s els resultats, agrupant els resultats, utilitzant funcions d'agregaci\u00f3 (o millor dir operadors d'agregaci\u00f3) i donant-los un aspecte diferent</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement SenseObraDerivada 4.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T08_BD_NoSQL/3__mongodb/","title":"3  mongodb","text":"<p>Bases de Dades</p> <ul> <li>Tema 8: Bases de Dades NoSQL</li> <li>1 - Introducci\u00f3</li> <li>2 - BD Clau-Valor: Redis </li> <li>2.1 - Instal\u00b7laci\u00f3 de Redis</li> <li>2.2 - Entron gr\u00e0fic: Redis Desktop Manager</li> <li>2.3 - Utilitzaci\u00f3 de Redis <ul> <li>2.3.1 - Strings</li> <li>2.3.2 - Keys</li> <li>2.3.3 - Hash</li> <li>2.3.4 - List</li> <li>2.3.5 - Set</li> <li>2.3.6 - Set ordenat</li> </ul> </li> <li>3 - MongoDB </li> <li>3.1 - Estructura JSON</li> <li>3.2 - Instal\u00b7laci\u00f3 de MongoDB <ul> <li>3.2.1 - Connexi\u00f3 al servidor de l'Institut</li> </ul> </li> <li>3.3 - Utilitzaci\u00f3 de MongoDB <ul> <li>3.3.1 - Tipus de dades</li> <li>3.3.2 - Operacions b\u00e0siques</li> <li>3.2.3 - Operacions d'actualitzaci\u00f3 avan\u00e7ada </li> <li>3.3.3.1 - $set</li> <li>3.3.3.2 - $unset</li> <li>3.3.3.3 - $rename</li> <li>3.3.3.4 - $inc</li> <li>3.3.3.5 - Elements d'un array</li> <li>3.3.3.6 - Inserci\u00f3 en Arrays: $push</li> <li>3.3.3.7 - Eliminaci\u00f3 en arrays: $pop i $pull</li> <li>3.3.3.8 - Upsert</li> </ul> </li> <li>3.4 - Consulta de documents <ul> <li>3.4.1 - Par\u00e0metres de les funcions find() i findOne()</li> <li>3.4.2 - Operadors de les condicions</li> <li>3.4.3 - Agregaci\u00f3</li> </ul> </li> <li>4 - BD XML: eXist-db </li> <li>4.1 - Instal\u00b7laci\u00f3 d'eXist-db</li> <li>4.2 - Llenguatges de consultes XPATH i XQUERY <ul> <li>4.2.1 - XPATH </li> <li>4.2.1.1 - Vista d'arbre</li> <li>4.2.1.2 - Navegaci\u00f3</li> <li>4.2.1.3 - Seq\u00fc\u00e8ncies</li> <li>4.2.1.4 - Funcions</li> <li>4.2.2 - XQUERY </li> <li>4.2.2.1 - Consultes XQuery</li> <li>4.2.2.2 - Variables</li> <li>4.2.2.3 - Expressions avaluables</li> <li>4.2.2.4 - Expressions FLWOR</li> <li>4.2.2.5 - Alternatives</li> <li>4.2.2.6 - Exemple de consulta \"elaborada\"</li> <li>4.2.2.7 - Funcions de eXist-db de manipulaci\u00f3 de BD</li> </ul> </li> <li>5 - FIREBASE (voluntari) </li> <li>5.1 - Creaci\u00f3 d'una aplicaci\u00f3</li> <li>5.2 - Realtime Database (RD)</li> <li>5.3 - Cloud Firestore (CF)</li> <li>5.4 - Cloud Storage</li> <li>Exercicis</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T08_BD_NoSQL/3__mongodb/#3-mongodb","title":"3 - MongoDB","text":"<p>Segurament MongoDB \u00e9s el m\u00e9s fam\u00f3s dels Sistemes Gestors de Bases de Dades NoSQL.</p> <p>El nom de MongoDB prov\u00e9 de la paraula anglesa humongous, que significa enorme, que \u00e9s el prop\u00f2sit d'aquesta Base de Dades: guardar grans quantitats d'informaci\u00f3. \u00c9s de codi obert i est\u00e0 programada en C++. El va crear l'empresa 10gen (actualment MongoDB Inc.)</p> <p>\u00c9s una SGBD Documental, \u00e9s a dir, que servir\u00e0 per a guardar documents. La manera interna de guardar-los \u00e9s en format BSON (Binary JSON) que en ess\u00e8ncia \u00e9s una variant del JSON per a poder guardar f\u00edsicament les dades d'una manera m\u00e9s eficient.</p> <p>En un servidor Mongo poden haver m\u00e9s d'una Base de Dades (encara que nosaltres nom\u00e9s en gasterem una: test).</p> <ul> <li>En cada Base de Dades la informaci\u00f3 es guardar\u00e0 en col\u00b7leccions.</li> <li>Cada col\u00b7lecci\u00f3 constar\u00e0 d'uns quants documents.</li> <li>I cada document seran una serie de dades guardades en forma de clau-valor, dels tipus suportats per MongoDB, i amb el format JSON (en realitat BSON)</li> </ul> <p>Per tant, en Mongo no hi ha taules. Mirem uns exemples de documents JSON per a guardar la informaci\u00f3 de llibres i autors. Depenen de com s'haja d'accedir a la informaci\u00f3 ens podem plantejar guardar els llibres amb els seus autors, o guardar els autors, amb els seus llibres. Fins i tot ens podr\u00edem guardar els dos, per a poder accedir de totes les maneres, encara que \u00e9s a costa de doblar la informaci\u00f3.</p> <p>De la primera manera, guardant els llibres amb el seu autor, podr\u00edem tenir documents amb aquesta estructura, que es podrien guardar en una col\u00b7lecci\u00f3 anomenada Llibres:</p> <p>{ _id:101, titol:\"El secret de Khadrell\", autor: { nom:\"Pep\", cognoms:\"Castellano Puchol\", any_naixement:1960 }, isbn:\"84-95620-72-3\" }, { _id:102, titol:\"L'Ombra del Vent\", autor: { nom:\"Carlos\", cognoms:\"Ruiz Zafon\", pais:\"Espanya\" }, pagines:490, editorial:\"Planeta\" }</p> <p>Observeu com els objecte no tenen per q\u00e8 tenir la mateixa estructura. La manera d'accedir al nom d'un autor seria aquesta: objecte.autor.nom</p> <p>Una manera alternativa de guardar la informaci\u00f3, com hav\u00edem comentat abans seria organitzar per autors, amb els seus llibres. D'aquesta manera podr\u00edem anar omplint la col\u00b7lecci\u00f3 Autors amb un o m\u00e9s documents d'aquest estil:</p> <p>{ _id: 201, nom:\"Pep\", cognoms:\"Castellano Puchol\", any_naixement:1960, llibres: [ { titol:\"El secret de Khadrell\", isbn:\"84-95620-72-3\" }, { titol:\"Habitaci\u00f3 502\", editorial:\"Tabarca\" } ] }, { _id:202, nom:\"Carlos\", cognoms:\"Ruiz Zafon\", pais:\"Espanya\", llibres: [ { titol:\"L'Ombra del Vent\", pagines:490, editorial:\"Planeta\" } ] }</p> <p>Observeu com per a un autor, ara tenim un array ( els claud\u00e0tors: [ ]) amb els seus llibres.</p> <p>Quina de les dues maneres \u00e9s millor per a guardar la informaci\u00f3? Doncs dep\u00e9n de l'acc\u00e9s que s'haja de fer a les dades. La millor ser\u00e0 segurament aquella que depenent dels accessos que s'hagen de fer, torne la informaci\u00f3 de forma m\u00e9s r\u00e0pida.</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement SenseObraDerivada 4.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T08_BD_NoSQL/41__installaci_dexistdb/","title":"41  installaci dexistdb","text":"<p>Bases de Dades</p> <ul> <li>Tema 8: Bases de Dades NoSQL</li> <li>1 - Introducci\u00f3</li> <li>2 - BD Clau-Valor: Redis </li> <li>2.1 - Instal\u00b7laci\u00f3 de Redis</li> <li>2.2 - Entron gr\u00e0fic: Redis Desktop Manager</li> <li>2.3 - Utilitzaci\u00f3 de Redis <ul> <li>2.3.1 - Strings</li> <li>2.3.2 - Keys</li> <li>2.3.3 - Hash</li> <li>2.3.4 - List</li> <li>2.3.5 - Set</li> <li>2.3.6 - Set ordenat</li> </ul> </li> <li>3 - MongoDB </li> <li>3.1 - Estructura JSON</li> <li>3.2 - Instal\u00b7laci\u00f3 de MongoDB <ul> <li>3.2.1 - Connexi\u00f3 al servidor de l'Institut</li> </ul> </li> <li>3.3 - Utilitzaci\u00f3 de MongoDB <ul> <li>3.3.1 - Tipus de dades</li> <li>3.3.2 - Operacions b\u00e0siques</li> <li>3.2.3 - Operacions d'actualitzaci\u00f3 avan\u00e7ada </li> <li>3.3.3.1 - $set</li> <li>3.3.3.2 - $unset</li> <li>3.3.3.3 - $rename</li> <li>3.3.3.4 - $inc</li> <li>3.3.3.5 - Elements d'un array</li> <li>3.3.3.6 - Inserci\u00f3 en Arrays: $push</li> <li>3.3.3.7 - Eliminaci\u00f3 en arrays: $pop i $pull</li> <li>3.3.3.8 - Upsert</li> </ul> </li> <li>3.4 - Consulta de documents <ul> <li>3.4.1 - Par\u00e0metres de les funcions find() i findOne()</li> <li>3.4.2 - Operadors de les condicions</li> <li>3.4.3 - Agregaci\u00f3</li> </ul> </li> <li>4 - BD XML: eXist-db </li> <li>4.1 - Instal\u00b7laci\u00f3 d'eXist-db</li> <li>4.2 - Llenguatges de consultes XPATH i XQUERY <ul> <li>4.2.1 - XPATH </li> <li>4.2.1.1 - Vista d'arbre</li> <li>4.2.1.2 - Navegaci\u00f3</li> <li>4.2.1.3 - Seq\u00fc\u00e8ncies</li> <li>4.2.1.4 - Funcions</li> <li>4.2.2 - XQUERY </li> <li>4.2.2.1 - Consultes XQuery</li> <li>4.2.2.2 - Variables</li> <li>4.2.2.3 - Expressions avaluables</li> <li>4.2.2.4 - Expressions FLWOR</li> <li>4.2.2.5 - Alternatives</li> <li>4.2.2.6 - Exemple de consulta \"elaborada\"</li> <li>4.2.2.7 - Funcions de eXist-db de manipulaci\u00f3 de BD</li> </ul> </li> <li>5 - FIREBASE (voluntari) </li> <li>5.1 - Creaci\u00f3 d'una aplicaci\u00f3</li> <li>5.2 - Realtime Database (RD)</li> <li>5.3 - Cloud Firestore (CF)</li> <li>5.4 - Cloud Storage</li> <li>Exercicis</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T08_BD_NoSQL/41__installaci_dexistdb/#41-installacio-dexist-db","title":"4.1 - Instal\u00b7laci\u00f3 d'eXist-db","text":"<p>Triarem el Sistema Gestor de Bases de Dades XML Natives\u00a0 eXist-db. Com veurem \u00e9s molt potent i c\u00f2mode d'utilitzar. A m\u00e9s \u00e9s Open-Source. Est\u00e0 escrit completament en Java i suporta els est\u00e0ndards de consulta XPATH, XQuery i XSLT.\u00a0</p> <p>Aix\u00f2 s\u00ed, \u00e9s un servidor, per tant l'haurem d'instal\u00b7lar, posar-lo en marxa quan l'utilitzem, i fer un poc d'administradors.</p> <p>Afortunadament est\u00e0 constru\u00eft en Java, i per tant no hem de tenir cap problema per a instal\u00b7lar-lo. Ens el podem baixar sense dificultat de la p\u00e0gina oficial: exist-db.org</p> <p>El seg\u00fcent v\u00eddeo mostra tot el proc\u00e9s d'instal\u00b7laci\u00f3 i arrancada inicial. \u00c9s per a la versi\u00f3 5.2.0 que \u00e9s l'estable en el moment de fer aquestos apunts, nom\u00e9s us heu de preocupar de baixar-vos el fitxer d'instal\u00b7laci\u00f3 .jar per a fer-la totsigual, siga quin siga el S.O.</p> <p>Els documents es guarden en col\u00b7leccions, les quals es poden crear unes dins d'unes altres.</p> <p>Anem a veure uns exemples d'utilitzaci\u00f3. Crearem una col\u00b7lecci\u00f3, i en ella inclourem algun document XML. Posteriorment farem alguna consulta senzilla, a veure com es comporta. Per a poder comen\u00e7ar a utilitzar-lo \u00e9s suficient amb obrir localhost:8080 des de qualsevol navegador</p> <p>Recordeu que els resultats per defecte es veuen de 10 en 10, \u00e9s a dir, que poden haver m\u00e9s resultats dels mostrats en principi.</p> <p>Nota important</p> <p>Si teniu problemes amb la instal\u00b7laci\u00f3 de eXist-db, podeu utilitzar el servidor de dades de l'Institut, on el tenim instal\u00b7lat tamb\u00e9.</p> <p>Nom\u00e9s us haureu de connectar a aquesta adre\u00e7a:</p> <p>http://89.36.214.106:8080</p> <p>Podreu utilitzar-lo sense problemes i fer totes les consultes necess\u00e0ries. No podreu, per\u00f2, pujar documents, ja que faltaria la contrasenya. Per\u00f2 no us far\u00e0 falta, estan ja pujats els documents necessaris.</p> <p></p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement SenseObraDerivada 4.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T08_BD_NoSQL/4211__vista_darbre/","title":"4211  vista darbre","text":"<p>Bases de Dades</p> <ul> <li>Tema 8: Bases de Dades NoSQL</li> <li>1 - Introducci\u00f3</li> <li>2 - BD Clau-Valor: Redis </li> <li>2.1 - Instal\u00b7laci\u00f3 de Redis</li> <li>2.2 - Entron gr\u00e0fic: Redis Desktop Manager</li> <li>2.3 - Utilitzaci\u00f3 de Redis <ul> <li>2.3.1 - Strings</li> <li>2.3.2 - Keys</li> <li>2.3.3 - Hash</li> <li>2.3.4 - List</li> <li>2.3.5 - Set</li> <li>2.3.6 - Set ordenat</li> </ul> </li> <li>3 - MongoDB </li> <li>3.1 - Estructura JSON</li> <li>3.2 - Instal\u00b7laci\u00f3 de MongoDB <ul> <li>3.2.1 - Connexi\u00f3 al servidor de l'Institut</li> </ul> </li> <li>3.3 - Utilitzaci\u00f3 de MongoDB <ul> <li>3.3.1 - Tipus de dades</li> <li>3.3.2 - Operacions b\u00e0siques</li> <li>3.2.3 - Operacions d'actualitzaci\u00f3 avan\u00e7ada </li> <li>3.3.3.1 - $set</li> <li>3.3.3.2 - $unset</li> <li>3.3.3.3 - $rename</li> <li>3.3.3.4 - $inc</li> <li>3.3.3.5 - Elements d'un array</li> <li>3.3.3.6 - Inserci\u00f3 en Arrays: $push</li> <li>3.3.3.7 - Eliminaci\u00f3 en arrays: $pop i $pull</li> <li>3.3.3.8 - Upsert</li> </ul> </li> <li>3.4 - Consulta de documents <ul> <li>3.4.1 - Par\u00e0metres de les funcions find() i findOne()</li> <li>3.4.2 - Operadors de les condicions</li> <li>3.4.3 - Agregaci\u00f3</li> </ul> </li> <li>4 - BD XML: eXist-db </li> <li>4.1 - Instal\u00b7laci\u00f3 d'eXist-db</li> <li>4.2 - Llenguatges de consultes XPATH i XQUERY <ul> <li>4.2.1 - XPATH </li> <li>4.2.1.1 - Vista d'arbre</li> <li>4.2.1.2 - Navegaci\u00f3</li> <li>4.2.1.3 - Seq\u00fc\u00e8ncies</li> <li>4.2.1.4 - Funcions</li> <li>4.2.2 - XQUERY </li> <li>4.2.2.1 - Consultes XQuery</li> <li>4.2.2.2 - Variables</li> <li>4.2.2.3 - Expressions avaluables</li> <li>4.2.2.4 - Expressions FLWOR</li> <li>4.2.2.5 - Alternatives</li> <li>4.2.2.6 - Exemple de consulta \"elaborada\"</li> <li>4.2.2.7 - Funcions de eXist-db de manipulaci\u00f3 de BD</li> </ul> </li> <li>5 - FIREBASE (voluntari) </li> <li>5.1 - Creaci\u00f3 d'una aplicaci\u00f3</li> <li>5.2 - Realtime Database (RD)</li> <li>5.3 - Cloud Firestore (CF)</li> <li>5.4 - Cloud Storage</li> <li>Exercicis</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T08_BD_NoSQL/4211__vista_darbre/#4211-vista-darbre","title":"4.2.1.1 - Vista d'arbre","text":"<p>XPath tracta tots els documents XML des del punt de vista d\u2019un arbre de nodes en el qual hi ha una arrel que no es correspon amb l\u2019arrel del document, sin\u00f3 que \u00e9s el propi document (i per tant l'immediatament anterior a l'element arrel del document). Es representa amb el s\u00edmbol \u201c/\u201d.</p> <p>A part de l\u2019arrel tamb\u00e9 hi ha nodes per representar els elements, els atributs, els nodes de dades, els comentaris, les instruccions de proc\u00e9s i els espais de noms.</p> <p>El seg\u00fcent exemple XML (que el podeu copiar en un document nou de tipus XML anomenat classe.xml; cuideu que siga de tipus xml):\u00a0</p> <p> <p>Llenguatges de Marques</p> <p> <p>Joan</p> <p>Puig</p> <p></p> <p> <p> <p>Albert</p> <p>Alegre</p> <p>6</p> <p></p> <p> <p>Bernat</p> <p>Balaguer</p> <p>3</p> <p></p> <p> <p>Joan</p> <p>Centelles</p> <p>8</p> <p></p> <p></p> <p></p> <p>es representar\u00e0 en XPath amb un arbre com el de la figura:</p> <p></p> <p>on els diferents tipus de nodes que trobem s\u00f3n els assenyalats a continuaci\u00f3:</p> <p></p> <p>En un arbre XPath els atributs no s\u00f3n considerats nodes fills sin\u00f3 que s\u00f3n \u201cpropietats\u201d del node que els cont\u00e9 i els nodes de dades s\u00f3n nodes sense nom que nom\u00e9s contenen les dades.</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement SenseObraDerivada 4.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T08_BD_NoSQL/4212__navegaci/","title":"4212  navegaci","text":"<p>Bases de Dades</p> <ul> <li>Tema 8: Bases de Dades NoSQL</li> <li>1 - Introducci\u00f3</li> <li>2 - BD Clau-Valor: Redis </li> <li>2.1 - Instal\u00b7laci\u00f3 de Redis</li> <li>2.2 - Entron gr\u00e0fic: Redis Desktop Manager</li> <li>2.3 - Utilitzaci\u00f3 de Redis <ul> <li>2.3.1 - Strings</li> <li>2.3.2 - Keys</li> <li>2.3.3 - Hash</li> <li>2.3.4 - List</li> <li>2.3.5 - Set</li> <li>2.3.6 - Set ordenat</li> </ul> </li> <li>3 - MongoDB </li> <li>3.1 - Estructura JSON</li> <li>3.2 - Instal\u00b7laci\u00f3 de MongoDB <ul> <li>3.2.1 - Connexi\u00f3 al servidor de l'Institut</li> </ul> </li> <li>3.3 - Utilitzaci\u00f3 de MongoDB <ul> <li>3.3.1 - Tipus de dades</li> <li>3.3.2 - Operacions b\u00e0siques</li> <li>3.2.3 - Operacions d'actualitzaci\u00f3 avan\u00e7ada </li> <li>3.3.3.1 - $set</li> <li>3.3.3.2 - $unset</li> <li>3.3.3.3 - $rename</li> <li>3.3.3.4 - $inc</li> <li>3.3.3.5 - Elements d'un array</li> <li>3.3.3.6 - Inserci\u00f3 en Arrays: $push</li> <li>3.3.3.7 - Eliminaci\u00f3 en arrays: $pop i $pull</li> <li>3.3.3.8 - Upsert</li> </ul> </li> <li>3.4 - Consulta de documents <ul> <li>3.4.1 - Par\u00e0metres de les funcions find() i findOne()</li> <li>3.4.2 - Operadors de les condicions</li> <li>3.4.3 - Agregaci\u00f3</li> </ul> </li> <li>4 - BD XML: eXist-db </li> <li>4.1 - Instal\u00b7laci\u00f3 d'eXist-db</li> <li>4.2 - Llenguatges de consultes XPATH i XQUERY <ul> <li>4.2.1 - XPATH </li> <li>4.2.1.1 - Vista d'arbre</li> <li>4.2.1.2 - Navegaci\u00f3</li> <li>4.2.1.3 - Seq\u00fc\u00e8ncies</li> <li>4.2.1.4 - Funcions</li> <li>4.2.2 - XQUERY </li> <li>4.2.2.1 - Consultes XQuery</li> <li>4.2.2.2 - Variables</li> <li>4.2.2.3 - Expressions avaluables</li> <li>4.2.2.4 - Expressions FLWOR</li> <li>4.2.2.5 - Alternatives</li> <li>4.2.2.6 - Exemple de consulta \"elaborada\"</li> <li>4.2.2.7 - Funcions de eXist-db de manipulaci\u00f3 de BD</li> </ul> </li> <li>5 - FIREBASE (voluntari) </li> <li>5.1 - Creaci\u00f3 d'una aplicaci\u00f3</li> <li>5.2 - Realtime Database (RD)</li> <li>5.3 - Cloud Firestore (CF)</li> <li>5.4 - Cloud Storage</li> <li>Exercicis</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T08_BD_NoSQL/4212__navegaci/#4212-navegacio","title":"4.2.1.2 - Navegaci\u00f3","text":"<p>Com que la representaci\u00f3 interna del document XML per XPath ser\u00e0 un arbre, es pot navegar per ell especificant camins d\u2019una manera semblant a com es fa en els directoris dels sistemes operatius.</p> <p>El m\u00e9s important per tenir en compte a l\u2019hora de crear una expressi\u00f3 XPath \u00e9s saber quin \u00e9s el node en el qual est\u00e0 situat el proc\u00e9s (node de context), ja que \u00e9s des d\u2019aquest que s\u2019avaluar\u00e0 l\u2019expressi\u00f3. El node de context al principi \u00e9s el node arrel per\u00f2 es va movent a mesura que es van avaluant les expressions, i per tant podem expressar els camins XPath de dues maneres:</p> <ul> <li>Camins absoluts</li> <li>Camins relatius</li> </ul> <p>Els camins absoluts s\u00f3n camins que sempre comencen en l\u2019arrel de l\u2019arbre. Es poden identificar perqu\u00e8 el primer car\u00e0cter de l\u2019expressi\u00f3 sempre ser\u00e0 l\u2019arrel \u201d/\u201d. No importa quin siga el node de context si es fan servir camins absoluts, perqu\u00e8 el resultat sempre ser\u00e0 el mateix.</p> <p>En canvi, els camins relatius parteixen des del node en el qual estem situats.</p> <p>Per exemple, es pot obtenir el node  del professor de l\u2019exemple anterior fent servir l\u2019expressi\u00f3 XPath seg\u00fcent: <p>/classe/professor/nom</p> <p>Podem veure com s\u2019avalua l\u2019expressi\u00f3 en l\u2019arbre XPath en la seg\u00fcent figura, marcat el cam\u00ed en taronja:</p> <p></p> <p>Observeu que el resultat d\u2019aquesta expressi\u00f3 no \u00e9s nom\u00e9s el contingut de l\u2019element sin\u00f3 tot l\u2019element . <p>Joan</p> <p>Mai no s\u2019ha d\u2019oblidar que l\u2019expressi\u00f3 sempre intenta aconseguir el nombre m\u00e0xim de camins correctes i, per tant, no necess\u00e0riament ha de retornar nom\u00e9s un \u00fanic valor. Per exemple, si l\u2019expressi\u00f3 per avaluar \u00e9s la seg\u00fcent:</p> <p>/classe/alumnes/alumne/nom</p> <p>XPath l\u2019avaluaria intentant aconseguir tots els camins que quadren amb l\u2019expressi\u00f3, tal com podeu veure visualment en la seg\u00fcent figura:</p> <p></p> <p>i per tant els resultats s\u00f3n (observeu que Joan es refereix al nom del tercer alumne, no del professor):</p> <p>Albert</p> <p>Bernat</p> <p>Joan</p> <p>A pesar que en els exemples anteriors sempre s\u2019han retornat nodes finals aix\u00f2 no necess\u00e0riament ha de ser aix\u00ed, ja que XPath pot retornar qualsevol tipus d\u2019element com a resultat.</p> <p>/classe/alumnes</p> <p>La navegaci\u00f3 per l\u2019arbre no difereix massa dels altres casos:</p> <p></p> <p>En aquest cas el resultat no \u00e9s un element simple sin\u00f3 que \u00e9s tot un subarbre d\u2019elements.</p> <p> <p> <p>Albert</p> <p>Alegre</p> <p>6</p> <p></p> <p> <p>Bernat</p> <p>Balaguer</p> <p>3</p> <p></p> <p> <p>Joan</p> <p>Centelles</p> <p>8</p> <p></p> <p></p> <p>Si se sap que una expressi\u00f3 retornar\u00e0 m\u00e9s d'un resultat per\u00f2 nom\u00e9s se\u2019n vol un d\u2019espec\u00edfic, es pot fer servir un n\u00famero envoltat per claud\u00e0tors quadrats \u201d[ ]\u201d per indicar quin \u00e9s el que es vol aconseguir. Per retornar nom\u00e9s el primer alumne podeu fer el seg\u00fcent:</p> <p>/classe/alumnes/alumne[1]</p> <p>que tornar\u00e0 el seg\u00fcent:</p> <p> <p>Albert</p> <p>Alegre</p> <p>6</p> <p></p> <p>ja que dels tres nodes disponibles com a fills de , nom\u00e9s se seleccionar\u00e0 el primer: <p></p> <p>Es poden fer servir els claud\u00e0tors en qualsevol lloc de l\u2019expressi\u00f3 per fer determinar quina de les branques es triar\u00e0. Per exemple, es pot obtenir nom\u00e9s el nom del segon alumne amb una expressi\u00f3 com aquesta:</p> <p>/classe/alumnes/alumne[2]/nom</p> <p>Bernat</p> <p>Sempre s\u2019ha d\u2019anar amb compte en escriure les expressions XPath, ja que si el cam\u00ed especificat no es correspon amb un cam\u00ed real dins de l\u2019arbre no es retornar\u00e0 cap resultat.</p> <p>/classe/nom</p> <p>Com que en arribar al node classe no n\u2019hi trobar\u00e0 cap d\u2019anomenat , no retornar\u00e0 cap resultat, com podeu veure si seguiu l\u2019arbre: <p></p> <p>Obtenir els atributs d'un element</p> <p>Els valors dels atributs es poden aconseguir especificant el s\u00edmbol @ davant del nom de l'atribut, quan s\u2019haja arribat a l\u2019element que el cont\u00e9:</p> <p>/classe/professor/@Especialitat</p> <p></p> <p>S\u2019ha de tenir en compte que a difer\u00e8ncia del que passa amb els elements, en obtenir un atribut no tindrem un element sin\u00f3 nom\u00e9s el seu valor:\u00a0</p> <p>507</p> <p>Nota</p> <p>Depenent de l'entorn en qu\u00e8 ens trobem, podria ser que l'anterior no ens mostre res. La ra\u00f3 \u00e9s perqu\u00e8 els atributs no es poden serialitzar, i per tant no es poden mostrar en un entorn de XML. No tindr\u00edem aquest problema si accedim des de Java. La manera de solucionar-lo des de l'entorn de eXist \u00e9s utilitzar la funci\u00f3 data():</p> <p>/classe/professor/data(@Especialitat)</p> <p>Obtenir el contingut d'un element</p> <p>Per a aquells casos en qu\u00e8 nom\u00e9s vulguem el contingut de l\u2019element, s\u2019ha definit la funci\u00f3 text() per obtenir aquest contingut. Aix\u00f2 s\u2019ha fet aix\u00ed perqu\u00e8 d\u2019altra manera, com que els nodes de text no tenen nom, no s\u2019hi podria accedir.</p> <p>De manera que si a un element que tinga contingut de dades se li afegeix text():\u00a0</p> <p>/classe/professor/nom/text()</p> <p>\u2026retornar\u00e0 el contingut del node sense les etiquetes:\u00a0</p> <p>Joan</p> <p>Comodins</p> <p>De la mateixa manera que en els sistemes operatius, es poden fer servir comodins diversos en les expressions XPath. Es poden veure els comodins en la taula seg\u00fcent.</p> Comod\u00ed Significat * L\u2019asterisc es fa servir per indicar tots els elements d\u2019un determinat nivell. . Com en els directoris dels sistemes operatius el punt serveix per indicar el node actual. .. Es fa servir per indicar el pare del node en el qual estem. // La doble barra indica que quadrar\u00e0 amb qualsevol cosa des del node en el qual estem, es a dir que buscar\u00e0 en tots els seus descendents. Pot ser un sol element o un arbre de nodes. <p>Amb l\u2019asterisc es poden obtenir tots els elements d\u2019un determinat nivell. Amb aquesta expressi\u00f3 es poden obtenir tots els elements de dins del node professor.</p> <p>/classe/professor/*</p> <p>Aquesta expressi\u00f3 retornar\u00e0 per separat els dos nodes fills de \u00a0,\u00a0 i . <p>Joan</p> <p>Puig</p> <p>O b\u00e9 fer servir les dobles barres (//) per obtenir tots els elements  del fitxer independentment del lloc on estiguen dins del document XML. <p>//nom</p> <p>El resultat ser\u00e0:</p> <p>Joan</p> <p>Albert</p> <p>Bernat</p> <p>Joan</p> <p>Observeu que apareix el nom Joan 2 vegades, ja que \u00e9s tant el nom del professor com d'un dels alumnes</p> <p>Nota</p> <p>En realitat aquesta sent\u00e8ncia XPath tornar\u00e0 molts m\u00e9s resultats, ja que buscar\u00e0 en tots els documents de la col\u00b7lecci\u00f3, i en Rutes.xml hi ha molts elements nom: els noms de les rutes i els noms dels punts, a banda dels noms de professors i d'alumnes.</p> <p>Es poden posar les dobles barres en qualsevol lloc dins de l\u2019expressi\u00f3 per indicar que pot haver qualsevol cosa enmig a partir del lloc on apareguen.</p> <p>/classe/alumnes//nom</p> <p>Donar\u00e0 els dos noms dels alumnes (ara s\u00ed nom\u00e9s alumnes, ni professors ni noms de ruta ni de punts):</p> <p>Albert</p> <p>Bernat</p> <p>Joan</p> <p>Tot i que facilita molt la creaci\u00f3 d\u2019expressions no \u00e9s molt recomanable abusar del comod\u00ed // per motius d\u2019efici\u00e8ncia. Les expressions amb aquest comod\u00ed requeriran molts m\u00e9s c\u00e0lculs per ser avaluades, i per tant les expressions tardaran m\u00e9s a donar resultats.\u00a0</p> <p>Eixos XPATH</p> <p>Per avaluar les expressions XPath s\u2019explora un arbre, de manera que tamb\u00e9 es proporcionen una s\u00e8rie d\u2019elements per fer refer\u00e8ncia a parts de l\u2019arbre. Aquestos elements s\u2019anomenen eixos XPath</p> Eix Significat self:: El node en el qual est\u00e0 el proc\u00e9s (fa el mateix que el punt) child:: Fill de l\u2019element actual parent:: El pare de l\u2019element actual (id\u00e8ntic a fer servir ..) attribute:: Es fa servir per obtenir un atribut de l\u2019element actual (@) <p>Alguns d\u2019aquestos eixos pr\u00e0cticament no es fan servir perqu\u00e8 generalment \u00e9s m\u00e9s c\u00f2mode i curt definir les expressions a partir del s\u00edmbol. Tothom prefereix fer servir una expressi\u00f3 com aquesta:</p> <p>/classe/professor/nom</p> <p>Que no la seua versi\u00f3 equivalent fent servir els eixos:</p> <p>/child::classe/child::professor/child::nom</p> <p>A part dels vistos en la taula anterior n\u2019hi ha d\u2019altres, que en aquest cas no tenen cap s\u00edmbol que els simplifique:</p> Eix Significat descendant:: Tots els descendents del node actual desdendant-or-self:: El node actual i els seus descendents ancestor:: Els ascendents del node ancestor-or-self:: El node actual i els seus ascendents preceding:: <p>This document was truncated here because it was created in the Evaluation Mode. Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T08_BD_NoSQL/4213__seqncies/","title":"4213  seqncies","text":"<p>Bases de Dades</p> <ul> <li>Tema 8: Bases de Dades NoSQL</li> <li>1 - Introducci\u00f3</li> <li>2 - BD Clau-Valor: Redis </li> <li>2.1 - Instal\u00b7laci\u00f3 de Redis</li> <li>2.2 - Entron gr\u00e0fic: Redis Desktop Manager</li> <li>2.3 - Utilitzaci\u00f3 de Redis <ul> <li>2.3.1 - Strings</li> <li>2.3.2 - Keys</li> <li>2.3.3 - Hash</li> <li>2.3.4 - List</li> <li>2.3.5 - Set</li> <li>2.3.6 - Set ordenat</li> </ul> </li> <li>3 - MongoDB </li> <li>3.1 - Estructura JSON</li> <li>3.2 - Instal\u00b7laci\u00f3 de MongoDB <ul> <li>3.2.1 - Connexi\u00f3 al servidor de l'Institut</li> </ul> </li> <li>3.3 - Utilitzaci\u00f3 de MongoDB <ul> <li>3.3.1 - Tipus de dades</li> <li>3.3.2 - Operacions b\u00e0siques</li> <li>3.2.3 - Operacions d'actualitzaci\u00f3 avan\u00e7ada </li> <li>3.3.3.1 - $set</li> <li>3.3.3.2 - $unset</li> <li>3.3.3.3 - $rename</li> <li>3.3.3.4 - $inc</li> <li>3.3.3.5 - Elements d'un array</li> <li>3.3.3.6 - Inserci\u00f3 en Arrays: $push</li> <li>3.3.3.7 - Eliminaci\u00f3 en arrays: $pop i $pull</li> <li>3.3.3.8 - Upsert</li> </ul> </li> <li>3.4 - Consulta de documents <ul> <li>3.4.1 - Par\u00e0metres de les funcions find() i findOne()</li> <li>3.4.2 - Operadors de les condicions</li> <li>3.4.3 - Agregaci\u00f3</li> </ul> </li> <li>4 - BD XML: eXist-db </li> <li>4.1 - Instal\u00b7laci\u00f3 d'eXist-db</li> <li>4.2 - Llenguatges de consultes XPATH i XQUERY <ul> <li>4.2.1 - XPATH </li> <li>4.2.1.1 - Vista d'arbre</li> <li>4.2.1.2 - Navegaci\u00f3</li> <li>4.2.1.3 - Seq\u00fc\u00e8ncies</li> <li>4.2.1.4 - Funcions</li> <li>4.2.2 - XQUERY </li> <li>4.2.2.1 - Consultes XQuery</li> <li>4.2.2.2 - Variables</li> <li>4.2.2.3 - Expressions avaluables</li> <li>4.2.2.4 - Expressions FLWOR</li> <li>4.2.2.5 - Alternatives</li> <li>4.2.2.6 - Exemple de consulta \"elaborada\"</li> <li>4.2.2.7 - Funcions de eXist-db de manipulaci\u00f3 de BD</li> </ul> </li> <li>5 - FIREBASE (voluntari) </li> <li>5.1 - Creaci\u00f3 d'una aplicaci\u00f3</li> <li>5.2 - Realtime Database (RD)</li> <li>5.3 - Cloud Firestore (CF)</li> <li>5.4 - Cloud Storage</li> <li>Exercicis</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T08_BD_NoSQL/4213__seqncies/#4213-sequencies","title":"4.2.1.3 - Seq\u00fc\u00e8ncies","text":"<p>Una seq\u00fc\u00e8ncia \u00e9s una expressi\u00f3 XPath que retorna m\u00e9s d\u2019un element. S\u2019assemblen prou a les llistes d\u2019altres llenguatges:</p> <ul> <li>Tenen ordre</li> <li>Permeten duplicats</li> <li>Poden contenir valors de tipus diferent en cada terme</li> </ul> <p>\u00c9s f\u00e0cil crear seq\u00fc\u00e8ncies, ja que nom\u00e9s cal tancar-les entre par\u00e8ntesis i separar cadascun dels termes amb comes. L\u2019expressi\u00f3 seg\u00fcent aplicada a qualsevol document:\u00a0</p> <p>(1,2,3,4)</p> <p>Retorna la seq\u00fc\u00e8ncia de nombres d\u2019un en un:</p> <p>1</p> <p>2</p> <p>3</p> <p>4</p> <p>Tamb\u00e9 es poden crear seq\u00fc\u00e8ncies a partir d\u2019expressions XPath. En aquest cas s\u2019avaluar\u00e0 primer la primera expressi\u00f3, despr\u00e9s la segona, etc.\u00a0</p> <p>(//alumnes//nom/text() , //cognoms/text())</p> <p>Aplicat al nostre exemple retornar\u00e0 primer tots els noms dels alumnes i despr\u00e9s tots els cognoms (de professor i alumnes):\u00a0</p> <p>Albert</p> <p>Bernat</p> <p>Joan</p> <p>Puig</p> <p>Alegre</p> <p>Balaguer</p> <p>Centelles</p> <p>Uni\u00f3, Intersecci\u00f3 i disjunci\u00f3</p> <p>Tamb\u00e9 es pot operar amb les seq\u00fc\u00e8ncies d\u2019elements amb els operadors d\u2019uni\u00f3 (union), intersecci\u00f3 (intersec) o disjunci\u00f3 (except). El resultat ser\u00e0 una altra seq\u00fc\u00e8ncia on no hi haur\u00e0 elements duplicats.</p> <p>Anem a utilitzar com a exemple dues seq\u00fc\u00e8ncies relativament f\u00e0cils de construir:</p> <ul> <li>el nom dels alumnes aprovats (Albert i Joan): //alumne[@aprovat=\"si\"]/nom</li> <li>el nom dels alumnes que s\u00f3n delegats (Joan): //alumne[@delegat]/nom</li> </ul> <p>La intersecci\u00f3 ens tornaria els elements que estan en les dues llistes, \u00e9s a dir\u00a0</p> <p>(//alumne[@aprovat=\"si\"]/nom) intersect (//alumne[@delegat]/nom)</p> <p>Joan</p> <p>Amb la uni\u00f3 es poden unir les llistes de manera que quede una sola sense duplicats:</p> <p>(//alumne[@aprovat=\"si\"]/nom) union (//alumne[@delegat]/nom)</p> <p>Albert Joan</p> <p>I amb la disjunci\u00f3 obtenim els noms de la primera seq\u00fc\u00e8ncia que no apareixen en la segona:\u00a0</p> <p>(//alumne[@aprovat=\"si\"]/nom) except (//alumne[@delegat]/nom)</p> <p>Albert</p> <p>Nota important</p> <p>En les seq\u00fc\u00e8ncies apareixen els elements que s\u00f3n distints, encara que els seu contingut siga el mateix. Per exemple, el nom del professor \u00e9s Joan, igual que un dels alumnes. A pesar de tenir el mateix valor, s\u00f3n elements diferents, nodes diferents. Aix\u00ed, en contra del que cabria esperar en principi, si fem la intersecci\u00f3 entre els noms dels alumnes i dels professors, no eixir\u00e0 cap element .</p> <p>(//alumne/nom) intersect (//professor/nom)</p> <p>I si fem la uni\u00f3 de les seq\u00fc\u00e8ncies anteriors, el nom Joan ens apareixar\u00e0 2 vegades, senyal que s\u00f3n elements diferents:</p> <p>(//alumne/nom) union (//professor/nom)</p> <p>Joan Albert Bernat Joan</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement SenseObraDerivada 4.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T08_BD_NoSQL/4214__funcions/","title":"4214  funcions","text":"<p>Bases de Dades</p> <ul> <li>Tema 8: Bases de Dades NoSQL</li> <li>1 - Introducci\u00f3</li> <li>2 - BD Clau-Valor: Redis </li> <li>2.1 - Instal\u00b7laci\u00f3 de Redis</li> <li>2.2 - Entron gr\u00e0fic: Redis Desktop Manager</li> <li>2.3 - Utilitzaci\u00f3 de Redis <ul> <li>2.3.1 - Strings</li> <li>2.3.2 - Keys</li> <li>2.3.3 - Hash</li> <li>2.3.4 - List</li> <li>2.3.5 - Set</li> <li>2.3.6 - Set ordenat</li> </ul> </li> <li>3 - MongoDB </li> <li>3.1 - Estructura JSON</li> <li>3.2 - Instal\u00b7laci\u00f3 de MongoDB <ul> <li>3.2.1 - Connexi\u00f3 al servidor de l'Institut</li> </ul> </li> <li>3.3 - Utilitzaci\u00f3 de MongoDB <ul> <li>3.3.1 - Tipus de dades</li> <li>3.3.2 - Operacions b\u00e0siques</li> <li>3.2.3 - Operacions d'actualitzaci\u00f3 avan\u00e7ada </li> <li>3.3.3.1 - $set</li> <li>3.3.3.2 - $unset</li> <li>3.3.3.3 - $rename</li> <li>3.3.3.4 - $inc</li> <li>3.3.3.5 - Elements d'un array</li> <li>3.3.3.6 - Inserci\u00f3 en Arrays: $push</li> <li>3.3.3.7 - Eliminaci\u00f3 en arrays: $pop i $pull</li> <li>3.3.3.8 - Upsert</li> </ul> </li> <li>3.4 - Consulta de documents <ul> <li>3.4.1 - Par\u00e0metres de les funcions find() i findOne()</li> <li>3.4.2 - Operadors de les condicions</li> <li>3.4.3 - Agregaci\u00f3</li> </ul> </li> <li>4 - BD XML: eXist-db </li> <li>4.1 - Instal\u00b7laci\u00f3 d'eXist-db</li> <li>4.2 - Llenguatges de consultes XPATH i XQUERY <ul> <li>4.2.1 - XPATH </li> <li>4.2.1.1 - Vista d'arbre</li> <li>4.2.1.2 - Navegaci\u00f3</li> <li>4.2.1.3 - Seq\u00fc\u00e8ncies</li> <li>4.2.1.4 - Funcions</li> <li>4.2.2 - XQUERY </li> <li>4.2.2.1 - Consultes XQuery</li> <li>4.2.2.2 - Variables</li> <li>4.2.2.3 - Expressions avaluables</li> <li>4.2.2.4 - Expressions FLWOR</li> <li>4.2.2.5 - Alternatives</li> <li>4.2.2.6 - Exemple de consulta \"elaborada\"</li> <li>4.2.2.7 - Funcions de eXist-db de manipulaci\u00f3 de BD</li> </ul> </li> <li>5 - FIREBASE (voluntari) </li> <li>5.1 - Creaci\u00f3 d'una aplicaci\u00f3</li> <li>5.2 - Realtime Database (RD)</li> <li>5.3 - Cloud Firestore (CF)</li> <li>5.4 - Cloud Storage</li> <li>Exercicis</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T08_BD_NoSQL/4214__funcions/#4214-funcions","title":"4.2.1.4 - Funcions","text":"<p>XPath ofereix una gran quantitat de funcions destinades a manipular els resultats obtinguts.</p> <p>Aquestes funcions es classifiquen en diferents grups:</p> <ul> <li>Per manipular conjunts de nodes: es pot obtenir el nom dels nodes, treballar amb les posicions, comptar-los, etc.</li> <li>Per treballar amb cadenes de car\u00e0cters: permeten extreure car\u00e0cters, concatenar, comparar\u2026 les cadenes de car\u00e0cters.</li> <li>Per fer operacions num\u00e8riques: es poden convertir els resultats a valors num\u00e8rics, comptar els nodes, fer operacions, etc.</li> <li>Funcions booleanes: permeten fer operacions booleanes amb els nodes.</li> <li>Funcions per dates: permeten fer operacions diverses amb dates i hores.</li> </ul> <p>\u00c9s impossible especificar-les totes en aquestos apunts, de manera que el millor \u00e9s consultar l\u2019especificaci\u00f3 XPath (http://www.w3.org/TR/xpath-functions) per veure quines funcions es poden fer servir.</p> <p>Entre totes les funcions podem destacar les de la seg\u00fcent taula:</p> Funci\u00f3 Explicaci\u00f3 name() Retorna el nom del node sum() Retorna la suma d\u2019una seq\u00fc\u00e8ncia de nodes o de valors count() Retorna el nombre de nodes que hi ha en una seq\u00fc\u00e8ncia avg() Fa la mitjana dels valors de la seq\u00fc\u00e8ncia max() Retorna el valor m\u00e0xim de la seq\u00fc\u00e8ncia min() D\u00f3na el valor m\u00ednim de la seq\u00fc\u00e8ncia position() Diu en quina posici\u00f3 es troba el node actual last() Retorna si el node actual \u00e9s l\u2019\u00faltim distinct-values() Retorna els elements de la seq\u00fc\u00e8ncia sense duplicats concat() Uneix dues cadenes de car\u00e0cters starts-with() Retorna si la cadena comen\u00e7a amb els car\u00e0cters marcats contains() Ens diu si el resultat cont\u00e9 el valor string-length() Retorna la llarg\u00e0ria de la cadena substring() Permet extraure una subcadena del resultat string-join() Uneix la seq\u00fc\u00e8ncia amb el separador especificat current-date() Ens retornar\u00e0 l\u2019hora actual not() Inverteix el valors booleans <p>Amb les funcions es podran fer peticions que retornen valors num\u00e8rics. Per exemple, \u201cquants alumnes tenim?\u201d:\u00a0</p> <p>count(/classe/alumnes/alumne)</p> <p>que tornar\u00e0 el nombre d'alumnes del fitxer\u00a0</p> <p>3</p> <p>O b\u00e9 retornar cadenes de car\u00e0cters. Per exemple, unir tots els noms, separant-los per una coma:\u00a0</p> <p>string-join(/classe//nom,\",\")</p> <p>que tornar\u00e0 en un \u00fanic resultat els noms separats per una coma:\u00a0</p> <p>\"Joan,Albert,Bernat,Joan\"</p> <p>Tamb\u00e9 es poden posar les funcions en les condicions. Per exemple, aquesta expressi\u00f3 ens tornar\u00e0 els alumnes amb el cognom que comence per B:\u00a0</p> <p>/classe/alumnes/alumne[starts-with(cognoms,\"B\")]</p> <p> Bernat Balaguer 3 </p> <p>En aquesta expressi\u00f3 volem obtenir el tercer alumne de la llista:\u00a0</p> <p>/classe/alumnes/alumne[position()=3]</p> <p> Joan Centelles 8 </p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement SenseObraDerivada 4.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T08_BD_NoSQL/421__xpath/","title":"421  xpath","text":"<p>Bases de Dades</p> <ul> <li>Tema 8: Bases de Dades NoSQL</li> <li>1 - Introducci\u00f3</li> <li>2 - BD Clau-Valor: Redis </li> <li>2.1 - Instal\u00b7laci\u00f3 de Redis</li> <li>2.2 - Entron gr\u00e0fic: Redis Desktop Manager</li> <li>2.3 - Utilitzaci\u00f3 de Redis <ul> <li>2.3.1 - Strings</li> <li>2.3.2 - Keys</li> <li>2.3.3 - Hash</li> <li>2.3.4 - List</li> <li>2.3.5 - Set</li> <li>2.3.6 - Set ordenat</li> </ul> </li> <li>3 - MongoDB </li> <li>3.1 - Estructura JSON</li> <li>3.2 - Instal\u00b7laci\u00f3 de MongoDB <ul> <li>3.2.1 - Connexi\u00f3 al servidor de l'Institut</li> </ul> </li> <li>3.3 - Utilitzaci\u00f3 de MongoDB <ul> <li>3.3.1 - Tipus de dades</li> <li>3.3.2 - Operacions b\u00e0siques</li> <li>3.2.3 - Operacions d'actualitzaci\u00f3 avan\u00e7ada </li> <li>3.3.3.1 - $set</li> <li>3.3.3.2 - $unset</li> <li>3.3.3.3 - $rename</li> <li>3.3.3.4 - $inc</li> <li>3.3.3.5 - Elements d'un array</li> <li>3.3.3.6 - Inserci\u00f3 en Arrays: $push</li> <li>3.3.3.7 - Eliminaci\u00f3 en arrays: $pop i $pull</li> <li>3.3.3.8 - Upsert</li> </ul> </li> <li>3.4 - Consulta de documents <ul> <li>3.4.1 - Par\u00e0metres de les funcions find() i findOne()</li> <li>3.4.2 - Operadors de les condicions</li> <li>3.4.3 - Agregaci\u00f3</li> </ul> </li> <li>4 - BD XML: eXist-db </li> <li>4.1 - Instal\u00b7laci\u00f3 d'eXist-db</li> <li>4.2 - Llenguatges de consultes XPATH i XQUERY <ul> <li>4.2.1 - XPATH </li> <li>4.2.1.1 - Vista d'arbre</li> <li>4.2.1.2 - Navegaci\u00f3</li> <li>4.2.1.3 - Seq\u00fc\u00e8ncies</li> <li>4.2.1.4 - Funcions</li> <li>4.2.2 - XQUERY </li> <li>4.2.2.1 - Consultes XQuery</li> <li>4.2.2.2 - Variables</li> <li>4.2.2.3 - Expressions avaluables</li> <li>4.2.2.4 - Expressions FLWOR</li> <li>4.2.2.5 - Alternatives</li> <li>4.2.2.6 - Exemple de consulta \"elaborada\"</li> <li>4.2.2.7 - Funcions de eXist-db de manipulaci\u00f3 de BD</li> </ul> </li> <li>5 - FIREBASE (voluntari) </li> <li>5.1 - Creaci\u00f3 d'una aplicaci\u00f3</li> <li>5.2 - Realtime Database (RD)</li> <li>5.3 - Cloud Firestore (CF)</li> <li>5.4 - Cloud Storage</li> <li>Exercicis</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T08_BD_NoSQL/421__xpath/#421-xpath","title":"4.2.1 - XPATH","text":"<p>XPath (XML Path Language) \u00e9s un llenguatge capa\u00e7 d\u2019especificar parts d\u2019un document XML, i t\u00e9 eines per a manipular el contingut de les dades de text, num\u00e8riques, etc.</p> <p>XPath \u00e9s una recomanaci\u00f3 del W3C (www.w3.org/TR/xpath), que encara que serveix per treballar amb XML, no \u00e9s un llenguatge XML. La idea \u00e9s que en no estar basat en XML es podr\u00e0 incloure en altres llenguatges XML sense haver de preocupar-se de si el resultat est\u00e0 ben format o no.</p> <p>La base del funcionament de XPath \u00e9s l\u2019avaluaci\u00f3 d\u2019expressions on constar\u00e0 el cam\u00ed (path) del que volem buscar, \u00e9s a dir, una expressi\u00f3 que s\u2019avaluar\u00e0 contra un document XML i ens donar\u00e0 un resultat que pot ser de diferents tipus:</p> <ul> <li>Un bole\u00e0: cert o fals</li> <li>Un n\u00famero</li> <li>Una cadena de car\u00e0cters</li> <li>Un grup d\u2019elements</li> </ul> <p>La versi\u00f3 2.0 de XPath est\u00e0 tan integrada dins de XQuery que qualsevol expressi\u00f3 XPath \u00e9s tamb\u00e9 autom\u00e0ticament una expressi\u00f3 XQuery correcta.\u00a0</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement SenseObraDerivada 4.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T08_BD_NoSQL/4221__consultes_xquery/","title":"4221  consultes xquery","text":"<p>Bases de Dades</p> <ul> <li>Tema 8: Bases de Dades NoSQL</li> <li>1 - Introducci\u00f3</li> <li>2 - BD Clau-Valor: Redis </li> <li>2.1 - Instal\u00b7laci\u00f3 de Redis</li> <li>2.2 - Entron gr\u00e0fic: Redis Desktop Manager</li> <li>2.3 - Utilitzaci\u00f3 de Redis <ul> <li>2.3.1 - Strings</li> <li>2.3.2 - Keys</li> <li>2.3.3 - Hash</li> <li>2.3.4 - List</li> <li>2.3.5 - Set</li> <li>2.3.6 - Set ordenat</li> </ul> </li> <li>3 - MongoDB </li> <li>3.1 - Estructura JSON</li> <li>3.2 - Instal\u00b7laci\u00f3 de MongoDB <ul> <li>3.2.1 - Connexi\u00f3 al servidor de l'Institut</li> </ul> </li> <li>3.3 - Utilitzaci\u00f3 de MongoDB <ul> <li>3.3.1 - Tipus de dades</li> <li>3.3.2 - Operacions b\u00e0siques</li> <li>3.2.3 - Operacions d'actualitzaci\u00f3 avan\u00e7ada </li> <li>3.3.3.1 - $set</li> <li>3.3.3.2 - $unset</li> <li>3.3.3.3 - $rename</li> <li>3.3.3.4 - $inc</li> <li>3.3.3.5 - Elements d'un array</li> <li>3.3.3.6 - Inserci\u00f3 en Arrays: $push</li> <li>3.3.3.7 - Eliminaci\u00f3 en arrays: $pop i $pull</li> <li>3.3.3.8 - Upsert</li> </ul> </li> <li>3.4 - Consulta de documents <ul> <li>3.4.1 - Par\u00e0metres de les funcions find() i findOne()</li> <li>3.4.2 - Operadors de les condicions</li> <li>3.4.3 - Agregaci\u00f3</li> </ul> </li> <li>4 - BD XML: eXist-db </li> <li>4.1 - Instal\u00b7laci\u00f3 d'eXist-db</li> <li>4.2 - Llenguatges de consultes XPATH i XQUERY <ul> <li>4.2.1 - XPATH </li> <li>4.2.1.1 - Vista d'arbre</li> <li>4.2.1.2 - Navegaci\u00f3</li> <li>4.2.1.3 - Seq\u00fc\u00e8ncies</li> <li>4.2.1.4 - Funcions</li> <li>4.2.2 - XQUERY </li> <li>4.2.2.1 - Consultes XQuery</li> <li>4.2.2.2 - Variables</li> <li>4.2.2.3 - Expressions avaluables</li> <li>4.2.2.4 - Expressions FLWOR</li> <li>4.2.2.5 - Alternatives</li> <li>4.2.2.6 - Exemple de consulta \"elaborada\"</li> <li>4.2.2.7 - Funcions de eXist-db de manipulaci\u00f3 de BD</li> </ul> </li> <li>5 - FIREBASE (voluntari) </li> <li>5.1 - Creaci\u00f3 d'una aplicaci\u00f3</li> <li>5.2 - Realtime Database (RD)</li> <li>5.3 - Cloud Firestore (CF)</li> <li>5.4 - Cloud Storage</li> <li>Exercicis</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T08_BD_NoSQL/4221__consultes_xquery/#4221-consultes-xquery","title":"4.2.2.1 - Consultes XQuery","text":"<p>Generalment una consulta XQuery consistir\u00e0 en aconseguir les dades amb les quals es vol treballar, filtrar-les i retornar el resultat com a XML. L\u2019expressi\u00f3 m\u00e9s simple que es pot fer en XQuery \u00e9s escriure un element buit:</p> <p></p> <p>En executar aquesta ordre el resultat ser\u00e0:</p> <p></p> <p>Encara que a nosaltres en l'entorn de eXist ens eixir\u00e0 \u00fanicament l'etiqueta. A pesar d'aix\u00f2 ser\u00e0 un document ben format.</p> <p>Aquesta \u00e9s una de les caracter\u00edstiques importants de XQuery. Pot escriure literalment un text. Per\u00f2 si en el resultat es defineixen etiquetes, l\u2019expressi\u00f3 nom\u00e9s ser\u00e0 correcta si el resultat final est\u00e0 ben format. Per exemple, executar el seg\u00fcent en XQuery donar\u00e0 un error, ja que el resultat final no est\u00e0 ben format:</p> <p> <p>Cannot compile xquery: exerr:ERROR err:XPST0003: No closing end tag found for element constructor: a [at line 2, column 2]</p> <p>(observeu com en l'error ens avisa que no ha trobat el tancament de l'etiqueta, \u00e9s a dir, que falta )</p> <p>Per\u00f2 a pesar de poder escriure text, el m\u00e9s corrent \u00e9s recuperar algun tipus de dades, avaluar-les i retornar el resultat amb un return, que \u00e9s la instrucci\u00f3 que s\u2019encarrega de generar les sortides.</p> <p>Una altra caracter\u00edstica important \u00e9s que fa servir variables. Per exemple la seg\u00fcent \u00e9s una expressi\u00f3 XQuery correcta que assigna el valor 5 a $a i despr\u00e9s en retorna el valor: \u00a0</p> <p>let $a:=5</p> <p>return $a</p> <p>El resultat d\u2019executar-ho amb XQuery ser\u00e0:</p> <p>5</p> <p>A difer\u00e8ncia del que passa amb els literals, el return s\u2019executa una vegada per cada valor que agafa del for, de manera que si hi ha una expressi\u00f3 que es fa m\u00e9s d\u2019una vegada:</p> <p>for $a in (1,2)</p> <p>return </p> <p>El return s'executaria m\u00e9s d'una vegada:</p> <p></p> <p></p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement SenseObraDerivada 4.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T08_BD_NoSQL/4222__variables/","title":"4222  variables","text":"<p>Bases de Dades</p> <ul> <li>Tema 8: Bases de Dades NoSQL</li> <li>1 - Introducci\u00f3</li> <li>2 - BD Clau-Valor: Redis </li> <li>2.1 - Instal\u00b7laci\u00f3 de Redis</li> <li>2.2 - Entron gr\u00e0fic: Redis Desktop Manager</li> <li>2.3 - Utilitzaci\u00f3 de Redis <ul> <li>2.3.1 - Strings</li> <li>2.3.2 - Keys</li> <li>2.3.3 - Hash</li> <li>2.3.4 - List</li> <li>2.3.5 - Set</li> <li>2.3.6 - Set ordenat</li> </ul> </li> <li>3 - MongoDB </li> <li>3.1 - Estructura JSON</li> <li>3.2 - Instal\u00b7laci\u00f3 de MongoDB <ul> <li>3.2.1 - Connexi\u00f3 al servidor de l'Institut</li> </ul> </li> <li>3.3 - Utilitzaci\u00f3 de MongoDB <ul> <li>3.3.1 - Tipus de dades</li> <li>3.3.2 - Operacions b\u00e0siques</li> <li>3.2.3 - Operacions d'actualitzaci\u00f3 avan\u00e7ada </li> <li>3.3.3.1 - $set</li> <li>3.3.3.2 - $unset</li> <li>3.3.3.3 - $rename</li> <li>3.3.3.4 - $inc</li> <li>3.3.3.5 - Elements d'un array</li> <li>3.3.3.6 - Inserci\u00f3 en Arrays: $push</li> <li>3.3.3.7 - Eliminaci\u00f3 en arrays: $pop i $pull</li> <li>3.3.3.8 - Upsert</li> </ul> </li> <li>3.4 - Consulta de documents <ul> <li>3.4.1 - Par\u00e0metres de les funcions find() i findOne()</li> <li>3.4.2 - Operadors de les condicions</li> <li>3.4.3 - Agregaci\u00f3</li> </ul> </li> <li>4 - BD XML: eXist-db </li> <li>4.1 - Instal\u00b7laci\u00f3 d'eXist-db</li> <li>4.2 - Llenguatges de consultes XPATH i XQUERY <ul> <li>4.2.1 - XPATH </li> <li>4.2.1.1 - Vista d'arbre</li> <li>4.2.1.2 - Navegaci\u00f3</li> <li>4.2.1.3 - Seq\u00fc\u00e8ncies</li> <li>4.2.1.4 - Funcions</li> <li>4.2.2 - XQUERY </li> <li>4.2.2.1 - Consultes XQuery</li> <li>4.2.2.2 - Variables</li> <li>4.2.2.3 - Expressions avaluables</li> <li>4.2.2.4 - Expressions FLWOR</li> <li>4.2.2.5 - Alternatives</li> <li>4.2.2.6 - Exemple de consulta \"elaborada\"</li> <li>4.2.2.7 - Funcions de eXist-db de manipulaci\u00f3 de BD</li> </ul> </li> <li>5 - FIREBASE (voluntari) </li> <li>5.1 - Creaci\u00f3 d'una aplicaci\u00f3</li> <li>5.2 - Realtime Database (RD)</li> <li>5.3 - Cloud Firestore (CF)</li> <li>5.4 - Cloud Storage</li> <li>Exercicis</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T08_BD_NoSQL/4222__variables/#4222-variables","title":"4.2.2.2 - Variables","text":"<p>XQuery \u00e9s un llenguatge pensat per buscar en documents XML, per\u00f2 no solament es pot fer servir per a aix\u00f2, ja que t\u00e9 suport per fer operacions aritm\u00e8tiques i per treballar amb cadenes de car\u00e0cters.</p> <p>En aquest exemple fem servir XQuery per fer una operaci\u00f3 matem\u00e0tica senzilla:</p> <p>let $x := 5</p> <p>let $y := 4</p> <p>return $x + $y</p> <p>Una caracter\u00edstica d\u2019XQuery que el diferencia d\u2019altres llenguatges de consulta \u00e9s que disposa de variables:</p> <ul> <li>Les variables en XQuery s\u2019identifiquen perqu\u00e8 comencen sempre amb el s\u00edmbol $.</li> <li>Poden contenir qualsevol valor: literals num\u00e8rics o car\u00e0cters, seq\u00fc\u00e8ncies de nodes, \u2026</li> <li>La instrucci\u00f3 per assignar valors a una variable \u00e9s let.</li> </ul> <p>Una de les utilitzacions fonamentals de les variables \u00e9s guardar elements per poder-los fer servir posteriorment. En l\u2019exemple seg\u00fcent es guarden els elements  en la variable $alumnes i despr\u00e9s torna la quantitat d\u2019alumnes:\u00a0 <p>let $alumnes := //alumne/nom</p> <p>return count($alumnes)</p> <p>3</p> <p>Es poden aplicar filtres XPath a les variables:\u00a0</p> <p>let $tot := /classe let $profe := $tot//professor let \\(alum := \\(tot//alumne return string-join((count(\\)profe), \"professors.\", count(\\)alum),\"alumnes\"),\" \")</p> <p>1 professors. 3 alumnes</p> <p>Els valors de les variables els podrem comparar amb els operadors de comparaci\u00f3 habituals que podem veure a la seg\u00fcent taula:</p> Operador Operador2 \u00das = eq Dos valors s\u00f3n iguals != ne Dos valors s\u00f3n diferents &gt; gt Major &gt;= ge Major o igual &lt; lt Menor &lt;= le Menor o igual <p>Els operadors eq, ne, gt, ge, lt i le nom\u00e9s es poden fer servir per a comparar valors individuals.\u00a0</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement SenseObraDerivada 4.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T08_BD_NoSQL/4223__expressions_avaluables/","title":"4223  expressions avaluables","text":"<p>Bases de Dades</p> <ul> <li>Tema 8: Bases de Dades NoSQL</li> <li>1 - Introducci\u00f3</li> <li>2 - BD Clau-Valor: Redis </li> <li>2.1 - Instal\u00b7laci\u00f3 de Redis</li> <li>2.2 - Entron gr\u00e0fic: Redis Desktop Manager</li> <li>2.3 - Utilitzaci\u00f3 de Redis <ul> <li>2.3.1 - Strings</li> <li>2.3.2 - Keys</li> <li>2.3.3 - Hash</li> <li>2.3.4 - List</li> <li>2.3.5 - Set</li> <li>2.3.6 - Set ordenat</li> </ul> </li> <li>3 - MongoDB </li> <li>3.1 - Estructura JSON</li> <li>3.2 - Instal\u00b7laci\u00f3 de MongoDB <ul> <li>3.2.1 - Connexi\u00f3 al servidor de l'Institut</li> </ul> </li> <li>3.3 - Utilitzaci\u00f3 de MongoDB <ul> <li>3.3.1 - Tipus de dades</li> <li>3.3.2 - Operacions b\u00e0siques</li> <li>3.2.3 - Operacions d'actualitzaci\u00f3 avan\u00e7ada </li> <li>3.3.3.1 - $set</li> <li>3.3.3.2 - $unset</li> <li>3.3.3.3 - $rename</li> <li>3.3.3.4 - $inc</li> <li>3.3.3.5 - Elements d'un array</li> <li>3.3.3.6 - Inserci\u00f3 en Arrays: $push</li> <li>3.3.3.7 - Eliminaci\u00f3 en arrays: $pop i $pull</li> <li>3.3.3.8 - Upsert</li> </ul> </li> <li>3.4 - Consulta de documents <ul> <li>3.4.1 - Par\u00e0metres de les funcions find() i findOne()</li> <li>3.4.2 - Operadors de les condicions</li> <li>3.4.3 - Agregaci\u00f3</li> </ul> </li> <li>4 - BD XML: eXist-db </li> <li>4.1 - Instal\u00b7laci\u00f3 d'eXist-db</li> <li>4.2 - Llenguatges de consultes XPATH i XQUERY <ul> <li>4.2.1 - XPATH </li> <li>4.2.1.1 - Vista d'arbre</li> <li>4.2.1.2 - Navegaci\u00f3</li> <li>4.2.1.3 - Seq\u00fc\u00e8ncies</li> <li>4.2.1.4 - Funcions</li> <li>4.2.2 - XQUERY </li> <li>4.2.2.1 - Consultes XQuery</li> <li>4.2.2.2 - Variables</li> <li>4.2.2.3 - Expressions avaluables</li> <li>4.2.2.4 - Expressions FLWOR</li> <li>4.2.2.5 - Alternatives</li> <li>4.2.2.6 - Exemple de consulta \"elaborada\"</li> <li>4.2.2.7 - Funcions de eXist-db de manipulaci\u00f3 de BD</li> </ul> </li> <li>5 - FIREBASE (voluntari) </li> <li>5.1 - Creaci\u00f3 d'una aplicaci\u00f3</li> <li>5.2 - Realtime Database (RD)</li> <li>5.3 - Cloud Firestore (CF)</li> <li>5.4 - Cloud Storage</li> <li>Exercicis</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T08_BD_NoSQL/4223__expressions_avaluables/#4223-expressions-avaluables","title":"4.2.2.3 - Expressions avaluables  {  //assignatura  }   `\u00a0\u00a0\u00a0\u00a0\u00a0 `Llenguatges de Marques `\u00a0\u00a0\u00a0 `","text":"<p>XQuery est\u00e0 pensat per poder mesclar les consultes amb qualsevol altre tipus de contingut. Si es mescla amb contingut, les expressions que s\u2019hagen d\u2019avaluar s\u2019han de col\u00b7locar entre claus \u201d{\u2026}\u201d.</p> <p>Per exemple, podem mesclar HTML i XQuery per tal que el processador XQuery genere una p\u00e0gina web amb les dades d\u2019un document XML.</p> Llista de classe  `\u00a0 ` `\u00a0\u00a0\u00a0 `Llista de classe `\u00a0 ` `\u00a0 ` `\u00a0\u00a0\u00a0 ` `\u00a0 ` <p>En mesclar contingut, el processador XQuery nom\u00e9s avaluar\u00e0 les instruccions que estiguen dins de les claus, i per tant ha deixat les etiquetes HTML tal com estan.</p> <p>Creaci\u00f3 d'elements i atributs</p> <p>Fent servir les expressions avaluables \u00e9s f\u00e0cil crear nous elements.</p> <p> <p>{ \u00a0//assignatura/text() }</p> <p></p> <p>Llenguatges de Marques</p> <p>Tamb\u00e9 es poden crear atributs (s\u2019ha d\u2019anar en compte de no deixar-se les cometes al voltant del valor que obtindran els atributs).</p> <p></p> <p></p> <p>Una manera alternativa i m\u00e9s potent de definir elements i atributs \u00e9s fer servir les paraules clau element i attribute. Aquestes instruccions permeten crear elements i definir-ne el contingut especificant-lo dins de les claus.</p> <p>element modul {</p> <p>}</p> <p>Crearia l'element buit\u00a0</p> <p>Si volem crear nous elements o atributs dins d\u2019un element definit d\u2019aquesta manera s\u2019han d\u2019especificar dins de les claus. Per exemple, el codi seg\u00fcent:</p> <p>element modul {</p> <p>attribute nom { //assignatura/text()},</p> <p>element alumnes { //alumne }</p> <p>}</p> <p>Que ens donar\u00e0 el seg\u00fcent resultat:</p> <p> <p> <p> <p>Albert</p> <p>Alegre</p> <p>6</p> <p></p> <p> <p>Bernat</p> <p>Balaguer</p> <p>3</p> <p></p> <p> <p>Joan</p> <p>Centelles</p> <p>8</p> <p></p> <p></p> <p></p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement SenseObraDerivada 4.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T08_BD_NoSQL/4224__expressions_flwor/","title":"4224  expressions flwor","text":"<p>Bases de Dades</p> <ul> <li>Tema 8: Bases de Dades NoSQL</li> <li>1 - Introducci\u00f3</li> <li>2 - BD Clau-Valor: Redis </li> <li>2.1 - Instal\u00b7laci\u00f3 de Redis</li> <li>2.2 - Entron gr\u00e0fic: Redis Desktop Manager</li> <li>2.3 - Utilitzaci\u00f3 de Redis <ul> <li>2.3.1 - Strings</li> <li>2.3.2 - Keys</li> <li>2.3.3 - Hash</li> <li>2.3.4 - List</li> <li>2.3.5 - Set</li> <li>2.3.6 - Set ordenat</li> </ul> </li> <li>3 - MongoDB </li> <li>3.1 - Estructura JSON</li> <li>3.2 - Instal\u00b7laci\u00f3 de MongoDB <ul> <li>3.2.1 - Connexi\u00f3 al servidor de l'Institut</li> </ul> </li> <li>3.3 - Utilitzaci\u00f3 de MongoDB <ul> <li>3.3.1 - Tipus de dades</li> <li>3.3.2 - Operacions b\u00e0siques</li> <li>3.2.3 - Operacions d'actualitzaci\u00f3 avan\u00e7ada </li> <li>3.3.3.1 - $set</li> <li>3.3.3.2 - $unset</li> <li>3.3.3.3 - $rename</li> <li>3.3.3.4 - $inc</li> <li>3.3.3.5 - Elements d'un array</li> <li>3.3.3.6 - Inserci\u00f3 en Arrays: $push</li> <li>3.3.3.7 - Eliminaci\u00f3 en arrays: $pop i $pull</li> <li>3.3.3.8 - Upsert</li> </ul> </li> <li>3.4 - Consulta de documents <ul> <li>3.4.1 - Par\u00e0metres de les funcions find() i findOne()</li> <li>3.4.2 - Operadors de les condicions</li> <li>3.4.3 - Agregaci\u00f3</li> </ul> </li> <li>4 - BD XML: eXist-db </li> <li>4.1 - Instal\u00b7laci\u00f3 d'eXist-db</li> <li>4.2 - Llenguatges de consultes XPATH i XQUERY <ul> <li>4.2.1 - XPATH </li> <li>4.2.1.1 - Vista d'arbre</li> <li>4.2.1.2 - Navegaci\u00f3</li> <li>4.2.1.3 - Seq\u00fc\u00e8ncies</li> <li>4.2.1.4 - Funcions</li> <li>4.2.2 - XQUERY </li> <li>4.2.2.1 - Consultes XQuery</li> <li>4.2.2.2 - Variables</li> <li>4.2.2.3 - Expressions avaluables</li> <li>4.2.2.4 - Expressions FLWOR</li> <li>4.2.2.5 - Alternatives</li> <li>4.2.2.6 - Exemple de consulta \"elaborada\"</li> <li>4.2.2.7 - Funcions de eXist-db de manipulaci\u00f3 de BD</li> </ul> </li> <li>5 - FIREBASE (voluntari) </li> <li>5.1 - Creaci\u00f3 d'una aplicaci\u00f3</li> <li>5.2 - Realtime Database (RD)</li> <li>5.3 - Cloud Firestore (CF)</li> <li>5.4 - Cloud Storage</li> <li>Exercicis</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T08_BD_NoSQL/4224__expressions_flwor/#4224-expressions-flwor","title":"4.2.2.4 - Expressions FLWOR","text":"<p>Les expressions FLWOR s\u00f3n la part m\u00e9s potent d\u2019XQuery. Estan formades per cinc instruccions opcionals que permeten fer les consultes i alhora processar-les per seleccionar els \u00edtems que interessen d\u2019una seq\u00fc\u00e8ncia.</p> **\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 Cl\u00e0usula \u00das f for Permet rec\u00f3rrer una seq\u00fc\u00e8ncia, agafant cada vegada un element d'aquesta l let Serveix per assignar valors a una variable w where Permet filtrar els resultats segons condicions o order by Ordena els resultats abans de mostrar-los r return Retorna el resultat de tota l\u2019expressi\u00f3 <p>\"FOR ... RETURN\"</p> <p>La instrucci\u00f3 for es fa servir per avaluar individualment cadascun dels resultats d\u2019una seq\u00fc\u00e8ncia de nodes. En un for es defineixen dues coses:</p> <ul> <li>Una variable, que ser\u00e0 la que anir\u00e0 agafant els elements de la seq\u00fc\u00e8ncia un per un.</li> <li>La paraula clau in, en la qual es defineix quina \u00e9s la seq\u00fc\u00e8ncia d\u2019elements per processar.</li> </ul> <p>La manera m\u00e9s senzilla d\u2019expressi\u00f3 FLWOR \u00e9s combinar el for amb el return per retornar els valors obtinguts de manera seq\u00fcencial:\u00a0</p> <p>for $i in ('Hola' , 'Ad\u00e9u' )</p> <p>return $i</p> <p>generar\u00e0:</p> <p>Hola</p> <p>Ad\u00e9u</p> <p>Les seq\u00fc\u00e8ncies de valors poden ser de qualsevol tipus. Per exemple, poden ser n\u00fameros. Aix\u00ed, el seg\u00fcent exemple:</p> <p>for $i in (1,2,3)</p> <p>return $i * $i</p> <p>generar\u00e0:</p> <p>1</p> <p>4</p> <p>9</p> <p>O b\u00e9 una seq\u00fc\u00e8ncia de nodes, per mig d'una expressi\u00f3 XPath. Per exemple amb l\u2019expressi\u00f3 seg\u00fcent capturem una seq\u00fc\u00e8ncia de nodes i els fem servir per obtenir-ne el cognom:</p> <p>for $alumne in //alumne</p> <p>return  { $alumne/cognoms } </p> <p>generar\u00e0:</p> <p> Alegre Balaguer Centelles </p> <p>Es pot veure que els valors del return s\u2019han anat processant un per un i per aquest motiu es repeteixen les etiquetes . <p>Un aspecte important \u00e9s que no cal que el for siga la primera expressi\u00f3 de la consulta. Tamb\u00e9 es pot posar com a par\u00e0metre en una funci\u00f3 XPath.</p> <p>Per exemple, l\u2019expressi\u00f3 seg\u00fcent ens tornar\u00e0 el nombre d\u2019alumnes:\u00a0</p> <p>count (</p> <p>for $alumne in //alumne</p> <p>return $alumne</p> <p>)</p> <p>3</p> <p>En el for es pot incloure l\u2019operador at, que permet obtenir la posici\u00f3 del node que s\u2019est\u00e0 processant. Amb aquest operador podem fer que aparega el n\u00famero d\u2019ordre en els resultats.</p> <p>for $alumne at $pos in //alumne\u00a0</p> <p>return  <p>{ $alumne/cognoms/text() }</p> <p></p> <p>que donar\u00e0</p> <p>Alegre Balaguer Centelles</p> <p>\"FOR NIUAT\" (\"anidat\")</p> <p>Les ordres for es poden posar unes dins d'unes altres, d\u2019una manera similar a com ho fa SQL amb les subconsultes. Aix\u00ed es poden aconseguir resultats m\u00e9s complexos que es basen en els resultats obtinguts anteriorment.</p> <p>for $selec in //alumne\u00a0</p> <p>return\u00a0</p> <p> <p> </p> <p>{\u00a0</p> <p>for $selec2 in $selec\u00a0</p> <p>return $selec2//cognom\u00a0</p> <p>}\u00a0</p> <p></p> <p> Albert Bernat Joan </p> <p>Aquesta sent\u00e8ncia anterior queda un poc pobra, ja que en el document hi ha molt poques dades.</p> <p>Un exemple un poc m\u00e9s complet (i comprensiu) seria el seg\u00fcent:</p> <p>for $selec in //ruta  return   {  for $selec2 in \\(selec//punt  return &lt;punt&gt; {\\)selec2/nom/text()}  }  </p> <p>que donaria el sag\u00fcent resultat:</p> <p> <p>Pujada a Penyagolosa</p> <p> <p>Sant Joan</p> <p>Encreuament</p> <p>Barranc de la Pegunta</p> <p>El Corralico</p> <p>Penyagolosa</p> <p></p> <p></p> <p> <p>La Magdalena</p> <p> <p>Primer Mol\u00ed</p> <p>Segon Mol\u00ed</p> <p>Camin\u00e0s</p> <p>Riu Sec</p> <p>Sant Roc</p> <p>Explanada</p> <p>La Magdalena</p> <p></p> <p></p> <p>...</p> <p>LET</p> <p>Ens permet declarar variables i assignar-los un valor. Sobretot es fa servir per guardar valors que s\u2019han de fer servir m\u00e9s tard.</p> <p>let $num := 1</p> <p>let $nom := \"Pere\"</p> <p>let $i := (1 to 3)</p> <p>En les expressions FLWOR hi pot haver tants let com calga.</p> <p>for $alumne in doc(\"db/Tema9/classe.xml\")//alumne</p> <p>let $nom := $alumne/nom</p> <p>let $nota := $alumne/nota</p> <p>return { concat(\\(nom,\": \",\\)nota) }</p> <p>Albert: 6 Bernat: 3 Joan: 8</p> <p>S\u2019ha d\u2019anar amb compte amb let perqu\u00e8 el seu funcionament \u00e9s molt diferent del de for:</p> <ul> <li>for s\u2019executa per a cada membre d\u2019una seq\u00fc\u00e8ncia.</li> <li>let fa refer\u00e8ncia al seu valor en conjunt. Si \u00e9s una seq\u00fc\u00e8ncia, el que es processa s\u00f3n tots els valors de cop.</li> </ul> <p>Podem veure la difer\u00e8ncia amb un exemple. Aquesta instrucci\u00f3 amb for:</p> <p>for $selec in //alumne</p> <p>return {$selec/nom}</p> <p>D\u00f3na:</p> <p>persona&gt; Albert Bernat Joan </p> <p>I en canvi amb let:</p> <p>let $selec := //alumne</p> <p>return {$selec/nom}</p> <p>Donar\u00e0:</p> <p> Albert Bernat Joan </p> <p>Els resultats s\u00f3n bastant diferents! Es pot veure clarament que let ha tractat tots els valors de cop.</p> <p>WHERE</p> <p>La instrucci\u00f3 where \u00e9s la part que indicar\u00e0 quin filtre s\u2019ha de posar a les dades rebudes abans d\u2019enviar-les a la sortida del return. Normalment en el filtre es fa servir algun tipus de predicat XPath:</p> <p>for $alumne in //alumne</p> <p>where $alumne/@aprovat=\"si\"</p> <p>return $alumne/nom</p> <p>Albert Joan</p> <p>Com que XPath forma part d\u2019XQuery moltes vegades el mateix filtre es pot definir de diverses maneres. Per exemple, aquesta expressi\u00f3 \u00e9s equivalent a l\u2019anterior:</p> <p>for $alumne in //alumne[@aprovat=\"si\"]</p> <p>return $alumne/nom</p> <p>Aix\u00f2 s\u00ed, en un where hi pot haver tantes condicions com fa\u00e7a falta simplement encadenant-les amb les operacions l\u00f2giques and, or o not().</p> <p>Aquesta expressi\u00f3 retorna el cognom dels alumnes que han aprovat i que es diuen Joan:</p> <p>for $alumne in //alumne where $alumne/@aprovat=\"si\" and $alumne/nom=\"Joan\" return $alumne/cognoms</p> <p>Centelles</p> <p>El where afegeix m\u00e9s pot\u00e8ncia del que sembla, ja que ens permet fer els inner joins d\u2019SQL en fitxers XML. Per exemple, a partir de dos fitxers amb les dades de dues classes diferents es poden obtenir nom\u00e9s els alumnes que es repeteixen entre les dues classes amb:</p> <p>for $alum1 in doc(\"db/Tema9/classe.xml\")//alumne</p> <p>let $alum2 in doc(\"db/Tema9/classe2.xml\")//alumne</p> <p>where $alum1 = $alum2</p> <p>This document was truncated here because it was created in the Evaluation Mode. Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T08_BD_NoSQL/4225__alternatives/","title":"4225  alternatives","text":"<p>Bases de Dades</p> <ul> <li>Tema 8: Bases de Dades NoSQL</li> <li>1 - Introducci\u00f3</li> <li>2 - BD Clau-Valor: Redis </li> <li>2.1 - Instal\u00b7laci\u00f3 de Redis</li> <li>2.2 - Entron gr\u00e0fic: Redis Desktop Manager</li> <li>2.3 - Utilitzaci\u00f3 de Redis <ul> <li>2.3.1 - Strings</li> <li>2.3.2 - Keys</li> <li>2.3.3 - Hash</li> <li>2.3.4 - List</li> <li>2.3.5 - Set</li> <li>2.3.6 - Set ordenat</li> </ul> </li> <li>3 - MongoDB </li> <li>3.1 - Estructura JSON</li> <li>3.2 - Instal\u00b7laci\u00f3 de MongoDB <ul> <li>3.2.1 - Connexi\u00f3 al servidor de l'Institut</li> </ul> </li> <li>3.3 - Utilitzaci\u00f3 de MongoDB <ul> <li>3.3.1 - Tipus de dades</li> <li>3.3.2 - Operacions b\u00e0siques</li> <li>3.2.3 - Operacions d'actualitzaci\u00f3 avan\u00e7ada </li> <li>3.3.3.1 - $set</li> <li>3.3.3.2 - $unset</li> <li>3.3.3.3 - $rename</li> <li>3.3.3.4 - $inc</li> <li>3.3.3.5 - Elements d'un array</li> <li>3.3.3.6 - Inserci\u00f3 en Arrays: $push</li> <li>3.3.3.7 - Eliminaci\u00f3 en arrays: $pop i $pull</li> <li>3.3.3.8 - Upsert</li> </ul> </li> <li>3.4 - Consulta de documents <ul> <li>3.4.1 - Par\u00e0metres de les funcions find() i findOne()</li> <li>3.4.2 - Operadors de les condicions</li> <li>3.4.3 - Agregaci\u00f3</li> </ul> </li> <li>4 - BD XML: eXist-db </li> <li>4.1 - Instal\u00b7laci\u00f3 d'eXist-db</li> <li>4.2 - Llenguatges de consultes XPATH i XQUERY <ul> <li>4.2.1 - XPATH </li> <li>4.2.1.1 - Vista d'arbre</li> <li>4.2.1.2 - Navegaci\u00f3</li> <li>4.2.1.3 - Seq\u00fc\u00e8ncies</li> <li>4.2.1.4 - Funcions</li> <li>4.2.2 - XQUERY </li> <li>4.2.2.1 - Consultes XQuery</li> <li>4.2.2.2 - Variables</li> <li>4.2.2.3 - Expressions avaluables</li> <li>4.2.2.4 - Expressions FLWOR</li> <li>4.2.2.5 - Alternatives</li> <li>4.2.2.6 - Exemple de consulta \"elaborada\"</li> <li>4.2.2.7 - Funcions de eXist-db de manipulaci\u00f3 de BD</li> </ul> </li> <li>5 - FIREBASE (voluntari) </li> <li>5.1 - Creaci\u00f3 d'una aplicaci\u00f3</li> <li>5.2 - Realtime Database (RD)</li> <li>5.3 - Cloud Firestore (CF)</li> <li>5.4 - Cloud Storage</li> <li>Exercicis</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T08_BD_NoSQL/4225__alternatives/#4225-alternatives","title":"4.2.2.5 - Alternatives","text":"<p>La instrucci\u00f3 if ens permetr\u00e0 fer una cosa o una altra segons si es compleix la condici\u00f3 especificada o no. Per exemple, podem fer una llista d\u2019alumnes en qu\u00e8 s\u2019especifique si han aprovat o no a partir del valor que hi ha en l\u2019element . <p>let $doc := doc(\"/db/Tema9/classe.xml\")</p> <p>let $aprovat := 5</p> <p>for $b in $doc//alumne</p> <p>return</p> <p>if ($b/nota &gt;= $aprovat) then</p> <p>\u00a0{ $b/nom/text() } est\u00e0 aprovat</p> <p>else</p> <p>\u00a0{ $b/nom/text() } no est\u00e0 aprovat</p> <p>Aix\u00f2 generar\u00e0 el resultat seg\u00fcent:</p> <p>Albert est\u00e0 aprovat</p> <p>Bernat no est\u00e0 aprovat</p> <p>Joan est\u00e0 aprovat</p> <p>La instrucci\u00f3 else \u00e9s habitual en llenguatges de programaci\u00f3, per\u00f2 a difer\u00e8ncia del que passa normalment, en XQuery sempre s'ha d'especificar el else, encara que no es vulga fer res (en aquest cas posar\u00edem uns par\u00e8ntesis sense res dins). Si no est\u00e0 l'else, donar\u00e0 error.</p> <p>for $alu in doc(\"/db/Tema9/classe.xml\")//alumne</p> <p>return  <p>{ $alu/nom }</p> <p>{ if ($alu/nota &gt; 5) then</p> <p></p> <p>else () }</p> <p></p> <p> Albert Bernat Joan </p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement SenseObraDerivada 4.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T08_BD_NoSQL/4226__exemple_de_consulta_elaborada/","title":"4226  exemple de consulta elaborada","text":"<p>Bases de Dades</p> <ul> <li>Tema 8: Bases de Dades NoSQL</li> <li>1 - Introducci\u00f3</li> <li>2 - BD Clau-Valor: Redis </li> <li>2.1 - Instal\u00b7laci\u00f3 de Redis</li> <li>2.2 - Entron gr\u00e0fic: Redis Desktop Manager</li> <li>2.3 - Utilitzaci\u00f3 de Redis <ul> <li>2.3.1 - Strings</li> <li>2.3.2 - Keys</li> <li>2.3.3 - Hash</li> <li>2.3.4 - List</li> <li>2.3.5 - Set</li> <li>2.3.6 - Set ordenat</li> </ul> </li> <li>3 - MongoDB </li> <li>3.1 - Estructura JSON</li> <li>3.2 - Instal\u00b7laci\u00f3 de MongoDB <ul> <li>3.2.1 - Connexi\u00f3 al servidor de l'Institut</li> </ul> </li> <li>3.3 - Utilitzaci\u00f3 de MongoDB <ul> <li>3.3.1 - Tipus de dades</li> <li>3.3.2 - Operacions b\u00e0siques</li> <li>3.2.3 - Operacions d'actualitzaci\u00f3 avan\u00e7ada </li> <li>3.3.3.1 - $set</li> <li>3.3.3.2 - $unset</li> <li>3.3.3.3 - $rename</li> <li>3.3.3.4 - $inc</li> <li>3.3.3.5 - Elements d'un array</li> <li>3.3.3.6 - Inserci\u00f3 en Arrays: $push</li> <li>3.3.3.7 - Eliminaci\u00f3 en arrays: $pop i $pull</li> <li>3.3.3.8 - Upsert</li> </ul> </li> <li>3.4 - Consulta de documents <ul> <li>3.4.1 - Par\u00e0metres de les funcions find() i findOne()</li> <li>3.4.2 - Operadors de les condicions</li> <li>3.4.3 - Agregaci\u00f3</li> </ul> </li> <li>4 - BD XML: eXist-db </li> <li>4.1 - Instal\u00b7laci\u00f3 d'eXist-db</li> <li>4.2 - Llenguatges de consultes XPATH i XQUERY <ul> <li>4.2.1 - XPATH </li> <li>4.2.1.1 - Vista d'arbre</li> <li>4.2.1.2 - Navegaci\u00f3</li> <li>4.2.1.3 - Seq\u00fc\u00e8ncies</li> <li>4.2.1.4 - Funcions</li> <li>4.2.2 - XQUERY </li> <li>4.2.2.1 - Consultes XQuery</li> <li>4.2.2.2 - Variables</li> <li>4.2.2.3 - Expressions avaluables</li> <li>4.2.2.4 - Expressions FLWOR</li> <li>4.2.2.5 - Alternatives</li> <li>4.2.2.6 - Exemple de consulta \"elaborada\"</li> <li>4.2.2.7 - Funcions de eXist-db de manipulaci\u00f3 de BD</li> </ul> </li> <li>5 - FIREBASE (voluntari) </li> <li>5.1 - Creaci\u00f3 d'una aplicaci\u00f3</li> <li>5.2 - Realtime Database (RD)</li> <li>5.3 - Cloud Firestore (CF)</li> <li>5.4 - Cloud Storage</li> <li>Exercicis</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T08_BD_NoSQL/4226__exemple_de_consulta_elaborada/#4226-exemple-de-consulta-elaborada","title":"4.2.2.6 - Exemple de consulta \"elaborada\"","text":"<p>Partint d\u2019aquest XML d\u2019exemple que representa comandes de llibres (guardeu-lo com un document anomenat comanda_llibres.xml):</p> <p> <p>15-11-2011</p> <p> <p>Fr\u00e9d\u00e9rik McCloud</p> <p> <p> <p>Les empentes</p> <p>2</p> <p></p> <p></p> <p></p> <p> <p>Corsaro Levy</p> <p> <p> <p>Marxant de la font del gat</p> <p>2</p> <p></p> <p> <p>B\u00e8stia!</p> <p>2</p> <p></p> <p></p> <p></p> <p> <p>Marc Blairet</p> <p> <p> <p>Tres de tres</p> <p>3</p> <p></p> <p></p> <p></p> <p></p> <p>Es vol respondre la pregunta seg\u00fcent: de quins autors s\u2019han demanat tres o m\u00e9s llibres?</p> <p>Anem a fer l'exercici a poc a poc, de manera constructiva.</p> <p>Per respondre aquesta pregunta el primer que cal \u00e9s separar el document en blocs d\u2019autor i processar-ne cada un de manera diferent. Per tant, es defineix un bucle amb un for per cada autor i s\u2019escriu el nom per pantalla</p> <p>for $autor in doc(\"/db/Tema9/comanda_llibres.xml\")//autor</p> <p>return $autor/nom</p> <p>El resultat ser\u00e0 una llista de tots els autors:</p> <p>Fr\u00e9d\u00e9rik McCloud </p> <p>Corsaro Levy</p> <p>Marc Blairet</p> <p>Es vol definir una restricci\u00f3 amb la quantitat de llibres que s\u2019han demanat de cada autor; per tant, ho podr\u00edem intentar fer amb el where</p> <p>for $autor in doc(\"/db/Tema9/comanda_llibres.xml\")//autor</p> <p>where $autor/llibres/llibre/quantitat &gt;= 3</p> <p>return $autor/nom</p> <p>Aquesta \u00e9s la llista dels autors que tenen alguna petici\u00f3 de 3 o m\u00e9s llibres</p> <p>Marc Blairet</p> <p>Per\u00f2 es pot veure que encara no \u00e9s el demanat, ja que no apareix l\u2019autor Corsaro Levy, del qual s\u2019han demanat dues unitats llibres diferents. Per tant, agrupem les quantitats per obtenir el resultat correcte</p> <p>for $autor in doc(\"/db/Tema9/comanda_llibres.xml\")//autor</p> <p>where sum($autor/llibres/llibre/quantitat) &gt;= 3</p> <p>return $autor/nom</p> <p>Ara el resultat s\u00ed que \u00e9s el correcte:</p> <p>Corsaro Levy</p> <p>Marc Blairet</p> <p>Podem fer que el resultat siga m\u00e9s \u201cbonic\u201d mostrant les quantitats venudes al costat de cada autor i ordenant de m\u00e9s a menys els resultats.</p> <p>for $autor in doc(\"/db/Tema9/comanda_llibres.xml\")//autor\u00a0</p> <p>let \\(suma := sum(\\)autor/llibres/llibre/quantitat)</p> <p>where $suma &gt;=3</p> <p>order by $suma descending</p> <p>return concat($autor/nom,\" : \", $suma)</p> <p>Es pot veure que per no haver d\u2019escriure diverses vegades l\u2019expressi\u00f3 de suma s\u2019ha definit una variable $suma i d\u2019aquesta manera l\u2019expressi\u00f3 ha quedat m\u00e9s f\u00e0cil d\u2019escriure</p> <p>\"Corsaro Levy : 4\"</p> <p>\"Marc Blairet : 3\"</p> <p>La funci\u00f3 concat() ha eliminat les etiquetes XML i ha generat un resultat de text. Si es vol mantenir una estructura XML es pot crear manualment amb l\u2019ajuda de les expressions avaluables:</p> <p>for $autor in doc(\"/db/Tema9/comanda_llibres.xml\")//autor\u00a0</p> <p>let \\(suma := sum(\\)autor/llibres/llibre/quantitat)</p> <p>where $suma &gt;=3</p> <p>order by $suma descending</p> <p>return  { concat($autor/nom,\" : \", $suma) } </p> <p>Que generar\u00e0:</p> <p>Corsaro Levy : 4</p> <p>Marc Blairet : 3</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement SenseObraDerivada 4.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T08_BD_NoSQL/4227__funcions_de_existdb_de_manipulaci_de_bd/","title":"4227  funcions de existdb de manipulaci de bd","text":"<p>Bases de Dades</p> <ul> <li>Tema 8: Bases de Dades NoSQL</li> <li>1 - Introducci\u00f3</li> <li>2 - BD Clau-Valor: Redis </li> <li>2.1 - Instal\u00b7laci\u00f3 de Redis</li> <li>2.2 - Entron gr\u00e0fic: Redis Desktop Manager</li> <li>2.3 - Utilitzaci\u00f3 de Redis <ul> <li>2.3.1 - Strings</li> <li>2.3.2 - Keys</li> <li>2.3.3 - Hash</li> <li>2.3.4 - List</li> <li>2.3.5 - Set</li> <li>2.3.6 - Set ordenat</li> </ul> </li> <li>3 - MongoDB </li> <li>3.1 - Estructura JSON</li> <li>3.2 - Instal\u00b7laci\u00f3 de MongoDB <ul> <li>3.2.1 - Connexi\u00f3 al servidor de l'Institut</li> </ul> </li> <li>3.3 - Utilitzaci\u00f3 de MongoDB <ul> <li>3.3.1 - Tipus de dades</li> <li>3.3.2 - Operacions b\u00e0siques</li> <li>3.2.3 - Operacions d'actualitzaci\u00f3 avan\u00e7ada </li> <li>3.3.3.1 - $set</li> <li>3.3.3.2 - $unset</li> <li>3.3.3.3 - $rename</li> <li>3.3.3.4 - $inc</li> <li>3.3.3.5 - Elements d'un array</li> <li>3.3.3.6 - Inserci\u00f3 en Arrays: $push</li> <li>3.3.3.7 - Eliminaci\u00f3 en arrays: $pop i $pull</li> <li>3.3.3.8 - Upsert</li> </ul> </li> <li>3.4 - Consulta de documents <ul> <li>3.4.1 - Par\u00e0metres de les funcions find() i findOne()</li> <li>3.4.2 - Operadors de les condicions</li> <li>3.4.3 - Agregaci\u00f3</li> </ul> </li> <li>4 - BD XML: eXist-db </li> <li>4.1 - Instal\u00b7laci\u00f3 d'eXist-db</li> <li>4.2 - Llenguatges de consultes XPATH i XQUERY <ul> <li>4.2.1 - XPATH </li> <li>4.2.1.1 - Vista d'arbre</li> <li>4.2.1.2 - Navegaci\u00f3</li> <li>4.2.1.3 - Seq\u00fc\u00e8ncies</li> <li>4.2.1.4 - Funcions</li> <li>4.2.2 - XQUERY </li> <li>4.2.2.1 - Consultes XQuery</li> <li>4.2.2.2 - Variables</li> <li>4.2.2.3 - Expressions avaluables</li> <li>4.2.2.4 - Expressions FLWOR</li> <li>4.2.2.5 - Alternatives</li> <li>4.2.2.6 - Exemple de consulta \"elaborada\"</li> <li>4.2.2.7 - Funcions de eXist-db de manipulaci\u00f3 de BD</li> </ul> </li> <li>5 - FIREBASE (voluntari) </li> <li>5.1 - Creaci\u00f3 d'una aplicaci\u00f3</li> <li>5.2 - Realtime Database (RD)</li> <li>5.3 - Cloud Firestore (CF)</li> <li>5.4 - Cloud Storage</li> <li>Exercicis</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T08_BD_NoSQL/4227__funcions_de_existdb_de_manipulaci_de_bd/#4227-funcions-de-exist-db-de-manipulacio-de-bd","title":"4.2.2.7 - Funcions de eXist-db de manipulaci\u00f3 de BD","text":"<p>A mode \u00fanicament il\u00b7lustratiu, anem a comentar una s\u00e8rie de funcions de eXist-db que serveixen per a modificar les col\u00b7leccions i documents\u00a0 de la Base de Dades.</p> <p>S\u00f3n unes funcions que estan dins del paquet xmldb, i per tant comen\u00e7aran totes per aquest prefix.</p> <p>Com que serveixen per a modificar la Base de Dades, ser\u00e0 obligatori autenticar-se (recordeu que l'usuari era admin / admin).</p> <p>Veurem nom\u00e9s algunes de les funcions. Si voleu aprofundir, aquesta \u00e9s la p\u00e0gina de la documentaci\u00f3: http://exist-db.org/exist/apps/fundocs/view.md?uri=http://exist-db.org/xquery/xmldb</p> <p>xmldb:create-collection</p> <p>Crea una col\u00b7lecci\u00f3, especificant tamb\u00e9 la col\u00b7lecci\u00f3 de qui dependr\u00e0</p> <p>xmldb:get-child-collections</p> <p>S'obtindran totes les subcol\u00b7leccions de la col\u00b7lecci\u00f3 especificada.</p> <p>xmldb:get-child-resources</p> <p>S'obtindran tots els documents de la col\u00b7lecci\u00f3 especificada.</p> <p>Per exemple:</p> <p>xmldb:get-child-resources(\"Tema9\")</p> <p></p> <p>xmldb:store</p> <p>Guarda un document en la Base de Dades. Se li han d'especificar 3 par\u00e0mentres:</p> <ul> <li>Nom de la col\u00b7lecci\u00f3 on es guardar\u00e0 el document</li> <li>Nom del document</li> <li>Contingut del document</li> </ul> <p>Per exemple:</p> <p>xmldb:store(\"Tema9\",\"prof.xml\",//professor)</p> <p>generar\u00e0 el document prof.xml dins de la col\u00b7lecci\u00f3 Tema9, i el contingut \u00e9s el resultat de fer la consulta XPath //professor, que obt\u00e9 tots els elements professor de la Base de Dades (nom\u00e9s hi ha un):</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement SenseObraDerivada 4.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T08_BD_NoSQL/422__xquery/","title":"422  xquery","text":"<p>Bases de Dades</p> <ul> <li>Tema 8: Bases de Dades NoSQL</li> <li>1 - Introducci\u00f3</li> <li>2 - BD Clau-Valor: Redis </li> <li>2.1 - Instal\u00b7laci\u00f3 de Redis</li> <li>2.2 - Entron gr\u00e0fic: Redis Desktop Manager</li> <li>2.3 - Utilitzaci\u00f3 de Redis <ul> <li>2.3.1 - Strings</li> <li>2.3.2 - Keys</li> <li>2.3.3 - Hash</li> <li>2.3.4 - List</li> <li>2.3.5 - Set</li> <li>2.3.6 - Set ordenat</li> </ul> </li> <li>3 - MongoDB </li> <li>3.1 - Estructura JSON</li> <li>3.2 - Instal\u00b7laci\u00f3 de MongoDB <ul> <li>3.2.1 - Connexi\u00f3 al servidor de l'Institut</li> </ul> </li> <li>3.3 - Utilitzaci\u00f3 de MongoDB <ul> <li>3.3.1 - Tipus de dades</li> <li>3.3.2 - Operacions b\u00e0siques</li> <li>3.2.3 - Operacions d'actualitzaci\u00f3 avan\u00e7ada </li> <li>3.3.3.1 - $set</li> <li>3.3.3.2 - $unset</li> <li>3.3.3.3 - $rename</li> <li>3.3.3.4 - $inc</li> <li>3.3.3.5 - Elements d'un array</li> <li>3.3.3.6 - Inserci\u00f3 en Arrays: $push</li> <li>3.3.3.7 - Eliminaci\u00f3 en arrays: $pop i $pull</li> <li>3.3.3.8 - Upsert</li> </ul> </li> <li>3.4 - Consulta de documents <ul> <li>3.4.1 - Par\u00e0metres de les funcions find() i findOne()</li> <li>3.4.2 - Operadors de les condicions</li> <li>3.4.3 - Agregaci\u00f3</li> </ul> </li> <li>4 - BD XML: eXist-db </li> <li>4.1 - Instal\u00b7laci\u00f3 d'eXist-db</li> <li>4.2 - Llenguatges de consultes XPATH i XQUERY <ul> <li>4.2.1 - XPATH </li> <li>4.2.1.1 - Vista d'arbre</li> <li>4.2.1.2 - Navegaci\u00f3</li> <li>4.2.1.3 - Seq\u00fc\u00e8ncies</li> <li>4.2.1.4 - Funcions</li> <li>4.2.2 - XQUERY </li> <li>4.2.2.1 - Consultes XQuery</li> <li>4.2.2.2 - Variables</li> <li>4.2.2.3 - Expressions avaluables</li> <li>4.2.2.4 - Expressions FLWOR</li> <li>4.2.2.5 - Alternatives</li> <li>4.2.2.6 - Exemple de consulta \"elaborada\"</li> <li>4.2.2.7 - Funcions de eXist-db de manipulaci\u00f3 de BD</li> </ul> </li> <li>5 - FIREBASE (voluntari) </li> <li>5.1 - Creaci\u00f3 d'una aplicaci\u00f3</li> <li>5.2 - Realtime Database (RD)</li> <li>5.3 - Cloud Firestore (CF)</li> <li>5.4 - Cloud Storage</li> <li>Exercicis</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T08_BD_NoSQL/422__xquery/#422-xquery","title":"4.2.2 - XQUERY","text":"<p>XQuery \u00e9s un llenguatge de consultes pensat per convertir-se en la manera est\u00e0ndard de recuperar dades de col\u00b7leccions de documents XML.</p> <p>Es tracta d\u2019un llenguatge molt potent i que \u00e9s funcional, de manera que en compte de dir-li quins s\u00f3n els passos per fer una tasca, el que es fa \u00e9s avaluar les expressions contra el fitxer XML i generar un resultat. A difer\u00e8ncia dels llenguatges de programaci\u00f3 habituals, en XQuery s\u2019especifica qu\u00e8 \u00e9s el que es vol i no la manera com ho ha de fer per obtenir-ho. Per tant el podr\u00edem catalogar com a llenguatge de quarta generaci\u00f3 (com el SQL).</p> <p>Entre les caracter\u00edstiques m\u00e9s interessants d\u2019XQuery, aquest permet:</p> <ul> <li>Seleccionar la informaci\u00f3 segons criteris. Ordenar, agrupar, afegir dades.</li> <li>Filtrar la informaci\u00f3.</li> <li>Buscar informaci\u00f3 en un document o en un grup de documents.</li> <li>Unir dades de m\u00faltiples documents.</li> <li>Transformar i reestructurar XML.</li> <li>No est\u00e0 limitat a la recerca, ja que pot fer operacions num\u00e8riques i de manipulaci\u00f3 de car\u00e0cters.</li> <li>Pot treballar amb espais de noms i amb documents definits per mitj\u00e0 de DTD o XSD.</li> </ul> <p>Una part important de XQuery 1.0 \u00e9s el llenguatge XPath 2.0, que \u00e9s la part que li permet fer les seleccions d\u2019informaci\u00f3 i la navegaci\u00f3 pel document.\u00a0</p> <p>Com anirem veient en els seg\u00fcents punts, la sent\u00e8ncia que m\u00e9s utilitzarem en XQuery \u00e9s la sent\u00e8ncia FLWOR, acr\u00f2nim de For, Let, Where, Order by i Return, que s\u00f3n les cl\u00e0usules que es poden posar en la sent\u00e8ncia .</p> <p>L'\u00faltima versi\u00f3 reconeguda de XQuery \u00e9s la 3.1, que inclou cl\u00e0usules com el group by.</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement SenseObraDerivada 4.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T08_BD_NoSQL/42__llenguatges_de_consultes_xpath_i_xquery/","title":"42  llenguatges de consultes xpath i xquery","text":"<p>Bases de Dades</p> <ul> <li>Tema 8: Bases de Dades NoSQL</li> <li>1 - Introducci\u00f3</li> <li>2 - BD Clau-Valor: Redis </li> <li>2.1 - Instal\u00b7laci\u00f3 de Redis</li> <li>2.2 - Entron gr\u00e0fic: Redis Desktop Manager</li> <li>2.3 - Utilitzaci\u00f3 de Redis <ul> <li>2.3.1 - Strings</li> <li>2.3.2 - Keys</li> <li>2.3.3 - Hash</li> <li>2.3.4 - List</li> <li>2.3.5 - Set</li> <li>2.3.6 - Set ordenat</li> </ul> </li> <li>3 - MongoDB </li> <li>3.1 - Estructura JSON</li> <li>3.2 - Instal\u00b7laci\u00f3 de MongoDB <ul> <li>3.2.1 - Connexi\u00f3 al servidor de l'Institut</li> </ul> </li> <li>3.3 - Utilitzaci\u00f3 de MongoDB <ul> <li>3.3.1 - Tipus de dades</li> <li>3.3.2 - Operacions b\u00e0siques</li> <li>3.2.3 - Operacions d'actualitzaci\u00f3 avan\u00e7ada </li> <li>3.3.3.1 - $set</li> <li>3.3.3.2 - $unset</li> <li>3.3.3.3 - $rename</li> <li>3.3.3.4 - $inc</li> <li>3.3.3.5 - Elements d'un array</li> <li>3.3.3.6 - Inserci\u00f3 en Arrays: $push</li> <li>3.3.3.7 - Eliminaci\u00f3 en arrays: $pop i $pull</li> <li>3.3.3.8 - Upsert</li> </ul> </li> <li>3.4 - Consulta de documents <ul> <li>3.4.1 - Par\u00e0metres de les funcions find() i findOne()</li> <li>3.4.2 - Operadors de les condicions</li> <li>3.4.3 - Agregaci\u00f3</li> </ul> </li> <li>4 - BD XML: eXist-db </li> <li>4.1 - Instal\u00b7laci\u00f3 d'eXist-db</li> <li>4.2 - Llenguatges de consultes XPATH i XQUERY <ul> <li>4.2.1 - XPATH </li> <li>4.2.1.1 - Vista d'arbre</li> <li>4.2.1.2 - Navegaci\u00f3</li> <li>4.2.1.3 - Seq\u00fc\u00e8ncies</li> <li>4.2.1.4 - Funcions</li> <li>4.2.2 - XQUERY </li> <li>4.2.2.1 - Consultes XQuery</li> <li>4.2.2.2 - Variables</li> <li>4.2.2.3 - Expressions avaluables</li> <li>4.2.2.4 - Expressions FLWOR</li> <li>4.2.2.5 - Alternatives</li> <li>4.2.2.6 - Exemple de consulta \"elaborada\"</li> <li>4.2.2.7 - Funcions de eXist-db de manipulaci\u00f3 de BD</li> </ul> </li> <li>5 - FIREBASE (voluntari) </li> <li>5.1 - Creaci\u00f3 d'una aplicaci\u00f3</li> <li>5.2 - Realtime Database (RD)</li> <li>5.3 - Cloud Firestore (CF)</li> <li>5.4 - Cloud Storage</li> <li>Exercicis</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T08_BD_NoSQL/42__llenguatges_de_consultes_xpath_i_xquery/#42-llenguatges-de-consultes-xpath-i-xquery","title":"4.2 - Llenguatges de consultes XPATH i XQUERY","text":"<p>Aquesta pregunta pret\u00e9n ser un rep\u00e0s del vist en el m\u00f2dul de primer Llenguatges de Marques. Veurem \u00fanicament\u00a0XPath i\u00a0XQuery, d'entre el ventall de llenguatges XML recomanats pel W3C (World Wide Web Consortium).</p> <p>Aquestos llenguatges no s\u00f3n separats, sin\u00f3 que estan interrelacionats entre ells. Concretament la relaci\u00f3 entre\u00a0XPath i\u00a0XQuery \u00e9s que\u00a0XPath \u00e9s un subconjunt de XQuery, o millor dit totes les expressions\u00a0XPath s\u00f3n v\u00e0lides en XQuery.</p> <p></p> <p>Com veiem en la figura,\u00a0XPath s\u2019ha convertit en un component essencial per a diferents llenguatges XML com XLinks, XSLT i el que m\u00e9s ens interessa,\u00a0XQuery.\u00a0</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement SenseObraDerivada 4.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T08_BD_NoSQL/4__bd_xml_existdb/","title":"4  bd xml existdb","text":"<p>Bases de Dades</p> <ul> <li>Tema 8: Bases de Dades NoSQL</li> <li>1 - Introducci\u00f3</li> <li>2 - BD Clau-Valor: Redis </li> <li>2.1 - Instal\u00b7laci\u00f3 de Redis</li> <li>2.2 - Entron gr\u00e0fic: Redis Desktop Manager</li> <li>2.3 - Utilitzaci\u00f3 de Redis <ul> <li>2.3.1 - Strings</li> <li>2.3.2 - Keys</li> <li>2.3.3 - Hash</li> <li>2.3.4 - List</li> <li>2.3.5 - Set</li> <li>2.3.6 - Set ordenat</li> </ul> </li> <li>3 - MongoDB </li> <li>3.1 - Estructura JSON</li> <li>3.2 - Instal\u00b7laci\u00f3 de MongoDB <ul> <li>3.2.1 - Connexi\u00f3 al servidor de l'Institut</li> </ul> </li> <li>3.3 - Utilitzaci\u00f3 de MongoDB <ul> <li>3.3.1 - Tipus de dades</li> <li>3.3.2 - Operacions b\u00e0siques</li> <li>3.2.3 - Operacions d'actualitzaci\u00f3 avan\u00e7ada </li> <li>3.3.3.1 - $set</li> <li>3.3.3.2 - $unset</li> <li>3.3.3.3 - $rename</li> <li>3.3.3.4 - $inc</li> <li>3.3.3.5 - Elements d'un array</li> <li>3.3.3.6 - Inserci\u00f3 en Arrays: $push</li> <li>3.3.3.7 - Eliminaci\u00f3 en arrays: $pop i $pull</li> <li>3.3.3.8 - Upsert</li> </ul> </li> <li>3.4 - Consulta de documents <ul> <li>3.4.1 - Par\u00e0metres de les funcions find() i findOne()</li> <li>3.4.2 - Operadors de les condicions</li> <li>3.4.3 - Agregaci\u00f3</li> </ul> </li> <li>4 - BD XML: eXist-db </li> <li>4.1 - Instal\u00b7laci\u00f3 d'eXist-db</li> <li>4.2 - Llenguatges de consultes XPATH i XQUERY <ul> <li>4.2.1 - XPATH </li> <li>4.2.1.1 - Vista d'arbre</li> <li>4.2.1.2 - Navegaci\u00f3</li> <li>4.2.1.3 - Seq\u00fc\u00e8ncies</li> <li>4.2.1.4 - Funcions</li> <li>4.2.2 - XQUERY </li> <li>4.2.2.1 - Consultes XQuery</li> <li>4.2.2.2 - Variables</li> <li>4.2.2.3 - Expressions avaluables</li> <li>4.2.2.4 - Expressions FLWOR</li> <li>4.2.2.5 - Alternatives</li> <li>4.2.2.6 - Exemple de consulta \"elaborada\"</li> <li>4.2.2.7 - Funcions de eXist-db de manipulaci\u00f3 de BD</li> </ul> </li> <li>5 - FIREBASE (voluntari) </li> <li>5.1 - Creaci\u00f3 d'una aplicaci\u00f3</li> <li>5.2 - Realtime Database (RD)</li> <li>5.3 - Cloud Firestore (CF)</li> <li>5.4 - Cloud Storage</li> <li>Exercicis</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T08_BD_NoSQL/4__bd_xml_existdb/#4-bd-xml-exist-db","title":"4 - BD XML: eXist-db","text":"<p>L\u2019XML \u00e9s, segons la definici\u00f3 feta pel World Wide Web Consortium (W3C), un format simple basat en text per a representar informaci\u00f3 estructurada: documents, dades, configuracions, llibres, transaccions, factures i molt m\u00e9s. Va ser derivat d\u2019un format est\u00e0ndard m\u00e9s antic, anomenat SGML, amb la finalitat de ser m\u00e9s adequat per a la seua utilitzaci\u00f3 en la web.</p> <p>L\u2019XML, avui en dia, \u00e9s un dels formats m\u00e9s utilitzats per a l\u2019intercanvi d\u2019informaci\u00f3 estructurada: entre els programes, entre les persones, entre ordinadors i persones, tant a nivell local com a trav\u00e9s de les xarxes. El fet que la informaci\u00f3 s\u2019intercanvie en format XML ha implicat l\u2019aparici\u00f3 de mecanismes que permeten enregistrar aquesta informaci\u00f3 en format XML, de manera que no siga necessari efectuar traduccions a altres formats.</p> <p>Les Bases de Dades XML\u00a0natives, o senzillament Bases de Dades XML ens permetran guardar documents XML i s\u00f3n Bases de Dades centrades en els documents. La unitat m\u00ednima d'emmagatzematge \u00e9s el document XML.</p> <p>Podr\u00edem definir\u00a0SGBD-XML natives\u00a0com un sistema de gesti\u00f3 de la informaci\u00f3 que ha de:</p> <ul> <li>Definir un model l\u00f2gic per a un document XML (en contraposici\u00f3 als SGBD habilitats que defineixen el model per les dades) i enregistrar i recuperar els documents segons aquest model. Com a m\u00ednim, el model ha d\u2019incloure elements, atributs, PCDATA i l\u2019ordre del document.</li> <li>Mantenir una relaci\u00f3 transparent amb el mecanisme subjacent d\u2019emmagatzematge, incorporant les caracter\u00edstiques ACID de qualsevol SGBD (Atomicity, Consistency, Isolation and Durability).</li> <li>Incloure un nombre arbitrari de nivells de dades i complexitat.</li> <li>Permetre les tecnologies de consulta i transformaci\u00f3 pr\u00f2pies d\u2019XML: XPath, XSLT, XQL, XQuery, etc.</li> </ul> <p>Avantatges de les BD-XML, en comparaci\u00f3 a les BD no XML:</p> <ul> <li>Faciliten acc\u00e9s i emmagatzematge d\u2019informaci\u00f3 en format XML sense necessitat de codi addicional ni cap tipus de mapatge.</li> <li>La majoria d\u2019SGBD-XML natives incorporen un motor de recerca d\u2019alt rendiment.</li> <li>\u00c9s molt senzill afegir nous documents XML.</li> <li>Permeten emmagatzemar dades heterog\u00e8nies.</li> <li>Conserven la integritat dels documents (es poden recuperar en el seu estat inicial).</li> </ul> <p>Per contra, els inconvenients que tenen normalment els SGBD-XML natives s\u00f3n aquestos:</p> <ul> <li>La gran quantitat d\u2019espai necessari per emmagatzemar el mateix document XML com a format de representaci\u00f3 de la informaci\u00f3, a causa del fet que les etiquetes poden suposar el 75% de la informaci\u00f3 d\u2019un document XML. I aix\u00f2 \u00e9s, sense cap mena de dubte, innecessari en guardar molts documents validats per un mateix XSD o DTD.</li> <li>El fet que les BD-XML natives nom\u00e9s puguen guardar i retornar dades en format XML.</li> <li>En emmagatzemar la informaci\u00f3 en format XML es fa molt complicat poder generar noves estructures a partir de la informaci\u00f3 existent com, per exemple, aconseguir c\u00e0lculs estad\u00edstics.</li> <li>Les dificultats d\u2019indexaci\u00f3 del contingut d\u2019una base de dades, que ha de permetre la reducci\u00f3 dr\u00e0stica del temps necessari per trobar certs elements clau.</li> <li>Les pobres facilitats per modificar el contingut dels documents XML emmagatzemats sense haver de substituir tot el document.</li> </ul> <p>Els dos darrers inconvenients (indexaci\u00f3-actualitzaci\u00f3) s\u00f3n cavalls de batalla dels SGBD i de ben segur que s\u2019anir\u00e0 avan\u00e7ant en aquest camp fins que deixen de ser inconvenients.\u00a0</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement SenseObraDerivada 4.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T08_BD_NoSQL/51__creaci_duna_aplicaci/","title":"51  creaci duna aplicaci","text":"<p>Bases de Dades</p> <ul> <li>Tema 8: Bases de Dades NoSQL</li> <li>1 - Introducci\u00f3</li> <li>2 - BD Clau-Valor: Redis </li> <li>2.1 - Instal\u00b7laci\u00f3 de Redis</li> <li>2.2 - Entron gr\u00e0fic: Redis Desktop Manager</li> <li>2.3 - Utilitzaci\u00f3 de Redis <ul> <li>2.3.1 - Strings</li> <li>2.3.2 - Keys</li> <li>2.3.3 - Hash</li> <li>2.3.4 - List</li> <li>2.3.5 - Set</li> <li>2.3.6 - Set ordenat</li> </ul> </li> <li>3 - MongoDB </li> <li>3.1 - Estructura JSON</li> <li>3.2 - Instal\u00b7laci\u00f3 de MongoDB <ul> <li>3.2.1 - Connexi\u00f3 al servidor de l'Institut</li> </ul> </li> <li>3.3 - Utilitzaci\u00f3 de MongoDB <ul> <li>3.3.1 - Tipus de dades</li> <li>3.3.2 - Operacions b\u00e0siques</li> <li>3.2.3 - Operacions d'actualitzaci\u00f3 avan\u00e7ada </li> <li>3.3.3.1 - $set</li> <li>3.3.3.2 - $unset</li> <li>3.3.3.3 - $rename</li> <li>3.3.3.4 - $inc</li> <li>3.3.3.5 - Elements d'un array</li> <li>3.3.3.6 - Inserci\u00f3 en Arrays: $push</li> <li>3.3.3.7 - Eliminaci\u00f3 en arrays: $pop i $pull</li> <li>3.3.3.8 - Upsert</li> </ul> </li> <li>3.4 - Consulta de documents <ul> <li>3.4.1 - Par\u00e0metres de les funcions find() i findOne()</li> <li>3.4.2 - Operadors de les condicions</li> <li>3.4.3 - Agregaci\u00f3</li> </ul> </li> <li>4 - BD XML: eXist-db </li> <li>4.1 - Instal\u00b7laci\u00f3 d'eXist-db</li> <li>4.2 - Llenguatges de consultes XPATH i XQUERY <ul> <li>4.2.1 - XPATH </li> <li>4.2.1.1 - Vista d'arbre</li> <li>4.2.1.2 - Navegaci\u00f3</li> <li>4.2.1.3 - Seq\u00fc\u00e8ncies</li> <li>4.2.1.4 - Funcions</li> <li>4.2.2 - XQUERY </li> <li>4.2.2.1 - Consultes XQuery</li> <li>4.2.2.2 - Variables</li> <li>4.2.2.3 - Expressions avaluables</li> <li>4.2.2.4 - Expressions FLWOR</li> <li>4.2.2.5 - Alternatives</li> <li>4.2.2.6 - Exemple de consulta \"elaborada\"</li> <li>4.2.2.7 - Funcions de eXist-db de manipulaci\u00f3 de BD</li> </ul> </li> <li>5 - FIREBASE (voluntari) </li> <li>5.1 - Creaci\u00f3 d'una aplicaci\u00f3</li> <li>5.2 - Realtime Database (RD)</li> <li>5.3 - Cloud Firestore (CF)</li> <li>5.4 - Cloud Storage</li> <li>Exercicis</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T08_BD_NoSQL/51__creaci_duna_aplicaci/#51-creacio-duna-aplicacio","title":"5.1 - Creaci\u00f3 d'una aplicaci\u00f3","text":"<p>La Base de Dades, que hem quedat que poden ser un document \u00fanic JSON en el cas de Realtime Database, i tot un conjunt en el cas de Cloud Firestore, est\u00e0 associada a una aplicaci\u00f3. Crearem des de l'entorn de Firebase una nova aplicaci\u00f3, la refer\u00e8ncia de la qual \u00e9s la que utilitzarem en l'aplicaci\u00f3 web o aplicaci\u00f3 m\u00f2bil. Aix\u00ed doncs, podem crear-nos unes quantes aplicacions Firebase, i en cadascuna guardarem una Base de Dades. Ens far\u00e0 falta autenticar-nos amb un compte de Google. Utiilitzarem el compte corporatiu de l'IES El Camin\u00e0s, \u00e9s a dir xxx@ieselcaminas.org</p> <p>El proc\u00e9s de creaci\u00f3 el farem des de l'entorn de firebase: www.firebase.com.</p> <p>El seg\u00fcent v\u00eddeo mostra el proc\u00e9s de creaci\u00f3 d'una aplicaci\u00f3:</p> <p>En les \u00faltimes versions\u00a0 de Firebase la primera vegada que s'accedeix a la Base de Dades Firebase acabada de crear, pregunta per les regles (rules) d'acc\u00e9s a aquesta. Inicialment triarem l'opci\u00f3 modo de prueba, en el qual tot el m\u00f3n pot accedir a les dades. Evidentment no es poden deixar aquestes regles de forma definitiva, per\u00f2 per a comen\u00e7ar a provar, est\u00e0 b\u00e9. De fet, en l'\u00faltima versi\u00f3 ho deixar\u00e0 en mode de prova durant un mes. De tota manera, si ho vulgu\u00e9rem allargar, anir\u00edem a la configuraci\u00f3 dels rules</p> <p></p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement SenseObraDerivada 4.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T08_BD_NoSQL/52__realtime_database_rd/","title":"52  realtime database rd","text":"<p>Bases de Dades</p> <ul> <li>Tema 8: Bases de Dades NoSQL</li> <li>1 - Introducci\u00f3</li> <li>2 - BD Clau-Valor: Redis </li> <li>2.1 - Instal\u00b7laci\u00f3 de Redis</li> <li>2.2 - Entron gr\u00e0fic: Redis Desktop Manager</li> <li>2.3 - Utilitzaci\u00f3 de Redis <ul> <li>2.3.1 - Strings</li> <li>2.3.2 - Keys</li> <li>2.3.3 - Hash</li> <li>2.3.4 - List</li> <li>2.3.5 - Set</li> <li>2.3.6 - Set ordenat</li> </ul> </li> <li>3 - MongoDB </li> <li>3.1 - Estructura JSON</li> <li>3.2 - Instal\u00b7laci\u00f3 de MongoDB <ul> <li>3.2.1 - Connexi\u00f3 al servidor de l'Institut</li> </ul> </li> <li>3.3 - Utilitzaci\u00f3 de MongoDB <ul> <li>3.3.1 - Tipus de dades</li> <li>3.3.2 - Operacions b\u00e0siques</li> <li>3.2.3 - Operacions d'actualitzaci\u00f3 avan\u00e7ada </li> <li>3.3.3.1 - $set</li> <li>3.3.3.2 - $unset</li> <li>3.3.3.3 - $rename</li> <li>3.3.3.4 - $inc</li> <li>3.3.3.5 - Elements d'un array</li> <li>3.3.3.6 - Inserci\u00f3 en Arrays: $push</li> <li>3.3.3.7 - Eliminaci\u00f3 en arrays: $pop i $pull</li> <li>3.3.3.8 - Upsert</li> </ul> </li> <li>3.4 - Consulta de documents <ul> <li>3.4.1 - Par\u00e0metres de les funcions find() i findOne()</li> <li>3.4.2 - Operadors de les condicions</li> <li>3.4.3 - Agregaci\u00f3</li> </ul> </li> <li>4 - BD XML: eXist-db </li> <li>4.1 - Instal\u00b7laci\u00f3 d'eXist-db</li> <li>4.2 - Llenguatges de consultes XPATH i XQUERY <ul> <li>4.2.1 - XPATH </li> <li>4.2.1.1 - Vista d'arbre</li> <li>4.2.1.2 - Navegaci\u00f3</li> <li>4.2.1.3 - Seq\u00fc\u00e8ncies</li> <li>4.2.1.4 - Funcions</li> <li>4.2.2 - XQUERY </li> <li>4.2.2.1 - Consultes XQuery</li> <li>4.2.2.2 - Variables</li> <li>4.2.2.3 - Expressions avaluables</li> <li>4.2.2.4 - Expressions FLWOR</li> <li>4.2.2.5 - Alternatives</li> <li>4.2.2.6 - Exemple de consulta \"elaborada\"</li> <li>4.2.2.7 - Funcions de eXist-db de manipulaci\u00f3 de BD</li> </ul> </li> <li>5 - FIREBASE (voluntari) </li> <li>5.1 - Creaci\u00f3 d'una aplicaci\u00f3</li> <li>5.2 - Realtime Database (RD)</li> <li>5.3 - Cloud Firestore (CF)</li> <li>5.4 - Cloud Storage</li> <li>Exercicis</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T08_BD_NoSQL/52__realtime_database_rd/#52-realtime-database-rd","title":"5.2 - Realtime Database (RD)","text":"<p>Encara que la finalitat \u00e9s utilitzar-lo des del nostre entorn de programaci\u00f3, m\u00e9s concretament Android, sempre ens anir\u00e0 b\u00e9 \"tocar\" les dades directament des d'un entorn propi.</p> <p>L'entorn que ens ofereix Firebase ser\u00e0 suficient. Podrem visualitzar les dades que tenim introdu\u00efdes en totes les nostres aplicacions, i tamb\u00e9 editar-les: introduir, modificar i esborrar.</p> <p>Recordem que podrem utilitzar 2 versions:</p> <ul> <li>Realtime Database</li> <li>Cloud Firestore</li> </ul> <p>Comencem per Realtime Database</p> <p>Farem especial menci\u00f3 al fet que el que guardem \u00e9s un document JSON. Fins i tot ens el podrem baixar (exportar) o pujar un document nou (importar). Aix\u00f2 s\u00ed, l'operaci\u00f3 d'importaci\u00f3 destrueix les dades anteriors, mostra de que nom\u00e9s podem guardar un document JSON.</p> <p>Aques \u00e9s el contingut del fitxer Empleats.json que s'introdueix en el v\u00eddeo. Est\u00e0 formatat per a una f\u00e0cil lectura, per\u00f2 en realitat no importaria que estiguera tot seguit.</p> <p>{ \"empresa\": { \"empleat\": [ { \"num\": 1, \"nom\": \"Andreu\", \"departament\": 10, \"edat\": 32, \"sou\": 1000 }, { \"num\": 2, \"nom\": \"Bernat\", \"departament\": 20, \"edat\": 28, \"sou\": 1200 }, { \"num\": 3, \"nom\": \"Cl\u00e0udia\", \"departament\": 10, \"edat\": 26, \"sou\": 1100 }, { \"num\": 4, \"nom\": \"Dami\u00e0\", \"departament\": 10, \"edat\": 40, \"sou\": 1500 } ] } }</p> <p>Ja heu vist que en importar Empleats.json s'han perdut les altres dades. Poseu una altra vegada la parella clau-valor a1 (per exemple amb el valor\u00a0Hola) ja que per ser molt senzilla l'estructura la utilitzarem en alguns exemples. Aix\u00ed ens queda l'estructura per als posteriors exemples:</p> <p></p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement SenseObraDerivada 4.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T08_BD_NoSQL/53__cloud_firestore_cf/","title":"53  cloud firestore cf","text":"<p>Bases de Dades</p> <ul> <li>Tema 8: Bases de Dades NoSQL</li> <li>1 - Introducci\u00f3</li> <li>2 - BD Clau-Valor: Redis </li> <li>2.1 - Instal\u00b7laci\u00f3 de Redis</li> <li>2.2 - Entron gr\u00e0fic: Redis Desktop Manager</li> <li>2.3 - Utilitzaci\u00f3 de Redis <ul> <li>2.3.1 - Strings</li> <li>2.3.2 - Keys</li> <li>2.3.3 - Hash</li> <li>2.3.4 - List</li> <li>2.3.5 - Set</li> <li>2.3.6 - Set ordenat</li> </ul> </li> <li>3 - MongoDB </li> <li>3.1 - Estructura JSON</li> <li>3.2 - Instal\u00b7laci\u00f3 de MongoDB <ul> <li>3.2.1 - Connexi\u00f3 al servidor de l'Institut</li> </ul> </li> <li>3.3 - Utilitzaci\u00f3 de MongoDB <ul> <li>3.3.1 - Tipus de dades</li> <li>3.3.2 - Operacions b\u00e0siques</li> <li>3.2.3 - Operacions d'actualitzaci\u00f3 avan\u00e7ada </li> <li>3.3.3.1 - $set</li> <li>3.3.3.2 - $unset</li> <li>3.3.3.3 - $rename</li> <li>3.3.3.4 - $inc</li> <li>3.3.3.5 - Elements d'un array</li> <li>3.3.3.6 - Inserci\u00f3 en Arrays: $push</li> <li>3.3.3.7 - Eliminaci\u00f3 en arrays: $pop i $pull</li> <li>3.3.3.8 - Upsert</li> </ul> </li> <li>3.4 - Consulta de documents <ul> <li>3.4.1 - Par\u00e0metres de les funcions find() i findOne()</li> <li>3.4.2 - Operadors de les condicions</li> <li>3.4.3 - Agregaci\u00f3</li> </ul> </li> <li>4 - BD XML: eXist-db </li> <li>4.1 - Instal\u00b7laci\u00f3 d'eXist-db</li> <li>4.2 - Llenguatges de consultes XPATH i XQUERY <ul> <li>4.2.1 - XPATH </li> <li>4.2.1.1 - Vista d'arbre</li> <li>4.2.1.2 - Navegaci\u00f3</li> <li>4.2.1.3 - Seq\u00fc\u00e8ncies</li> <li>4.2.1.4 - Funcions</li> <li>4.2.2 - XQUERY </li> <li>4.2.2.1 - Consultes XQuery</li> <li>4.2.2.2 - Variables</li> <li>4.2.2.3 - Expressions avaluables</li> <li>4.2.2.4 - Expressions FLWOR</li> <li>4.2.2.5 - Alternatives</li> <li>4.2.2.6 - Exemple de consulta \"elaborada\"</li> <li>4.2.2.7 - Funcions de eXist-db de manipulaci\u00f3 de BD</li> </ul> </li> <li>5 - FIREBASE (voluntari) </li> <li>5.1 - Creaci\u00f3 d'una aplicaci\u00f3</li> <li>5.2 - Realtime Database (RD)</li> <li>5.3 - Cloud Firestore (CF)</li> <li>5.4 - Cloud Storage</li> <li>Exercicis</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T08_BD_NoSQL/53__cloud_firestore_cf/#53-cloud-firestore-cf","title":"5.3 - Cloud Firestore (CF)","text":"<p>Cloud Firestore \u00e9s l'evoluci\u00f3 de Realtime Database, on podrem guardar m\u00e9s d'un document. Els documents aniran organitzats en col\u00b7leccions. Ja podem parlar d'una vertadera Base de Dades documental.</p> <p>Google recomana la utilitzaci\u00f3 de Cloud Firestore en compte de Realtime Database. Potser fins i tot en un futur deixen de proveir aquesta \u00faltima. Per\u00f2 no seria cap problema perqu\u00e8 tot el que podem guardar en Realtime Database ho podrem guardar en Cloud Firestore, sense que se'ns complique l'organitzaci\u00f3 de les dades. I l'acc\u00e9s \u00e9s igual de f\u00e0cil.</p> <p>De vegades Firebase l'anomena\u00a0Firestore Database o Cloud Firestore</p> <p>Amb el Cloud Firestore ja podrem guardar m\u00e9s d'un document, i aniran agrupats en col\u00b7leccions de documents. En el seg\u00fcent v\u00eddeo anem a insistir en aquest aspecte dels documents, ja que \u00e9s el m\u00e9s noved\u00f3s.</p> <p>Hem de fer la consideraci\u00f3 de que encara que treballem sobre la mateixa Base de Dades de Firebase, des de Cloud Firestore no podrem accedir a les dades de Realtime Database, i a l'inrev\u00e9s.</p> <p>Aquesta \u00e9s l'estructura de dades que ens hem guardat en l'exemple:</p> <p></p> <p>Observeu tamb\u00e9 que dins d'un document d'una col\u00b7lecci\u00f3 es pot comen\u00e7ar una col\u00b7lecci\u00f3 i dins d'ella crear documents, etc. De manera que ho podem fer recursiu, i s'enriqueixen molt les possibilitats de disseny de la nostra Base de Dades. Anem a aprofundir en aquesta possibilitat de les subcol\u00b7leccions per a redissenyar les dades del nostre exemple del xat.</p> <p>Subcol\u00b7leccions</p> <p>Com es veia en l'\u00faltima imatge, es poden crear subcol\u00b7leccions en un document, i aquestes col\u00b7leccions contenir a la seua vegada tots els documents que calga.</p> <p>Aleshores ens redissenyarem el xat constru\u00eft en la part de Realtime Database. En aquell moment vam posar tots els missatges del xat en un llista. Ens anava molt b\u00e9, perqu\u00e8 despr\u00e9s pos\u00e0vem un listener sobre la clau del xat que detectava tots els elements nous: el addChildEventListener().</p> <p>Tanmateix en el Cloud Firestore no tindrem el listener anterior. El que s\u00ed que disposarem \u00e9s d'un listener que detecte els nous documents sobre una col\u00b7lecci\u00f3. Aleshores anem a muntar cada missatge del xat com un nou document, que de moment nom\u00e9s tindr\u00e0 nom d'usuari i contingut de missatge.</p> <p>Per tant, despr\u00e9s de l'anterior tenim una col\u00b7lecci\u00f3 anomenada Xats, dins de la qual hi ha un document anomenat XatProva, dins del qual hi ha un camp anomenat nomXat i una col\u00b7lecci\u00f3 anomenada\u00a0missatges, dins del qual hi ha dos documents, un d'ells amb nom 0 i un altre amb nom generat per Cloud Firestore</p> <p></p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement SenseObraDerivada 4.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T08_BD_NoSQL/54__cloud_storage/","title":"54  cloud storage","text":"<p>Bases de Dades</p> <ul> <li>Tema 8: Bases de Dades NoSQL</li> <li>1 - Introducci\u00f3</li> <li>2 - BD Clau-Valor: Redis </li> <li>2.1 - Instal\u00b7laci\u00f3 de Redis</li> <li>2.2 - Entron gr\u00e0fic: Redis Desktop Manager</li> <li>2.3 - Utilitzaci\u00f3 de Redis <ul> <li>2.3.1 - Strings</li> <li>2.3.2 - Keys</li> <li>2.3.3 - Hash</li> <li>2.3.4 - List</li> <li>2.3.5 - Set</li> <li>2.3.6 - Set ordenat</li> </ul> </li> <li>3 - MongoDB </li> <li>3.1 - Estructura JSON</li> <li>3.2 - Instal\u00b7laci\u00f3 de MongoDB <ul> <li>3.2.1 - Connexi\u00f3 al servidor de l'Institut</li> </ul> </li> <li>3.3 - Utilitzaci\u00f3 de MongoDB <ul> <li>3.3.1 - Tipus de dades</li> <li>3.3.2 - Operacions b\u00e0siques</li> <li>3.2.3 - Operacions d'actualitzaci\u00f3 avan\u00e7ada </li> <li>3.3.3.1 - $set</li> <li>3.3.3.2 - $unset</li> <li>3.3.3.3 - $rename</li> <li>3.3.3.4 - $inc</li> <li>3.3.3.5 - Elements d'un array</li> <li>3.3.3.6 - Inserci\u00f3 en Arrays: $push</li> <li>3.3.3.7 - Eliminaci\u00f3 en arrays: $pop i $pull</li> <li>3.3.3.8 - Upsert</li> </ul> </li> <li>3.4 - Consulta de documents <ul> <li>3.4.1 - Par\u00e0metres de les funcions find() i findOne()</li> <li>3.4.2 - Operadors de les condicions</li> <li>3.4.3 - Agregaci\u00f3</li> </ul> </li> <li>4 - BD XML: eXist-db </li> <li>4.1 - Instal\u00b7laci\u00f3 d'eXist-db</li> <li>4.2 - Llenguatges de consultes XPATH i XQUERY <ul> <li>4.2.1 - XPATH </li> <li>4.2.1.1 - Vista d'arbre</li> <li>4.2.1.2 - Navegaci\u00f3</li> <li>4.2.1.3 - Seq\u00fc\u00e8ncies</li> <li>4.2.1.4 - Funcions</li> <li>4.2.2 - XQUERY </li> <li>4.2.2.1 - Consultes XQuery</li> <li>4.2.2.2 - Variables</li> <li>4.2.2.3 - Expressions avaluables</li> <li>4.2.2.4 - Expressions FLWOR</li> <li>4.2.2.5 - Alternatives</li> <li>4.2.2.6 - Exemple de consulta \"elaborada\"</li> <li>4.2.2.7 - Funcions de eXist-db de manipulaci\u00f3 de BD</li> </ul> </li> <li>5 - FIREBASE (voluntari) </li> <li>5.1 - Creaci\u00f3 d'una aplicaci\u00f3</li> <li>5.2 - Realtime Database (RD)</li> <li>5.3 - Cloud Firestore (CF)</li> <li>5.4 - Cloud Storage</li> <li>Exercicis</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T08_BD_NoSQL/54__cloud_storage/#54-cloud-storage","title":"5.4 - Cloud Storage","text":"<p>Cloud Storage ens permet guardar fitxers c\u00f2modament: fotos, v\u00eddeos, audios, ...</p> <p>Combinat amb Reltime Database o Cloud Firestore ens permet guardar les nostres dedes de forma eficient, ja que podem guardar en les primeres les refer\u00e8ncies als fitxers que pugem al Storage.</p> <p>L'entorn que ens ofereix Firebase per a gestionar Cloud Storage \u00e9s molt senzill i no t\u00e9 cap secret, ja que ens permetr\u00e0 pujar els fitxers, organitzant-los en subdirectoris, i tamb\u00e9 esborrar-los. En principi no necessitem m\u00e9s.</p> <p></p> <p>Si punxem en un fitxer podrem veure les seues caracter\u00edstiques, i si el seleccionem podrem esborrar-lo o obrir-lo en una altra finestra.</p> <p></p> <p>Aquest entorn, de tan senzill, fins i tot es queda un poc curt, ja que no ens permetr\u00e0 canviar el nom d'un fitxer, o moure'l a una carpeta, ...</p> <p>Si vulgu\u00e9rem fer algun canvi d'aquestos, canviar el nom o canviar de carpeta, ho haur\u00edem de fer des d'un altre lloc, un altre navegador del Google Cloud Storage (https://console.cloud.google.com/storage/browser):</p> <p></p> <p>on es pot observar com en els 3 puntets de la dreta d'un fitxer ens apareixen moltes opcions com copiar, menejar, renomenar, ...</p> <p>Per\u00f2 nosaltres en principi tindrem prou amb la primera consola. Anem alerta de col\u00b7locar les coses al lloc, i si no estan, esborrem i col\u00b7loquem al lloc correcte.</p> <p>Ja que estem en la consola, controlem els permisos (Rules) en la pestanya corresponent de la consola:</p> <p></p> <p>En aquesta imatge s'aprecia que no hi haur\u00e0 perm\u00eds per a llegir ni escriure fora de la consola. Com que el que volem \u00e9s accedir des de les aplicacions d'Eclipse i d'Android, substituirem el perm\u00eds per aquest:</p> <p>allow read, write: if request.time &lt; timestamp.date(2023, 6, 30);</p> <p></p> <p>amb una data en la qual no ens pillem els dits.</p> <p>Nota</p> <p>Observeu com tant en la consola senzilla com en la del browser de GoogleCloud, ens posa una adre\u00e7a, que en el meu cas \u00e9s: gs://acces-a-dades-6e5a6.appspot.com. Es tracta de l'adre\u00e7a del bucket (poal, contenidor) on estan col\u00b7locats els fitxers. Podem crear m\u00e9s buckets, per\u00f2 no ho complicarem. Haurem de tenir clara la refer\u00e8ncia a aquest bucket per defecte.</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement SenseObraDerivada 4.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T08_BD_NoSQL/5__firebase_voluntari/","title":"5  firebase voluntari","text":"<p>Bases de Dades</p> <ul> <li>Tema 8: Bases de Dades NoSQL</li> <li>1 - Introducci\u00f3</li> <li>2 - BD Clau-Valor: Redis </li> <li>2.1 - Instal\u00b7laci\u00f3 de Redis</li> <li>2.2 - Entron gr\u00e0fic: Redis Desktop Manager</li> <li>2.3 - Utilitzaci\u00f3 de Redis <ul> <li>2.3.1 - Strings</li> <li>2.3.2 - Keys</li> <li>2.3.3 - Hash</li> <li>2.3.4 - List</li> <li>2.3.5 - Set</li> <li>2.3.6 - Set ordenat</li> </ul> </li> <li>3 - MongoDB </li> <li>3.1 - Estructura JSON</li> <li>3.2 - Instal\u00b7laci\u00f3 de MongoDB <ul> <li>3.2.1 - Connexi\u00f3 al servidor de l'Institut</li> </ul> </li> <li>3.3 - Utilitzaci\u00f3 de MongoDB <ul> <li>3.3.1 - Tipus de dades</li> <li>3.3.2 - Operacions b\u00e0siques</li> <li>3.2.3 - Operacions d'actualitzaci\u00f3 avan\u00e7ada </li> <li>3.3.3.1 - $set</li> <li>3.3.3.2 - $unset</li> <li>3.3.3.3 - $rename</li> <li>3.3.3.4 - $inc</li> <li>3.3.3.5 - Elements d'un array</li> <li>3.3.3.6 - Inserci\u00f3 en Arrays: $push</li> <li>3.3.3.7 - Eliminaci\u00f3 en arrays: $pop i $pull</li> <li>3.3.3.8 - Upsert</li> </ul> </li> <li>3.4 - Consulta de documents <ul> <li>3.4.1 - Par\u00e0metres de les funcions find() i findOne()</li> <li>3.4.2 - Operadors de les condicions</li> <li>3.4.3 - Agregaci\u00f3</li> </ul> </li> <li>4 - BD XML: eXist-db </li> <li>4.1 - Instal\u00b7laci\u00f3 d'eXist-db</li> <li>4.2 - Llenguatges de consultes XPATH i XQUERY <ul> <li>4.2.1 - XPATH </li> <li>4.2.1.1 - Vista d'arbre</li> <li>4.2.1.2 - Navegaci\u00f3</li> <li>4.2.1.3 - Seq\u00fc\u00e8ncies</li> <li>4.2.1.4 - Funcions</li> <li>4.2.2 - XQUERY </li> <li>4.2.2.1 - Consultes XQuery</li> <li>4.2.2.2 - Variables</li> <li>4.2.2.3 - Expressions avaluables</li> <li>4.2.2.4 - Expressions FLWOR</li> <li>4.2.2.5 - Alternatives</li> <li>4.2.2.6 - Exemple de consulta \"elaborada\"</li> <li>4.2.2.7 - Funcions de eXist-db de manipulaci\u00f3 de BD</li> </ul> </li> <li>5 - FIREBASE (voluntari) </li> <li>5.1 - Creaci\u00f3 d'una aplicaci\u00f3</li> <li>5.2 - Realtime Database (RD)</li> <li>5.3 - Cloud Firestore (CF)</li> <li>5.4 - Cloud Storage</li> <li>Exercicis</li> </ul> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p>"},{"location":"BD-T08_BD_NoSQL/5__firebase_voluntari/#5-firebase-voluntari","title":"5 - FIREBASE (voluntari)","text":"<p>Firebase \u00e9s un servei de backend, \u00e9s a dir del costat del servidor, que ofereix la possibilitat de guardar les dades d'aplicacions web i de dispositius m\u00f2bils, amb la particularitat que en temps real es poden actualitzar les dades modificades des d'un dels clients connectats a tots els altres que estiguen connectats.</p> <p>Ofereix una s\u00e8rie de serveis, entre els quals podem destacar:</p> <ul> <li>Firebase Auth - Autenticaci\u00f3 d'usuaris: permet gestionar la validaci\u00f3 d'usuaris c\u00f2modament. Inclou l'autenticaci\u00f3 per mig de Facebook, GitHub, Twitter i Google, i tamb\u00e9 la validaci\u00f3 utilitzant compte de correu, guardant-se la contrasenya en Firebase, amb la qual cosa ens allibera d'haver de guardar-les al nostre dispositiu.</li> <li>Realtime Database - Base de Dades en Temps Real: permet guardar unes dades en el n\u00favol, que estaran sincronitzades en totes les aplicacions (clients) connectats. No \u00e9s realment una Base de Dades, tan sols un document JSON.</li> <li>Cloud Firestore: \u00e9s una evoluci\u00f3 de l'anterior que ja s\u00ed que permet guardar col\u00b7leccions de documents JSON, i per tant ja es pot considerar una Base de Dades.</li> <li>Firebase Storage: permet guardar arxius per a les nostres aplicacions, com poden ser audios, v\u00eddeos, imatges, ...</li> </ul> <p>En aquest tema ens fixarem sobretot en el segon i tercer servei, els de Bases de Dades. Hem de recordar, que la Realtime Database no \u00e9s una Base de Dades completa. Tan sols \u00e9s un document JSON el que podrem guardar, aix\u00f2 s\u00ed, tan llarg com vulguem. Es tracta per tant d'una Base de Dades NoSQL, o millor dit una mini Base de Dades NoSQL. Aix\u00f2 s\u00ed, que permet sincronitzar les dades en temps real en tots els dispositius connectats.</p> <p>En canvi el Cloud Firestore s\u00ed que \u00e9s una Base de Dades completa.</p> <p>\u00ab Anterior | Seg\u00fcent \u00bb</p> <p>Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement SenseObraDerivada 4.0 Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"},{"location":"BD-T08_BD_NoSQL/exercicis/","title":"Exercicis","text":"<p>Bases de Dades</p> <ul> <li>Tema 8: Bases de Dades NoSQL</li> <li>1 - Introducci\u00f3</li> <li>2 - BD Clau-Valor: Redis </li> <li>2.1 - Instal\u00b7laci\u00f3 de Redis</li> <li>2.2 - Entron gr\u00e0fic: Redis Desktop Manager</li> <li>2.3 - Utilitzaci\u00f3 de Redis <ul> <li>2.3.1 - Strings</li> <li>2.3.2 - Keys</li> <li>2.3.3 - Hash</li> <li>2.3.4 - List</li> <li>2.3.5 - Set</li> <li>2.3.6 - Set ordenat</li> </ul> </li> <li>3 - MongoDB </li> <li>3.1 - Estructura JSON</li> <li>3.2 - Instal\u00b7laci\u00f3 de MongoDB <ul> <li>3.2.1 - Connexi\u00f3 al servidor de l'Institut</li> </ul> </li> <li>3.3 - Utilitzaci\u00f3 de MongoDB <ul> <li>3.3.1 - Tipus de dades</li> <li>3.3.2 - Operacions b\u00e0siques</li> <li>3.2.3 - Operacions d'actualitzaci\u00f3 avan\u00e7ada </li> <li>3.3.3.1 - $set</li> <li>3.3.3.2 - $unset</li> <li>3.3.3.3 - $rename</li> <li>3.3.3.4 - $inc</li> <li>3.3.3.5 - Elements d'un array</li> <li>3.3.3.6 - Inserci\u00f3 en Arrays: $push</li> <li>3.3.3.7 - Eliminaci\u00f3 en arrays: $pop i $pull</li> <li>3.3.3.8 - Upsert</li> </ul> </li> <li>3.4 - Consulta de documents <ul> <li>3.4.1 - Par\u00e0metres de les funcions find() i findOne()</li> <li>3.4.2 - Operadors de les condicions</li> <li>3.4.3 - Agregaci\u00f3</li> </ul> </li> <li>4 - BD XML: eXist-db </li> <li>4.1 - Instal\u00b7laci\u00f3 d'eXist-db</li> <li>4.2 - Llenguatges de consultes XPATH i XQUERY <ul> <li>4.2.1 - XPATH </li> <li>4.2.1.1 - Vista d'arbre</li> <li>4.2.1.2 - Navegaci\u00f3</li> <li>4.2.1.3 - Seq\u00fc\u00e8ncies</li> <li>4.2.1.4 - Funcions</li> <li>4.2.2 - XQUERY </li> <li>4.2.2.1 - Consultes XQuery</li> <li>4.2.2.2 - Variables</li> <li>4.2.2.3 - Expressions avaluables</li> <li>4.2.2.4 - Expressions FLWOR</li> <li>4.2.2.5 - Alternatives</li> <li>4.2.2.6 - Exemple de consulta \"elaborada\"</li> <li>4.2.2.7 - Funcions de eXist-db de manipulaci\u00f3 de BD</li> </ul> </li> <li>5 - FIREBASE (voluntari) </li> <li>5.1 - Creaci\u00f3 d'una aplicaci\u00f3</li> <li>5.2 - Realtime Database (RD)</li> <li>5.3 - Cloud Firestore (CF)</li> <li>5.4 - Cloud Storage</li> <li>Exercicis</li> </ul> <p>\u00ab Anterior</p>"},{"location":"BD-T08_BD_NoSQL/exercicis/#exercicis","title":"Exercicis","text":""},{"location":"BD-T08_BD_NoSQL/exercicis/#exercici-81-redis","title":"Exercici 8.1 (Redis)","text":"<p>Sobre la Base de Dades REDIS del Servidor de l'Institut (adre\u00e7a 89.36.214.106) fer les seg\u00fcents operacions, tant per a guardar una s\u00e8rie de dades, com per a recuperar-les. Sempre posarem a les claus el prefix 9999x_ , on com sempre heu de substituir 9999 per les 4 \u00faltimes xifres del vostre DNI, i la x per la letra del NIF. Copia-les en un \u00fanic fitxer de text, de forma numerada. \u00c9s aquest fitxer el que haur\u00e0s de pujar.</p> <ol> <li>Crea la clau 9999x_Nom amb el teu nom</li> <li>Crea la clau 9999x_Cognoms amb els teus cognoms. Una de les dues almenys, nom o cognoms, ha de constar de m\u00e9s d'una paraula.</li> <li>Mostra totes les claus teues, i \u00fanicament les teues.</li> <li>D\u00f3na un temps de vida a la clau 9999x_Nom de 200 segons. Comprova el temps de vida que li queda. Posteriorment fes-la permanent.</li> <li>Crea la clau 9999x_Adreca, de tipus Hash, amb els subcamps carrer, numero i cp. No importa que les dades siguen falses. Pots fer-lo en una sent\u00e8ncia o en m\u00e9s d'una.</li> <li>Afegeix a l'anterior el subcamp poblacio</li> <li>Mostra tota la informaci\u00f3 de la teua adre\u00e7a (nom\u00e9s la informaci\u00f3, no les subclaus)</li> <li>Crea la clau 9999x_Moduls_ASIX o\u00a09999x_Moduls_DAM o 9999x_Moduls_DAW, depenent del teu cicle. Ha de ser de tipus Set, amb tots els m\u00f2duls del teu cicle, que es detallen a continuaci\u00f3. Pots fer-lo en una o en m\u00e9s d'una sent\u00e8ncia. </li> <li>ASIX: ISO, PAX, FH, GBD, LM, FOL, ASO, SXI, IAW, ASGBD, SAD, EIE, PROJ i FCT</li> <li>DAW: SI, BD, PR, LM, ED, FOL, DWEC, DWES, DAW, DIW, EIE, PROJ i FCT</li> <li>DAM: SI, BD, PR, LM, ED, FOL, AD, PMDM, DI, PSP, SGE, EIE, PROJ i FCT.</li> <li>Crea la clau 9999x_Moduls_meus, de tipus Set, amb tots els m\u00f2duls als quals est\u00e0s matriculat. Pots fer-lo en una o en m\u00e9s d'una sent\u00e8ncia.</li> <li>Guarda en la clau 9999x_Moduls_altres els m\u00f2duls en els quals no est\u00e0s matriculat actualment. Ha de ser per mig d'operacions de conjunts. Pots comprovar que el resultat \u00e9s correcte amb smembers</li> <li>Crea una llista amb el nom 9999x_Notes_BD amb la nota de 4 exercicis de BD. Les notes seran: 7, 9, 6, 10. Han de quedar en aquest ordre (no en ordre invers)</li> <li>Modifica la tercera nota, que passa de ser 6 a 8.</li> <li>Crea un Set Ordenat (zset) anomenat 9999x_Carrera amb els seg\u00fcents valors. Pots fer-lo en una o en m\u00e9s d'una sent\u00e8ncia. I ves amb compte perqu\u00e8 els temps han de ser num\u00e8rics </li> </ol> <p>Sandra  12'52</p> <p>Isabel  12'25</p> <p>Marta   12'10</p> <p>Maria   12'07</p> <p>Rosa    11'95</p> <p>Bea     11'97</p> <p>Balma   11'90</p> <p>Anna    12'74</p> <ol> <li>Trau les participants de la carrera ordenades pel temps</li> <li>Penalitza el temps de Bea amb 2 d\u00e8cimes (0'2), i torna a traure les participants ordenades (Bea ha d'haver perdut 2 posicions, passant de tercera a cinquena posici\u00f3)</li> </ol> <p></p>"},{"location":"BD-T08_BD_NoSQL/exercicis/#exercici-82-mongodb","title":"Exercici 8.2 (MongoDB)","text":"<p>Sobre la teua Base de Dades\u00a0MONGODB treballarem sobre la col\u00b7lecci\u00f3\u00a0libro, la mateixa que hem utilitzat en els exemples. Si no la tens creada, executa les sent\u00e8ncies del principi de la pregunta 3.4.2. Fes les seg\u00fcents consultes. Copia-les en un \u00fanic fitxer de text, de forma numerada. \u00c9s aquest fitxer el que haur\u00e0s de pujar.</p> <ol> <li>Busca els llibres que tenen m\u00e9s de 500 p\u00e0gines. Visualitza el _id, el t\u00edtol i el n\u00famero de p\u00e0gines</li> <li>Busca els llibres de l'any 2014. Visualitza \u00fanicament t\u00edtol i data</li> <li>Busca els llibres de l'editorial Planeta. Visualitza \u00fanicament t\u00edtol i editorial</li> <li>Busca els llibres de l'editorial Planeta de m\u00e9s de 500 p\u00e0gines. Visualitza \u00fanicament t\u00edtol, editorial i p\u00e0gines</li> <li>Busca els llibres que no tenen editorial. Visualitza \u00fanicament t\u00edtol i editorial</li> <li>Busca els llibres que en el resum contenen la paraula\u00a0caballo. Visualitza el resum per poder comprovar-ho. Han d'eixir 2 llibres,\u00a0Circo m\u00e1ximo i\u00a0Las carreras de Escorpio.</li> <li>Utilitzant la funci\u00f3 aggregate, trau l'editorial i la mitjana de p\u00e0gines d'aquelles editorials que tenen una mitjana de p\u00e0gines superior a 500. Eixiran 3 editorials.</li> </ol> <p></p>"},{"location":"BD-T08_BD_NoSQL/exercicis/#exercici-83-mongodb","title":"Exercici 8.3 (MongoDB)","text":"<p>Aquest exercici l'has de realitzar sobre la teua BD de MongoDB.</p> <p>title : Fight Club</p> <p>writer : Chuck Palahniuk</p> <p>year : 1999</p> <p>actors : [</p> <p>Brad Pitt</p> <p>Edward Norton ]</p> <p>title : Pulp Fiction</p> <p>writer : Quentin Tarantino</p> <p>year : 1994</p> <p>actors : [</p> <p>John Travolta</p> <p>Uma Thurman ]</p> <p>title : Inglorious Basterds</p> <p>writer : Quentin Tarantino</p> <p>year : 2009</p> <p>actors : [</p> <p>Brad Pitt</p> <p>Diane Kruger</p> <p>Eli Roth ]</p> <p>title : The Hobbit: An Unexpected Journey</p> <p>writer : J.R.R. Tolkein</p> <p>year : 2012</p> <p>franchise : The Hobbit</p> <p>title : The Hobbit: The Desolation of Smaug</p> <p>writer : J.R.R. Tolkein</p> <p>year : 2013</p> <p>franchise : The Hobbit</p> <p>title : The Hobbit: The Battle of the Five Armies</p> <p>writer : J.R.R. Tolkein</p> <p>year : 2012</p> <p>franchise : The Hobbit</p> <p>synopsis : Bilbo y compa\u00f1\u00eda se ven obligados a participar en una guerra contra una serie de combatientes y evitar que la Lonely Mountain caiga en manos de una oscuridad creciente.</p> <p>title : Pee Wee Herman's Big Adventure</p> <p>title : Avatar</p> <ol> <li>Inserir tots els documents anteriors. Ha de ser obligat\u00f2riament amb una \u00fanica sent\u00e8ncia, per a la qual cosa haur\u00e0s d'utilitzar variables, una per a cada document.</li> <li>Consultar tots els documents</li> <li>Obtenir els documents amb writer\u00a0igual a \"Quentin Tarantino\"</li> <li>Obtenir els documents amb actors\u00a0que incloguen a \"Brad Pitt\"</li> <li>Obtenir els documents amb franchise\u00a0igual a \"The Hobbit\"</li> <li>Obtenir totes les pel\u00b7l\u00edcules dels anys 90.</li> <li>Obtenir les pel\u00b7l\u00edcules estrenades entre l'any 2000 i el 2010.</li> <li>Agregar sinopsis a \"The Hobbit: An Unexpected Journey\": </li> <li>\"Un hobbit reacio, Bilbo Baggins, se dirige a Lonely Mountain con un en\u00e9rgico grupo de enanos para reclamar su hogar en la monta\u00f1a, y el oro que contiene, del drag\u00f3n Smaug\".</li> <li>Agregar sinopsis a \"The Hobbit: The Desolation of Smaug\": </li> <li>\"Los enanos, junto con Bilbo Baggins y Gandalf the Grey, contin\u00faan su b\u00fasqueda para recuperar Erebor, su tierra natal, de manos de Smaug. Bilbo Baggins est\u00e1 en posesi\u00f3n de un anillo misterioso y m\u00e1gico\".</li> <li>Agregar un actor anomenat \"Samuel L. Jackson\" a la pel\u00b7l\u00edcula \"Pulp Fiction\"</li> <li>Trobar les pel\u00b7l\u00edcules que en la sinopsis continguen la paraula \"Bilbo\"</li> <li>Trobar les pel\u00b7l\u00edcules que en la sinopsis continguen la paraula \"Gandalf\"</li> <li>Trobar les pel\u00b7l\u00edcules que en la sinopsis continguen la paraula \"Bilbo\" i no la paraula \"Gandalf\". S'aconsella utilitzar l'operador $and</li> <li>Trobar les pel\u00b7l\u00edcules que en la sinopsis continguen la paraula \"enanos\" o \"hobbit\"</li> <li>Trobar les pel\u00b7l\u00edcules que en la sinopsis continguen les paraules \"oro\" i \"drag\u00f3n\"</li> <li>Eliminar la pel\u00b7l\u00edcula \"Pee Wee Herman's Big Adventure\"</li> <li>Eliminar la pel\u00b7l\u00edcula \"Avatar\"</li> </ol> <p></p>"},{"location":"BD-T08_BD_NoSQL/exercicis/#exercici-84-mongodb","title":"Exercici 8.4 (mongoDB)","text":"<p>Sobre la teua Base de Dades\u00a0MONGODB treballarem sobre la col\u00b7lecci\u00f3\u00a0libro, la mateixa que hem utilitzat en els exemples. Si no la tens creada, executa les sent\u00e8ncies del principi de la pregunta 3.4.2. Fes les seg\u00fcents consultes. Copia-les en un \u00fanic fitxer de text, de forma numerada. \u00c9s aquest fitxer el que haur\u00e0s de pujar.</p> <ol> <li>Incrementar el preu dels llibres de l'editorial Planeta en 2\u20ac (recordeu que per a modificar m\u00e9s d'un document, hem de posar com a tercer par\u00e0metre l'opci\u00f3\u00a0{multi:true} )</li> <li>Crear el camp editorial amb el valor nul, per a tots aquells documents que no tinguen el camp editorial</li> <li>Fer l'operaci\u00f3 inversa: eliminar el camp editorial per a tots aquells que el tinguen nul</li> <li>Traure l'any del llibre, a partir de la fecha (ser\u00e0 un camp calculat anomenat a\u00f1o)</li> <li>Aprofita el camp anterior per a traure els llibres estrictament anteriors a l'any 2013.\u00a0Visualitza titulo, fecha i a\u00f1o</li> </ol> <p></p>"},{"location":"BD-T08_BD_NoSQL/exercicis/#exercici-85-exist","title":"Exercici 8.5 (eXist)","text":"<p>Realitzar les expressions XPath que tornen les seg\u00fcents q\u00fcestions (totes elles sobre Rutes.xml):</p> <ol> <li>Traure el nom de totes les rutes.</li> <li>Traure el nom de les rutes amb un desnivell major que 600 m.</li> <li>Traure les rutes en les quals el desnivell acumulat duplica el desnivell. (Observaci\u00f3: quan en una condici\u00f3 combinem alguna operaci\u00f3 amb una comparaci\u00f3, \u00e9s millor posar l'operaci\u00f3 abans de l'operador de comparaci\u00f3)</li> <li>Traure el nom del primer punt de cada ruta.</li> <li>Traure el nom de l'\u00faltim punt de cada ruta</li> <li>Traure els punts de la tercera ruta.</li> <li>Traure el n\u00famero de punts de la tercera ruta</li> <li>Traure el nom de les rutes que tenen estrictament m\u00e9s de 5 punts.</li> <li>Traure la mitjana de desnivell de les rutes</li> <li>Traure les rutes en les quals hi ha alun punt m\u00e9s avall del paral\u00b7lel 40</li> </ol> <p></p>"},{"location":"BD-T08_BD_NoSQL/exercicis/#exercici-86-exist","title":"Exercici 8.6 (eXist)","text":"<p>Fer les expressions XQuery per a aconsequir:</p> <p>1. El m\u00f2dul amb el nom del professor com a atribut:</p> <p>Llenguatges de Marques</p> <p>2. El nom de cada ruta amb el n\u00famero de punts com a argument:</p> <p> <p>Pujada a Penyagolosa</p> <p>La Magdalena</p> <p>Pelegrins de Les Useres</p> <p>Cat\u00ed - Sant Pere de Castellfort</p> <p></p> <p>3. Cada ruta amb el nom com a atribut, la latitud mitjana dels seus punts i la longitud mitjana</p> <p> <p>40.2408508</p> <p>-0.3515282</p> <p></p> <p> <p>40.01264257142857</p> <p>-0.02034042857142857</p> <p></p> <p>...</p> <p>4. La mitjana de punts de les rutes</p> <p>6</p> <p>This document was truncated here because it was created in the Evaluation Mode. Created with an evaluation copy of Aspose.Words. To discover the full versions of our APIs please visit: https://products.aspose.com/words/</p>"}]}